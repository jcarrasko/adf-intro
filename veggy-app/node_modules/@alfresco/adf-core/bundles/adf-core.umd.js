(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/common'), require('@angular/common/http'), require('@angular/core'), require('@angular/forms'), require('@angular/platform-browser/animations'), require('@ngx-translate/core'), require('rxjs/BehaviorSubject'), require('alfresco-js-api'), require('rxjs/add/observable/of'), require('rxjs/add/operator/concat'), require('rxjs/add/operator/share'), require('rxjs/add/operator/map'), require('rxjs/add/operator/merge'), require('rxjs/add/operator/switchMap'), require('rxjs/add/operator/toArray'), require('rxjs/add/operator/take'), require('@angular/material'), require('@angular/flex-layout'), require('moment-es6'), require('rxjs/Subject'), require('moment'), require('@angular/cdk/overlay'), require('@angular/cdk/scrolling'), require('@angular/router'), require('@angular/platform-browser'), require('rxjs/Observable'), require('rxjs/add/observable/fromPromise'), require('rxjs/add/operator/catch'), require('rxjs/add/observable/throw'), require('rxjs/add/operator/do'), require('rxjs/observable/forkJoin'), require('rxjs/add/observable/from'), require('rxjs/add/observable/zip'), require('rxjs/add/operator/mergeMap'), require('rxjs/add/operator/debounceTime'), require('rxjs/add/operator/buffer'), require('rxjs/add/operator/filter'), require('rxjs/add/operator/toPromise'), require('rxjs/add/operator/concatMap'), require('rxjs/add/operator/combineAll'), require('rxjs/add/observable/interval'), require('rxjs/add/operator/takeWhile'), require('@angular/http'), require('rxjs/add/operator/defaultIfEmpty'), require('@angular/animations'), require('@angular/cdk/keycodes'), require('rxjs/add/observable/forkJoin'), require('minimatch')) :
	typeof define === 'function' && define.amd ? define(['exports', '@angular/common', '@angular/common/http', '@angular/core', '@angular/forms', '@angular/platform-browser/animations', '@ngx-translate/core', 'rxjs/BehaviorSubject', 'alfresco-js-api', 'rxjs/add/observable/of', 'rxjs/add/operator/concat', 'rxjs/add/operator/share', 'rxjs/add/operator/map', 'rxjs/add/operator/merge', 'rxjs/add/operator/switchMap', 'rxjs/add/operator/toArray', 'rxjs/add/operator/take', '@angular/material', '@angular/flex-layout', 'moment-es6', 'rxjs/Subject', 'moment', '@angular/cdk/overlay', '@angular/cdk/scrolling', '@angular/router', '@angular/platform-browser', 'rxjs/Observable', 'rxjs/add/observable/fromPromise', 'rxjs/add/operator/catch', 'rxjs/add/observable/throw', 'rxjs/add/operator/do', 'rxjs/observable/forkJoin', 'rxjs/add/observable/from', 'rxjs/add/observable/zip', 'rxjs/add/operator/mergeMap', 'rxjs/add/operator/debounceTime', 'rxjs/add/operator/buffer', 'rxjs/add/operator/filter', 'rxjs/add/operator/toPromise', 'rxjs/add/operator/concatMap', 'rxjs/add/operator/combineAll', 'rxjs/add/observable/interval', 'rxjs/add/operator/takeWhile', '@angular/http', 'rxjs/add/operator/defaultIfEmpty', '@angular/animations', '@angular/cdk/keycodes', 'rxjs/add/observable/forkJoin', 'minimatch'], factory) :
	(factory((global['adf-core'] = {}),global.ng.common,global.ng.common.http,global.ng.core,global.ng.forms,global['@angular/platform-browser/animations'],global['@ngx-translate/core'],global.Rx,global['alfresco-js-api'],global.Rx.Observable,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global['@angular/material'],global['@angular/flex-layout'],global['moment-es6'],global.Rx,global.moment,global.ng.cdk.overlay,global.ng.cdk.scrolling,global.ng.router,global.ng.platformBrowser,global.Rx,global.Rx.Observable,global.Rx.Observable.prototype,global.Rx.Observable,global.Rx.Observable.prototype,global.Rx.Observable,global.Rx.Observable,global.Rx.Observable,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable,global.Rx.Observable.prototype,global.ng.http,global.Rx.Observable.prototype,global['@angular/animations'],global.ng.cdk.keycodes,global.Rx.Observable,global.minimatch));
}(this, (function (exports,common,http,core,forms,animations,core$1,BehaviorSubject,alfrescoApi,of,concat,share,map,merge,switchMap,toArray,take,material,flexLayout,moment,Subject,moment$1,overlay,scrolling,router,platformBrowser,Observable,fromPromise,_catch,_throw,_do,forkJoin,from,zip,mergeMap,debounceTime,buffer,filter,toPromise,concatMap,combineAll,interval,takeWhile,http$1,defaultIfEmpty,animations$1,keycodes,forkJoin$1,minimatch___default) { 'use strict';

moment = moment && moment.hasOwnProperty('default') ? moment['default'] : moment;
var minimatch___default__default = minimatch___default['default'];

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var ObjectUtils = /** @class */ (function () {
    function ObjectUtils() {
    }
    /**
     * Gets a value from an object by composed key
     * ObjectUtils.getValue({ item: { nodeType: 'cm:folder' }}, 'item.nodeType') ==> 'cm:folder'
     * @param {?} target
     * @param {?} key
     * @return {?}
     */
    ObjectUtils.getValue = function (target, key) {
        if (!target) {
            return undefined;
        }
        var /** @type {?} */ keys = key.split('.');
        key = '';
        do {
            key += keys.shift();
            var /** @type {?} */ value = target[key];
            if (value !== undefined && (typeof value === 'object' || !keys.length)) {
                target = value;
                key = '';
            }
            else if (!keys.length) {
                target = undefined;
            }
            else {
                key += '.';
            }
        } while (keys.length);
        return target;
    };
    /**
     * @param {...?} objects
     * @return {?}
     */
    ObjectUtils.merge = function () {
        var objects = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            objects[_i] = arguments[_i];
        }
        var /** @type {?} */ result = {};
        objects.forEach(function (source) {
            Object.keys(source).forEach(function (prop) {
                if (prop in result && Array.isArray(result[prop])) {
                    result[prop] = result[prop].concat(source[prop]);
                }
                else if (prop in result && typeof result[prop] === 'object') {
                    result[prop] = ObjectUtils.merge(result[prop], source[prop]);
                }
                else {
                    result[prop] = source[prop];
                }
            });
        });
        return result;
    };
    return ObjectUtils;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AppConfigService = /** @class */ (function () {
    /**
     * @param {?} http
     */
    function AppConfigService(http$$1) {
        this.http = http$$1;
        this.config = {
            application: {
                name: 'Alfresco ADF Application'
            },
            ecmHost: 'http://{hostname}{:port}/ecm',
            bpmHost: 'http://{hostname}{:port}/bpm',
            logLevel: 'silent'
        };
    }
    /**
     * @template T
     * @param {?} key
     * @param {?=} defaultValue
     * @return {?}
     */
    AppConfigService.prototype.get = function (key, defaultValue) {
        var /** @type {?} */ result = ObjectUtils.getValue(this.config, key);
        if (typeof result === 'string') {
            var /** @type {?} */ map$$1 = new Map();
            map$$1.set('hostname', this.getLocationHostname());
            map$$1.set(':port', this.getLocationPort(':'));
            map$$1.set('port', this.getLocationPort());
            result = this.formatString(result, map$$1);
        }
        if (result === undefined) {
            return defaultValue;
        }
        return /** @type {?} */ (result);
    };
    /**
     * @return {?}
     */
    AppConfigService.prototype.getLocationHostname = function () {
        return location.hostname;
    };
    /**
     * @param {?=} prefix
     * @return {?}
     */
    AppConfigService.prototype.getLocationPort = function (prefix) {
        if (prefix === void 0) { prefix = ''; }
        return location.port ? prefix + location.port : '';
    };
    /**
     * @return {?}
     */
    AppConfigService.prototype.load = function () {
        var _this = this;
        return new Promise(function (resolve) {
            _this.http.get('app.config.json').subscribe(function (data) {
                _this.config = Object.assign({}, _this.config, data || {});
                resolve(_this.config);
            }, function () {
                resolve(_this.config);
            });
        });
    };
    /**
     * @param {?} str
     * @param {?} map
     * @return {?}
     */
    AppConfigService.prototype.formatString = function (str, map$$1) {
        var /** @type {?} */ result = str;
        map$$1.forEach(function (value, key) {
            var /** @type {?} */ expr = new RegExp('{' + key + '}', 'gm');
            result = result.replace(expr, value);
        });
        return result;
    };
    return AppConfigService;
}());
AppConfigService.APP_CONFIG_LANGUAGES_KEY = 'languages';
AppConfigService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
AppConfigService.ctorParameters = function () { return [
    { type: http.HttpClient, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var StorageService = /** @class */ (function () {
    function StorageService() {
        this.memoryStore = {};
        this.useLocalStorage = false;
        this.useLocalStorage = this.storageAvailable('localStorage');
    }
    /**
     * @param {?} key
     * @return {?}
     */
    StorageService.prototype.getItem = function (key) {
        if (this.useLocalStorage) {
            return localStorage.getItem(key);
        }
        else {
            return this.memoryStore.hasOwnProperty(key) ? this.memoryStore[key] : null;
        }
    };
    /**
     * @param {?} key
     * @param {?} data
     * @return {?}
     */
    StorageService.prototype.setItem = function (key, data) {
        if (this.useLocalStorage) {
            localStorage.setItem(key, data);
        }
        else {
            this.memoryStore[key] = data.toString();
        }
    };
    /**
     * @return {?}
     */
    StorageService.prototype.clear = function () {
        if (this.useLocalStorage) {
            localStorage.clear();
        }
        else {
            this.memoryStore = {};
        }
    };
    /**
     * @param {?} key
     * @return {?}
     */
    StorageService.prototype.removeItem = function (key) {
        if (this.useLocalStorage) {
            localStorage.removeItem(key);
        }
        else {
            delete this.memoryStore[key];
        }
    };
    /**
     * @param {?} key
     * @return {?}
     */
    StorageService.prototype.hasItem = function (key) {
        if (this.useLocalStorage) {
            return localStorage.getItem(key) ? true : false;
        }
        else {
            return this.memoryStore.hasOwnProperty(key);
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    StorageService.prototype.storageAvailable = function (type) {
        try {
            var /** @type {?} */ storage = window[type];
            var /** @type {?} */ key = '__storage_test__';
            storage.setItem(key, key);
            storage.removeItem(key, key);
            return true;
        }
        catch (e) {
            return false;
        }
    };
    return StorageService;
}());
StorageService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
StorageService.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AlfrescoApiService = /** @class */ (function () {
    /**
     * @param {?} appConfig
     * @param {?} storage
     */
    function AlfrescoApiService(appConfig, storage) {
        this.appConfig = appConfig;
        this.storage = storage;
        this.reset();
    }
    /**
     * @return {?}
     */
    AlfrescoApiService.prototype.getInstance = function () {
        return this.alfrescoApi;
    };
    Object.defineProperty(AlfrescoApiService.prototype, "contentApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.getInstance().content;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AlfrescoApiService.prototype, "nodesApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.getInstance().nodes;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AlfrescoApiService.prototype, "renditionsApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.getInstance().core.renditionsApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AlfrescoApiService.prototype, "sharedLinksApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.getInstance().core.sharedlinksApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AlfrescoApiService.prototype, "sitesApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.getInstance().core.sitesApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AlfrescoApiService.prototype, "favoritesApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.getInstance().core.favoritesApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AlfrescoApiService.prototype, "peopleApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.getInstance().core.peopleApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AlfrescoApiService.prototype, "searchApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.getInstance().search.searchApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AlfrescoApiService.prototype, "versionsApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.getInstance().core.versionsApi;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    AlfrescoApiService.prototype.reset = function () {
        this.alfrescoApi = /** @type {?} */ (new alfrescoApi({
            provider: this.storage.getItem('AUTH_TYPE'),
            ticketEcm: this.storage.getItem('ticket-ECM'),
            ticketBpm: this.storage.getItem('ticket-BPM'),
            hostEcm: this.appConfig.get('ecmHost'),
            hostBpm: this.appConfig.get('bpmHost'),
            contextRoot: 'alfresco',
            disableCsrf: this.storage.getItem('DISABLE_CSRF') === 'true'
        }));
    };
    return AlfrescoApiService;
}());
AlfrescoApiService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
AlfrescoApiService.ctorParameters = function () { return [
    { type: AppConfigService, },
    { type: StorageService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var UserPreferencesService = /** @class */ (function () {
    /**
     * @param {?} translate
     * @param {?} appConfig
     * @param {?} storage
     * @param {?} apiService
     */
    function UserPreferencesService(translate, appConfig, storage, apiService) {
        this.translate = translate;
        this.appConfig = appConfig;
        this.storage = storage;
        this.apiService = apiService;
        this.defaults = {
            paginationSize: 25,
            locale: 'en'
        };
        var currentLocale = this.locale || this.getDefaultLocale();
        this.localeSubject = new BehaviorSubject.BehaviorSubject(currentLocale);
        this.locale$ = this.localeSubject.asObservable();
        this.defaults.paginationSize = appConfig.get('pagination.size', 25);
    }
    /**
     * @param {?} property
     * @param {?=} defaultValue
     * @return {?}
     */
    UserPreferencesService.prototype.get = function (property, defaultValue) {
        var /** @type {?} */ key = this.getPropertyKey(property);
        var /** @type {?} */ value = this.storage.getItem(key);
        if (value === undefined) {
            return defaultValue;
        }
        return value;
    };
    /**
     * @param {?} property
     * @param {?} value
     * @return {?}
     */
    UserPreferencesService.prototype.set = function (property, value) {
        if (!property) {
            return;
        }
        this.storage.setItem(this.getPropertyKey(property), value);
    };
    /**
     * @return {?}
     */
    UserPreferencesService.prototype.getStoragePrefix = function () {
        return this.storage.getItem('USER_PROFILE') || 'GUEST';
    };
    /**
     * @param {?} value
     * @return {?}
     */
    UserPreferencesService.prototype.setStoragePrefix = function (value) {
        this.storage.setItem('USER_PROFILE', value || 'GUEST');
    };
    /**
     * @param {?} property
     * @return {?}
     */
    UserPreferencesService.prototype.getPropertyKey = function (property) {
        return this.getStoragePrefix() + "__" + property;
    };
    Object.defineProperty(UserPreferencesService.prototype, "authType", {
        /**
         * @return {?}
         */
        get: function () {
            return this.storage.getItem('AUTH_TYPE') || 'ALL';
        },
        /**
         * @param {?} value
         * @return {?}
         */
        set: function (value) {
            this.storage.setItem('AUTH_TYPE', value);
            this.apiService.reset();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserPreferencesService.prototype, "disableCSRF", {
        /**
         * @return {?}
         */
        get: function () {
            return this.get('DISABLE_CSRF') === 'true';
        },
        /**
         * @param {?} value
         * @return {?}
         */
        set: function (value) {
            this.set('DISABLE_CSRF', value);
            this.apiService.reset();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserPreferencesService.prototype, "paginationSize", {
        /**
         * @return {?}
         */
        get: function () {
            return Number(this.get('PAGINATION_SIZE')) || this.defaults.paginationSize;
        },
        /**
         * @param {?} value
         * @return {?}
         */
        set: function (value) {
            this.set('PAGINATION_SIZE', value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserPreferencesService.prototype, "locale", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ locale = this.get('LOCALE');
            return locale;
        },
        /**
         * @param {?} value
         * @return {?}
         */
        set: function (value) {
            this.localeSubject.next(value);
            this.set('LOCALE', value);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    UserPreferencesService.prototype.getDefaultLocale = function () {
        return this.appConfig.get('locale') || this.translate.getBrowserLang() || 'en';
    };
    return UserPreferencesService;
}());
UserPreferencesService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
UserPreferencesService.ctorParameters = function () { return [
    { type: core$1.TranslateService, },
    { type: AppConfigService, },
    { type: StorageService, },
    { type: AlfrescoApiService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var TRANSLATION_PROVIDER = new core.InjectionToken('Injection token for translation providers.');
var TranslationService = /** @class */ (function () {
    /**
     * @param {?} translate
     * @param {?} userPreference
     * @param {?} providers
     */
    function TranslationService(translate, userPreference, providers) {
        var _this = this;
        this.translate = translate;
        this.userPreference = userPreference;
        this.customLoader = this.translate.currentLoader;
        this.defaultLang = 'en';
        translate.setDefaultLang(this.defaultLang);
        if (providers && providers.length > 0) {
            for (var _i = 0, providers_1 = providers; _i < providers_1.length; _i++) {
                var provider = providers_1[_i];
                this.addTranslationFolder(provider.name, provider.source);
            }
        }
        this.userPreference.locale$.subscribe(function (locale) {
            _this.userLang = locale;
            _this.use(_this.userLang);
        });
    }
    /**
     * @param {?=} name
     * @param {?=} path
     * @return {?}
     */
    TranslationService.prototype.addTranslationFolder = function (name, path) {
        var _this = this;
        if (name === void 0) { name = ''; }
        if (path === void 0) { path = ''; }
        if (!this.customLoader.providerRegistered(name)) {
            this.customLoader.registerProvider(name, path);
            if (this.userLang !== this.defaultLang) {
                this.translate.getTranslation(this.defaultLang).subscribe(function () {
                    _this.translate.getTranslation(_this.userLang).subscribe(function () {
                        _this.translate.use(_this.userLang);
                    });
                });
            }
            else {
                this.translate.getTranslation(this.userLang).subscribe(function () {
                    _this.translate.use(_this.userLang);
                });
            }
        }
    };
    /**
     * @param {?} lang
     * @return {?}
     */
    TranslationService.prototype.use = function (lang) {
        this.customLoader.init(lang);
        return this.translate.use(lang);
    };
    /**
     * @param {?} key
     * @param {?=} interpolateParams
     * @return {?}
     */
    TranslationService.prototype.get = function (key, interpolateParams) {
        return this.translate.get(key, interpolateParams);
    };
    return TranslationService;
}());
TranslationService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
TranslationService.ctorParameters = function () { return [
    { type: core$1.TranslateService, },
    { type: UserPreferencesService, },
    { type: Array, decorators: [{ type: core.Optional }, { type: core.Inject, args: [TRANSLATION_PROVIDER,] },] },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @return {?}
 */
function modules() {
    return [
        material.MatAutocompleteModule, material.MatButtonModule, material.MatCardModule, material.MatCheckboxModule,
        material.MatChipsModule, material.MatDatepickerModule, material.MatDialogModule, material.MatGridListModule, material.MatIconModule,
        material.MatInputModule, material.MatListModule, material.MatNativeDateModule, material.MatOptionModule, material.MatProgressSpinnerModule, material.MatRadioModule,
        material.MatRippleModule, material.MatSelectModule, material.MatSlideToggleModule, material.MatTableModule, material.MatTabsModule,
        material.MatMenuModule, material.MatProgressBarModule, material.MatSidenavModule, material.MatSnackBarModule, material.MatToolbarModule,
        material.MatTooltipModule
    ];
}
var MaterialModule = /** @class */ (function () {
    function MaterialModule() {
    }
    return MaterialModule;
}());
MaterialModule.decorators = [
    { type: core.NgModule, args: [{
                imports: modules(),
                exports: modules()
            },] },
];
/**
 * @nocollapse
 */
MaterialModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @param {?} configService
 * @return {?}
 */
function startupServiceFactory(configService) {
    return function () { return configService.load(); };
}
var AppConfigModule = /** @class */ (function () {
    function AppConfigModule() {
    }
    return AppConfigModule;
}());
AppConfigModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    http.HttpClientModule
                ],
                providers: [
                    AppConfigService,
                    {
                        provide: core.APP_INITIALIZER,
                        useFactory: startupServiceFactory,
                        deps: [
                            AppConfigService
                        ],
                        multi: true
                    }
                ]
            },] },
];
/**
 * @nocollapse
 */
AppConfigModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CardViewContentProxyDirective = /** @class */ (function () {
    /**
     * @param {?} viewContainerRef
     */
    function CardViewContentProxyDirective(viewContainerRef) {
        this.viewContainerRef = viewContainerRef;
    }
    return CardViewContentProxyDirective;
}());
CardViewContentProxyDirective.decorators = [
    { type: core.Directive, args: [{
                selector: '[adf-card-view-content-proxy]'
            },] },
];
/**
 * @nocollapse
 */
CardViewContentProxyDirective.ctorParameters = function () { return [
    { type: core.ViewContainerRef, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @param {?} key
 * @param {?} value
 * @return {?}
 */
function transformKeyToObject(key, value) {
    var /** @type {?} */ objectLevels = key.split('.').reverse();
    return objectLevels.reduce(function (previousValue, currentValue) {
        return _a = {}, _a[currentValue] = previousValue, _a;
        var _a;
    }, value);
}
var CardViewUpdateService = /** @class */ (function () {
    function CardViewUpdateService() {
        this.itemUpdatedSource = new Subject.Subject();
        this.itemClickedSource = new Subject.Subject();
        this.itemUpdated$ = (this.itemUpdatedSource.asObservable());
        this.itemClicked$ = (this.itemClickedSource.asObservable());
    }
    /**
     * @param {?} property
     * @param {?} newValue
     * @return {?}
     */
    CardViewUpdateService.prototype.update = function (property, newValue) {
        this.itemUpdatedSource.next({
            target: property,
            changed: transformKeyToObject(property.key, newValue)
        });
    };
    /**
     * @param {?} property
     * @return {?}
     */
    CardViewUpdateService.prototype.clicked = function (property) {
        this.itemClickedSource.next({
            target: property
        });
    };
    return CardViewUpdateService;
}());
CardViewUpdateService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
CardViewUpdateService.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dateNames = [];
for (var /** @type {?} */ date = 1; date <= 31; date++) {
    dateNames.push(String(date));
}
var MomentDateAdapter = /** @class */ (function (_super) {
    __extends(MomentDateAdapter, _super);
    function MomentDateAdapter() {
        var _this = _super.apply(this, arguments) || this;
        _this.localeData = moment.localeData();
        return _this;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.getYear = function (date) {
        return date.year();
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.getMonth = function (date) {
        return date.month();
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.getDate = function (date) {
        return date.date();
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.getDayOfWeek = function (date) {
        return date.day();
    };
    /**
     * @param {?} style
     * @return {?}
     */
    MomentDateAdapter.prototype.getMonthNames = function (style$$1) {
        switch (style$$1) {
            case 'long':
                return this.localeData.months();
            case 'short':
                return this.localeData.monthsShort();
            case 'narrow':
                return this.localeData.monthsShort().map(function (month) { return month[0]; });
            default:
                return;
        }
    };
    /**
     * @return {?}
     */
    MomentDateAdapter.prototype.getDateNames = function () {
        return dateNames;
    };
    /**
     * @param {?} style
     * @return {?}
     */
    MomentDateAdapter.prototype.getDayOfWeekNames = function (style$$1) {
        switch (style$$1) {
            case 'long':
                return this.localeData.weekdays();
            case 'short':
                return this.localeData.weekdaysShort();
            case 'narrow':
                return this.localeData.weekdaysShort();
            default:
                return;
        }
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.getYearName = function (date) {
        return String(date.year());
    };
    /**
     * @return {?}
     */
    MomentDateAdapter.prototype.getFirstDayOfWeek = function () {
        return this.localeData.firstDayOfWeek();
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.getNumDaysInMonth = function (date) {
        return date.daysInMonth();
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.clone = function (date) {
        return date.clone();
    };
    /**
     * @param {?} year
     * @param {?} month
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.createDate = function (year, month, date) {
        return moment([year, month, date]);
    };
    /**
     * @return {?}
     */
    MomentDateAdapter.prototype.today = function () {
        return moment();
    };
    /**
     * @param {?} value
     * @param {?} parseFormat
     * @return {?}
     */
    MomentDateAdapter.prototype.parse = function (value, parseFormat) {
        var /** @type {?} */ m = moment(value, parseFormat, true);
        if (!m.isValid()) {
            m = moment(value, this.overrideDisplyaFormat);
        }
        if (m.isValid()) {
            // if user omits year, it defaults to 2001, so check for that issue.
            if (m.year() === 2001 && value.indexOf('2001') === -1) {
                // if 2001 not actually in the value string, change to current year
                var /** @type {?} */ currentYear = new Date().getFullYear();
                m.set('year', currentYear);
                // if date is in the future, set previous year
                if (m.isAfter(moment())) {
                    m.set('year', currentYear - 1);
                }
            }
            return m;
        }
        else {
            return null;
        }
    };
    /**
     * @param {?} date
     * @param {?} displayFormat
     * @return {?}
     */
    MomentDateAdapter.prototype.format = function (date, displayFormat) {
        displayFormat = this.overrideDisplyaFormat ? this.overrideDisplyaFormat : displayFormat;
        if (date && date.format) {
            return date.format(displayFormat);
        }
        else {
            return '';
        }
    };
    /**
     * @param {?} date
     * @param {?} years
     * @return {?}
     */
    MomentDateAdapter.prototype.addCalendarYears = function (date, years) {
        return date.clone().add(years, 'y');
    };
    /**
     * @param {?} date
     * @param {?} months
     * @return {?}
     */
    MomentDateAdapter.prototype.addCalendarMonths = function (date, months) {
        return date.clone().add(months, 'M');
    };
    /**
     * @param {?} date
     * @param {?} days
     * @return {?}
     */
    MomentDateAdapter.prototype.addCalendarDays = function (date, days) {
        return date.clone().add(days, 'd');
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.getISODateString = function (date) {
        return date.toISOString();
    };
    /**
     * @param {?} locale
     * @return {?}
     */
    MomentDateAdapter.prototype.setLocale = function (locale) {
        this.localeData = moment.localeData(locale);
    };
    /**
     * @param {?} first
     * @param {?} second
     * @return {?}
     */
    MomentDateAdapter.prototype.compareDate = function (first, second) {
        return first.diff(second, 'seconds', true);
    };
    /**
     * @param {?} first
     * @param {?} second
     * @return {?}
     */
    MomentDateAdapter.prototype.sameDate = function (first, second) {
        if (first == null) {
            // same if both null
            return second == null;
        }
        else if (moment$1.isMoment(first)) {
            return first.isSame(second);
        }
        else {
            var /** @type {?} */ isSame = _super.prototype.sameDate.call(this, first, second);
            return isSame;
        }
    };
    /**
     * @param {?} date
     * @param {?=} min
     * @param {?=} max
     * @return {?}
     */
    MomentDateAdapter.prototype.clampDate = function (date, min, max) {
        if (min && date.isBefore(min)) {
            return min;
        }
        else if (max && date.isAfter(max)) {
            return max;
        }
        else {
            return date;
        }
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.isDateInstance = function (date) {
        var /** @type {?} */ isValidDateInstance = false;
        if (date) {
            isValidDateInstance = date._isAMomentObject;
        }
        return isValidDateInstance;
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.isValid = function (date) {
        return date.isValid();
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MomentDateAdapter.prototype.toIso8601 = function (date) {
        return this.clone(date).format();
    };
    /**
     * @param {?} iso8601String
     * @return {?}
     */
    MomentDateAdapter.prototype.fromIso8601 = function (iso8601String) {
        var /** @type {?} */ d = moment(iso8601String, moment.ISO_8601).locale(this.locale);
        return this.isValid(d) ? d : null;
    };
    /**
     * @return {?}
     */
    MomentDateAdapter.prototype.invalid = function () {
        return moment.invalid();
    };
    return MomentDateAdapter;
}(material.DateAdapter));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MOMENT_DATE_FORMATS = {
    parse: {
        dateInput: 'DD/MM/YYYY'
    },
    display: {
        dateInput: 'DD/MM/YYYY',
        monthYearLabel: 'MMMM Y',
        dateA11yLabel: 'LL',
        monthYearA11yLabel: 'MMMM Y'
    }
};
var dateNames$1 = [];
for (var /** @type {?} */ date = 1; date <= 31; date++) {
    dateNames$1.push(String(date));
}
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CardViewDateItemComponent = /** @class */ (function () {
    /**
     * @param {?} cardViewUpdateService
     * @param {?} dateAdapter
     * @param {?} preferences
     */
    function CardViewDateItemComponent(cardViewUpdateService, dateAdapter, preferences) {
        this.cardViewUpdateService = cardViewUpdateService;
        this.dateAdapter = dateAdapter;
        this.preferences = preferences;
        this.SHOW_FORMAT = 'MMM DD YY';
    }
    /**
     * @return {?}
     */
    CardViewDateItemComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.preferences.locale$.subscribe(function (locale) {
            _this.dateAdapter.setLocale(locale);
        });
        var /** @type {?} */ momentDateAdapter = (this.dateAdapter);
        momentDateAdapter.overrideDisplyaFormat = this.SHOW_FORMAT;
        if (this.property.value) {
            this.valueDate = moment(this.property.value, this.SHOW_FORMAT);
        }
    };
    /**
     * @return {?}
     */
    CardViewDateItemComponent.prototype.isEditable = function () {
        return this.editable && this.property.editable;
    };
    /**
     * @return {?}
     */
    CardViewDateItemComponent.prototype.showDatePicker = function () {
        this.datepicker.open();
    };
    /**
     * @param {?} newDateValue
     * @return {?}
     */
    CardViewDateItemComponent.prototype.onDateChanged = function (newDateValue) {
        if (newDateValue) {
            var /** @type {?} */ momentDate = moment(newDateValue.value, this.SHOW_FORMAT, true);
            if (momentDate.isValid()) {
                this.valueDate = momentDate;
                this.cardViewUpdateService.update(this.property, momentDate.toDate());
            }
        }
    };
    return CardViewDateItemComponent;
}());
CardViewDateItemComponent.decorators = [
    { type: core.Component, args: [{
                providers: [
                    { provide: material.DateAdapter, useClass: MomentDateAdapter },
                    { provide: material.MAT_DATE_FORMATS, useValue: MOMENT_DATE_FORMATS }
                ],
                selector: 'adf-card-view-dateitem',
                template: "\n      <div class=\"adf-property-label\">{{ property.label | translate }}</div>\n      <div class=\"adf-property-value\">\n          <span *ngIf=\"!isEditable()\">\n              <span [attr.data-automation-id]=\"'card-dateitem-' + property.key\">\n                  <span *ngIf=\"!property.isEmpty(); else elseEmptyValueBlock\">{{ property.displayValue }}</span>\n              </span>\n          </span>\n          <span *ngIf=\"isEditable()\" class=\"adf-dateitem-editable\">\n              <input class=\"adf-invisible-date-input\" [matDatepicker]=\"picker\" [value]=\"valueDate\"\n                     (dateChange)=\"onDateChanged($event)\">\n              <span\n                  class=\"adf-datepicker-toggle\"\n                  [attr.data-automation-id]=\"'datepicker-label-toggle-' + property.key\"\n                  (click)=\"showDatePicker($event)\">\n                  <span *ngIf=\"!property.isEmpty(); else elseEmptyValueBlock\">{{ property.displayValue }}</span>\n              </span>\n              <mat-datepicker-toggle\n                  [attr.data-automation-id]=\"'datepickertoggle-' + property.key\"\n                  [for]=\"picker\">\n              </mat-datepicker-toggle>\n              <mat-datepicker #picker\n                             [attr.data-automation-id]=\"'datepicker-' + property.key\"\n                             [startAt]=\"valueDate\"\n                             [touchUi]=\"true\">\n              </mat-datepicker>\n          </span>\n          <ng-template #elseEmptyValueBlock>\n              {{ property.default | translate }}\n          </ng-template>\n      </div>\n    ",
                styles: ["\n\n    "]
            },] },
];
/**
 * @nocollapse
 */
CardViewDateItemComponent.ctorParameters = function () { return [
    { type: CardViewUpdateService, },
    { type: material.DateAdapter, },
    { type: UserPreferencesService, },
]; };
CardViewDateItemComponent.propDecorators = {
    'property': [{ type: core.Input },],
    'editable': [{ type: core.Input },],
    'datepicker': [{ type: core.ViewChild, args: [material.MatDatepicker,] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CardViewMapItemComponent = /** @class */ (function () {
    /**
     * @param {?} cardViewUpdateService
     */
    function CardViewMapItemComponent(cardViewUpdateService) {
        this.cardViewUpdateService = cardViewUpdateService;
    }
    /**
     * @return {?}
     */
    CardViewMapItemComponent.prototype.isClickable = function () {
        return this.property.clickable;
    };
    /**
     * @return {?}
     */
    CardViewMapItemComponent.prototype.clicked = function () {
        this.cardViewUpdateService.clicked(this.property);
    };
    return CardViewMapItemComponent;
}());
CardViewMapItemComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-card-view-mapitem',
                template: "\n      <div class=\"adf-property-label\">{{ property.label | translate }}</div>\n      <div class=\"adf-property-value\">\n          <div>\n              <span *ngIf=\"!isClickable(); else elseBlock\" [attr.data-automation-id]=\"'card-mapitem-value-' + property.key\">\n                  <span *ngIf=\"!property.isEmpty(); else elseEmptyValueBlock\">{{ property.displayValue }}</span>\n              </span>\n              <ng-template #elseBlock>\n                  <span class=\"adf-mapitem-clickable-value\" (click)=\"clicked()\" [attr.data-automation-id]=\"'card-mapitem-value-' + property.key\">\n                      <span *ngIf=\"!property.isEmpty(); else elseEmptyValueBlock\">{{ property.displayValue }}</span>\n                  </span>\n              </ng-template>\n          </div>\n          <ng-template #elseEmptyValueBlock>\n              {{ property.default | translate }}\n          </ng-template>\n      </div>\n    ",
                styles: ["\n      .adf-mapitem-clickable-value {\n        cursor: pointer; }\n    "]
            },] },
];
/**
 * @nocollapse
 */
CardViewMapItemComponent.ctorParameters = function () { return [
    { type: CardViewUpdateService, },
]; };
CardViewMapItemComponent.propDecorators = {
    'property': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CardViewTextItemComponent = /** @class */ (function () {
    /**
     * @param {?} cardViewUpdateService
     */
    function CardViewTextItemComponent(cardViewUpdateService) {
        this.cardViewUpdateService = cardViewUpdateService;
        this.inEdit = false;
    }
    /**
     * @return {?}
     */
    CardViewTextItemComponent.prototype.ngOnChanges = function () {
        this.editedValue = this.property.value;
    };
    /**
     * @return {?}
     */
    CardViewTextItemComponent.prototype.isEditble = function () {
        return this.editable && this.property.editable;
    };
    /**
     * @return {?}
     */
    CardViewTextItemComponent.prototype.isClickable = function () {
        return this.property.clickable;
    };
    /**
     * @param {?} editStatus
     * @return {?}
     */
    CardViewTextItemComponent.prototype.setEditMode = function (editStatus) {
        var _this = this;
        this.inEdit = editStatus;
        setTimeout(function () {
            _this.editorInput.nativeElement.click();
        }, 0);
    };
    /**
     * @return {?}
     */
    CardViewTextItemComponent.prototype.reset = function () {
        this.editedValue = this.property.value;
        this.setEditMode(false);
    };
    /**
     * @return {?}
     */
    CardViewTextItemComponent.prototype.update = function () {
        this.cardViewUpdateService.update(this.property, this.editedValue);
        this.property.value = this.editedValue;
        this.setEditMode(false);
    };
    /**
     * @return {?}
     */
    CardViewTextItemComponent.prototype.clicked = function () {
        this.cardViewUpdateService.clicked(this.property);
    };
    return CardViewTextItemComponent;
}());
CardViewTextItemComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-card-view-textitem',
                template: "\n      <div class=\"adf-property-label\">{{ property.label | translate }}</div>\n      <div class=\"adf-property-value\">\n          <span *ngIf=\"!isEditble()\">\n              <span *ngIf=\"!isClickable(); else elseBlock\" [attr.data-automation-id]=\"'card-textitem-value-' + property.key\">\n                  <span *ngIf=\"!property.isEmpty(); else elseEmptyValueBlock\">{{ property.displayValue }}</span>\n              </span>\n              <ng-template #elseBlock>\n                  <span class=\"adf-textitem-clickable-value\" (click)=\"clicked()\" [attr.data-automation-id]=\"'card-textitem-value-' + property.key\">\n                      <span *ngIf=\"!property.isEmpty(); else elseEmptyValueBlock\">{{ property.displayValue }}</span>\n                  </span>\n              </ng-template>\n          </span>\n          <span *ngIf=\"isEditble()\">\n              <div *ngIf=\"!inEdit\" (click)=\"setEditMode(true)\" class=\"adf-textitem-readonly\" [attr.data-automation-id]=\"'card-textitem-edit-toggle-' + property.key\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n                  <span [attr.data-automation-id]=\"'card-textitem-value-' + property.key\">\n                      <span *ngIf=\"!property.isEmpty(); else elseEmptyValueBlock\">{{ property.displayValue }}</span>\n                  </span>\n                  <mat-icon fxFlex=\"0 0 auto\" [attr.data-automation-id]=\"'card-textitem-edit-icon-' + property.key\" class=\"adf-textitem-icon\">create</mat-icon>\n              </div>\n              <div *ngIf=\"inEdit\" class=\"adf-textitem-editable\">\n                  <mat-form-field floatPlaceholder=\"never\" class=\"adf-input-container\">\n                      <input *ngIf=\"!property.multiline\" #editorInput\n                          matInput\n                          class=\"adf-input\"\n                          [placeholder]=\"property.default | translate\"\n                          [(ngModel)]=\"editedValue\"\n                          [attr.data-automation-id]=\"'card-textitem-editinput-' + property.key\">\n                      <textarea *ngIf=\"property.multiline\" #editorInput\n                          matInput\n                          matTextareaAutosize\n                          matAutosizeMaxRows=\"1\"\n                          matAutosizeMaxRows=\"5\"\n                          class=\"adf-textarea\"\n                          [placeholder]=\"property.default | translate\"\n                          [(ngModel)]=\"editedValue\"\n                          [attr.data-automation-id]=\"'card-textitem-edittextarea-' + property.key\"></textarea>\n                  </mat-form-field>\n                  <mat-icon\n                      class=\"adf-textitem-icon adf-update-icon\"\n                      (click)=\"update()\"\n                      [attr.data-automation-id]=\"'card-textitem-update-' + property.key\">done</mat-icon>\n                  <mat-icon\n                      class=\"adf-textitem-icon adf-reset-icon\"\n                      (click)=\"reset()\"\n                      [attr.data-automation-id]=\"'card-textitem-reset-' + property.key\">clear</mat-icon>\n              </div>\n          </span>\n          <ng-template #elseEmptyValueBlock>\n              {{ property.default | translate }}\n          </ng-template>\n      </div>\n    ",
                styles: ["\n\n    "]
            },] },
];
/**
 * @nocollapse
 */
CardViewTextItemComponent.ctorParameters = function () { return [
    { type: CardViewUpdateService, },
]; };
CardViewTextItemComponent.propDecorators = {
    'property': [{ type: core.Input },],
    'editable': [{ type: core.Input },],
    'editorInput': [{ type: core.ViewChild, args: ['editorInput',] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DynamicComponentResolver = /** @class */ (function () {
    function DynamicComponentResolver() {
    }
    /**
     * @param {?} type
     * @return {?}
     */
    DynamicComponentResolver.fromType = function (type) {
        return function (model) {
            return type;
        };
    };
    return DynamicComponentResolver;
}());
/**
 * @abstract
 */
var DynamicComponentMapper = /** @class */ (function () {
    function DynamicComponentMapper() {
        this.defaultValue = undefined;
        this.types = {};
    }
    /**
     * @param {?} type
     * @param {?=} defaultValue
     * @return {?}
     */
    DynamicComponentMapper.prototype.getComponentTypeResolver = function (type, defaultValue) {
        if (defaultValue === void 0) { defaultValue = this.defaultValue; }
        if (type) {
            return this.types[type] || DynamicComponentResolver.fromType(defaultValue);
        }
        return DynamicComponentResolver.fromType(defaultValue);
    };
    /**
     * @param {?} type
     * @param {?} resolver
     * @param {?=} override
     * @return {?}
     */
    DynamicComponentMapper.prototype.setComponentTypeResolver = function (type, resolver, override) {
        if (override === void 0) { override = false; }
        if (!type) {
            throw new Error("type is null or not defined");
        }
        if (!resolver) {
            throw new Error("resolver is null or not defined");
        }
        var /** @type {?} */ existing = this.types[type];
        if (existing && !override) {
            throw new Error("already mapped, use override option if you intend replacing existing mapping.");
        }
        this.types[type] = resolver;
    };
    /**
     * @param {?} model
     * @param {?=} defaultValue
     * @return {?}
     */
    DynamicComponentMapper.prototype.resolveComponentType = function (model, defaultValue) {
        if (defaultValue === void 0) { defaultValue = this.defaultValue; }
        if (model) {
            var /** @type {?} */ resolver = this.getComponentTypeResolver(model.type, defaultValue);
            return resolver(model);
        }
        return defaultValue;
    };
    return DynamicComponentMapper;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CardItemTypeService = /** @class */ (function (_super) {
    __extends(CardItemTypeService, _super);
    function CardItemTypeService() {
        var _this = _super.apply(this, arguments) || this;
        _this.defaultValue = CardViewTextItemComponent;
        _this.types = {
            'text': DynamicComponentResolver.fromType(CardViewTextItemComponent),
            'date': DynamicComponentResolver.fromType(CardViewDateItemComponent),
            'map': DynamicComponentResolver.fromType(CardViewMapItemComponent)
        };
        return _this;
    }
    return CardItemTypeService;
}(DynamicComponentMapper));
CardItemTypeService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
CardItemTypeService.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CardViewItemDispatcherComponent = /** @class */ (function () {
    /**
     * @param {?} cardItemTypeService
     * @param {?} resolver
     */
    function CardViewItemDispatcherComponent(cardItemTypeService, resolver) {
        var _this = this;
        this.cardItemTypeService = cardItemTypeService;
        this.resolver = resolver;
        this.loaded = false;
        this.componentReference = null;
        var dynamicLifecycleMethods = [
            'ngOnInit',
            'ngDoCheck',
            'ngAfterContentInit',
            'ngAfterContentChecked',
            'ngAfterViewInit',
            'ngAfterViewChecked',
            'ngOnDestroy'
        ];
        dynamicLifecycleMethods.forEach(function (dynamicLifecycleMethod) {
            _this[dynamicLifecycleMethod] = _this.proxy.bind(_this, dynamicLifecycleMethod);
        });
    }
    /**
     * @param {...?} args
     * @return {?}
     */
    CardViewItemDispatcherComponent.prototype.ngOnChanges = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (!this.loaded) {
            this.loadComponent();
            this.loaded = true;
        }
        this.proxy.apply(this, ['ngOnChanges'].concat(args));
    };
    /**
     * @return {?}
     */
    CardViewItemDispatcherComponent.prototype.loadComponent = function () {
        var /** @type {?} */ factoryClass = this.cardItemTypeService.resolveComponentType(this.property);
        var /** @type {?} */ factory = this.resolver.resolveComponentFactory(factoryClass);
        this.componentReference = this.content.viewContainerRef.createComponent(factory);
        this.componentReference.instance.editable = this.editable;
        this.componentReference.instance.property = this.property;
    };
    /**
     * @param {?} methodName
     * @param {...?} args
     * @return {?}
     */
    CardViewItemDispatcherComponent.prototype.proxy = function (methodName) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        if (this.componentReference.instance[methodName]) {
            this.componentReference.instance[methodName].apply(this.componentReference.instance, args);
        }
    };
    return CardViewItemDispatcherComponent;
}());
CardViewItemDispatcherComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-card-view-item-dispatcher',
                template: '<ng-template adf-card-view-content-proxy></ng-template>'
            },] },
];
/**
 * @nocollapse
 */
CardViewItemDispatcherComponent.ctorParameters = function () { return [
    { type: CardItemTypeService, },
    { type: core.ComponentFactoryResolver, },
]; };
CardViewItemDispatcherComponent.propDecorators = {
    'property': [{ type: core.Input },],
    'editable': [{ type: core.Input },],
    'content': [{ type: core.ViewChild, args: [CardViewContentProxyDirective,] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CardViewComponent = /** @class */ (function () {
    function CardViewComponent() {
    }
    return CardViewComponent;
}());
CardViewComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-card-view',
                template: "\n      <div class=\"adf-property-list\">\n          <div *ngFor=\"let property of properties\">\n              <div [attr.data-automation-id]=\"'header-'+property.key\" class=\"adf-property\">\n                  <adf-card-view-item-dispatcher [property]=\"property\" [editable]=\"editable\"></adf-card-view-item-dispatcher>\n              </div>\n          </div>\n      </div>\n    ",
                styles: ["\n\n    "]
            },] },
];
/**
 * @nocollapse
 */
CardViewComponent.ctorParameters = function () { return []; };
CardViewComponent.propDecorators = {
    'properties': [{ type: core.Input },],
    'editable': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CardViewModule = /** @class */ (function () {
    function CardViewModule() {
    }
    return CardViewModule;
}());
CardViewModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule,
                    material.MatDatepickerModule,
                    material.MatNativeDateModule,
                    material.MatInputModule,
                    material.MatIconModule,
                    material.MatButtonModule,
                    forms.FormsModule,
                    flexLayout.FlexLayoutModule,
                    core$1.TranslateModule
                ],
                declarations: [
                    CardViewComponent,
                    CardViewItemDispatcherComponent,
                    CardViewContentProxyDirective,
                    CardViewTextItemComponent,
                    CardViewMapItemComponent,
                    CardViewDateItemComponent
                ],
                entryComponents: [
                    CardViewTextItemComponent,
                    CardViewMapItemComponent,
                    CardViewDateItemComponent
                ],
                exports: [
                    CardViewComponent,
                    CardViewTextItemComponent,
                    CardViewMapItemComponent,
                    CardViewDateItemComponent
                ]
            },] },
];
/**
 * @nocollapse
 */
CardViewModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AccordionComponent = /** @class */ (function () {
    function AccordionComponent() {
        this.groups = [];
    }
    /**
     * @param {?} group
     * @return {?}
     */
    AccordionComponent.prototype.addGroup = function (group) {
        this.groups.push(group);
    };
    /**
     * @param {?} openGroup
     * @return {?}
     */
    AccordionComponent.prototype.closeOthers = function (openGroup) {
        this.groups.forEach(function (group) {
            if (group !== openGroup) {
                group.isOpen = false;
            }
        });
    };
    /**
     * @param {?} group
     * @return {?}
     */
    AccordionComponent.prototype.removeGroup = function (group) {
        var /** @type {?} */ index = this.groups.indexOf(group);
        if (index !== -1) {
            this.groups.splice(index, 1);
        }
    };
    return AccordionComponent;
}());
AccordionComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-accordion',
                template: "\n        <ng-content></ng-content>\n    ",
                host: {
                    'class': 'panel-group'
                },
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
AccordionComponent.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AccordionGroupComponent = /** @class */ (function () {
    /**
     * @param {?} accordion
     */
    function AccordionGroupComponent(accordion) {
        this.accordion = accordion;
        this._isOpen = false;
        this._isSelected = false;
        this.hasAccordionIcon = true;
        this.headingClick = new core.EventEmitter();
        this.accordion.addGroup(this);
    }
    Object.defineProperty(AccordionGroupComponent.prototype, "isOpen", {
        /**
         * @return {?}
         */
        get: function () {
            return this._isOpen;
        },
        /**
         * @param {?} value
         * @return {?}
         */
        set: function (value) {
            this._isOpen = value;
            if (value) {
                this.accordion.closeOthers(this);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AccordionGroupComponent.prototype, "isSelected", {
        /**
         * @return {?}
         */
        get: function () {
            return this._isSelected;
        },
        /**
         * @param {?} value
         * @return {?}
         */
        set: function (value) {
            this._isSelected = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    AccordionGroupComponent.prototype.ngOnDestroy = function () {
        this.accordion.removeGroup(this);
    };
    /**
     * @return {?}
     */
    AccordionGroupComponent.prototype.hasHeadingIcon = function () {
        return this.headingIcon ? true : false;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    AccordionGroupComponent.prototype.toggleOpen = function (event) {
        event.preventDefault();
        this.isOpen = !this.isOpen;
        this.headingClick.emit(this.heading);
    };
    /**
     * @return {?}
     */
    AccordionGroupComponent.prototype.getAccordionIcon = function () {
        return this.isOpen ? 'expand_less' : 'expand_more';
    };
    return AccordionGroupComponent;
}());
AccordionGroupComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-accordion-group',
                template: "\n      <div class=\"adf-panel adf-panel-default\" [ngClass]=\"{'adf-panel-open': isOpen}\">\n          <div class=\"adf-panel-heading\" [ngClass]=\"{'adf-panel-heading-selected': isSelected}\" (click)=\"toggleOpen($event)\">\n              <div id=\"heading-icon\" *ngIf=\"hasHeadingIcon()\" class=\"adf-panel-heading-icon\">\n                  <mat-icon class=\"material-icons\"\n                     [matTooltip]=\"headingIconTooltip\"\n                     [matTooltipDisabled]=\"!headingIconTooltip\">\n                      {{headingIcon}}\n                  </mat-icon>\n              </div>\n              <div id=\"heading-text\" class=\"adf-panel-heading-text\">{{heading}}</div>\n              <div id=\"accordion-button\" *ngIf=\"hasAccordionIcon\" class=\"adf-panel-heading-toggle\">\n                  <i class=\"material-icons\">{{getAccordionIcon()}}</i>\n              </div>\n          </div>\n          <div class=\"adf-panel-collapse\" [hidden]=\"!isOpen\">\n              <div class=\"adf-panel-body\" #contentWrapper>\n                  <ng-content></ng-content>\n              </div>\n          </div>\n      </div>\n    ",
                styles: ["\n\n    "],
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
AccordionGroupComponent.ctorParameters = function () { return [
    { type: AccordionComponent, },
]; };
AccordionGroupComponent.propDecorators = {
    'contentWrapper': [{ type: core.ViewChild, args: ['contentWrapper',] },],
    'heading': [{ type: core.Input },],
    'headingIcon': [{ type: core.Input },],
    'headingIconTooltip': [{ type: core.Input },],
    'hasAccordionIcon': [{ type: core.Input },],
    'headingClick': [{ type: core.Output },],
    'isOpen': [{ type: core.Input },],
    'isSelected': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CollapsableModule = /** @class */ (function () {
    function CollapsableModule() {
    }
    return CollapsableModule;
}());
CollapsableModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    MaterialModule,
                    common.CommonModule
                ],
                declarations: [
                    AccordionComponent,
                    AccordionGroupComponent
                ],
                exports: [
                    AccordionComponent,
                    AccordionGroupComponent
                ]
            },] },
];
/**
 * @nocollapse
 */
CollapsableModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ContextMenuService = /** @class */ (function () {
    function ContextMenuService() {
        this.show = new Subject.Subject();
    }
    return ContextMenuService;
}());
ContextMenuService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
ContextMenuService.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ContextMenuHolderComponent = /** @class */ (function () {
    /**
     * @param {?} viewport
     * @param {?} overlayContainer
     * @param {?} contextMenuService
     * @param {?} renderer
     */
    function ContextMenuHolderComponent(viewport, overlayContainer, contextMenuService, renderer) {
        this.viewport = viewport;
        this.overlayContainer = overlayContainer;
        this.contextMenuService = contextMenuService;
        this.renderer = renderer;
        this.links = [];
        this.mouseLocation = { left: 0, top: 0 };
        this.menuElement = null;
        this.showIcons = false;
    }
    /**
     * @param {?=} event
     * @return {?}
     */
    ContextMenuHolderComponent.prototype.onShowContextMenu = function (event) {
        if (event) {
            event.preventDefault();
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ContextMenuHolderComponent.prototype.onResize = function (event) {
        if (this.mdMenuElement) {
            this.setPositionAfterCDKrecalculation();
        }
    };
    /**
     * @return {?}
     */
    ContextMenuHolderComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.contextSubscription = this.contextMenuService.show.subscribe(function (e) { return _this.showMenu(e.event, e.obj); });
        this.openSubscription = this.menuTrigger.onMenuOpen.subscribe(function () {
            var /** @type {?} */ container = _this.overlayContainer.getContainerElement();
            if (container) {
                _this.contextMenuListenerFn = _this.renderer.listen(container, 'contextmenu', function (e) {
                    e.preventDefault();
                });
            }
            _this.menuElement = _this.getContextMenuElement();
        });
        this.closeSubscription = this.menuTrigger.onMenuClose.subscribe(function () {
            _this.menuElement = null;
            if (_this.contextMenuListenerFn) {
                _this.contextMenuListenerFn();
            }
        });
    };
    /**
     * @return {?}
     */
    ContextMenuHolderComponent.prototype.ngOnDestroy = function () {
        if (this.contextMenuListenerFn) {
            this.contextMenuListenerFn();
        }
        this.contextSubscription.unsubscribe();
        this.openSubscription.unsubscribe();
        this.closeSubscription.unsubscribe();
        this.menuElement = null;
    };
    /**
     * @param {?} event
     * @param {?} menuItem
     * @return {?}
     */
    ContextMenuHolderComponent.prototype.onMenuItemClick = function (event, menuItem) {
        if (menuItem && menuItem.model && menuItem.model.disabled) {
            event.preventDefault();
            event.stopImmediatePropagation();
            return;
        }
        menuItem.subject.next(menuItem);
    };
    /**
     * @param {?} e
     * @param {?} links
     * @return {?}
     */
    ContextMenuHolderComponent.prototype.showMenu = function (e, links) {
        this.links = links;
        if (e) {
            this.mouseLocation = {
                left: e.clientX,
                top: e.clientY
            };
        }
        this.menuTrigger.openMenu();
        if (this.mdMenuElement) {
            this.setPositionAfterCDKrecalculation();
        }
    };
    /**
     * @return {?}
     */
    ContextMenuHolderComponent.prototype.setPositionAfterCDKrecalculation = function () {
        var _this = this;
        setTimeout(function () {
            _this.setPosition();
        }, 0);
    };
    Object.defineProperty(ContextMenuHolderComponent.prototype, "mdMenuElement", {
        /**
         * @return {?}
         */
        get: function () {
            return this.menuElement;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ContextMenuHolderComponent.prototype.locationCss = function () {
        return {
            left: this.mouseLocation.left + 'px',
            top: this.mouseLocation.top + 'px'
        };
    };
    /**
     * @return {?}
     */
    ContextMenuHolderComponent.prototype.setPosition = function () {
        if (this.mdMenuElement.clientWidth + this.mouseLocation.left > this.viewport.getViewportRect().width) {
            this.menuTrigger.menu.xPosition = 'before';
            this.mdMenuElement.parentElement.style.left = this.mouseLocation.left - this.mdMenuElement.clientWidth + 'px';
        }
        else {
            this.menuTrigger.menu.xPosition = 'after';
            this.mdMenuElement.parentElement.style.left = this.locationCss().left;
        }
        if (this.mdMenuElement.clientHeight + this.mouseLocation.top > this.viewport.getViewportRect().height) {
            this.menuTrigger.menu.yPosition = 'above';
            this.mdMenuElement.parentElement.style.top = this.mouseLocation.top - this.mdMenuElement.clientHeight + 'px';
        }
        else {
            this.menuTrigger.menu.yPosition = 'below';
            this.mdMenuElement.parentElement.style.top = this.locationCss().top;
        }
    };
    /**
     * @return {?}
     */
    ContextMenuHolderComponent.prototype.getContextMenuElement = function () {
        return this.overlayContainer.getContainerElement().querySelector('.context-menu');
    };
    return ContextMenuHolderComponent;
}());
ContextMenuHolderComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-context-menu-holder, context-menu-holder',
                template: "\n        <button mat-button [matMenuTriggerFor]=\"contextMenu\"></button>\n        <mat-menu #contextMenu=\"matMenu\" class=\"context-menu\">\n            <button\n                *ngFor=\"let link of links\"\n                mat-menu-item\n                (click)=\"onMenuItemClick($event, link)\"\n                [attr.disabled]=\"link.model?.disabled || undefined\">\n                <mat-icon *ngIf=\"showIcons && link.model?.icon\">\n                    {{ link.model?.icon }}\n                </mat-icon>\n                    {{link.title || link.model?.title}}\n            </button>\n        </mat-menu>\n    "
            },] },
];
/**
 * @nocollapse
 */
ContextMenuHolderComponent.ctorParameters = function () { return [
    { type: scrolling.ViewportRuler, },
    { type: overlay.OverlayContainer, },
    { type: ContextMenuService, },
    { type: core.Renderer2, },
]; };
ContextMenuHolderComponent.propDecorators = {
    'showIcons': [{ type: core.Input },],
    'menuTrigger': [{ type: core.ViewChild, args: [material.MatMenuTrigger,] },],
    'onShowContextMenu': [{ type: core.HostListener, args: ['contextmenu', ['$event'],] },],
    'onResize': [{ type: core.HostListener, args: ['window:resize', ['$event'],] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ContextMenuDirective = /** @class */ (function () {
    /**
     * @param {?} _contextMenuService
     */
    function ContextMenuDirective(_contextMenuService) {
        this._contextMenuService = _contextMenuService;
        this.enabled = false;
    }
    /**
     * @param {?=} event
     * @return {?}
     */
    ContextMenuDirective.prototype.onShowContextMenu = function (event) {
        if (this.enabled) {
            if (event) {
                event.preventDefault();
            }
            if (this.links && this.links.length > 0) {
                if (this._contextMenuService) {
                    this._contextMenuService.show.next({ event: event, obj: this.links });
                }
            }
        }
    };
    return ContextMenuDirective;
}());
ContextMenuDirective.decorators = [
    { type: core.Directive, args: [{
                selector: '[adf-context-menu], [context-menu]'
            },] },
];
/**
 * @nocollapse
 */
ContextMenuDirective.ctorParameters = function () { return [
    { type: ContextMenuService, },
]; };
ContextMenuDirective.propDecorators = {
    'links': [{ type: core.Input, args: ['context-menu',] },],
    'enabled': [{ type: core.Input, args: ['context-menu-enabled',] },],
    'onShowContextMenu': [{ type: core.HostListener, args: ['contextmenu', ['$event'],] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ContextMenuModule = /** @class */ (function () {
    function ContextMenuModule() {
    }
    return ContextMenuModule;
}());
ContextMenuModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule,
                    MaterialModule
                ],
                declarations: [
                    ContextMenuHolderComponent,
                    ContextMenuDirective
                ],
                exports: [
                    ContextMenuHolderComponent,
                    ContextMenuDirective
                ],
                providers: [
                    ContextMenuService
                ]
            },] },
];
/**
 * @nocollapse
 */
ContextMenuModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var DataColumnComponent = /** @class */ (function () {
    function DataColumnComponent() {
        this.type = 'text';
        this.sortable = true;
        this.title = '';
    }
    /**
     * @return {?}
     */
    DataColumnComponent.prototype.ngOnInit = function () {
        if (!this.srTitle && this.key === '$thumbnail') {
            this.srTitle = 'Thumbnail';
        }
    };
    return DataColumnComponent;
}());
DataColumnComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'data-column',
                template: ''
            },] },
];
/**
 * @nocollapse
 */
DataColumnComponent.ctorParameters = function () { return []; };
DataColumnComponent.propDecorators = {
    'key': [{ type: core.Input },],
    'type': [{ type: core.Input },],
    'format': [{ type: core.Input },],
    'sortable': [{ type: core.Input },],
    'title': [{ type: core.Input },],
    'template': [{ type: core.ContentChild, args: [core.TemplateRef,] },],
    'formatTooltip': [{ type: core.Input },],
    'srTitle': [{ type: core.Input, args: ['sr-title',] },],
    'cssClass': [{ type: core.Input, args: ['class',] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var DataColumnListComponent = /** @class */ (function () {
    function DataColumnListComponent() {
    }
    return DataColumnListComponent;
}());
DataColumnListComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'data-columns',
                template: ''
            },] },
];
/**
 * @nocollapse
 */
DataColumnListComponent.ctorParameters = function () { return []; };
DataColumnListComponent.propDecorators = {
    'columns': [{ type: core.ContentChildren, args: [DataColumnComponent,] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DataColumnModule = /** @class */ (function () {
    function DataColumnModule() {
    }
    return DataColumnModule;
}());
DataColumnModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule
                ],
                declarations: [
                    DataColumnComponent,
                    DataColumnListComponent
                ],
                exports: [
                    DataColumnComponent,
                    DataColumnListComponent
                ]
            },] },
];
/**
 * @nocollapse
 */
DataColumnModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FileSizePipe = /** @class */ (function () {
    function FileSizePipe() {
    }
    /**
     * @param {?} bytes
     * @param {?=} decimals
     * @return {?}
     */
    FileSizePipe.prototype.transform = function (bytes, decimals) {
        if (decimals === void 0) { decimals = 2; }
        if (bytes == null || bytes === undefined) {
            return '';
        }
        if (bytes === 0) {
            return '0 Bytes';
        }
        var /** @type {?} */ k = 1024, /** @type {?} */ dm = decimals || 2, /** @type {?} */ sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'], /** @type {?} */ i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
    };
    return FileSizePipe;
}());
FileSizePipe.decorators = [
    { type: core.Pipe, args: [{
                name: 'adfFileSize'
            },] },
];
/**
 * @nocollapse
 */
FileSizePipe.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CookieService = /** @class */ (function () {
    function CookieService() {
    }
    /**
     * Retrieve cookie by key.
     *
     * @param {?} key
     * @return {?}
     */
    CookieService.prototype.getItem = function (key) {
        var /** @type {?} */ regexp = new RegExp('(?:' + key + '|;\s*' + key + ')=(.*?)(?:;|$)', 'g');
        var /** @type {?} */ result = regexp.exec(document.cookie);
        return (result === null) ? null : result[1];
    };
    /**
     * Set a cookie.
     * @param {?} key
     * @param {?} data
     * @param {?} expiration
     * @param {?} path
     *
     * @return {?}
     */
    CookieService.prototype.setItem = function (key, data, expiration, path) {
        document.cookie = key + "=" + data +
            (expiration ? ';expires=' + expiration.toUTCString() : '') +
            (path ? ";path=" + path : ';path=/');
    };
    return CookieService;
}());
CookieService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
CookieService.ctorParameters = function () { return []; };
var LogLevelsEnum = /** @class */ (function (_super) {
    __extends(LogLevelsEnum, _super);
    function LogLevelsEnum() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return LogLevelsEnum;
}(Number));
LogLevelsEnum.TRACE = 5;
LogLevelsEnum.DEBUG = 4;
LogLevelsEnum.INFO = 3;
LogLevelsEnum.WARN = 2;
LogLevelsEnum.ERROR = 1;
LogLevelsEnum.SILENT = 0;
var logLevels = [
    { level: LogLevelsEnum.TRACE, name: 'TRACE' },
    { level: LogLevelsEnum.DEBUG, name: 'DEBUG' },
    { level: LogLevelsEnum.INFO, name: 'INFO' },
    { level: LogLevelsEnum.WARN, name: 'WARN' },
    { level: LogLevelsEnum.ERROR, name: 'ERROR' },
    { level: LogLevelsEnum.SILENT, name: 'SILENT' }
];
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var LogService = /** @class */ (function () {
    /**
     * @param {?} appConfig
     */
    function LogService(appConfig) {
        this.currentLogLevel = LogLevelsEnum.TRACE;
        if (appConfig) {
            var configLevel = appConfig.get('logLevel');
            if (configLevel) {
                this.currentLogLevel = this.getCurrentLogLevel(configLevel);
            }
        }
    }
    Object.defineProperty(LogService.prototype, "error", {
        /**
         * @return {?}
         */
        get: function () {
            if (this.currentLogLevel >= LogLevelsEnum.ERROR) {
                return console.error.bind(console);
            }
            return function (message) {
                var optionalParams = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    optionalParams[_i - 1] = arguments[_i];
                }
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LogService.prototype, "debug", {
        /**
         * @return {?}
         */
        get: function () {
            if (this.currentLogLevel >= LogLevelsEnum.DEBUG) {
                return console.debug.bind(console);
            }
            return function (message) {
                var optionalParams = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    optionalParams[_i - 1] = arguments[_i];
                }
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LogService.prototype, "info", {
        /**
         * @return {?}
         */
        get: function () {
            if (this.currentLogLevel >= LogLevelsEnum.INFO) {
                return console.info.bind(console);
            }
            return function (message) {
                var optionalParams = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    optionalParams[_i - 1] = arguments[_i];
                }
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LogService.prototype, "log", {
        /**
         * @return {?}
         */
        get: function () {
            if (this.currentLogLevel >= LogLevelsEnum.TRACE) {
                return console.log.bind(console);
            }
            return function (message) {
                var optionalParams = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    optionalParams[_i - 1] = arguments[_i];
                }
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LogService.prototype, "trace", {
        /**
         * @return {?}
         */
        get: function () {
            if (this.currentLogLevel >= LogLevelsEnum.TRACE) {
                return console.trace.bind(console);
            }
            return function (message) {
                var optionalParams = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    optionalParams[_i - 1] = arguments[_i];
                }
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LogService.prototype, "warn", {
        /**
         * @return {?}
         */
        get: function () {
            if (this.currentLogLevel >= LogLevelsEnum.WARN) {
                return console.warn.bind(console);
            }
            return function (message) {
                var optionalParams = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    optionalParams[_i - 1] = arguments[_i];
                }
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LogService.prototype, "assert", {
        /**
         * @return {?}
         */
        get: function () {
            if (this.currentLogLevel !== LogLevelsEnum.SILENT) {
                return console.assert.bind(console);
            }
            return function (message) {
                var optionalParams = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    optionalParams[_i - 1] = arguments[_i];
                }
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LogService.prototype, "group", {
        /**
         * @return {?}
         */
        get: function () {
            if (this.currentLogLevel !== LogLevelsEnum.SILENT) {
                return console.group.bind(console);
            }
            return function (message) {
                var optionalParams = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    optionalParams[_i - 1] = arguments[_i];
                }
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LogService.prototype, "groupEnd", {
        /**
         * @return {?}
         */
        get: function () {
            if (this.currentLogLevel !== LogLevelsEnum.SILENT) {
                return console.groupEnd.bind(console);
            }
            return function (message) {
                var optionalParams = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    optionalParams[_i - 1] = arguments[_i];
                }
            };
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} level
     * @return {?}
     */
    LogService.prototype.getCurrentLogLevel = function (level) {
        var /** @type {?} */ referencedLevel = logLevels.find(function (currentLevel) {
            return currentLevel.name.toLocaleLowerCase() === level.toLocaleLowerCase();
        });
        return referencedLevel ? referencedLevel.level : 5;
    };
    return LogService;
}());
LogService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
LogService.ctorParameters = function () { return [
    { type: AppConfigService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var REMEMBER_ME_COOKIE_KEY = 'ALFRESCO_REMEMBER_ME';
var REMEMBER_ME_UNTIL = 1000 * 60 * 60 * 24 * 30;
var AuthenticationService = /** @class */ (function () {
    /**
     * @param {?} preferences
     * @param {?} alfrescoApi
     * @param {?} storage
     * @param {?} cookie
     * @param {?} logService
     */
    function AuthenticationService(preferences, alfrescoApi$$1, storage, cookie, logService) {
        this.preferences = preferences;
        this.alfrescoApi = alfrescoApi$$1;
        this.storage = storage;
        this.cookie = cookie;
        this.logService = logService;
        this.redirectUrl = '';
        this.onLogin = new Subject.Subject();
        this.onLogout = new Subject.Subject();
    }
    /**
     * The method return true if the user is logged in
     * @return {?}
     */
    AuthenticationService.prototype.isLoggedIn = function () {
        return !!this.alfrescoApi.getInstance().isLoggedIn();
    };
    /**
     * Method to delegate to POST login
     * @param {?} username
     * @param {?} password
     * @param {?=} rememberMe
     * @return {?}
     */
    AuthenticationService.prototype.login = function (username, password, rememberMe) {
        var _this = this;
        if (rememberMe === void 0) { rememberMe = false; }
        this.removeTicket();
        return Observable.Observable.fromPromise(this.callApiLogin(username, password))
            .map(function (response) {
            _this.saveRememberMeCookie(rememberMe);
            _this.saveTickets();
            _this.onLogin.next(response);
            return {
                type: _this.preferences.authType,
                ticket: response
            };
        })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * The method save the "remember me" cookie as a long life cookie or a session cookie
     * depending on the given paramter
     * @param {?} rememberMe
     * @return {?}
     */
    AuthenticationService.prototype.saveRememberMeCookie = function (rememberMe) {
        var /** @type {?} */ expiration = null;
        if (rememberMe) {
            expiration = new Date();
            var /** @type {?} */ time = expiration.getTime();
            var /** @type {?} */ expireTime = time + REMEMBER_ME_UNTIL;
            expiration.setTime(expireTime);
        }
        this.cookie.setItem(REMEMBER_ME_COOKIE_KEY, '1', expiration, null);
    };
    /**
     * The method retrieve whether the "remember me" cookie was set or not
     *
     * @return {?}
     */
    AuthenticationService.prototype.isRememberMeSet = function () {
        return (this.cookie.getItem(REMEMBER_ME_COOKIE_KEY) === null) ? false : true;
    };
    /**
     * Initialize the alfresco Api with user and password end call the login method
     * @param {?} username
     * @param {?} password
     * @return {?}
     */
    AuthenticationService.prototype.callApiLogin = function (username, password) {
        return this.alfrescoApi.getInstance().login(username, password);
    };
    /**
     * The method remove the ticket from the Storage
     *
     * @return {?}
     */
    AuthenticationService.prototype.logout = function () {
        var _this = this;
        return Observable.Observable.fromPromise(this.callApiLogout())
            .do(function (response) {
            _this.removeTicket();
            _this.onLogout.next(response);
            return response;
        })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     *
     * @return {?}
     */
    AuthenticationService.prototype.callApiLogout = function () {
        if (this.alfrescoApi.getInstance()) {
            return this.alfrescoApi.getInstance().logout();
        }
    };
    /**
     * Remove the login ticket from Storage
     * @return {?}
     */
    AuthenticationService.prototype.removeTicket = function () {
        this.storage.removeItem('ticket-ECM');
        this.storage.removeItem('ticket-BPM');
        this.alfrescoApi.getInstance().setTicket(undefined, undefined);
    };
    /**
     * The method return the ECM ticket stored in the Storage
     * @return {?} ticket
     */
    AuthenticationService.prototype.getTicketEcm = function () {
        return this.storage.getItem('ticket-ECM');
    };
    /**
     * The method return the BPM ticket stored in the Storage
     * @return {?} ticket
     */
    AuthenticationService.prototype.getTicketBpm = function () {
        return this.storage.getItem('ticket-BPM');
    };
    /**
     * @return {?}
     */
    AuthenticationService.prototype.getTicketEcmBase64 = function () {
        var /** @type {?} */ ticket = this.storage.getItem('ticket-ECM');
        if (ticket) {
            return 'Basic ' + btoa(ticket);
        }
        return null;
    };
    /**
     * The method save the ECM and BPM ticket in the Storage
     * @return {?}
     */
    AuthenticationService.prototype.saveTickets = function () {
        this.saveTicketEcm();
        this.saveTicketBpm();
    };
    /**
     * The method save the ECM ticket in the Storage
     * @return {?}
     */
    AuthenticationService.prototype.saveTicketEcm = function () {
        if (this.alfrescoApi.getInstance() && this.alfrescoApi.getInstance().getTicketEcm()) {
            this.storage.setItem('ticket-ECM', this.alfrescoApi.getInstance().getTicketEcm());
        }
    };
    /**
     * The method save the BPM ticket in the Storage
     * @return {?}
     */
    AuthenticationService.prototype.saveTicketBpm = function () {
        if (this.alfrescoApi.getInstance() && this.alfrescoApi.getInstance().getTicketBpm()) {
            this.storage.setItem('ticket-BPM', this.alfrescoApi.getInstance().getTicketBpm());
        }
    };
    /**
     * The method return true if user is logged in on ecm provider
     *
     * @return {?}
     */
    AuthenticationService.prototype.isEcmLoggedIn = function () {
        return this.isRememberMeSet() && this.alfrescoApi.getInstance().ecmAuth && !!this.alfrescoApi.getInstance().ecmAuth.isLoggedIn();
    };
    /**
     * The method return true if user is logged in on bpm provider
     *
     * @return {?}
     */
    AuthenticationService.prototype.isBpmLoggedIn = function () {
        return this.isRememberMeSet() && this.alfrescoApi.getInstance().bpmAuth && !!this.alfrescoApi.getInstance().bpmAuth.isLoggedIn();
    };
    /**
     * Get the ECM username
     *
     *
     * \@memberof AuthenticationService
     * @return {?}
     */
    AuthenticationService.prototype.getEcmUsername = function () {
        return this.alfrescoApi.getInstance().ecmAuth.username;
    };
    /**
     * Get the BPM username
     *
     *
     * \@memberof AuthenticationService
     * @return {?}
     */
    AuthenticationService.prototype.getBpmUsername = function () {
        return this.alfrescoApi.getInstance().bpmAuth.username;
    };
    /**
     * @param {?} url
     * @return {?}
     */
    AuthenticationService.prototype.setRedirectUrl = function (url) {
        this.redirectUrl = url;
    };
    /**
     * @return {?}
     */
    AuthenticationService.prototype.getRedirectUrl = function () {
        return this.redirectUrl;
    };
    /**
     * The method write the error in the console browser
     * @param {?} error
     * @return {?}
     */
    AuthenticationService.prototype.handleError = function (error) {
        this.logService.error('Error when logging in', error);
        return Observable.Observable.throw(error || 'Server error');
    };
    return AuthenticationService;
}());
AuthenticationService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
AuthenticationService.ctorParameters = function () { return [
    { type: UserPreferencesService, },
    { type: AlfrescoApiService, },
    { type: StorageService, },
    { type: CookieService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ContentService = /** @class */ (function () {
    /**
     * @param {?} authService
     * @param {?} apiService
     * @param {?} logService
     * @param {?} sanitizer
     */
    function ContentService(authService, apiService, logService, sanitizer) {
        this.authService = authService;
        this.apiService = apiService;
        this.logService = logService;
        this.sanitizer = sanitizer;
        this.folderCreated = new Subject.Subject();
        this.folderCreate = new Subject.Subject();
        this.folderEdit = new Subject.Subject();
        this.saveData = (function () {
            var a = document.createElement('a');
            document.body.appendChild(a);
            a.style.display = 'none';
            return function (data, format, fileName) {
                var blob = null;
                if (format === 'blob' || format === 'data') {
                    blob = new Blob([data], { type: 'octet/stream' });
                }
                if (format === 'object' || format === 'json') {
                    var json = JSON.stringify(data);
                    blob = new Blob([json], { type: 'octet/stream' });
                }
                if (blob) {
                    if (typeof window.navigator !== 'undefined' && window.navigator.msSaveOrOpenBlob) {
                        navigator.msSaveOrOpenBlob(blob, fileName);
                    }
                    else {
                        var url = window.URL.createObjectURL(blob);
                        a.href = url;
                        a.download = fileName;
                        a.click();
                        window.URL.revokeObjectURL(url);
                    }
                }
            };
        }());
    }
    /**
     * Invokes content download for a Blob with a file name.
     *
     *
     * \@memberOf ContentService
     * @param {?} blob
     * @param {?} fileName
     * @return {?}
     */
    ContentService.prototype.downloadBlob = function (blob, fileName) {
        this.saveData(blob, 'blob', fileName);
    };
    /**
     * Invokes content download for a data array with a file name.
     *
     *
     * \@memberOf ContentService
     * @param {?} data
     * @param {?} fileName
     * @return {?}
     */
    ContentService.prototype.downloadData = function (data, fileName) {
        this.saveData(data, 'data', fileName);
    };
    /**
     * Invokes content download for a JSON object with a file name.
     *
     *
     * \@memberOf ContentService
     * @param {?} json
     * @param {?} fileName
     * @return {?}
     */
    ContentService.prototype.downloadJSON = function (json, fileName) {
        this.saveData(json, 'json', fileName);
    };
    /**
     * Creates a trusted object URL from the Blob.
     * WARNING: calling this method with untrusted user data exposes your application to XSS security risks!
     *
     * \@memberOf ContentService
     * @param {?} blob
     * @return {?}
     */
    ContentService.prototype.createTrustedUrl = function (blob) {
        var /** @type {?} */ url = window.URL.createObjectURL(blob);
        return /** @type {?} */ (this.sanitizer.bypassSecurityTrustUrl(url));
    };
    Object.defineProperty(ContentService.prototype, "contentApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().content;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Get thumbnail URL for the given document node.
     *
     * @param {?} nodeId
     * @param {?=} attachment
     * @param {?=} ticket
     * @return {?}
     */
    ContentService.prototype.getDocumentThumbnailUrl = function (nodeId, attachment, ticket) {
        if (nodeId && nodeId.entry) {
            nodeId = nodeId.entry.id;
        }
        return this.contentApi.getDocumentThumbnailUrl(nodeId, attachment, ticket);
    };
    /**
     * Get content URL for the given node.
     *
     * @param {?} nodeId {string|MinimalNodeEntity} Node to get URL for.
     * @param {?=} attachment
     * @param {?=} ticket
     * @return {?}
     */
    ContentService.prototype.getContentUrl = function (nodeId, attachment, ticket) {
        if (nodeId && nodeId.entry) {
            nodeId = nodeId.entry.id;
        }
        return this.contentApi.getContentUrl(nodeId, attachment, ticket);
    };
    /**
     * Get content for the given node.
     * @param {?} nodeId {string}.
     *
     * @return {?}
     */
    ContentService.prototype.getNodeContent = function (nodeId) {
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.nodesApi.getFileContent(nodeId).then(function (dataContent) {
            return dataContent;
        })).catch(this.handleError);
    };
    /**
     * Create a folder
     * @param {?} relativePath
     * @param {?} name - the folder name
     * @param {?=} parentId
     * @return {?}
     */
    ContentService.prototype.createFolder = function (relativePath, name, parentId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().nodes.createFolder(name, relativePath, parentId))
            .do(function (data) {
            _this.folderCreated.next(/** @type {?} */ ({
                relativePath: relativePath,
                name: name,
                parentId: parentId,
                node: data
            }));
        })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Check if the user has permissions on that node
     * @param {?} node
     * @param {?} permission
     * @return {?}
     */
    ContentService.prototype.hasPermission = function (node, permission) {
        var /** @type {?} */ hasPermission = false;
        if (this.hasAllowableOperations(node)) {
            if (permission && permission.startsWith('!')) {
                hasPermission = node.allowableOperations.find(function (currentPermission) { return currentPermission === permission.replace('!', ''); }) ? false : true;
            }
            else {
                hasPermission = node.allowableOperations.find(function (currentPermission) { return currentPermission === permission; }) ? true : false;
            }
        }
        else {
            if (permission && permission.startsWith('!')) {
                hasPermission = true;
            }
        }
        return hasPermission;
    };
    /**
     * Check if the node has the properties allowableOperations
     * @param {?} node
     * @return {?}
     */
    ContentService.prototype.hasAllowableOperations = function (node) {
        return node && node.allowableOperations ? true : false;
    };
    /**
     * @param {?} error
     * @return {?}
     */
    ContentService.prototype.handleError = function (error) {
        this.logService.error(error);
        return Observable.Observable.throw(error || 'Server error');
    };
    return ContentService;
}());
ContentService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
ContentService.ctorParameters = function () { return [
    { type: AuthenticationService, },
    { type: AlfrescoApiService, },
    { type: LogService, },
    { type: platformBrowser.DomSanitizer, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ThumbnailService = /** @class */ (function () {
    /**
     * @param {?} contentService
     * @param {?} matIconRegistry
     * @param {?} sanitizer
     */
    function ThumbnailService(contentService, matIconRegistry, sanitizer) {
        this.contentService = contentService;
        this.DEFAULT_ICON = './assets/images/ft_ic_miscellaneous.svg';
        this.mimeTypeIcons = {
            'image/png': './assets/images/ft_ic_raster_image.svg',
            'image/jpeg': './assets/images/ft_ic_raster_image.svg',
            'image/gif': './assets/images/ft_ic_raster_image.svg',
            'application/pdf': './assets/images/ft_ic_pdf.svg',
            'application/vnd.ms-excel': './assets/images/ft_ic_ms_excel.svg',
            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': './assets/images/ft_ic_ms_excel.svg',
            'application/vnd.openxmlformats-officedocument.spreadsheetml.template': './assets/images/ft_ic_ms_excel.svg',
            'application/msword': './assets/images/ft_ic_ms_word.svg',
            'application/vnd.openxmlformats-officedocument.wordprocessingml.document': './assets/images/ft_ic_ms_word.svg',
            'application/vnd.openxmlformats-officedocument.wordprocessingml.template': './assets/images/ft_ic_ms_word.svg',
            'application/vnd.ms-powerpoint': './assets/images/ft_ic_ms_powerpoint.svg',
            'application/vnd.openxmlformats-officedocument.presentationml.presentation': './assets/images/ft_ic_ms_powerpoint.svg',
            'application/vnd.openxmlformats-officedocument.presentationml.template': './assets/images/ft_ic_ms_powerpoint.svg',
            'application/vnd.openxmlformats-officedocument.presentationml.slideshow': './assets/images/ft_ic_ms_powerpoint.svg',
            'video/mp4': './assets/images/ft_ic_video.svg',
            'text/plain': './assets/images/ft_ic_document.svg',
            'application/x-javascript': './assets/images/ft_ic_document.svg',
            'application/json': './assets/images/ft_ic_document.svg',
            'image/svg+xml': './assets/images/ft_ic_vector_image.svg',
            'text/html': './assets/images/ft_ic_website.svg',
            'application/x-compressed': './assets/images/ft_ic_archive.svg',
            'application/x-zip-compressed': './assets/images/ft_ic_archive.svg',
            'application/zip': './assets/images/ft_ic_archive.svg',
            'application/vnd.apple.keynote': './assets/images/ft_ic_presentation.svg',
            'application/vnd.apple.pages': './assets/images/ft_ic_document.svg',
            'application/vnd.apple.numbers': './assets/images/ft_ic_spreadsheet.svg',
            'folder': './assets/images/ft_ic_folder.svg',
            'disable/folder': './assets/images/ft_ic_folder_disable.svg',
            'selected': './assets/images/ft_ic_selected.svg'
        };
        matIconRegistry.addSvgIcon('image/png', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_raster_image.svg'));
        matIconRegistry.addSvgIcon('image/jpeg', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_raster_image.svg'));
        matIconRegistry.addSvgIcon('image/gif', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_raster_image.svg'));
        matIconRegistry.addSvgIcon('application/pdf', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_pdf.svg'));
        matIconRegistry.addSvgIcon('application/vnd.ms-excel', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_ms_excel.svg'));
        matIconRegistry.addSvgIcon('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_ms_excel.svg'));
        matIconRegistry.addSvgIcon('application/vnd.openxmlformats-officedocument.spreadsheetml.template', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_ms_excel.svg'));
        matIconRegistry.addSvgIcon('application/msword', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_ms_word.svg'));
        matIconRegistry.addSvgIcon('application/vnd.openxmlformats-officedocument.wordprocessingml.document', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_ms_word.svg'));
        matIconRegistry.addSvgIcon('application/vnd.openxmlformats-officedocument.wordprocessingml.template', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_ms_word.svg'));
        matIconRegistry.addSvgIcon('application/vnd.ms-powerpoint', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_ms_powerpoint.svg'));
        matIconRegistry.addSvgIcon('application/vnd.openxmlformats-officedocument.presentationml.presentation', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_ms_powerpoint.svg'));
        matIconRegistry.addSvgIcon('application/vnd.openxmlformats-officedocument.presentationml.template', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_ms_powerpoint.svg'));
        matIconRegistry.addSvgIcon('application/vnd.openxmlformats-officedocument.presentationml.slideshow', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_ms_powerpoint.svg'));
        matIconRegistry.addSvgIcon('video/mp4', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_video.svg'));
        matIconRegistry.addSvgIcon('text/plain', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_document.svg'));
        matIconRegistry.addSvgIcon('application/x-javascript', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_document.svg'));
        matIconRegistry.addSvgIcon('application/json', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_document.svg'));
        matIconRegistry.addSvgIcon('image/svg+xml', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_vector_image.svg'));
        matIconRegistry.addSvgIcon('text/html', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_website.svg'));
        matIconRegistry.addSvgIcon('application/x-compressed', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_archive.svg'));
        matIconRegistry.addSvgIcon('application/x-zip-compressed', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_archive.svg'));
        matIconRegistry.addSvgIcon('application/zip', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_archive.svg'));
        matIconRegistry.addSvgIcon('application/vnd.apple.keynote', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_presentation.svg'));
        matIconRegistry.addSvgIcon('application/vnd.apple.pages', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_document.svg'));
        matIconRegistry.addSvgIcon('application/vnd.apple.numbers', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_spreadsheet.svg'));
        matIconRegistry.addSvgIcon('folder', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_folder.svg'));
        matIconRegistry.addSvgIcon('disable/folder', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_folder_disable.svg'));
        matIconRegistry.addSvgIcon('selected', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_selected.svg'));
        matIconRegistry.addSvgIcon('default', sanitizer.bypassSecurityTrustResourceUrl('./assets/images/ft_ic_miscellaneous.svg'));
    }
    /**
     * Get thumbnail URL for the given document node.
     * @param {?} document Node to get URL for.
     * @return {?}
     */
    ThumbnailService.prototype.getDocumentThumbnailUrl = function (document) {
        var /** @type {?} */ thumbnail = this.contentService.getDocumentThumbnailUrl(document);
        return thumbnail || this.DEFAULT_ICON;
    };
    /**
     * Get mimeType SVG
     * @param {?} mimeType
     * @return {?}
     */
    ThumbnailService.prototype.getMimeTypeIcon = function (mimeType) {
        var /** @type {?} */ icon = this.mimeTypeIcons[mimeType];
        return (icon || this.DEFAULT_ICON);
    };
    /**
     * Get default SVG
     * @return {?}
     */
    ThumbnailService.prototype.getDefaultMimeTypeIcon = function () {
        return this.DEFAULT_ICON;
    };
    return ThumbnailService;
}());
ThumbnailService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
ThumbnailService.ctorParameters = function () { return [
    { type: ContentService, },
    { type: material.MatIconRegistry, },
    { type: platformBrowser.DomSanitizer, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MimeTypeIconPipe = /** @class */ (function () {
    /**
     * @param {?} thumbnailService
     */
    function MimeTypeIconPipe(thumbnailService) {
        this.thumbnailService = thumbnailService;
    }
    /**
     * @param {?} text
     * @return {?}
     */
    MimeTypeIconPipe.prototype.transform = function (text) {
        return this.thumbnailService.getMimeTypeIcon(text);
    };
    return MimeTypeIconPipe;
}());
MimeTypeIconPipe.decorators = [
    { type: core.Pipe, args: [{
                name: 'adfMimeTypeIcon'
            },] },
];
/**
 * @nocollapse
 */
MimeTypeIconPipe.ctorParameters = function () { return [
    { type: ThumbnailService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NodeNameTooltipPipe = /** @class */ (function () {
    function NodeNameTooltipPipe() {
    }
    /**
     * @param {?} node
     * @return {?}
     */
    NodeNameTooltipPipe.prototype.transform = function (node) {
        if (node) {
            return this.getNodeTooltip(node);
        }
        return null;
    };
    /**
     * @param {?} lines
     * @param {?} line
     * @return {?}
     */
    NodeNameTooltipPipe.prototype.containsLine = function (lines, line) {
        return lines.some(function (item) {
            return item.toLowerCase() === line.toLowerCase();
        });
    };
    /**
     * @param {?} lines
     * @return {?}
     */
    NodeNameTooltipPipe.prototype.removeDuplicateLines = function (lines) {
        var _this = this;
        var /** @type {?} */ reducer = function (acc, line) {
            if (!_this.containsLine(acc, line)) {
                acc.push(line);
            }
            return acc;
        };
        return lines.reduce(reducer, []);
    };
    /**
     * @param {?} node
     * @return {?}
     */
    NodeNameTooltipPipe.prototype.getNodeTooltip = function (node) {
        if (!node || !node.entry) {
            return null;
        }
        var _a = node.entry, properties = _a.properties, name = _a.name;
        var /** @type {?} */ lines = [name];
        if (properties) {
            var title = properties["cm:title"], description = properties["cm:description"];
            if (title && description) {
                lines[0] = title;
                lines[1] = description;
            }
            if (title) {
                lines[1] = title;
            }
            if (description) {
                lines[1] = description;
            }
        }
        return this.removeDuplicateLines(lines).join("\n");
    };
    return NodeNameTooltipPipe;
}());
NodeNameTooltipPipe.decorators = [
    { type: core.Pipe, args: [{
                name: 'adfNodeNameTooltip'
            },] },
];
/**
 * @nocollapse
 */
NodeNameTooltipPipe.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var HighlightTransformService = /** @class */ (function () {
    function HighlightTransformService() {
    }
    /**
     * @param {?} text
     * @param {?} search
     * @param {?=} wrapperClass
     * @return {?}
     */
    HighlightTransformService.prototype.highlight = function (text, search, wrapperClass) {
        if (wrapperClass === void 0) { wrapperClass = 'highlight'; }
        var /** @type {?} */ isMatching = false, /** @type {?} */ result = text;
        if (search && text) {
            var /** @type {?} */ pattern = search.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&');
            pattern = pattern.split(' ').filter(function (t) {
                return t.length > 0;
            }).join('|');
            var /** @type {?} */ regex = new RegExp(pattern, 'gi');
            result = text.replace(regex, function (match) {
                isMatching = true;
                return "<span class=\"" + wrapperClass + "\">" + match + "</span>";
            });
            return { text: result, changed: isMatching };
        }
        else {
            return { text: result, changed: isMatching };
        }
    };
    return HighlightTransformService;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var HighlightPipe = /** @class */ (function () {
    /**
     * @param {?} highlightTransformService
     */
    function HighlightPipe(highlightTransformService) {
        this.highlightTransformService = highlightTransformService;
    }
    /**
     * @param {?} text
     * @param {?} search
     * @return {?}
     */
    HighlightPipe.prototype.transform = function (text, search) {
        var /** @type {?} */ result = this.highlightTransformService.highlight(text, search);
        return result.text;
    };
    return HighlightPipe;
}());
HighlightPipe.decorators = [
    { type: core.Pipe, args: [{
                name: 'highlight'
            },] },
];
/**
 * @nocollapse
 */
HighlightPipe.ctorParameters = function () { return [
    { type: HighlightTransformService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var TimeAgoPipe = /** @class */ (function () {
    function TimeAgoPipe() {
    }
    /**
     * @param {?} value
     * @return {?}
     */
    TimeAgoPipe.prototype.transform = function (value) {
        if (value !== null && value !== undefined) {
            var /** @type {?} */ then = moment(value);
            var /** @type {?} */ diff = moment().diff(then, 'days');
            return diff > 7 ? then.format('DD/MM/YYYY HH:mm') : then.fromNow();
        }
        return '';
    };
    return TimeAgoPipe;
}());
TimeAgoPipe.decorators = [
    { type: core.Pipe, args: [{
                name: 'adfTimeAgo'
            },] },
];
/**
 * @nocollapse
 */
TimeAgoPipe.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var InitialUsernamePipe = /** @class */ (function () {
    /**
     * @param {?} sanitized
     */
    function InitialUsernamePipe(sanitized) {
        this.sanitized = sanitized;
    }
    /**
     * @param {?} user
     * @param {?=} className
     * @param {?=} delimiter
     * @return {?}
     */
    InitialUsernamePipe.prototype.transform = function (user, className, delimiter) {
        if (className === void 0) { className = ''; }
        if (delimiter === void 0) { delimiter = ''; }
        var /** @type {?} */ result = '';
        if (user) {
            var /** @type {?} */ initialResult = this.getInitialUserName(user.firstName, user.lastName, delimiter);
            result = this.sanitized.bypassSecurityTrustHtml("<div id=\"user-initials-image\" class=\"" + className + "\">" + initialResult + "</div>");
        }
        return result;
    };
    /**
     * @param {?} firstName
     * @param {?} lastName
     * @param {?} delimiter
     * @return {?}
     */
    InitialUsernamePipe.prototype.getInitialUserName = function (firstName, lastName, delimiter) {
        firstName = (firstName ? firstName[0] : '');
        lastName = (lastName ? lastName[0] : '');
        return firstName + delimiter + lastName;
    };
    return InitialUsernamePipe;
}());
InitialUsernamePipe.decorators = [
    { type: core.Pipe, args: [{
                name: 'usernameInitials'
            },] },
];
/**
 * @nocollapse
 */
InitialUsernamePipe.ctorParameters = function () { return [
    { type: platformBrowser.DomSanitizer, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var PipeModule = /** @class */ (function () {
    function PipeModule() {
    }
    return PipeModule;
}());
PipeModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule
                ],
                declarations: [
                    FileSizePipe,
                    HighlightPipe,
                    TimeAgoPipe,
                    MimeTypeIconPipe,
                    InitialUsernamePipe,
                    NodeNameTooltipPipe
                ],
                providers: [
                    FileSizePipe,
                    HighlightPipe,
                    TimeAgoPipe,
                    MimeTypeIconPipe,
                    InitialUsernamePipe,
                    NodeNameTooltipPipe
                ],
                exports: [
                    FileSizePipe,
                    HighlightPipe,
                    TimeAgoPipe,
                    MimeTypeIconPipe,
                    InitialUsernamePipe,
                    NodeNameTooltipPipe
                ]
            },] },
];
/**
 * @nocollapse
 */
PipeModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var HighlightDirective = /** @class */ (function () {
    /**
     * @param {?} el
     * @param {?} renderer
     * @param {?} highlightTransformService
     */
    function HighlightDirective(el, renderer, highlightTransformService) {
        this.el = el;
        this.renderer = renderer;
        this.highlightTransformService = highlightTransformService;
        this.selector = '';
        this.search = '';
        this.classToApply = 'adf-highlight';
    }
    /**
     * @param {?=} search
     * @param {?=} selector
     * @param {?=} classToApply
     * @return {?}
     */
    HighlightDirective.prototype.highlight = function (search, selector, classToApply) {
        var _this = this;
        if (search === void 0) { search = this.search; }
        if (selector === void 0) { selector = this.selector; }
        if (classToApply === void 0) { classToApply = this.classToApply; }
        if (search && selector) {
            var /** @type {?} */ elements = this.el.nativeElement.querySelectorAll(selector);
            elements.forEach(function (element) {
                var /** @type {?} */ result = _this.highlightTransformService.highlight(element.innerHTML, search, classToApply);
                if (result.changed) {
                    _this.renderer.setElementProperty(element, 'innerHTML', result.text);
                }
            });
        }
    };
    return HighlightDirective;
}());
HighlightDirective.decorators = [
    { type: core.Directive, args: [{
                selector: '[adf-highlight]'
            },] },
];
/**
 * @nocollapse
 */
HighlightDirective.ctorParameters = function () { return [
    { type: core.ElementRef, },
    { type: core.Renderer, },
    { type: HighlightTransformService, },
]; };
HighlightDirective.propDecorators = {
    'selector': [{ type: core.Input, args: ['adf-highlight-selector',] },],
    'search': [{ type: core.Input, args: ['adf-highlight',] },],
    'classToApply': [{ type: core.Input, args: ['adf-highlight-class',] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var LogoutDirective = /** @class */ (function () {
    /**
     * @param {?} elementRef
     * @param {?} renderer
     * @param {?} router
     * @param {?} auth
     */
    function LogoutDirective(elementRef, renderer, router$$1, auth) {
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.router = router$$1;
        this.auth = auth;
    }
    /**
     * @return {?}
     */
    LogoutDirective.prototype.ngOnInit = function () {
        var _this = this;
        if (this.elementRef.nativeElement) {
            this.renderer.listen(this.elementRef.nativeElement, 'click', function (evt) {
                evt.preventDefault();
                _this.logout();
            });
        }
    };
    /**
     * @return {?}
     */
    LogoutDirective.prototype.logout = function () {
        var _this = this;
        this.auth.logout().subscribe(function () { return _this.redirectToLogin(); }, function () { return _this.redirectToLogin(); });
    };
    /**
     * @return {?}
     */
    LogoutDirective.prototype.redirectToLogin = function () {
        this.router.navigate(['/login']);
    };
    return LogoutDirective;
}());
LogoutDirective.decorators = [
    { type: core.Directive, args: [{
                selector: '[adf-logout]'
            },] },
];
/**
 * @nocollapse
 */
LogoutDirective.ctorParameters = function () { return [
    { type: core.ElementRef, },
    { type: core.Renderer2, },
    { type: router.Router, },
    { type: AuthenticationService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NotificationService = /** @class */ (function () {
    /**
     * @param {?} snackbar
     */
    function NotificationService(snackbar) {
        this.snackbar = snackbar;
    }
    /**
     * @param {?} message
     * @param {?=} millisecondsDuration
     * @return {?}
     */
    NotificationService.prototype.openSnackMessage = function (message, millisecondsDuration) {
        return this.snackbar.open(message, null, {
            duration: millisecondsDuration || NotificationService.DEFAULT_DURATION_MESSAGE
        });
    };
    /**
     * @param {?} message
     * @param {?} action
     * @param {?=} millisecondsDuration
     * @return {?}
     */
    NotificationService.prototype.openSnackMessageAction = function (message, action, millisecondsDuration) {
        return this.snackbar.open(message, action, {
            duration: millisecondsDuration || NotificationService.DEFAULT_DURATION_MESSAGE
        });
    };
    return NotificationService;
}());
NotificationService.DEFAULT_DURATION_MESSAGE = 5000;
NotificationService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
NotificationService.ctorParameters = function () { return [
    { type: material.MatSnackBar, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NodeDeleteDirective = /** @class */ (function () {
    /**
     * @param {?} notification
     * @param {?} alfrescoApiService
     * @param {?} translation
     * @param {?} elementRef
     */
    function NodeDeleteDirective(notification, alfrescoApiService, translation, elementRef) {
        this.notification = notification;
        this.alfrescoApiService = alfrescoApiService;
        this.translation = translation;
        this.elementRef = elementRef;
        this.permanent = false;
        this.delete = new core.EventEmitter();
    }
    /**
     * @return {?}
     */
    NodeDeleteDirective.prototype.onClick = function () {
        this.process(this.selection);
    };
    /**
     * @return {?}
     */
    NodeDeleteDirective.prototype.ngOnChanges = function () {
        if (!this.selection || (this.selection && this.selection.length === 0)) {
            this.setDisableAttribute(true);
        }
        else {
            if (!this.elementRef.nativeElement.hasAttribute('adf-node-permission')) {
                this.setDisableAttribute(false);
            }
        }
    };
    /**
     * @param {?} disable
     * @return {?}
     */
    NodeDeleteDirective.prototype.setDisableAttribute = function (disable) {
        this.elementRef.nativeElement.disabled = disable;
    };
    /**
     * @param {?} selection
     * @return {?}
     */
    NodeDeleteDirective.prototype.process = function (selection) {
        var _this = this;
        if (!selection.length) {
            return;
        }
        var /** @type {?} */ batch = this.getDeleteNodesBatch(selection);
        Observable.Observable.forkJoin.apply(Observable.Observable, batch).subscribe(function (data) {
            var /** @type {?} */ processedItems = _this.processStatus(data);
            _this.notify(processedItems);
            if (processedItems.someSucceeded) {
                _this.delete.emit();
            }
        });
    };
    /**
     * @param {?} selection
     * @return {?}
     */
    NodeDeleteDirective.prototype.getDeleteNodesBatch = function (selection) {
        var _this = this;
        return selection.map(function (node) { return _this.deleteNode(node); });
    };
    /**
     * @param {?} node
     * @return {?}
     */
    NodeDeleteDirective.prototype.deleteNode = function (node) {
        var /** @type {?} */ id = ((node.entry)).nodeId || node.entry.id;
        var /** @type {?} */ promise = this.alfrescoApiService.getInstance().nodes.deleteNode(id, { permanent: this.permanent });
        return Observable.Observable.fromPromise(promise)
            .map(function () { return ({
            entry: node.entry,
            status: 1
        }); })
            .catch(function (error) {
            return Observable.Observable.of({
                entry: node.entry,
                status: 0
            });
        });
    };
    /**
     * @param {?} data
     * @return {?}
     */
    NodeDeleteDirective.prototype.processStatus = function (data) {
        var /** @type {?} */ deleteStatus = {
            success: [],
            failed: [],
            /**
             * @return {?}
             */
            get someFailed() {
                return !!(this.failed.length);
            },
            /**
             * @return {?}
             */
            get someSucceeded() {
                return !!(this.success.length);
            },
            /**
             * @return {?}
             */
            get oneFailed() {
                return this.failed.length === 1;
            },
            /**
             * @return {?}
             */
            get oneSucceeded() {
                return this.success.length === 1;
            },
            /**
             * @return {?}
             */
            get allSucceeded() {
                return this.someSucceeded && !this.someFailed;
            },
            /**
             * @return {?}
             */
            get allFailed() {
                return this.someFailed && !this.someSucceeded;
            }
        };
        return data.reduce(function (acc, next) {
            if (next.status === 1) {
                acc.success.push(next);
            }
            else {
                acc.failed.push(next);
            }
            return acc;
        }, deleteStatus);
    };
    /**
     * @param {?} status
     * @return {?}
     */
    NodeDeleteDirective.prototype.notify = function (status) {
        var _this = this;
        this.getMessage(status).subscribe(function (message) { return _this.notification.openSnackMessage(message); });
    };
    /**
     * @param {?} status
     * @return {?}
     */
    NodeDeleteDirective.prototype.getMessage = function (status) {
        if (status.allFailed && !status.oneFailed) {
            return this.translation.get('CORE.DELETE_NODE.ERROR_PLURAL', { number: status.failed.length });
        }
        if (status.allSucceeded && !status.oneSucceeded) {
            return this.translation.get('CORE.DELETE_NODE.PLURAL', { number: status.success.length });
        }
        if (status.someFailed && status.someSucceeded && !status.oneSucceeded) {
            return this.translation.get('CORE.DELETE_NODE.PARTIAL_PLURAL', {
                success: status.success.length,
                failed: status.failed.length
            });
        }
        if (status.someFailed && status.oneSucceeded) {
            return this.translation.get('CORE.DELETE_NODE.PARTIAL_SINGULAR', {
                success: status.success.length,
                failed: status.failed.length
            });
        }
        if (status.oneFailed && !status.someSucceeded) {
            return this.translation.get('CORE.DELETE_NODE.ERROR_SINGULAR', { name: status.failed[0].entry.name });
        }
        if (status.oneSucceeded && !status.someFailed) {
            return this.translation.get('CORE.DELETE_NODE.SINGULAR', { name: status.success[0].entry.name });
        }
    };
    return NodeDeleteDirective;
}());
NodeDeleteDirective.decorators = [
    { type: core.Directive, args: [{
                selector: '[adf-delete]'
            },] },
];
/**
 * @nocollapse
 */
NodeDeleteDirective.ctorParameters = function () { return [
    { type: NotificationService, },
    { type: AlfrescoApiService, },
    { type: TranslationService, },
    { type: core.ElementRef, },
]; };
NodeDeleteDirective.propDecorators = {
    'selection': [{ type: core.Input, args: ['adf-delete',] },],
    'permanent': [{ type: core.Input },],
    'delete': [{ type: core.Output },],
    'onClick': [{ type: core.HostListener, args: ['click',] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NodeFavoriteDirective = /** @class */ (function () {
    /**
     * @param {?} alfrescoApiService
     */
    function NodeFavoriteDirective(alfrescoApiService) {
        this.alfrescoApiService = alfrescoApiService;
        this.favorites = [];
        this.selection = [];
        this.toggle = new core.EventEmitter();
    }
    /**
     * @return {?}
     */
    NodeFavoriteDirective.prototype.onClick = function () {
        this.toggleFavorite();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    NodeFavoriteDirective.prototype.ngOnChanges = function (changes) {
        if (!changes.selection.currentValue.length) {
            this.favorites = [];
            return;
        }
        this.markFavoritesNodes(changes.selection.currentValue);
    };
    /**
     * @return {?}
     */
    NodeFavoriteDirective.prototype.toggleFavorite = function () {
        var _this = this;
        if (!this.favorites.length) {
            return;
        }
        var /** @type {?} */ every = this.favorites.every(function (selected) { return selected.entry.isFavorite; });
        if (every) {
            var /** @type {?} */ batch = this.favorites.map(function (selected) {
                // shared files have nodeId
                var /** @type {?} */ id = selected.entry.nodeId || selected.entry.id;
                return Observable.Observable.fromPromise(_this.alfrescoApiService.getInstance().core.favoritesApi.removeFavoriteSite('-me-', id));
            });
            Observable.Observable.forkJoin(batch).subscribe(function () {
                _this.favorites.map(function (selected) { return selected.entry.isFavorite = false; });
                _this.toggle.emit();
            });
        }
        if (!every) {
            var /** @type {?} */ notFavorite_1 = this.favorites.filter(function (node) { return !node.entry.isFavorite; });
            var /** @type {?} */ body = notFavorite_1.map(function (node) { return _this.createFavoriteBody(node); });
            Observable.Observable.fromPromise(this.alfrescoApiService.getInstance().core.favoritesApi.addFavorite('-me-', /** @type {?} */ (body)))
                .subscribe(function () {
                notFavorite_1.map(function (selected) { return selected.entry.isFavorite = true; });
                _this.toggle.emit();
            });
        }
    };
    /**
     * @param {?} selection
     * @return {?}
     */
    NodeFavoriteDirective.prototype.markFavoritesNodes = function (selection) {
        var _this = this;
        if (selection.length <= this.favorites.length) {
            var /** @type {?} */ newFavorites = this.reduce(this.favorites, selection);
            this.favorites = newFavorites;
        }
        var /** @type {?} */ result = this.diff(selection, this.favorites);
        var /** @type {?} */ batch = this.getProcessBatch(result);
        Observable.Observable.forkJoin(batch).subscribe(function (data) {
            return (_a = _this.favorites).push.apply(_a, data);
            var _a;
        });
    };
    /**
     * @return {?}
     */
    NodeFavoriteDirective.prototype.hasFavorites = function () {
        if (this.favorites && !this.favorites.length) {
            return false;
        }
        return this.favorites.every(function (selected) { return selected.entry.isFavorite; });
    };
    /**
     * @param {?} selection
     * @return {?}
     */
    NodeFavoriteDirective.prototype.getProcessBatch = function (selection) {
        var _this = this;
        return selection.map(function (selected) { return _this.getFavorite(selected); });
    };
    /**
     * @param {?} selected
     * @return {?}
     */
    NodeFavoriteDirective.prototype.getFavorite = function (selected) {
        var _a = selected.entry, name = _a.name, isFile = _a.isFile, isFolder = _a.isFolder;
        // shared files have nodeId
        var /** @type {?} */ id = ((selected)).entry.nodeId || selected.entry.id;
        var /** @type {?} */ promise = this.alfrescoApiService.getInstance()
            .core.favoritesApi.getFavorite('-me-', id);
        return Observable.Observable.from(promise)
            .map(function () { return ({
            entry: {
                id: id,
                isFolder: isFolder,
                isFile: isFile,
                name: name,
                isFavorite: true
            }
        }); })
            .catch(function () {
            return Observable.Observable.of({
                entry: {
                    id: id,
                    isFolder: isFolder,
                    isFile: isFile,
                    name: name,
                    isFavorite: false
                }
            });
        });
    };
    /**
     * @param {?} node
     * @return {?}
     */
    NodeFavoriteDirective.prototype.createFavoriteBody = function (node) {
        var /** @type {?} */ type = this.getNodeType(node);
        // shared files have nodeId
        var /** @type {?} */ id = node.entry.nodeId || node.entry.id;
        return {
            target: (_a = {}, _a[type] = {
                    guid: id
                }, _a)
        };
        var _a;
    };
    /**
     * @param {?} node
     * @return {?}
     */
    NodeFavoriteDirective.prototype.getNodeType = function (node) {
        // shared could only be files
        if (!node.entry.isFile && !node.entry.isFolder) {
            return 'file';
        }
        return node.entry.isFile ? 'file' : 'folder';
    };
    /**
     * @param {?} list
     * @param {?} patch
     * @return {?}
     */
    NodeFavoriteDirective.prototype.diff = function (list, patch) {
        var /** @type {?} */ ids = patch.map(function (item) { return item.entry.id; });
        return list.filter(function (item) { return ids.includes(item.entry.id) ? null : item; });
    };
    /**
     * @param {?} patch
     * @param {?} comparator
     * @return {?}
     */
    NodeFavoriteDirective.prototype.reduce = function (patch, comparator) {
        var /** @type {?} */ ids = comparator.map(function (item) { return item.entry.id; });
        return patch.filter(function (item) { return ids.includes(item.entry.id) ? item : null; });
    };
    return NodeFavoriteDirective;
}());
NodeFavoriteDirective.decorators = [
    { type: core.Directive, args: [{
                selector: '[adf-node-favorite]',
                exportAs: 'adfFavorite'
            },] },
];
/**
 * @nocollapse
 */
NodeFavoriteDirective.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
]; };
NodeFavoriteDirective.propDecorators = {
    'selection': [{ type: core.Input, args: ['adf-node-favorite',] },],
    'toggle': [{ type: core.Output },],
    'onClick': [{ type: core.HostListener, args: ['click',] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EXTENDIBLE_COMPONENT = new core.InjectionToken('extendible.component');
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NodePermissionDirective = /** @class */ (function () {
    /**
     * @param {?} elementRef
     * @param {?} renderer
     * @param {?} contentService
     * @param {?} changeDetector
     * @param {?=} parentComponent
     */
    function NodePermissionDirective(elementRef, renderer, contentService, changeDetector, parentComponent) {
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.contentService = contentService;
        this.changeDetector = changeDetector;
        this.parentComponent = parentComponent;
        this.permission = null;
        this.nodes = [];
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    NodePermissionDirective.prototype.ngOnChanges = function (changes) {
        if (changes.nodes && !changes.nodes.firstChange) {
            this.updateElement();
        }
    };
    /**
     * Updates disabled state for the decorated elememtn
     *
     * \@memberof NodePermissionDirective
     * @return {?}
     */
    NodePermissionDirective.prototype.updateElement = function () {
        var /** @type {?} */ enable = this.hasPermission(this.nodes, this.permission);
        if (enable) {
            this.enable();
        }
        else {
            this.disable();
        }
        return enable;
    };
    /**
     * @return {?}
     */
    NodePermissionDirective.prototype.enable = function () {
        if (this.parentComponent) {
            this.parentComponent.disabled = false;
            this.changeDetector.detectChanges();
        }
        else {
            this.enableElement();
        }
    };
    /**
     * @return {?}
     */
    NodePermissionDirective.prototype.disable = function () {
        if (this.parentComponent) {
            this.parentComponent.disabled = true;
            this.changeDetector.detectChanges();
        }
        else {
            this.disableElement();
        }
    };
    /**
     * Enables decorated element
     *
     * \@memberof NodePermissionDirective
     * @return {?}
     */
    NodePermissionDirective.prototype.enableElement = function () {
        this.renderer.removeAttribute(this.elementRef.nativeElement, 'disabled');
    };
    /**
     * Disables decorated element
     *
     * \@memberof NodePermissionDirective
     * @return {?}
     */
    NodePermissionDirective.prototype.disableElement = function () {
        this.renderer.setAttribute(this.elementRef.nativeElement, 'disabled', 'true');
    };
    /**
     * Checks whether all nodes have a particular permission
     *
     * \@memberof NodePermissionDirective
     * @param {?} nodes
     * @param {?} permission
     * @return {?}
     */
    NodePermissionDirective.prototype.hasPermission = function (nodes, permission) {
        var _this = this;
        if (nodes && nodes.length > 0) {
            return nodes.every(function (node) { return _this.contentService.hasPermission(node.entry, permission); });
        }
        return false;
    };
    return NodePermissionDirective;
}());
NodePermissionDirective.decorators = [
    { type: core.Directive, args: [{
                selector: '[adf-node-permission]'
            },] },
];
/**
 * @nocollapse
 */
NodePermissionDirective.ctorParameters = function () { return [
    { type: core.ElementRef, },
    { type: core.Renderer2, },
    { type: ContentService, },
    { type: core.ChangeDetectorRef, },
    { type: undefined, decorators: [{ type: core.Host }, { type: core.Optional }, { type: core.Inject, args: [EXTENDIBLE_COMPONENT,] },] },
]; };
NodePermissionDirective.propDecorators = {
    'permission': [{ type: core.Input, args: ['adf-node-permission',] },],
    'nodes': [{ type: core.Input, args: ['adf-nodes',] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NodeRestoreDirective = /** @class */ (function () {
    /**
     * @param {?} alfrescoApiService
     * @param {?} translation
     * @param {?} router
     * @param {?} notification
     */
    function NodeRestoreDirective(alfrescoApiService, translation, router$$1, notification) {
        this.alfrescoApiService = alfrescoApiService;
        this.translation = translation;
        this.router = router$$1;
        this.notification = notification;
        this.location = '';
        this.restore = new core.EventEmitter();
        this.restoreProcessStatus = this.processStatus();
    }
    /**
     * @return {?}
     */
    NodeRestoreDirective.prototype.onClick = function () {
        this.recover(this.selection);
    };
    /**
     * @param {?} selection
     * @return {?}
     */
    NodeRestoreDirective.prototype.recover = function (selection) {
        var _this = this;
        if (!selection.length) {
            return;
        }
        var /** @type {?} */ nodesWithPath = this.getNodesWithPath(selection);
        if (selection.length && !nodesWithPath.length) {
            (_a = this.restoreProcessStatus.fail).push.apply(_a, selection);
            this.restoreNotification();
            this.refresh();
            return;
        }
        this.restoreNodesBatch(nodesWithPath)
            .do(function (restoredNodes) {
            var /** @type {?} */ status = _this.processStatus(restoredNodes);
            (_a = _this.restoreProcessStatus.fail).push.apply(_a, status.fail);
            (_b = _this.restoreProcessStatus.success).push.apply(_b, status.success);
            var _a, _b;
        })
            .mergeMap(function () { return _this.getDeletedNodes(); })
            .subscribe(function (deletedNodesList) {
            var nodelist = deletedNodesList.list.entries;
            var restoreErrorNodes = _this.restoreProcessStatus.fail;
            var /** @type {?} */ selectedNodes = _this.diff(restoreErrorNodes, selection, false);
            var /** @type {?} */ remainingNodes = _this.diff(selectedNodes, nodelist);
            if (!remainingNodes.length) {
                _this.restoreNotification();
                _this.refresh();
            }
            else {
                _this.recover(remainingNodes);
            }
        });
        var _a;
    };
    /**
     * @param {?} batch
     * @return {?}
     */
    NodeRestoreDirective.prototype.restoreNodesBatch = function (batch) {
        var _this = this;
        return Observable.Observable.forkJoin(batch.map(function (node) { return _this.restoreNode(node); }));
    };
    /**
     * @param {?} selection
     * @return {?}
     */
    NodeRestoreDirective.prototype.getNodesWithPath = function (selection) {
        return selection.filter(function (node) { return node.entry.path; });
    };
    /**
     * @return {?}
     */
    NodeRestoreDirective.prototype.getDeletedNodes = function () {
        var /** @type {?} */ promise = this.alfrescoApiService.getInstance()
            .core.nodesApi.getDeletedNodes({ include: ['path'] });
        return Observable.Observable.from(promise);
    };
    /**
     * @param {?} node
     * @return {?}
     */
    NodeRestoreDirective.prototype.restoreNode = function (node) {
        var entry = node.entry;
        var /** @type {?} */ promise = this.alfrescoApiService.getInstance().nodes.restoreNode(entry.id);
        return Observable.Observable.from(promise)
            .map(function () { return ({
            status: 1,
            entry: entry
        }); })
            .catch(function (error) {
            var statusCode = (JSON.parse(error.message)).error.statusCode;
            return Observable.Observable.of({
                status: 0,
                statusCode: statusCode,
                entry: entry
            });
        });
    };
    /**
     * @param {?} path
     * @return {?}
     */
    NodeRestoreDirective.prototype.navigateLocation = function (path) {
        var /** @type {?} */ parent = path.elements[path.elements.length - 1];
        this.router.navigate([this.location, parent.id]);
    };
    /**
     * @param {?} selection
     * @param {?} list
     * @param {?=} fromList
     * @return {?}
     */
    NodeRestoreDirective.prototype.diff = function (selection, list, fromList) {
        if (fromList === void 0) { fromList = true; }
        var /** @type {?} */ ids = selection.map(function (item) { return item.entry.id; });
        return list.filter(function (item) {
            if (fromList) {
                return ids.includes(item.entry.id) ? item : null;
            }
            else {
                return !ids.includes(item.entry.id) ? item : null;
            }
        });
    };
    /**
     * @param {?=} data
     * @return {?}
     */
    NodeRestoreDirective.prototype.processStatus = function (data) {
        if (data === void 0) { data = []; }
        var /** @type {?} */ status = {
            fail: [],
            success: [],
            /**
             * @return {?}
             */
            get someFailed() {
                return !!(this.fail.length);
            },
            /**
             * @return {?}
             */
            get someSucceeded() {
                return !!(this.success.length);
            },
            /**
             * @return {?}
             */
            get oneFailed() {
                return this.fail.length === 1;
            },
            /**
             * @return {?}
             */
            get oneSucceeded() {
                return this.success.length === 1;
            },
            /**
             * @return {?}
             */
            get allSucceeded() {
                return this.someSucceeded && !this.someFailed;
            },
            /**
             * @return {?}
             */
            get allFailed() {
                return this.someFailed && !this.someSucceeded;
            },
            /**
             * @return {?}
             */
            reset: function () {
                this.fail = [];
                this.success = [];
            }
        };
        return data.reduce(function (acc, node) {
            if (node.status) {
                acc.success.push(node);
            }
            else {
                acc.fail.push(node);
            }
            return acc;
        }, status);
    };
    /**
     * @return {?}
     */
    NodeRestoreDirective.prototype.getRestoreMessage = function () {
        var status = this.restoreProcessStatus;
        if (status.someFailed && !status.oneFailed) {
            return this.translation.get('CORE.RESTORE_NODE.PARTIAL_PLURAL', {
                number: status.fail.length
            });
        }
        if (status.oneFailed && status.fail[0].statusCode) {
            if (status.fail[0].statusCode === 409) {
                return this.translation.get('CORE.RESTORE_NODE.NODE_EXISTS', {
                    name: status.fail[0].entry.name
                });
            }
            else {
                return this.translation.get('CORE.RESTORE_NODE.GENERIC', {
                    name: status.fail[0].entry.name
                });
            }
        }
        if (status.oneFailed && !status.fail[0].statusCode) {
            return this.translation.get('CORE.RESTORE_NODE.LOCATION_MISSING', {
                name: status.fail[0].entry.name
            });
        }
        if (status.allSucceeded && !status.oneSucceeded) {
            return this.translation.get('CORE.RESTORE_NODE.PLURAL');
        }
        if (status.allSucceeded && status.oneSucceeded) {
            return this.translation.get('CORE.RESTORE_NODE.SINGULAR', {
                name: status.success[0].entry.name
            });
        }
    };
    /**
     * @return {?}
     */
    NodeRestoreDirective.prototype.restoreNotification = function () {
        var _this = this;
        var /** @type {?} */ status = Object.assign({}, this.restoreProcessStatus);
        Observable.Observable.zip(this.getRestoreMessage(), this.translation.get('CORE.RESTORE_NODE.VIEW')).subscribe(function (messages) {
            var message = messages[0], actionLabel = messages[1];
            var /** @type {?} */ action = (status.oneSucceeded && !status.someFailed) ? actionLabel : '';
            _this.notification.openSnackMessageAction(message, action)
                .onAction()
                .subscribe(function () { return _this.navigateLocation(status.success[0].entry.path); });
        });
    };
    /**
     * @return {?}
     */
    NodeRestoreDirective.prototype.refresh = function () {
        this.restoreProcessStatus.reset();
        this.selection = [];
        this.restore.emit();
    };
    return NodeRestoreDirective;
}());
NodeRestoreDirective.decorators = [
    { type: core.Directive, args: [{
                selector: '[adf-restore]'
            },] },
];
/**
 * @nocollapse
 */
NodeRestoreDirective.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: TranslationService, },
    { type: router.Router, },
    { type: NotificationService, },
]; };
NodeRestoreDirective.propDecorators = {
    'selection': [{ type: core.Input, args: ['adf-restore',] },],
    'location': [{ type: core.Input },],
    'restore': [{ type: core.Output },],
    'onClick': [{ type: core.HostListener, args: ['click',] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FileUtils = /** @class */ (function () {
    function FileUtils() {
    }
    /**
     * @param {?} folder
     * @return {?}
     */
    FileUtils.flattern = function (folder) {
        var /** @type {?} */ reader = folder.createReader();
        var /** @type {?} */ files = [];
        return new Promise(function (resolve) {
            var /** @type {?} */ iterations = [];
            (function traverse() {
                reader.readEntries(function (entries) {
                    if (!entries.length) {
                        Promise.all(iterations).then(function (result) { return resolve(files); });
                    }
                    else {
                        iterations.push(Promise.all(entries.map(function (entry) {
                            if (entry.isFile) {
                                return new Promise(function (resolveFile) {
                                    entry.file(function (f) {
                                        files.push({
                                            entry: entry,
                                            file: f,
                                            relativeFolder: entry.fullPath.replace(/\/[^\/]*$/, '')
                                        });
                                        resolveFile();
                                    });
                                });
                            }
                            else {
                                return FileUtils.flattern(entry).then(function (result) {
                                    files.push.apply(files, result);
                                });
                            }
                        })));
                        // Try calling traverse() again for the same dir, according to spec
                        traverse();
                    }
                });
            })();
        });
    };
    /**
     * @param {?} fileList
     * @return {?}
     */
    FileUtils.toFileArray = function (fileList) {
        var /** @type {?} */ result = [];
        if (fileList && fileList.length > 0) {
            for (var /** @type {?} */ i = 0; i < fileList.length; i++) {
                result.push(fileList[i]);
            }
        }
        return result;
    };
    return FileUtils;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var UploadDirective = /** @class */ (function () {
    /**
     * @param {?} el
     * @param {?} renderer
     * @param {?} ngZone
     */
    function UploadDirective(el, renderer, ngZone) {
        this.el = el;
        this.renderer = renderer;
        this.ngZone = ngZone;
        this.enabled = true;
        this.mode = ['drop']; // click|drop
        this.isDragging = false;
        this.cssClassName = 'adf-upload__dragging';
        this.element = el.nativeElement;
    }
    /**
     * @return {?}
     */
    UploadDirective.prototype.ngOnInit = function () {
        var _this = this;
        if (this.isClickMode() && this.renderer) {
            this.upload = /** @type {?} */ (this.renderer.createElement(this.el.nativeElement.parentNode, 'input'));
            this.upload.type = 'file';
            this.upload.style.display = 'none';
            this.upload.addEventListener('change', function (e) { return _this.onSelectFiles(e); });
            if (this.multiple) {
                this.upload.setAttribute('multiple', '');
            }
            if (this.accept) {
                this.upload.setAttribute('accept', this.accept);
            }
            if (this.directory) {
                this.upload.setAttribute('webkitdirectory', '');
            }
        }
        if (this.isDropMode()) {
            this.ngZone.runOutsideAngular(function () {
                _this.element.addEventListener('dragenter', _this.onDragEnter.bind(_this));
                _this.element.addEventListener('dragover', _this.onDragOver.bind(_this));
                _this.element.addEventListener('dragleave', _this.onDragLeave.bind(_this));
                _this.element.addEventListener('drop', _this.onDrop.bind(_this));
            });
        }
    };
    /**
     * @return {?}
     */
    UploadDirective.prototype.ngOnDestroy = function () {
        this.element.removeEventListener('dragenter', this.onDragEnter);
        this.element.removeEventListener('dragover', this.onDragOver);
        this.element.removeEventListener('dragleave', this.onDragLeave);
        this.element.removeEventListener('drop', this.onDrop);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    UploadDirective.prototype.onClick = function (event) {
        if (this.isClickMode() && this.upload) {
            event.preventDefault();
            this.upload.click();
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    UploadDirective.prototype.onDragEnter = function (event) {
        if (this.isDropMode()) {
            this.element.classList.add(this.cssClassName);
            this.isDragging = true;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    UploadDirective.prototype.onDragOver = function (event) {
        event.preventDefault();
        if (this.isDropMode()) {
            this.element.classList.add(this.cssClassName);
            this.isDragging = true;
        }
        return false;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    UploadDirective.prototype.onDragLeave = function (event) {
        if (this.isDropMode()) {
            this.element.classList.remove(this.cssClassName);
            this.isDragging = false;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    UploadDirective.prototype.onDrop = function (event) {
        var _this = this;
        if (this.isDropMode()) {
            event.stopPropagation();
            event.preventDefault();
            this.element.classList.remove(this.cssClassName);
            this.isDragging = false;
            var /** @type {?} */ dataTranfer = this.getDataTransfer(event);
            if (dataTranfer) {
                this.getFilesDropped(dataTranfer).then(function (files) {
                    _this.onUploadFiles(files);
                });
            }
        }
        return false;
    };
    /**
     * @param {?} files
     * @return {?}
     */
    UploadDirective.prototype.onUploadFiles = function (files) {
        if (this.enabled && files.length > 0) {
            var /** @type {?} */ e = new CustomEvent('upload-files', {
                detail: {
                    sender: this,
                    data: this.data,
                    files: files
                },
                bubbles: true
            });
            this.el.nativeElement.dispatchEvent(e);
        }
    };
    /**
     * @param {?} mode
     * @return {?}
     */
    UploadDirective.prototype.hasMode = function (mode) {
        return this.enabled && mode && this.mode && this.mode.indexOf(mode) > -1;
    };
    /**
     * @return {?}
     */
    UploadDirective.prototype.isDropMode = function () {
        return this.hasMode('drop');
    };
    /**
     * @return {?}
     */
    UploadDirective.prototype.isClickMode = function () {
        return this.hasMode('click');
    };
    /**
     * @param {?} event
     * @return {?}
     */
    UploadDirective.prototype.getDataTransfer = function (event) {
        if (event && event.dataTransfer) {
            return event.dataTransfer;
        }
        if (event && event.originalEvent && event.originalEvent.dataTransfer) {
            return event.originalEvent.dataTransfer;
        }
        return null;
    };
    /**
     * Extract files from the DataTransfer object used to hold the data that is being dragged during a drag and drop operation.
     * @param {?} dataTransfer DataTransfer object
     * @return {?}
     */
    UploadDirective.prototype.getFilesDropped = function (dataTransfer) {
        return new Promise(function (resolve) {
            var /** @type {?} */ iterations = [];
            if (dataTransfer) {
                var /** @type {?} */ items = dataTransfer.items;
                if (items) {
                    var _loop_1 = function (i) {
                        if (typeof items[i].webkitGetAsEntry !== 'undefined') {
                            var /** @type {?} */ item_1 = items[i].webkitGetAsEntry();
                            if (item_1) {
                                if (item_1.isFile) {
                                    iterations.push(Promise.resolve(/** @type {?} */ ({
                                        entry: item_1,
                                        file: items[i].getAsFile(),
                                        relativeFolder: '/'
                                    })));
                                }
                                else if (item_1.isDirectory) {
                                    iterations.push(new Promise(function (resolveFolder) {
                                        FileUtils.flattern(item_1).then(function (files) { return resolveFolder(files); });
                                    }));
                                }
                            }
                        }
                        else {
                            iterations.push(Promise.resolve(/** @type {?} */ ({
                                entry: null,
                                file: items[i].getAsFile(),
                                relativeFolder: '/'
                            })));
                        }
                    };
                    for (var /** @type {?} */ i = 0; i < items.length; i++) {
                        _loop_1(/** @type {?} */ i);
                    }
                }
                else {
                    // safari or FF
                    var /** @type {?} */ files = FileUtils
                        .toFileArray(dataTransfer.files)
                        .map(function (file) { /** @type {?} */ return ({
                        entry: null,
                        file: file,
                        relativeFolder: '/'
                    }); });
                    iterations.push(Promise.resolve(files));
                }
            }
            Promise.all(iterations).then(function (result) {
                resolve(result.reduce(function (a, b) { return a.concat(b); }, []));
            });
        });
    };
    /**
     * Invoked when user selects files or folders by means of File Dialog
     * @param {?} e DOM event
     * @return {?}
     */
    UploadDirective.prototype.onSelectFiles = function (e) {
        if (this.isClickMode()) {
            var /** @type {?} */ input = ((e.currentTarget));
            var /** @type {?} */ files = FileUtils.toFileArray(input.files);
            this.onUploadFiles(files.map(function (file) { /** @type {?} */ return ({
                entry: null,
                file: file,
                relativeFolder: '/'
            }); }));
            e.target.value = '';
        }
    };
    return UploadDirective;
}());
UploadDirective.decorators = [
    { type: core.Directive, args: [{
                selector: '[adf-upload]'
            },] },
];
/**
 * @nocollapse
 */
UploadDirective.ctorParameters = function () { return [
    { type: core.ElementRef, },
    { type: core.Renderer, },
    { type: core.NgZone, },
]; };
UploadDirective.propDecorators = {
    'enabled': [{ type: core.Input, args: ['adf-upload',] },],
    'data': [{ type: core.Input, args: ['adf-upload-data',] },],
    'mode': [{ type: core.Input },],
    'multiple': [{ type: core.Input },],
    'accept': [{ type: core.Input },],
    'directory': [{ type: core.Input },],
    'onClick': [{ type: core.HostListener, args: ['click', ['$event'],] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DirectiveModule = /** @class */ (function () {
    function DirectiveModule() {
    }
    return DirectiveModule;
}());
DirectiveModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule,
                    MaterialModule
                ],
                declarations: [
                    HighlightDirective,
                    LogoutDirective,
                    NodeDeleteDirective,
                    NodeFavoriteDirective,
                    NodePermissionDirective,
                    NodeRestoreDirective,
                    UploadDirective
                ],
                exports: [
                    HighlightDirective,
                    LogoutDirective,
                    NodeDeleteDirective,
                    NodeFavoriteDirective,
                    NodePermissionDirective,
                    NodeRestoreDirective,
                    UploadDirective
                ]
            },] },
];
/**
 * @nocollapse
 */
DirectiveModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DataTableCellComponent = /** @class */ (function () {
    function DataTableCellComponent() {
    }
    /**
     * @return {?}
     */
    DataTableCellComponent.prototype.ngOnInit = function () {
        if (!this.value && this.column && this.column.key && this.row && this.data) {
            this.value = this.data.getValue(this.row, this.column);
            if (!this.tooltip) {
                this.tooltip = this.value;
            }
        }
    };
    return DataTableCellComponent;
}());
DataTableCellComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-datatable-cell',
                changeDetection: core.ChangeDetectionStrategy.OnPush,
                template: "\n        <ng-container>\n            <span [title]=\"tooltip\" class=\"adf-datatable-cell-value\">{{value}}</span>\n        </ng-container>",
                encapsulation: core.ViewEncapsulation.None,
                host: { class: 'adf-datatable-cell' }
            },] },
];
/**
 * @nocollapse
 */
DataTableCellComponent.ctorParameters = function () { return []; };
DataTableCellComponent.propDecorators = {
    'data': [{ type: core.Input },],
    'column': [{ type: core.Input },],
    'row': [{ type: core.Input },],
    'value': [{ type: core.Input },],
    'tooltip': [{ type: core.Input },],
};
/**
 * Base cancellable event implementation
 */
var BaseEvent = /** @class */ (function () {
    function BaseEvent() {
        this.defaultPrevented = false;
    }
    return BaseEvent;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * Base container for any event which takes place in the DOM
 */
var BaseUIEvent = /** @class */ (function (_super) {
    __extends(BaseUIEvent, _super);
    function BaseUIEvent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return BaseUIEvent;
}(BaseEvent));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FileUploadStatus = {};
FileUploadStatus.Pending = 0;
FileUploadStatus.Complete = 1;
FileUploadStatus.Starting = 2;
FileUploadStatus.Progress = 3;
FileUploadStatus.Cancelled = 4;
FileUploadStatus.Aborted = 5;
FileUploadStatus.Error = 6;
FileUploadStatus.Deleted = 7;
FileUploadStatus[FileUploadStatus.Pending] = "Pending";
FileUploadStatus[FileUploadStatus.Complete] = "Complete";
FileUploadStatus[FileUploadStatus.Starting] = "Starting";
FileUploadStatus[FileUploadStatus.Progress] = "Progress";
FileUploadStatus[FileUploadStatus.Cancelled] = "Cancelled";
FileUploadStatus[FileUploadStatus.Aborted] = "Aborted";
FileUploadStatus[FileUploadStatus.Error] = "Error";
FileUploadStatus[FileUploadStatus.Deleted] = "Deleted";
var FileModel = /** @class */ (function () {
    /**
     * @param {?} file
     * @param {?=} options
     */
    function FileModel(file, options) {
        this.status = FileUploadStatus.Pending;
        this.file = file;
        this.id = this.generateId();
        this.name = file.name;
        this.size = file.size;
        this.data = null;
        this.progress = {
            loaded: 0,
            total: 0,
            percent: 0
        };
        this.options = Object.assign({}, {
            newVersion: false
        }, options);
    }
    /**
     * @return {?}
     */
    FileModel.prototype.generateId = function () {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            var /** @type {?} */ r = Math.random() * 16 | 0, /** @type {?} */ v = c === 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    };
    Object.defineProperty(FileModel.prototype, "extension", {
        /**
         * @return {?}
         */
        get: function () {
            return this.name.slice((Math.max(0, this.name.lastIndexOf('.')) || Infinity) + 1);
        },
        enumerable: true,
        configurable: true
    });
    return FileModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FileUploadEvent = /** @class */ (function () {
    /**
     * @param {?} file
     * @param {?=} status
     * @param {?=} error
     */
    function FileUploadEvent(file, status, error) {
        if (status === void 0) { status = FileUploadStatus.Pending; }
        if (error === void 0) { error = null; }
        this.file = file;
        this.status = status;
        this.error = error;
    }
    return FileUploadEvent;
}());
var FileUploadCompleteEvent = /** @class */ (function (_super) {
    __extends(FileUploadCompleteEvent, _super);
    /**
     * @param {?} file
     * @param {?=} totalComplete
     * @param {?=} data
     * @param {?=} totalAborted
     */
    function FileUploadCompleteEvent(file, totalComplete, data, totalAborted) {
        if (totalComplete === void 0) { totalComplete = 0; }
        if (totalAborted === void 0) { totalAborted = 0; }
        var _this = _super.call(this, file, FileUploadStatus.Complete) || this;
        _this.totalComplete = totalComplete;
        _this.data = data;
        _this.totalAborted = totalAborted;
        return _this;
    }
    return FileUploadCompleteEvent;
}(FileUploadEvent));
var FileUploadDeleteEvent = /** @class */ (function (_super) {
    __extends(FileUploadDeleteEvent, _super);
    /**
     * @param {?} file
     * @param {?=} totalComplete
     */
    function FileUploadDeleteEvent(file, totalComplete) {
        if (totalComplete === void 0) { totalComplete = 0; }
        var _this = _super.call(this, file, FileUploadStatus.Deleted) || this;
        _this.totalComplete = totalComplete;
        return _this;
    }
    return FileUploadDeleteEvent;
}(FileUploadEvent));
var FileUploadErrorEvent = /** @class */ (function (_super) {
    __extends(FileUploadErrorEvent, _super);
    /**
     * @param {?} file
     * @param {?} error
     * @param {?=} totalError
     */
    function FileUploadErrorEvent(file, error, totalError) {
        if (totalError === void 0) { totalError = 0; }
        var _this = _super.call(this, file, FileUploadStatus.Error) || this;
        _this.error = error;
        _this.totalError = totalError;
        return _this;
    }
    return FileUploadErrorEvent;
}(FileUploadEvent));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DataRowEvent = /** @class */ (function (_super) {
    __extends(DataRowEvent, _super);
    /**
     * @param {?} value
     * @param {?} domEvent
     * @param {?=} sender
     */
    function DataRowEvent(value, domEvent, sender) {
        var _this = _super.call(this) || this;
        _this.value = value;
        _this.event = domEvent;
        _this.sender = sender;
        return _this;
    }
    return DataRowEvent;
}(BaseUIEvent));
var DataSorting = /** @class */ (function () {
    /**
     * @param {?=} key
     * @param {?=} direction
     */
    function DataSorting(key, direction) {
        this.key = key;
        this.direction = direction;
    }
    return DataSorting;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ObjectDataRow = /** @class */ (function () {
    /**
     * @param {?} obj
     * @param {?=} isSelected
     */
    function ObjectDataRow(obj, isSelected) {
        if (isSelected === void 0) { isSelected = false; }
        this.obj = obj;
        this.isSelected = isSelected;
        if (!obj) {
            throw new Error('Object source not found');
        }
    }
    /**
     * @param {?} key
     * @return {?}
     */
    ObjectDataRow.prototype.getValue = function (key) {
        return ObjectUtils.getValue(this.obj, key);
    };
    /**
     * @param {?} key
     * @return {?}
     */
    ObjectDataRow.prototype.hasValue = function (key) {
        return this.getValue(key) !== undefined;
    };
    return ObjectDataRow;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ObjectDataColumn = /** @class */ (function () {
    /**
     * @param {?} obj
     */
    function ObjectDataColumn(obj) {
        this.key = obj.key;
        this.type = obj.type || 'text';
        this.format = obj.format;
        this.sortable = obj.sortable;
        this.title = obj.title;
        this.srTitle = obj.srTitle;
        this.cssClass = obj.cssClass;
        this.template = obj.template;
    }
    return ObjectDataColumn;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ObjectDataTableAdapter = /** @class */ (function () {
    /**
     * @param {?=} data
     * @param {?=} schema
     */
    function ObjectDataTableAdapter(data, schema) {
        if (data === void 0) { data = []; }
        if (schema === void 0) { schema = []; }
        this._rows = [];
        this._columns = [];
        if (data && data.length > 0) {
            this._rows = data.map(function (item) {
                return new ObjectDataRow(item);
            });
        }
        if (schema && schema.length > 0) {
            this._columns = schema.map(function (item) {
                return new ObjectDataColumn(item);
            });
            // Sort by first sortable or just first column
            var sortable = this._columns.filter(function (c) { return c.sortable; });
            if (sortable.length > 0) {
                this.sort(sortable[0].key, 'asc');
            }
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    ObjectDataTableAdapter.generateSchema = function (data) {
        var /** @type {?} */ schema = [];
        if (data && data.length) {
            var /** @type {?} */ rowToExaminate = data[0];
            if (typeof rowToExaminate === 'object') {
                for (var /** @type {?} */ key in rowToExaminate) {
                    if (rowToExaminate.hasOwnProperty(key)) {
                        schema.push({
                            type: 'text',
                            key: key,
                            title: key,
                            sortable: false
                        });
                    }
                }
            }
        }
        return schema;
    };
    /**
     * @return {?}
     */
    ObjectDataTableAdapter.prototype.getRows = function () {
        return this._rows;
    };
    /**
     * @param {?} rows
     * @return {?}
     */
    ObjectDataTableAdapter.prototype.setRows = function (rows) {
        this._rows = rows || [];
        this.sort();
    };
    /**
     * @return {?}
     */
    ObjectDataTableAdapter.prototype.getColumns = function () {
        return this._columns;
    };
    /**
     * @param {?} columns
     * @return {?}
     */
    ObjectDataTableAdapter.prototype.setColumns = function (columns) {
        this._columns = columns || [];
    };
    /**
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    ObjectDataTableAdapter.prototype.getValue = function (row, col) {
        if (!row) {
            throw new Error('Row not found');
        }
        if (!col) {
            throw new Error('Column not found');
        }
        var /** @type {?} */ value = row.getValue(col.key);
        if (col.type === 'date') {
            try {
                return this.formatDate(col, value);
            }
            catch (err) {
                console.error("Error parsing date " + value + " to format " + col.format);
            }
        }
        if (col.type === 'icon') {
            var /** @type {?} */ icon = row.getValue(col.key);
            return icon;
        }
        return value;
    };
    /**
     * @param {?} col
     * @param {?} value
     * @return {?}
     */
    ObjectDataTableAdapter.prototype.formatDate = function (col, value) {
        if (col.type === 'date') {
            var /** @type {?} */ format = col.format || 'medium';
            if (format === 'timeAgo') {
                var /** @type {?} */ timeAgoPipe = new TimeAgoPipe();
                return timeAgoPipe.transform(value);
            }
            else {
                var /** @type {?} */ datePipe = new common.DatePipe('en-US');
                return datePipe.transform(value, format);
            }
        }
        return value;
    };
    /**
     * @return {?}
     */
    ObjectDataTableAdapter.prototype.getSorting = function () {
        return this._sorting;
    };
    /**
     * @param {?} sorting
     * @return {?}
     */
    ObjectDataTableAdapter.prototype.setSorting = function (sorting) {
        this._sorting = sorting;
        if (sorting && sorting.key) {
            this._rows.sort(function (a, b) {
                var /** @type {?} */ left = a.getValue(sorting.key);
                if (left) {
                    left = (left instanceof Date) ? left.valueOf().toString() : left.toString();
                }
                else {
                    left = '';
                }
                var /** @type {?} */ right = b.getValue(sorting.key);
                if (right) {
                    right = (right instanceof Date) ? right.valueOf().toString() : right.toString();
                }
                else {
                    right = '';
                }
                return sorting.direction === 'asc'
                    ? left.localeCompare(right)
                    : right.localeCompare(left);
            });
        }
    };
    /**
     * @param {?=} key
     * @param {?=} direction
     * @return {?}
     */
    ObjectDataTableAdapter.prototype.sort = function (key, direction) {
        var /** @type {?} */ sorting = this._sorting || new DataSorting();
        if (key) {
            sorting.key = key;
            sorting.direction = direction || 'asc';
        }
        this.setSorting(sorting);
    };
    return ObjectDataTableAdapter;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DataCellEventModel = /** @class */ (function () {
    /**
     * @param {?} row
     * @param {?} col
     * @param {?} actions
     */
    function DataCellEventModel(row, col, actions) {
        this.row = row;
        this.col = col;
        this.actions = actions || [];
    }
    return DataCellEventModel;
}());
var DataCellEvent = /** @class */ (function (_super) {
    __extends(DataCellEvent, _super);
    /**
     * @param {?} row
     * @param {?} col
     * @param {?} actions
     */
    function DataCellEvent(row, col, actions) {
        var _this = _super.call(this) || this;
        _this.value = new DataCellEventModel(row, col, actions);
        return _this;
    }
    return DataCellEvent;
}(BaseEvent));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DataRowActionEvent = /** @class */ (function (_super) {
    __extends(DataRowActionEvent, _super);
    /**
     * @param {?} row
     * @param {?} action
     */
    function DataRowActionEvent(row, action) {
        var _this = _super.call(this) || this;
        _this.value = new DataRowActionModel(row, action);
        return _this;
    }
    Object.defineProperty(DataRowActionEvent.prototype, "args", {
        /**
         * @return {?}
         */
        get: function () {
            return this.value;
        },
        enumerable: true,
        configurable: true
    });
    return DataRowActionEvent;
}(BaseEvent));
var DataRowActionModel = /** @class */ (function () {
    /**
     * @param {?} row
     * @param {?} action
     */
    function DataRowActionModel(row, action) {
        this.row = row;
        this.action = action;
    }
    return DataRowActionModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DataTableComponent = /** @class */ (function () {
    /**
     * @param {?} elementRef
     * @param {?} differs
     */
    function DataTableComponent(elementRef, differs) {
        var _this = this;
        this.elementRef = elementRef;
        this.rows = [];
        this.selectionMode = 'single'; // none|single|multiple
        this.multiselect = false;
        this.actions = false;
        this.actionsPosition = 'right'; // left|right
        this.contextMenu = false;
        this.allowDropFiles = false;
        this.rowStyleClass = '';
        this.showHeader = true;
        this.rowClick = new core.EventEmitter();
        this.rowDblClick = new core.EventEmitter();
        this.showRowContextMenu = new core.EventEmitter();
        this.showRowActionsMenu = new core.EventEmitter();
        this.executeRowAction = new core.EventEmitter();
        this.loading = false;
        this.noPermission = false;
        this.isSelectAllChecked = false;
        this.selection = new Array();
        this.schema = [];
        this.rowMenuCache = {};
        if (differs) {
            this.differ = differs.find([]).create(null);
        }
        this.click$ = new Observable.Observable(function (observer) { return _this.clickObserver = observer; }).share();
    }
    /**
     * @return {?}
     */
    DataTableComponent.prototype.ngAfterContentInit = function () {
        this.setTableSchema();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    DataTableComponent.prototype.ngOnChanges = function (changes) {
        this.initAndSubscribeClickStream();
        if (this.isPropertyChanged(changes['data'])) {
            if (this.isTableEmpty()) {
                this.initTable();
            }
            else {
                this.data = changes['data'].currentValue;
            }
            return;
        }
        if (this.isPropertyChanged(changes['rows'])) {
            if (this.isTableEmpty()) {
                this.initTable();
            }
            else {
                this.setTableRows(changes['rows'].currentValue);
            }
            return;
        }
        if (changes.selectionMode && !changes.selectionMode.isFirstChange()) {
            this.resetSelection();
            this.emitRowSelectionEvent('row-unselect', null);
        }
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.ngDoCheck = function () {
        var /** @type {?} */ changes = this.differ.diff(this.rows);
        if (changes) {
            this.setTableRows(this.rows);
        }
    };
    /**
     * @param {?} property
     * @return {?}
     */
    DataTableComponent.prototype.isPropertyChanged = function (property) {
        return property && property.currentValue ? true : false;
    };
    /**
     * @param {?} rows
     * @return {?}
     */
    DataTableComponent.prototype.convertToRowsData = function (rows) {
        return rows.map(function (row) { return new ObjectDataRow(row); });
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.initAndSubscribeClickStream = function () {
        var _this = this;
        this.unsubscribeClickStream();
        var /** @type {?} */ singleClickStream = this.click$
            .buffer(this.click$.debounceTime(250))
            .map(function (list) { return list; })
            .filter(function (x) { return x.length === 1; });
        this.singleClickStreamSub = singleClickStream.subscribe(function (obj) {
            var /** @type {?} */ event = obj[0];
            _this.rowClick.emit(event);
            if (!event.defaultPrevented) {
                _this.elementRef.nativeElement.dispatchEvent(new CustomEvent('row-click', {
                    detail: event,
                    bubbles: true
                }));
            }
        });
        var /** @type {?} */ multiClickStream = this.click$
            .buffer(this.click$.debounceTime(250))
            .map(function (list) { return list; })
            .filter(function (x) { return x.length >= 2; });
        this.multiClickStreamSub = multiClickStream.subscribe(function (obj) {
            var /** @type {?} */ event = obj[0];
            _this.rowDblClick.emit(event);
            if (!event.defaultPrevented) {
                _this.elementRef.nativeElement.dispatchEvent(new CustomEvent('row-dblclick', {
                    detail: event,
                    bubbles: true
                }));
            }
        });
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.unsubscribeClickStream = function () {
        if (this.singleClickStreamSub) {
            this.singleClickStreamSub.unsubscribe();
        }
        if (this.multiClickStreamSub) {
            this.multiClickStreamSub.unsubscribe();
        }
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.initTable = function () {
        this.data = new ObjectDataTableAdapter(this.rows, this.schema);
        this.rowMenuCache = {};
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.isTableEmpty = function () {
        return this.data === undefined || this.data === null;
    };
    /**
     * @param {?} rows
     * @return {?}
     */
    DataTableComponent.prototype.setTableRows = function (rows) {
        if (this.data) {
            this.data.setRows(this.convertToRowsData(rows));
        }
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.setTableSchema = function () {
        if (this.columnList && this.columnList.columns) {
            this.schema = this.columnList.columns.map(function (c) { /** @type {?} */ return (c); });
        }
        if (this.data && this.schema && this.schema.length > 0) {
            this.data.setColumns(this.schema);
        }
    };
    /**
     * @param {?} row
     * @param {?} e
     * @return {?}
     */
    DataTableComponent.prototype.onRowClick = function (row, e) {
        if (e) {
            e.preventDefault();
        }
        if (row) {
            if (this.data) {
                if (this.isSingleSelectionMode()) {
                    this.resetSelection();
                    this.selectRow(row, true);
                    this.emitRowSelectionEvent('row-select', row);
                }
                if (this.isMultiSelectionMode()) {
                    var /** @type {?} */ modifier = e && (e.metaKey || e.ctrlKey);
                    var /** @type {?} */ newValue = modifier ? !row.isSelected : true;
                    var /** @type {?} */ domEventName = newValue ? 'row-select' : 'row-unselect';
                    if (!modifier) {
                        this.resetSelection();
                    }
                    this.selectRow(row, newValue);
                    this.emitRowSelectionEvent(domEventName, row);
                }
            }
            var /** @type {?} */ dataRowEvent = new DataRowEvent(row, e, this);
            this.clickObserver.next(dataRowEvent);
        }
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.resetSelection = function () {
        if (this.data) {
            var /** @type {?} */ rows = this.data.getRows();
            if (rows && rows.length > 0) {
                rows.forEach(function (r) { return r.isSelected = false; });
            }
            this.selection.splice(0);
        }
        this.isSelectAllChecked = false;
    };
    /**
     * @param {?} row
     * @param {?=} e
     * @return {?}
     */
    DataTableComponent.prototype.onRowDblClick = function (row, e) {
        if (e) {
            e.preventDefault();
        }
        var /** @type {?} */ dataRowEvent = new DataRowEvent(row, e, this);
        this.clickObserver.next(dataRowEvent);
    };
    /**
     * @param {?} row
     * @param {?} e
     * @return {?}
     */
    DataTableComponent.prototype.onRowKeyUp = function (row, e) {
        var /** @type {?} */ event = new CustomEvent('row-keyup', {
            detail: {
                row: row,
                keyboardEvent: e,
                sender: this
            },
            bubbles: true
        });
        this.elementRef.nativeElement.dispatchEvent(event);
        if (event.defaultPrevented) {
            e.preventDefault();
        }
        else {
            if (e.key === 'Enter') {
                this.onKeyboardNavigate(row, e);
            }
        }
    };
    /**
     * @param {?} row
     * @param {?} e
     * @return {?}
     */
    DataTableComponent.prototype.onKeyboardNavigate = function (row, e) {
        if (e) {
            e.preventDefault();
        }
        var /** @type {?} */ event = new DataRowEvent(row, e, this);
        this.rowDblClick.emit(event);
        this.elementRef.nativeElement.dispatchEvent(new CustomEvent('row-dblclick', {
            detail: event,
            bubbles: true
        }));
    };
    /**
     * @param {?} column
     * @return {?}
     */
    DataTableComponent.prototype.onColumnHeaderClick = function (column) {
        if (column && column.sortable) {
            var /** @type {?} */ current = this.data.getSorting();
            var /** @type {?} */ newDirection = 'asc';
            if (current && column.key === current.key) {
                newDirection = current.direction === 'asc' ? 'desc' : 'asc';
            }
            this.data.setSorting(new DataSorting(column.key, newDirection));
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    DataTableComponent.prototype.onSelectAllClick = function (e) {
        this.isSelectAllChecked = e.checked;
        if (this.multiselect) {
            var /** @type {?} */ rows = this.data.getRows();
            if (rows && rows.length > 0) {
                for (var /** @type {?} */ i = 0; i < rows.length; i++) {
                    this.selectRow(rows[i], e.checked);
                }
            }
            var /** @type {?} */ domEventName = e.checked ? 'row-select' : 'row-unselect';
            var /** @type {?} */ row = this.selection.length > 0 ? this.selection[0] : null;
            this.emitRowSelectionEvent(domEventName, row);
        }
    };
    /**
     * @param {?} row
     * @param {?} event
     * @return {?}
     */
    DataTableComponent.prototype.onCheckboxChange = function (row, event) {
        var /** @type {?} */ newValue = event.checked;
        this.selectRow(row, newValue);
        var /** @type {?} */ domEventName = newValue ? 'row-select' : 'row-unselect';
        this.emitRowSelectionEvent(domEventName, row);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    DataTableComponent.prototype.onImageLoadingError = function (event) {
        if (event && this.fallbackThumbnail) {
            var /** @type {?} */ element = (event.target);
            element.src = this.fallbackThumbnail;
        }
    };
    /**
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    DataTableComponent.prototype.isIconValue = function (row, col) {
        if (row && col) {
            var /** @type {?} */ value = row.getValue(col.key);
            return value && value.startsWith('material-icons://');
        }
        return false;
    };
    /**
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    DataTableComponent.prototype.asIconValue = function (row, col) {
        if (this.isIconValue(row, col)) {
            var /** @type {?} */ value = row.getValue(col.key) || '';
            return value.replace('material-icons://', '');
        }
        return null;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    DataTableComponent.prototype.iconAltTextKey = function (value) {
        return value ? 'ICONS.' + value.substring(value.lastIndexOf('/') + 1).replace(/\.[a-z]+/, '') : '';
    };
    /**
     * @param {?} col
     * @param {?} direction
     * @return {?}
     */
    DataTableComponent.prototype.isColumnSorted = function (col, direction) {
        if (col && direction) {
            var /** @type {?} */ sorting = this.data.getSorting();
            return sorting && sorting.key === col.key && sorting.direction === direction;
        }
        return false;
    };
    /**
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    DataTableComponent.prototype.getContextMenuActions = function (row, col) {
        var /** @type {?} */ event = new DataCellEvent(row, col, []);
        this.showRowContextMenu.emit(event);
        return event.value.actions;
    };
    /**
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    DataTableComponent.prototype.getRowActions = function (row, col) {
        var /** @type {?} */ id = row.getValue('id');
        if (!this.rowMenuCache[id]) {
            var /** @type {?} */ event = new DataCellEvent(row, col, []);
            this.showRowActionsMenu.emit(event);
            this.rowMenuCache[id] = event.value.actions;
        }
        return this.rowMenuCache[id];
    };
    /**
     * @param {?} row
     * @param {?} action
     * @return {?}
     */
    DataTableComponent.prototype.onExecuteRowAction = function (row, action) {
        if (action.disabled || action.disabled) {
            event.stopPropagation();
        }
        else {
            this.executeRowAction.emit(new DataRowActionEvent(row, action));
        }
    };
    /**
     * @param {?} row
     * @return {?}
     */
    DataTableComponent.prototype.rowAllowsDrop = function (row) {
        return row.isDropTarget === true;
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.hasSelectionMode = function () {
        return this.isSingleSelectionMode() || this.isMultiSelectionMode();
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.isSingleSelectionMode = function () {
        return this.selectionMode && this.selectionMode.toLowerCase() === 'single';
    };
    /**
     * @return {?}
     */
    DataTableComponent.prototype.isMultiSelectionMode = function () {
        return this.selectionMode && this.selectionMode.toLowerCase() === 'multiple';
    };
    /**
     * @param {?} row
     * @return {?}
     */
    DataTableComponent.prototype.getRowStyle = function (row) {
        row.cssClass = row.cssClass ? row.cssClass : '';
        this.rowStyleClass = this.rowStyleClass ? this.rowStyleClass : '';
        return row.cssClass + " " + this.rowStyleClass;
    };
    /**
     * @param {?} row
     * @param {?} value
     * @return {?}
     */
    DataTableComponent.prototype.selectRow = function (row, value) {
        if (row) {
            row.isSelected = value;
            var /** @type {?} */ idx = this.selection.indexOf(row);
            if (value) {
                if (idx < 0) {
                    this.selection.push(row);
                }
            }
            else {
                if (idx > -1) {
                    this.selection.splice(idx, 1);
                }
            }
        }
    };
    /**
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    DataTableComponent.prototype.getCellTooltip = function (row, col) {
        if (row && col && col.formatTooltip) {
            var /** @type {?} */ result = col.formatTooltip(row, col);
            if (result) {
                return result;
            }
        }
        return null;
    };
    /**
     * @param {?} name
     * @param {?} row
     * @return {?}
     */
    DataTableComponent.prototype.emitRowSelectionEvent = function (name, row) {
        var /** @type {?} */ domEvent = new CustomEvent(name, {
            detail: {
                row: row,
                selection: this.selection
            },
            bubbles: true
        });
        this.elementRef.nativeElement.dispatchEvent(domEvent);
    };
    return DataTableComponent;
}());
DataTableComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-datatable',
                styles: ["\n\n    "],
                template: "\n      <table\n          *ngIf=\"data\"\n          class=\"full-width adf-data-table\">\n\n          <thead *ngIf=\"showHeader\">\n          <tr>\n              <!-- Actions (left) -->\n              <th *ngIf=\"actions && actionsPosition === 'left'\" class=\"actions-column\">\n                  <span class=\"sr-only\">Actions</span>\n              </th>\n              <!-- Columns -->\n              <th *ngIf=\"multiselect\">\n                  <mat-checkbox [checked]=\"isSelectAllChecked\" (change)=\"onSelectAllClick($event)\"></mat-checkbox>\n              </th>\n              <th class=\"adf-data-table-cell--{{col.type || 'text'}} {{col.cssClass}}\"\n                  *ngFor=\"let col of data.getColumns()\"\n                  [class.sortable]=\"col.sortable\"\n                  [attr.data-automation-id]=\"'auto_id_' + col.key\"\n                  [class.adf-data-table__header--sorted-asc]=\"isColumnSorted(col, 'asc')\"\n                  [class.adf-data-table__header--sorted-desc]=\"isColumnSorted(col, 'desc')\"\n                  (click)=\"onColumnHeaderClick(col)\"\n                  (keyup.enter)=\"onColumnHeaderClick(col)\"\n                  role=\"button\"\n                  tabindex=\"0\"\n                  title=\"{{ col.title | translate }}\">\n                  <span *ngIf=\"col.srTitle\" class=\"sr-only\">{{ col.srTitle | translate }}</span>\n                  <span *ngIf=\"col.title\">{{ col.title | translate}}</span>\n              </th>\n              <!-- Actions (right) -->\n              <th *ngIf=\"actions && actionsPosition === 'right'\" class=\"actions-column\">\n                  <span class=\"sr-only\">Actions</span>\n              </th>\n          </tr>\n          </thead>\n\n          <tbody>\n          <ng-container *ngIf=\"!loading && !noPermission\">\n              <tr *ngFor=\"let row of data.getRows(); let idx = index\"\n                  role=\"button\"\n                  [class.is-selected]=\"row.isSelected\"\n                  [adf-upload]=\"allowDropFiles && rowAllowsDrop(row)\" [adf-upload-data]=\"row\"\n                  [ngStyle]=\"rowStyle\"\n                  [ngClass]=\"getRowStyle(row)\"\n                  (keyup)=\"onRowKeyUp(row, $event)\">\n\n                  <!-- Actions (left) -->\n                  <td *ngIf=\"actions && actionsPosition === 'left'\">\n                      <button mat-icon-button [matMenuTriggerFor]=\"menu\"\n                          [attr.data-automation-id]=\"'action_menu_' + idx\">\n                          <mat-icon>more_vert</mat-icon>\n                      </button>\n                      <mat-menu #menu=\"matMenu\">\n                          <button mat-menu-item *ngFor=\"let action of getRowActions(row)\"\n                              [attr.data-automation-id]=\"action.title\"\n                              [disabled]=\"action.disabled\"\n                              (click)=\"onExecuteRowAction(row, action)\">\n                              <mat-icon *ngIf=\"action.icon\">{{ action.icon }}</mat-icon>\n                              <span>{{ action.title | translate }}</span>\n                          </button>\n                      </mat-menu>\n                  </td>\n\n                  <td *ngIf=\"multiselect\">\n                      <mat-checkbox\n                          [checked]=\"row.isSelected\"\n                          (change)=\"onCheckboxChange(row, $event)\">\n                      </mat-checkbox>\n                  </td>\n                  <td *ngFor=\"let col of data.getColumns()\"\n                      class=\"adf-data-table-cell adf-data-table-cell--{{col.type || 'text'}} {{col.cssClass}}\"\n                      tabindex=\"0\"\n                      (click)=\"onRowClick(row, $event)\"\n                      [context-menu]=\"getContextMenuActions(row, col)\"\n                      [context-menu-enabled]=\"contextMenu\">\n                      <div *ngIf=\"!col.template\" class=\"cell-container\">\n                          <ng-container [ngSwitch]=\"col.type\">\n                              <div *ngSwitchCase=\"'image'\" class=\"cell-value\">\n                                  <mat-icon *ngIf=\"isIconValue(row, col)\">{{ asIconValue(row, col) }}</mat-icon>\n                                  <mat-icon *ngIf=\"!isIconValue(row, col) && row.isSelected\" svgIcon=\"selected\" >\n                                  </mat-icon>\n\n                                  <img *ngIf=\"!isIconValue(row, col) && !row.isSelected\"\n                                       alt=\"{{ iconAltTextKey(data.getValue(row, col)) | translate }}\"\n                                       src=\"{{ data.getValue(row, col) }}\"\n                                       (error)=\"onImageLoadingError($event)\">\n                              </div>\n                              <div *ngSwitchCase=\"'icon'\"  class=\"cell-value\">\n                                  <span class=\"sr-only\">{{ iconAltTextKey(data.getValue(row, col)) | translate }}</span>\n                                  <mat-icon>{{ data.getValue(row, col) }}</mat-icon>\n                              </div>\n                              <div *ngSwitchCase=\"'date'\"  class=\"cell-value\"\n                                  [attr.data-automation-id]=\"'date_' + data.getValue(row, col)\">\n                                  <adf-date-cell\n                                      [data]=\"data\"\n                                      [column]=\"col\"\n                                      [row]=\"row\"\n                                      [tooltip]=\"getCellTooltip(row, col)\">\n                                  </adf-date-cell>\n                              </div>\n                              <div *ngSwitchCase=\"'location'\" class=\"cell-value\"\n                                  [attr.data-automation-id]=\"'location' + data.getValue(row, col)\">\n                                  <adf-location-cell\n                                      [data]=\"data\"\n                                      [column]=\"col\"\n                                      [row]=\"row\"\n                                      [tooltip]=\"getCellTooltip(row, col)\">\n                                  </adf-location-cell>\n                              </div>\n                              <div *ngSwitchCase=\"'fileSize'\" class=\"cell-value\"\n                                  [attr.data-automation-id]=\"'fileSize_' + data.getValue(row, col)\">\n                                  <adf-filesize-cell\n                                      [data]=\"data\"\n                                      [column]=\"col\"\n                                      [row]=\"row\"\n                                      [tooltip]=\"getCellTooltip(row, col)\">\n                                  </adf-filesize-cell>\n                              </div>\n                              <div *ngSwitchCase=\"'text'\" class=\"cell-value\"\n                                  [attr.data-automation-id]=\"'text_' + data.getValue(row, col)\">\n                                  <adf-datatable-cell\n                                      [data]=\"data\"\n                                      [column]=\"col\"\n                                      [row]=\"row\"\n                                      [tooltip]=\"getCellTooltip(row, col)\">\n                                  </adf-datatable-cell>\n                              </div>\n                          <span *ngSwitchDefault class=\"cell-value\">\n                          <!-- empty cell for unknown column type -->\n                          </span>\n                          </ng-container>\n                      </div>\n                      <div *ngIf=\"col.template\" class=\"cell-container\">\n                          <ng-container\n                              [ngTemplateOutlet]=\"col.template\"\n                              [ngTemplateOutletContext]=\"{ $implicit: { data: data, row: row, col: col }, value: data.getValue(row, col) }\">\n                          </ng-container>\n                      </div>\n                  </td>\n\n                  <!-- Actions (right) -->\n                  <td *ngIf=\"actions && actionsPosition === 'right'\" class=\"alfresco-datatable__actions-cell\">\n                      <button mat-icon-button [matMenuTriggerFor]=\"menu\"\n                          [attr.data-automation-id]=\"'action_menu_' + idx\">\n                          <mat-icon>more_vert</mat-icon>\n                      </button>\n                      <mat-menu #menu=\"matMenu\">\n                          <button mat-menu-item *ngFor=\"let action of getRowActions(row)\"\n                              [attr.data-automation-id]=\"action.title\"\n                              [disabled]=\"action.disabled\"\n                              (click)=\"onExecuteRowAction(row, action)\">\n                              <mat-icon *ngIf=\"action.icon\">{{ action.icon }}</mat-icon>\n                              <span>{{ action.title | translate }}</span>\n                          </button>\n                      </mat-menu>\n                  </td>\n\n              </tr>\n              <tr *ngIf=\"data.getRows().length === 0\">\n                  <td class=\"adf-no-content-container\"\n                      [attr.colspan]=\"1 + data.getColumns().length\">\n                      <ng-template *ngIf=\"noContentTemplate\"\n                                   ngFor [ngForOf]=\"[data]\"\n                                   [ngForTemplate]=\"noContentTemplate\">\n                      </ng-template>\n                      <ng-content select=\"adf-empty-list\"></ng-content>\n                  </td>\n              </tr>\n          </ng-container>\n          <tr *ngIf=\"!loading && noPermission\" class=\"adf-no-permission__row\">\n              <td class=\"adf-no-permission__cell\">\n                  <ng-template *ngIf=\"noPermissionTemplate\"\n                               ngFor [ngForOf]=\"[data]\"\n                               [ngForTemplate]=\"noPermissionTemplate\">\n                  </ng-template>\n              </td>\n          </tr>\n          <tr *ngIf=\"loading\">\n              <td class=\"adf-loading-content-container\"\n                  [attr.colspan]=\"1 + data.getColumns().length\">\n                  <ng-template *ngIf=\"loadingTemplate\"\n                               ngFor [ngForOf]=\"[data]\"\n                               [ngForTemplate]=\"loadingTemplate\">\n                  </ng-template>\n              </td>\n          </tr>\n          </tbody>\n      </table>\n    ",
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
DataTableComponent.ctorParameters = function () { return [
    { type: core.ElementRef, },
    { type: core.IterableDiffers, },
]; };
DataTableComponent.propDecorators = {
    'columnList': [{ type: core.ContentChild, args: [DataColumnListComponent,] },],
    'data': [{ type: core.Input },],
    'rows': [{ type: core.Input },],
    'selectionMode': [{ type: core.Input },],
    'multiselect': [{ type: core.Input },],
    'actions': [{ type: core.Input },],
    'actionsPosition': [{ type: core.Input },],
    'fallbackThumbnail': [{ type: core.Input },],
    'contextMenu': [{ type: core.Input },],
    'allowDropFiles': [{ type: core.Input },],
    'rowStyle': [{ type: core.Input },],
    'rowStyleClass': [{ type: core.Input },],
    'showHeader': [{ type: core.Input },],
    'rowClick': [{ type: core.Output },],
    'rowDblClick': [{ type: core.Output },],
    'showRowContextMenu': [{ type: core.Output },],
    'showRowActionsMenu': [{ type: core.Output },],
    'executeRowAction': [{ type: core.Output },],
    'loading': [{ type: core.Input },],
    'noPermission': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DateCellComponent = /** @class */ (function (_super) {
    __extends(DateCellComponent, _super);
    function DateCellComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return DateCellComponent;
}(DataTableCellComponent));
DateCellComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-date-cell',
                changeDetection: core.ChangeDetectionStrategy.OnPush,
                template: "\n        <ng-container>\n            <span [title]=\"tooltip\">{{value}}</span>\n        </ng-container>\n    ",
                encapsulation: core.ViewEncapsulation.None,
                host: { class: 'adf-date-cell' }
            },] },
];
/**
 * @nocollapse
 */
DateCellComponent.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EmptyListComponent = /** @class */ (function () {
    function EmptyListComponent() {
    }
    return EmptyListComponent;
}());
EmptyListComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-empty-list',
                styles: ["\n      .adf-empty-list_template {\n        text-align: center;\n        margin-top: 20px;\n        margin-bottom: 20px; }\n    "],
                template: "\n      <div class=\"adf-empty-list_template\">\n          <ng-content select=\"[adf-empty-list-header]\"></ng-content>\n          <ng-content select=\"[adf-empty-list-body]\"></ng-content>\n          <ng-content select=\"[adf-empty-list-footer]\"></ng-content>\n          <ng-content></ng-content>\n      </div>\n    ",
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
EmptyListComponent.ctorParameters = function () { return []; };
var EmptyListHeaderDirective = /** @class */ (function () {
    function EmptyListHeaderDirective() {
    }
    return EmptyListHeaderDirective;
}());
EmptyListHeaderDirective.decorators = [
    { type: core.Directive, args: [{ selector: '[adf-empty-list-header]' },] },
];
/**
 * @nocollapse
 */
EmptyListHeaderDirective.ctorParameters = function () { return []; };
var EmptyListBodyDirective = /** @class */ (function () {
    function EmptyListBodyDirective() {
    }
    return EmptyListBodyDirective;
}());
EmptyListBodyDirective.decorators = [
    { type: core.Directive, args: [{ selector: '[adf-empty-list-body]' },] },
];
/**
 * @nocollapse
 */
EmptyListBodyDirective.ctorParameters = function () { return []; };
var EmptyListFooterDirective = /** @class */ (function () {
    function EmptyListFooterDirective() {
    }
    return EmptyListFooterDirective;
}());
EmptyListFooterDirective.decorators = [
    { type: core.Directive, args: [{ selector: '[adf-empty-list-footer]' },] },
];
/**
 * @nocollapse
 */
EmptyListFooterDirective.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FileSizeCellComponent = /** @class */ (function (_super) {
    __extends(FileSizeCellComponent, _super);
    function FileSizeCellComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return FileSizeCellComponent;
}(DataTableCellComponent));
FileSizeCellComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-filesize-cell',
                changeDetection: core.ChangeDetectionStrategy.OnPush,
                template: "\n        <ng-container>\n            <span [title]=\"tooltip\">{{ value | adfFileSize }}</span>\n        </ng-container>\n    ",
                encapsulation: core.ViewEncapsulation.None,
                host: { class: 'adf-filesize-cell' }
            },] },
];
/**
 * @nocollapse
 */
FileSizeCellComponent.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var LocationCellComponent = /** @class */ (function (_super) {
    __extends(LocationCellComponent, _super);
    function LocationCellComponent() {
        var _this = _super.apply(this, arguments) || this;
        _this.displayText = '';
        return _this;
    }
    /**
     * @override
     * @return {?}
     */
    LocationCellComponent.prototype.ngOnInit = function () {
        if (!this.value && this.column && this.column.key && this.row && this.data) {
            var /** @type {?} */ path = this.data.getValue(this.row, this.column);
            if (path && path.name && path.elements) {
                this.value = path;
                this.displayText = path.name.split('/').pop();
                if (!this.tooltip) {
                    this.tooltip = path.name;
                }
                var /** @type {?} */ parent = path.elements[path.elements.length - 1];
                this.link = [this.column.format, parent.id];
            }
        }
    };
    return LocationCellComponent;
}(DataTableCellComponent));
LocationCellComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-location-cell',
                changeDetection: core.ChangeDetectionStrategy.OnPush,
                template: "\n        <ng-container>\n            <a href=\"\" [title]=\"tooltip\" [routerLink]=\"link\">\n                {{ displayText }}\n            </a>\n        </ng-container>\n    ",
                encapsulation: core.ViewEncapsulation.None,
                host: { class: 'adf-location-cell' }
            },] },
];
/**
 * @nocollapse
 */
LocationCellComponent.ctorParameters = function () { return []; };
LocationCellComponent.propDecorators = {
    'link': [{ type: core.Input },],
    'displayText': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var LoadingContentTemplateDirective = /** @class */ (function () {
    /**
     * @param {?} dataTable
     */
    function LoadingContentTemplateDirective(dataTable) {
        this.dataTable = dataTable;
    }
    /**
     * @return {?}
     */
    LoadingContentTemplateDirective.prototype.ngAfterContentInit = function () {
        if (this.dataTable) {
            this.dataTable.loadingTemplate = this.template;
        }
    };
    return LoadingContentTemplateDirective;
}());
LoadingContentTemplateDirective.decorators = [
    { type: core.Directive, args: [{
                selector: 'loading-content-template'
            },] },
];
/**
 * @nocollapse
 */
LoadingContentTemplateDirective.ctorParameters = function () { return [
    { type: DataTableComponent, },
]; };
LoadingContentTemplateDirective.propDecorators = {
    'template': [{ type: core.ContentChild, args: [core.TemplateRef,] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NoContentTemplateDirective = /** @class */ (function () {
    /**
     * @param {?} dataTable
     */
    function NoContentTemplateDirective(dataTable) {
        this.dataTable = dataTable;
    }
    /**
     * @return {?}
     */
    NoContentTemplateDirective.prototype.ngAfterContentInit = function () {
        if (this.dataTable) {
            this.dataTable.noContentTemplate = this.template;
        }
    };
    return NoContentTemplateDirective;
}());
NoContentTemplateDirective.decorators = [
    { type: core.Directive, args: [{
                selector: 'no-content-template'
            },] },
];
/**
 * @nocollapse
 */
NoContentTemplateDirective.ctorParameters = function () { return [
    { type: DataTableComponent, },
]; };
NoContentTemplateDirective.propDecorators = {
    'template': [{ type: core.ContentChild, args: [core.TemplateRef,] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NoPermissionTemplateDirective = /** @class */ (function () {
    /**
     * @param {?} dataTable
     */
    function NoPermissionTemplateDirective(dataTable) {
        this.dataTable = dataTable;
    }
    /**
     * @return {?}
     */
    NoPermissionTemplateDirective.prototype.ngAfterContentInit = function () {
        if (this.dataTable) {
            this.dataTable.noPermissionTemplate = this.template;
        }
    };
    return NoPermissionTemplateDirective;
}());
NoPermissionTemplateDirective.decorators = [
    { type: core.Directive, args: [{
                selector: 'no-permission-template'
            },] },
];
/**
 * @nocollapse
 */
NoPermissionTemplateDirective.ctorParameters = function () { return [
    { type: DataTableComponent, },
]; };
NoPermissionTemplateDirective.propDecorators = {
    'template': [{ type: core.ContentChild, args: [core.TemplateRef,] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DataTableModule = /** @class */ (function () {
    function DataTableModule() {
    }
    return DataTableModule;
}());
DataTableModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    router.RouterModule,
                    MaterialModule,
                    common.CommonModule,
                    core$1.TranslateModule,
                    ContextMenuModule,
                    PipeModule,
                    DirectiveModule
                ],
                declarations: [
                    DataTableComponent,
                    EmptyListComponent,
                    EmptyListHeaderDirective,
                    EmptyListBodyDirective,
                    EmptyListFooterDirective,
                    DataTableCellComponent,
                    DateCellComponent,
                    FileSizeCellComponent,
                    LocationCellComponent,
                    NoContentTemplateDirective,
                    NoPermissionTemplateDirective,
                    LoadingContentTemplateDirective
                ],
                exports: [
                    DataTableComponent,
                    EmptyListComponent,
                    EmptyListHeaderDirective,
                    EmptyListBodyDirective,
                    EmptyListFooterDirective,
                    DataTableCellComponent,
                    DateCellComponent,
                    FileSizeCellComponent,
                    LocationCellComponent,
                    NoContentTemplateDirective,
                    NoPermissionTemplateDirective,
                    LoadingContentTemplateDirective
                ]
            },] },
];
/**
 * @nocollapse
 */
DataTableModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var InfoDrawerLayoutComponent = /** @class */ (function () {
    function InfoDrawerLayoutComponent() {
    }
    return InfoDrawerLayoutComponent;
}());
InfoDrawerLayoutComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-info-drawer-layout',
                template: "\n      <div class=\"adf-info-drawer-layout-header\">\n          <div class=\"adf-info-drawer-layout-header-title\">\n              <ng-content select=\"[info-drawer-title]\"></ng-content>\n          </div>\n          <div class=\"adf-info-drawer-layout-header-buttons\">\n              <ng-content select=\"[info-drawer-buttons]\"></ng-content>\n          </div>\n      </div>\n      <div class=\"adf-info-drawer-layout-content\">\n          <ng-content select=\"[info-drawer-content]\"></ng-content>\n      </div>\n    ",
                styles: ["\n\n    "],
                encapsulation: core.ViewEncapsulation.None,
                host: { 'class': 'adf-info-drawer-layout' }
            },] },
];
/**
 * @nocollapse
 */
InfoDrawerLayoutComponent.ctorParameters = function () { return []; };
var InfoDrawerTitleDirective = /** @class */ (function () {
    function InfoDrawerTitleDirective() {
    }
    return InfoDrawerTitleDirective;
}());
InfoDrawerTitleDirective.decorators = [
    { type: core.Directive, args: [{ selector: '[info-drawer-title]' },] },
];
/**
 * @nocollapse
 */
InfoDrawerTitleDirective.ctorParameters = function () { return []; };
var InfoDrawerButtonsDirective = /** @class */ (function () {
    function InfoDrawerButtonsDirective() {
    }
    return InfoDrawerButtonsDirective;
}());
InfoDrawerButtonsDirective.decorators = [
    { type: core.Directive, args: [{ selector: '[info-drawer-buttons]' },] },
];
/**
 * @nocollapse
 */
InfoDrawerButtonsDirective.ctorParameters = function () { return []; };
var InfoDrawerContentDirective = /** @class */ (function () {
    function InfoDrawerContentDirective() {
    }
    return InfoDrawerContentDirective;
}());
InfoDrawerContentDirective.decorators = [
    { type: core.Directive, args: [{ selector: '[info-drawer-content]' },] },
];
/**
 * @nocollapse
 */
InfoDrawerContentDirective.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var InfoDrawerTabComponent = /** @class */ (function () {
    function InfoDrawerTabComponent() {
        this.label = 'Main tab';
    }
    return InfoDrawerTabComponent;
}());
InfoDrawerTabComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-info-drawer-tab',
                template: '<ng-template><ng-content></ng-content></ng-template>'
            },] },
];
/**
 * @nocollapse
 */
InfoDrawerTabComponent.ctorParameters = function () { return []; };
InfoDrawerTabComponent.propDecorators = {
    'label': [{ type: core.Input, args: ['label',] },],
    'content': [{ type: core.ViewChild, args: [core.TemplateRef,] },],
};
var InfoDrawerComponent = /** @class */ (function () {
    function InfoDrawerComponent() {
        this.title = null;
        this.currentTab = new core.EventEmitter();
    }
    /**
     * @return {?}
     */
    InfoDrawerComponent.prototype.showTabLayout = function () {
        return this.contentBlocks.length > 0;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    InfoDrawerComponent.prototype.onTabChange = function (event) {
        this.currentTab.emit(event.index);
    };
    return InfoDrawerComponent;
}());
InfoDrawerComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-info-drawer',
                template: "\n      <adf-info-drawer-layout>\n          <div *ngIf=\"title\" info-drawer-title>{{title}}</div>\n          <ng-content *ngIf=\"!title\" info-drawer-title select=\"[info-drawer-title]\"></ng-content>\n\n          <ng-content info-drawer-buttons select=\"[info-drawer-buttons]\"></ng-content>\n\n          <ng-container info-drawer-content *ngIf=\"showTabLayout(); then tabLayout else singleLayout\"></ng-container>\n\n          <ng-template #tabLayout>\n              <mat-tab-group class=\"adf-info-drawer-tabs\" (selectedTabChange)=\"onTabChange($event)\">\n                  <ng-container *ngFor=\"let contentBlock of contentBlocks\">\n                      <mat-tab [label]=\"contentBlock.label\" class=\"adf-info-drawer-tab\">\n                          <ng-container *ngTemplateOutlet=\"contentBlock.content\"></ng-container>\n                      </mat-tab>\n                  </ng-container>\n              </mat-tab-group>\n          </ng-template>\n\n          <ng-template #singleLayout>\n              <ng-content select=\"[info-drawer-content]\"></ng-content>\n          </ng-template>\n      </adf-info-drawer-layout>\n    ",
                styles: ["\n      .adf-info-drawer {\n        display: block; }\n        .adf-info-drawer .adf-info-drawer-layout-content {\n          padding: 0; }\n          .adf-info-drawer .adf-info-drawer-layout-content > :not(.adf-info-drawer-tabs) {\n            padding: 10px; }\n            .adf-info-drawer .adf-info-drawer-layout-content > :not(.adf-info-drawer-tabs) > * {\n              margin-bottom: 20px;\n              display: block; }\n          .adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content > * {\n            margin-bottom: 20px;\n            display: block; }\n          .adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content > *:last-child {\n            margin-bottom: 0; }\n          .adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-label {\n            -webkit-box-flex: 1;\n                -ms-flex-positive: 1;\n                    flex-grow: 1; }\n          .adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-ink-bar {\n            height: 4px; }\n          .adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body {\n            padding: 10px; }\n          .adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content {\n            overflow: initial; }\n    "],
                encapsulation: core.ViewEncapsulation.None,
                host: { 'class': 'adf-info-drawer' }
            },] },
];
/**
 * @nocollapse
 */
InfoDrawerComponent.ctorParameters = function () { return []; };
InfoDrawerComponent.propDecorators = {
    'title': [{ type: core.Input },],
    'currentTab': [{ type: core.Output },],
    'contentBlocks': [{ type: core.ContentChildren, args: [InfoDrawerTabComponent,] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var InfoDrawerModule = /** @class */ (function () {
    function InfoDrawerModule() {
    }
    return InfoDrawerModule;
}());
InfoDrawerModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule,
                    MaterialModule
                ],
                declarations: [
                    InfoDrawerLayoutComponent,
                    InfoDrawerTabComponent,
                    InfoDrawerComponent
                ],
                exports: [
                    InfoDrawerLayoutComponent,
                    InfoDrawerTabComponent,
                    InfoDrawerComponent
                ]
            },] },
];
/**
 * @nocollapse
 */
InfoDrawerModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var LanguageMenuComponent = /** @class */ (function () {
    /**
     * @param {?} appConfig
     * @param {?} userPreference
     */
    function LanguageMenuComponent(appConfig, userPreference) {
        this.appConfig = appConfig;
        this.userPreference = userPreference;
        this.languages = [
            { key: 'en', label: 'English' }
        ];
    }
    /**
     * @return {?}
     */
    LanguageMenuComponent.prototype.ngOnInit = function () {
        var /** @type {?} */ languagesCongifApp = this.appConfig.get(AppConfigService.APP_CONFIG_LANGUAGES_KEY);
        if (languagesCongifApp) {
            this.languages = languagesCongifApp;
        }
    };
    /**
     * @param {?} lang
     * @return {?}
     */
    LanguageMenuComponent.prototype.changeLanguage = function (lang) {
        this.userPreference.locale = lang;
    };
    return LanguageMenuComponent;
}());
LanguageMenuComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-language-menu',
                template: "\n      <button mat-menu-item *ngFor=\"let language of languages\" (click)=\"changeLanguage(language.key)\">{{language.label}}\n      </button>\n    "
            },] },
];
/**
 * @nocollapse
 */
LanguageMenuComponent.ctorParameters = function () { return [
    { type: AppConfigService, },
    { type: UserPreferencesService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var LanguageMenuModule = /** @class */ (function () {
    function LanguageMenuModule() {
    }
    return LanguageMenuModule;
}());
LanguageMenuModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule,
                    MaterialModule
                ],
                declarations: [
                    LanguageMenuComponent
                ],
                exports: [
                    LanguageMenuComponent
                ]
            },] },
];
/**
 * @nocollapse
 */
LanguageMenuModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var SettingsService = /** @class */ (function () {
    /**
     * @param {?} appConfig
     * @param {?} logService
     * @param {?} preferences
     */
    function SettingsService(appConfig, logService, preferences) {
        this.appConfig = appConfig;
        this.logService = logService;
        this.preferences = preferences;
    }
    Object.defineProperty(SettingsService.prototype, "ecmHost", {
        /**
         * @deprecated in 1.6.0
         * @return {?}
         */
        get: function () {
            this.logService.log('SettingsService.ecmHost is deprecated. Use AppConfigService instead.');
            return this.appConfig.get('ecmHost');
        },
        /**
         * @deprecated in 1.6.0
         * @param {?} ecmHostUrl
         * @return {?}
         */
        set: function (ecmHostUrl) {
            this.logService.log('SettingsService.ecmHost is deprecated. Use AppConfigService instead.');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SettingsService.prototype, "csrfDisabled", {
        /**
         * @deprecated in 1.7.0
         * @param {?} csrfDisabled
         * @return {?}
         */
        set: function (csrfDisabled) {
            this.logService.log("SettingsService.csrfDisabled is deprecated. Use UserPreferencesService.disableCSRF instead.");
            this.preferences.disableCSRF = csrfDisabled;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SettingsService.prototype, "bpmHost", {
        /**
         * @deprecated in 1.6.0
         * @return {?}
         */
        get: function () {
            this.logService.log('SettingsService.bpmHost is deprecated. Use AppConfigService instead.');
            return this.appConfig.get('bpmHost');
        },
        /**
         * @deprecated in 1.6.0
         * @param {?} bpmHostUrl
         * @return {?}
         */
        set: function (bpmHostUrl) {
            this.logService.log('SettingsService.bpmHost is deprecated. Use AppConfigService instead.');
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @deprecated in 1.6.0
     * @return {?}
     */
    SettingsService.prototype.getBPMApiBaseUrl = function () {
        this.logService.log('SettingsService.getBPMApiBaseUrl is deprecated.');
        return this.bpmHost + '/activiti-app';
    };
    /**
     * @deprecated in 1.7.0
     * @return {?}
     */
    SettingsService.prototype.getProviders = function () {
        this.logService.log("SettingsService.getProviders is deprecated. Use UserPreferencesService.authType instead.");
        return this.preferences.authType;
    };
    /**
     * @deprecated in 1.7.0
     * @param {?} providers
     * @return {?}
     */
    SettingsService.prototype.setProviders = function (providers) {
        this.logService.log("SettingsService.getProviders is deprecated. Use UserPreferencesService.authType instead.");
        this.preferences.authType = providers;
    };
    return SettingsService;
}());
SettingsService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
SettingsService.ctorParameters = function () { return [
    { type: AppConfigService, },
    { type: LogService, },
    { type: UserPreferencesService, },
]; };
var LoginErrorEvent = /** @class */ (function () {
    /**
     * @param {?} err
     */
    function LoginErrorEvent(err) {
        this.err = err;
    }
    return LoginErrorEvent;
}());
var LoginSubmitEvent = /** @class */ (function () {
    /**
     * @param {?} _values
     */
    function LoginSubmitEvent(_values) {
        this._defaultPrevented = false;
        this._values = _values;
    }
    Object.defineProperty(LoginSubmitEvent.prototype, "values", {
        /**
         * @return {?}
         */
        get: function () {
            return this._values;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LoginSubmitEvent.prototype, "defaultPrevented", {
        /**
         * @return {?}
         */
        get: function () {
            return this._defaultPrevented;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    LoginSubmitEvent.prototype.preventDefault = function () {
        this._defaultPrevented = true;
    };
    return LoginSubmitEvent;
}());
var LoginSuccessEvent = /** @class */ (function () {
    /**
     * @param {?} token
     * @param {?} username
     * @param {?} password
     */
    function LoginSuccessEvent(token, username, password) {
        this.token = token;
        this.username = username;
        this.password = password;
    }
    return LoginSuccessEvent;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var LoginSteps = {};
LoginSteps.Landing = 0;
LoginSteps.Checking = 1;
LoginSteps.Welcome = 2;
LoginSteps[LoginSteps.Landing] = "Landing";
LoginSteps[LoginSteps.Checking] = "Checking";
LoginSteps[LoginSteps.Welcome] = "Welcome";
var LoginComponent = /** @class */ (function () {
    /**
     * Constructor
     * @param {?} _fb
     * @param {?} authService
     * @param {?} settingsService
     * @param {?} translateService
     * @param {?} logService
     * @param {?} elementRef
     * @param {?} router
     * @param {?} userPreferences
     */
    function LoginComponent(_fb, authService, settingsService, translateService, logService, elementRef, router$$1, userPreferences) {
        this._fb = _fb;
        this.authService = authService;
        this.settingsService = settingsService;
        this.translateService = translateService;
        this.logService = logService;
        this.elementRef = elementRef;
        this.router = router$$1;
        this.userPreferences = userPreferences;
        this.isPasswordShow = false;
        this.showRememberMe = true;
        this.showLoginActions = true;
        this.needHelpLink = '';
        this.registerLink = '';
        this.logoImageUrl = './assets/images/alfresco-logo.svg';
        this.backgroundImageUrl = './assets/images/background.svg';
        this.copyrightText = '\u00A9 2016 Alfresco Software, Inc. All Rights Reserved.';
        this.successRoute = null;
        this.success = new core.EventEmitter();
        this.error = new core.EventEmitter();
        this.executeSubmit = new core.EventEmitter();
        this.isError = false;
        this.actualLoginStep = LoginSteps.Landing;
        this.LoginSteps = LoginSteps;
        this.rememberMe = true;
        this.minLength = 2;
        this.initFormError();
        this.initFormFieldsMessages();
    }
    /**
     * @return {?}
     */
    LoginComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (this.hasCustomFiledsValidation()) {
            this.form = this._fb.group(this.fieldsValidation);
        }
        else {
            this.initFormFieldsDefault();
            this.initFormFieldsMessagesDefault();
        }
        this.form.valueChanges.subscribe(function (data) { return _this.onValueChanged(data); });
    };
    /**
     * Method called on submit form
     * @param {?} values
     * @return {?}
     */
    LoginComponent.prototype.onSubmit = function (values) {
        if (!this.checkRequiredParams()) {
            return false;
        }
        this.settingsService.setProviders(this.providers);
        this.settingsService.csrfDisabled = this.disableCsrf;
        this.disableError();
        var /** @type {?} */ args = new LoginSubmitEvent(this.form);
        this.executeSubmit.emit(args);
        if (args.defaultPrevented) {
            return false;
        }
        else {
            this.performLogin(values);
        }
    };
    /**
     * The method check the error in the form and push the error in the formError object
     * @param {?} data
     * @return {?}
     */
    LoginComponent.prototype.onValueChanged = function (data) {
        this.disableError();
        for (var /** @type {?} */ field in this.formError) {
            if (field) {
                this.formError[field] = '';
                var /** @type {?} */ hasError = (this.form.controls[field].errors && data[field] !== '') ||
                    (this.form.controls[field].dirty && !this.form.controls[field].valid);
                if (hasError) {
                    for (var /** @type {?} */ key in this.form.controls[field].errors) {
                        if (key) {
                            this.formError[field] += this._message[field][key] + '';
                        }
                    }
                }
            }
        }
    };
    /**
     * Performe the login service
     * @param {?} values
     * @return {?}
     */
    LoginComponent.prototype.performLogin = function (values) {
        var _this = this;
        this.actualLoginStep = LoginSteps.Checking;
        this.authService.login(values.username, values.password, this.rememberMe)
            .subscribe(function (token) {
            var /** @type {?} */ redirectUrl = _this.authService.getRedirectUrl();
            _this.actualLoginStep = LoginSteps.Welcome;
            _this.userPreferences.setStoragePrefix(values.username);
            _this.success.emit(new LoginSuccessEvent(token, values.username, values.password));
            if (redirectUrl) {
                _this.authService.setRedirectUrl(null);
                _this.router.navigate([redirectUrl]);
            }
            else if (_this.successRoute) {
                _this.router.navigate([_this.successRoute]);
            }
        }, function (err) {
            _this.actualLoginStep = LoginSteps.Landing;
            _this.displayErrorMessage(err);
            _this.enableError();
            _this.error.emit(new LoginErrorEvent(err));
        }, function () { return _this.logService.info('Login done'); });
    };
    /**
     * Check and display the right error message in the UI
     * @param {?} err
     * @return {?}
     */
    LoginComponent.prototype.displayErrorMessage = function (err) {
        if (err.error && err.error.crossDomain && err.error.message.indexOf('Access-Control-Allow-Origin') !== -1) {
            this.errorMsg = err.error.message;
        }
        else if (err.status === 403 && err.message.indexOf('Invalid CSRF-token') !== -1) {
            this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ERROR-CSRF';
        }
        else if (err.status === 403 && err.message.indexOf('The system is currently in read-only mode') !== -1) {
            this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ECM-LICENSE';
        }
        else {
            this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ERROR-CREDENTIALS';
        }
    };
    /**
     * Check the require parameter
     * @return {?}
     */
    LoginComponent.prototype.checkRequiredParams = function () {
        var /** @type {?} */ isAllParamPresent = true;
        if (this.providers === undefined || this.providers === null || this.providers === '') {
            this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ERROR-PROVIDERS';
            this.enableError();
            var /** @type {?} */ messageProviders = void 0;
            messageProviders = this.translateService.get(this.errorMsg);
            this.error.emit(new LoginErrorEvent(messageProviders.value));
            isAllParamPresent = false;
        }
        return isAllParamPresent;
    };
    /**
     * Add a custom form error for a field
     * @param {?} field
     * @param {?} msg
     * @return {?}
     */
    LoginComponent.prototype.addCustomFormError = function (field, msg) {
        this.formError[field] += msg;
    };
    /**
     * Add a custom validation rule error for a field
     * @param {?} field
     * @param {?} ruleId - i.e. required | minlength | maxlength
     * @param {?} msg
     * @param {?=} params
     * @return {?}
     */
    LoginComponent.prototype.addCustomValidationError = function (field, ruleId, msg, params) {
        var _this = this;
        if (params) {
            this.translateService.get(msg, params).subscribe(function (res) {
                _this._message[field][ruleId] = res;
            });
        }
        else {
            this._message[field][ruleId] = msg;
        }
    };
    /**
     * Display and hide the password value.
     * @return {?}
     */
    LoginComponent.prototype.toggleShowPassword = function () {
        this.isPasswordShow = !this.isPasswordShow;
        this.elementRef.nativeElement.querySelector('#password').type = this.isPasswordShow ? 'text' : 'password';
    };
    /**
     * The method return if a field is valid or not
     * @param {?} field
     * @return {?}
     */
    LoginComponent.prototype.isErrorStyle = function (field) {
        return !field.valid && field.dirty && !field.pristine;
    };
    /**
     * Trim username
     * @param {?} event
     * @return {?}
     */
    LoginComponent.prototype.trimUsername = function (event) {
        event.target.value = event.target.value.trim();
    };
    /**
     * Default formError values
     * @return {?}
     */
    LoginComponent.prototype.initFormError = function () {
        this.formError = {
            'username': '',
            'password': ''
        };
    };
    /**
     * Init form fields messages
     * @return {?}
     */
    LoginComponent.prototype.initFormFieldsMessages = function () {
        this._message = {
            'username': {},
            'password': {}
        };
    };
    /**
     * Default form fields messages
     * @return {?}
     */
    LoginComponent.prototype.initFormFieldsMessagesDefault = function () {
        var _this = this;
        this._message = {
            'username': {
                'required': 'LOGIN.MESSAGES.USERNAME-REQUIRED'
            },
            'password': {
                'required': 'LOGIN.MESSAGES.PASSWORD-REQUIRED'
            }
        };
        this.translateService.get('LOGIN.MESSAGES.USERNAME-MIN', { minLength: this.minLength }).subscribe(function (res) {
            _this._message['username']['minlength'] = res;
        });
    };
    /**
     * @return {?}
     */
    LoginComponent.prototype.initFormFieldsDefault = function () {
        this.form = this._fb.group({
            username: ['', forms.Validators.required],
            password: ['', forms.Validators.required]
        });
    };
    /**
     * Disable the error flag
     * @return {?}
     */
    LoginComponent.prototype.disableError = function () {
        this.isError = false;
        this.initFormError();
    };
    /**
     * Enable the error flag
     * @return {?}
     */
    LoginComponent.prototype.enableError = function () {
        this.isError = true;
    };
    /**
     * @return {?}
     */
    LoginComponent.prototype.hasCustomFiledsValidation = function () {
        return this.fieldsValidation !== undefined;
    };
    return LoginComponent;
}());
LoginComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-login',
                template: "\n      <div class=\"adf-login-content\" [style.background-image]=\"'url(' + backgroundImageUrl + ')'\">\n           <div class=\"ie11FixerParent\">\n               <div class=\"ie11FixerChild\">\n\n                  <mat-card class=\"adf-login-card-wide\">\n                      <form [formGroup]=\"form\" (submit)=\"onSubmit(form.value)\">\n\n                          <mat-card-header>\n                              <mat-card-title>\n                                  <div class=\"adf-alfresco-logo\">\n                                      <!--HEADER TEMPLATE-->\n                                      <ng-template *ngIf=\"headerTemplate\"\n                                                  ngFor [ngForOf]=\"[data]\"\n                                                  [ngForTemplate]=\"headerTemplate\">\n                                      </ng-template>\n                                      <img *ngIf=\"!headerTemplate\" class=\"adf-img-logo\" [src]=\"logoImageUrl\"\n                                          alt=\"{{'LOGIN.LOGO' | translate }}\">\n                                  </div>\n                              </mat-card-title>\n                          </mat-card-header>\n\n                          <mat-card-content class=\"adf-login-controls\">\n\n                              <!--ERRORS AREA-->\n                              <div class=\"adf-error-container\">\n                                  <div *ngIf=\"isError\" id=\"login-error\" data-automation-id=\"login-error\"\n                                      class=\"error  adf-error-message\">\n                                      <mat-icon class=\"error-icon\">warning</mat-icon>\n                                      <span class=\"login-error-message\">{{errorMsg | translate }}</span>\n                                  </div>\n                              </div>\n\n                              <!--USERNAME FIELD-->\n                              <div class=\"adf-login__field\" [ngClass]=\"{'is-invalid': isErrorStyle(form.controls.username)}\">\n                                  <mat-form-field class=\"adf-full-width\" floatPlaceholder=\"never\" color=\"primary\">\n                                      <input matInput placeholder=\"{{'LOGIN.LABEL.USERNAME' | translate }}\"\n                                          type=\"text\"\n                                          class=\"adf-full-width\"\n                                          [formControl]=\"form.controls['username']\"\n                                          autocapitalize=\"none\"\n                                          id=\"username\"\n                                          data-automation-id=\"username\"\n                                          (blur)=\"trimUsername($event)\"\n                                          tabindex=\"1\">\n                                  </mat-form-field>\n\n                                  <span class=\"adf-login-validation\" for=\"username\" *ngIf=\"formError.username\">\n                                      <span id=\"username-error\" class=\"adf-login-error\" data-automation-id=\"username-error\">{{formError.username | translate }}</span>\n                                  </span>\n                              </div>\n\n                              <!--PASSWORD FIELD-->\n                              <div class=\"adf-login__field\">\n                                  <mat-form-field class=\"adf-full-width\" floatPlaceholder=\"never\" color=\"primary\">\n                                      <input matInput placeholder=\"{{'LOGIN.LABEL.PASSWORD' | translate }}\"\n                                          type=\"password\"\n                                          [formControl]=\"form.controls['password']\"\n                                          id=\"password\"\n                                          data-automation-id=\"password\"\n                                          tabindex=\"2\">\n                                      <mat-icon *ngIf=\"isPasswordShow\" matSuffix class=\"adf-login-password-icon\"\n                                              data-automation-id=\"hide_password\" (click)=\"toggleShowPassword()\">visibility\n                                      </mat-icon>\n                                      <mat-icon *ngIf=\"!isPasswordShow\" matSuffix class=\"adf-login-password-icon\"\n                                              data-automation-id=\"show_password\" (click)=\"toggleShowPassword()\">visibility_off\n                                      </mat-icon>\n                                  </mat-form-field>\n                                  <span class=\"adf-login-validation\" for=\"password\" *ngIf=\"formError.password\">\n                                      <span id=\"password-required\" class=\"adf-login-error\"\n                                          data-automation-id=\"password-required\">{{formError.password | translate }}</span>\n                                  </span>\n                              </div>\n\n                              <!--CUSTOM CONTENT-->\n                              <ng-content></ng-content>\n\n                              <br>\n                              <button type=\"submit\" id=\"login-button\" tabindex=\"3\"\n                                      class=\"adf-login-button\"\n                                      mat-raised-button color=\"primary\"\n                                      [class.isChecking]=\"actualLoginStep === LoginSteps.Checking\"\n                                      [class.isWelcome]=\"actualLoginStep === LoginSteps.Welcome\"\n                                      data-automation-id=\"login-button\" [disabled]=\"!form.valid\">\n                            \n                                  <span *ngIf=\"actualLoginStep === LoginSteps.Landing\" class=\"adf-login-button-label\">{{ 'LOGIN.BUTTON.LOGIN' | translate }}</span>\n\n                                  <div *ngIf=\"actualLoginStep === LoginSteps.Checking\" class=\"adf-interactive-login-label\">\n                                      <span class=\"adf-login-button-label\">{{ 'LOGIN.BUTTON.CHECKING' | translate }}</span>\n                                      <div class=\"adf-login-spinner-container\">\n                                          <mat-spinner id=\"checking-spinner\" class=\"adf-login-checking-spinner\" [diameter]=\"25\"></mat-spinner>\n                                      </div>\n                                  </div>\n\n\n                                  <div *ngIf=\"actualLoginStep === LoginSteps.Welcome\" class=\"adf-interactive-login-label\">\n                                      <span class=\"adf-login-button-label\">{{ 'LOGIN.BUTTON.WELCOME' | translate }}</span>\n                                      <mat-icon class=\"welcome-icon\">done</mat-icon>\n                                  </div>\n\n                              </button>\n                              <div *ngIf=\"showRememberMe\" class=\"adf-login__remember-me\">\n                                  <mat-checkbox id=\"adf-login-remember\" color=\"primary\" class=\"adf-login-rememberme\" [checked]=\"rememberMe\"\n                                              (change)=\"rememberMe = !rememberMe\">{{ 'LOGIN.LABEL.REMEMBER' | translate }}\n                                  </mat-checkbox>\n                              </div>\n                          </mat-card-content>\n                          <mat-card-actions *ngIf=\"footerTemplate || showLoginActions\">\n\n                              <div class=\"adf-login-action-container\">\n                                  <!--FOOTER TEMPLATE-->\n                                  <ng-template *ngIf=\"footerTemplate\"\n                                              ngFor [ngForOf]=\"[data]\"\n                                              [ngForTemplate]=\"footerTemplate\">\n                                  </ng-template>\n                                  <div class=\"adf-login-action\" *ngIf=\"!footerTemplate && showLoginActions\">\n                                      <div id=\"adf-login-action-left\" class=\"adf-login-action-left\">\n                                          <a href=\"{{needHelpLink}}\">{{'LOGIN.ACTION.HELP' | translate }}</a>\n                                      </div>\n                                      <div id=\"adf-login-action-right\" class=\"adf-login-action-right\">\n                                          <a href=\"{{registerLink}}\">{{'LOGIN.ACTION.REGISTER' | translate }}</a>\n                                      </div>\n                                  </div>\n                              </div>\n                          </mat-card-actions>\n\n                      </form>\n                  </mat-card>\n\n                  <div class=\"copyright\" data-automation-id=\"login-copyright\">\n                      {{ copyrightText }}\n                  </div>\n\n              </div>\n           </div>\n      </div>\n    ",
                styles: ["\n\n    "],
                host: { '(blur)': 'onBlur($event)' },
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
LoginComponent.ctorParameters = function () { return [
    { type: forms.FormBuilder, },
    { type: AuthenticationService, },
    { type: SettingsService, },
    { type: TranslationService, },
    { type: LogService, },
    { type: core.ElementRef, },
    { type: router.Router, },
    { type: UserPreferencesService, },
]; };
LoginComponent.propDecorators = {
    'showRememberMe': [{ type: core.Input },],
    'showLoginActions': [{ type: core.Input },],
    'needHelpLink': [{ type: core.Input },],
    'registerLink': [{ type: core.Input },],
    'logoImageUrl': [{ type: core.Input },],
    'backgroundImageUrl': [{ type: core.Input },],
    'copyrightText': [{ type: core.Input },],
    'providers': [{ type: core.Input },],
    'fieldsValidation': [{ type: core.Input },],
    'disableCsrf': [{ type: core.Input },],
    'successRoute': [{ type: core.Input },],
    'success': [{ type: core.Output },],
    'error': [{ type: core.Output },],
    'executeSubmit': [{ type: core.Output },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var LoginFooterDirective = /** @class */ (function () {
    /**
     * @param {?} alfrescoLoginComponent
     */
    function LoginFooterDirective(alfrescoLoginComponent) {
        this.alfrescoLoginComponent = alfrescoLoginComponent;
    }
    /**
     * @return {?}
     */
    LoginFooterDirective.prototype.ngAfterContentInit = function () {
        this.alfrescoLoginComponent.footerTemplate = this.template;
    };
    return LoginFooterDirective;
}());
LoginFooterDirective.decorators = [
    { type: core.Directive, args: [{
                selector: 'login-footer'
            },] },
];
/**
 * @nocollapse
 */
LoginFooterDirective.ctorParameters = function () { return [
    { type: LoginComponent, },
]; };
LoginFooterDirective.propDecorators = {
    'template': [{ type: core.ContentChild, args: [core.TemplateRef,] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var LoginHeaderDirective = /** @class */ (function () {
    /**
     * @param {?} alfrescoLoginComponent
     */
    function LoginHeaderDirective(alfrescoLoginComponent) {
        this.alfrescoLoginComponent = alfrescoLoginComponent;
    }
    /**
     * @return {?}
     */
    LoginHeaderDirective.prototype.ngAfterContentInit = function () {
        this.alfrescoLoginComponent.headerTemplate = this.template;
    };
    return LoginHeaderDirective;
}());
LoginHeaderDirective.decorators = [
    { type: core.Directive, args: [{
                selector: 'login-header'
            },] },
];
/**
 * @nocollapse
 */
LoginHeaderDirective.ctorParameters = function () { return [
    { type: LoginComponent, },
]; };
LoginHeaderDirective.propDecorators = {
    'template': [{ type: core.ContentChild, args: [core.TemplateRef,] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var LoginModule = /** @class */ (function () {
    function LoginModule() {
    }
    return LoginModule;
}());
LoginModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    router.RouterModule,
                    MaterialModule,
                    forms.FormsModule,
                    forms.ReactiveFormsModule,
                    common.CommonModule,
                    core$1.TranslateModule
                ],
                declarations: [
                    LoginComponent,
                    LoginFooterDirective,
                    LoginHeaderDirective
                ],
                exports: [
                    [
                        LoginComponent,
                        LoginFooterDirective,
                        LoginHeaderDirective
                    ]
                ]
            },] },
];
/**
 * @nocollapse
 */
LoginModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var InfinitePaginationComponent = /** @class */ (function () {
    function InfinitePaginationComponent() {
        this.pageSize = InfinitePaginationComponent.DEFAULT_PAGE_SIZE;
        this.isLoading = false;
        this.loadMore = new core.EventEmitter();
    }
    /**
     * @return {?}
     */
    InfinitePaginationComponent.prototype.ngOnInit = function () {
        if (!this.pagination) {
            this.pagination = InfinitePaginationComponent.DEFAULT_PAGINATION;
        }
    };
    /**
     * @return {?}
     */
    InfinitePaginationComponent.prototype.onLoadMore = function () {
        this.pagination.skipCount += this.pageSize;
        this.loadMore.next(this.pagination);
    };
    return InfinitePaginationComponent;
}());
InfinitePaginationComponent.DEFAULT_PAGE_SIZE = 25;
InfinitePaginationComponent.DEFAULT_PAGINATION = {
    skipCount: 0,
    hasMoreItems: false
};
InfinitePaginationComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-infinite-pagination',
                host: { 'class': 'infinite-adf-pagination' },
                template: "\n      <div *ngIf=\"pagination?.hasMoreItems\" class=\"adf-infinite-pagination\">\n          <button mat-button\n              *ngIf=\"!isLoading\"\n              class=\"adf-infinite-pagination-load-more\"\n              (click)=\"onLoadMore($event)\"\n              data-automation-id=\"adf-infinite-pagination-button\">\n                  <ng-content></ng-content>\n          </button>\n\n          <mat-progress-bar *ngIf=\"isLoading\"\n              mode=\"indeterminate\"\n              class=\"adf-infinite-pagination-spinner\"\n              data-automation-id=\"adf-infinite-pagination-spinner\"></mat-progress-bar>\n      </div>\n    ",
                styles: ["\n      .adf-infinite-pagination {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -ms-flex-pack: distribute;\n            justify-content: space-around;\n        min-height: 56px; }\n        .adf-infinite-pagination-load-more {\n          margin-bottom: 10px;\n          margin-top: 10px; }\n    "],
                changeDetection: core.ChangeDetectionStrategy.OnPush,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
InfinitePaginationComponent.ctorParameters = function () { return []; };
InfinitePaginationComponent.propDecorators = {
    'pagination': [{ type: core.Input },],
    'pageSize': [{ type: core.Input },],
    'isLoading': [{ type: core.Input, args: ['loading',] },],
    'loadMore': [{ type: core.Output },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var PaginationComponent = /** @class */ (function () {
    /**
     * @param {?} cdr
     */
    function PaginationComponent(cdr) {
        this.cdr = cdr;
        this.supportedPageSizes = [5, 25, 50, 100];
        this.change = new core.EventEmitter();
        this.changePageNumber = new core.EventEmitter();
        this.changePageSize = new core.EventEmitter();
        this.nextPage = new core.EventEmitter();
        this.prevPage = new core.EventEmitter();
    }
    /**
     * @return {?}
     */
    PaginationComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (this.target) {
            this.supportedPageSizes = this.target.supportedPageSizes;
            this.paginationSubscription = this.target.pagination.subscribe(function (page) {
                _this.pagination = page;
                _this.cdr.detectChanges();
            });
        }
        if (!this.pagination) {
            this.pagination = PaginationComponent.DEFAULT_PAGINATION;
        }
    };
    Object.defineProperty(PaginationComponent.prototype, "lastPage", {
        /**
         * @return {?}
         */
        get: function () {
            var _a = this.pagination, maxItems = _a.maxItems, totalItems = _a.totalItems;
            return (totalItems && maxItems)
                ? Math.ceil(totalItems / maxItems)
                : 1;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "current", {
        /**
         * @return {?}
         */
        get: function () {
            var _a = this.pagination, maxItems = _a.maxItems, skipCount = _a.skipCount;
            return (skipCount && maxItems)
                ? Math.floor(skipCount / maxItems) + 1
                : 1;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "isLastPage", {
        /**
         * @return {?}
         */
        get: function () {
            return this.current === this.lastPage;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "isFirstPage", {
        /**
         * @return {?}
         */
        get: function () {
            return this.current === 1;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "next", {
        /**
         * @return {?}
         */
        get: function () {
            return this.isLastPage ? this.current : this.current + 1;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "previous", {
        /**
         * @return {?}
         */
        get: function () {
            return this.isFirstPage ? 1 : this.current - 1;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "hasItems", {
        /**
         * @return {?}
         */
        get: function () {
            return this.pagination && this.pagination.count > 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "range", {
        /**
         * @return {?}
         */
        get: function () {
            var _a = this.pagination, skipCount = _a.skipCount, maxItems = _a.maxItems, totalItems = _a.totalItems;
            var isLastPage = this.isLastPage;
            var /** @type {?} */ start = totalItems ? skipCount + 1 : 0;
            var /** @type {?} */ end = isLastPage ? totalItems : skipCount + maxItems;
            return [start, end];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "pages", {
        /**
         * @return {?}
         */
        get: function () {
            return Array(this.lastPage)
                .fill('n')
                .map(function (item, index) { return (index + 1); });
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    PaginationComponent.prototype.goNext = function () {
        if (this.hasItems) {
            var /** @type {?} */ maxItems = this.pagination.maxItems;
            var /** @type {?} */ skipCount = (this.next - 1) * maxItems;
            this.handlePaginationEvent(PaginationComponent.ACTIONS.NEXT_PAGE, {
                skipCount: skipCount,
                maxItems: maxItems
            });
        }
    };
    /**
     * @return {?}
     */
    PaginationComponent.prototype.goPrevious = function () {
        if (this.hasItems) {
            var /** @type {?} */ maxItems = this.pagination.maxItems;
            var /** @type {?} */ skipCount = (this.previous - 1) * maxItems;
            this.handlePaginationEvent(PaginationComponent.ACTIONS.PREV_PAGE, {
                skipCount: skipCount,
                maxItems: maxItems
            });
        }
    };
    /**
     * @param {?} pageNumber
     * @return {?}
     */
    PaginationComponent.prototype.onChangePageNumber = function (pageNumber) {
        if (this.hasItems) {
            var /** @type {?} */ maxItems = this.pagination.maxItems;
            var /** @type {?} */ skipCount = (pageNumber - 1) * maxItems;
            this.handlePaginationEvent(PaginationComponent.ACTIONS.CHANGE_PAGE_NUMBER, {
                skipCount: skipCount,
                maxItems: maxItems
            });
        }
    };
    /**
     * @param {?} maxItems
     * @return {?}
     */
    PaginationComponent.prototype.onChangePageSize = function (maxItems) {
        this.handlePaginationEvent(PaginationComponent.ACTIONS.CHANGE_PAGE_SIZE, {
            skipCount: 0,
            maxItems: maxItems
        });
    };
    /**
     * @param {?} action
     * @param {?} params
     * @return {?}
     */
    PaginationComponent.prototype.handlePaginationEvent = function (action, params) {
        var _a = PaginationComponent.ACTIONS, NEXT_PAGE = _a.NEXT_PAGE, PREV_PAGE = _a.PREV_PAGE, CHANGE_PAGE_NUMBER = _a.CHANGE_PAGE_NUMBER, CHANGE_PAGE_SIZE = _a.CHANGE_PAGE_SIZE;
        var _b = this, change = _b.change, changePageNumber = _b.changePageNumber, changePageSize = _b.changePageSize, nextPage = _b.nextPage, prevPage = _b.prevPage, pagination = _b.pagination;
        var /** @type {?} */ data = Object.assign({}, pagination, params);
        if (action === NEXT_PAGE) {
            nextPage.emit(data);
        }
        if (action === PREV_PAGE) {
            prevPage.emit(data);
        }
        if (action === CHANGE_PAGE_NUMBER) {
            changePageNumber.emit(data);
        }
        if (action === CHANGE_PAGE_SIZE) {
            changePageSize.emit(data);
        }
        change.emit(params);
        if (this.target) {
            this.target.updatePagination(params);
        }
    };
    /**
     * @return {?}
     */
    PaginationComponent.prototype.ngOnDestroy = function () {
        if (this.paginationSubscription) {
            this.paginationSubscription.unsubscribe();
        }
    };
    return PaginationComponent;
}());
PaginationComponent.DEFAULT_PAGINATION = {
    skipCount: 0,
    maxItems: 25,
    totalItems: 0
};
PaginationComponent.ACTIONS = {
    NEXT_PAGE: 'NEXT_PAGE',
    PREV_PAGE: 'PREV_PAGE',
    CHANGE_PAGE_SIZE: 'CHANGE_PAGE_SIZE',
    CHANGE_PAGE_NUMBER: 'CHANGE_PAGE_NUMBER'
};
PaginationComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-pagination',
                host: { 'class': 'adf-pagination' },
                template: "\n      <ng-container *ngIf=\"hasItems\">\n          <div class=\"adf-pagination__block adf-pagination__range-block\">\n              <span class=\"adf-pagination__range\">\n                  {{\n                      'CORE.PAGINATION.ITEMS_RANGE' | translate: {\n                          range: range.join('-'),\n                          total: pagination.totalItems\n                      }\n                  }}\n              </span>\n          </div>\n\n          <div class=\"adf-pagination__block adf-pagination__perpage-block\">\n              <span>\n                  {{ 'CORE.PAGINATION.ITEMS_PER_PAGE' | translate }}\n              </span>\n\n              <span class=\"adf-pagination__max-items\">\n                  {{ pagination.maxItems }}\n              </span>\n\n              <button mat-icon-button [matMenuTriggerFor]=\"pageSizeMenu\">\n                  <mat-icon>arrow_drop_down</mat-icon>\n              </button>\n\n              <mat-menu #pageSizeMenu=\"matMenu\">\n                  <button\n                      mat-menu-item\n                      *ngFor=\"let pageSize of supportedPageSizes\"\n                      (click)=\"onChangePageSize(pageSize)\">\n                      {{ pageSize }}\n                  </button>\n              </mat-menu>\n          </div>\n\n          <div class=\"adf-pagination__block adf-pagination__actualinfo-block\">\n              <span class=\"adf-pagination__current-page\">\n                  {{ 'CORE.PAGINATION.CURRENT_PAGE' | translate: { number: current } }}\n              </span>\n\n              <button\n                  mat-icon-button\n                  [matMenuTriggerFor]=\"pagesMenu\"\n                  *ngIf=\"pages.length > 1\">\n                  <mat-icon>arrow_drop_down</mat-icon>\n              </button>\n\n              <span class=\"adf-pagination__total-pages\">\n                  {{ 'CORE.PAGINATION.TOTAL_PAGES' | translate: { total: pages.length } }}\n              </span>\n\n              <mat-menu #pagesMenu=\"matMenu\" class=\"adf-pagination__page-selector\">\n                  <button\n                      mat-menu-item\n                      *ngFor=\"let pageNumber of pages\"\n                      (click)=\"onChangePageNumber(pageNumber)\">\n                      {{ pageNumber }}\n                  </button>\n              </mat-menu>\n          </div>\n\n          <div class=\"adf-pagination__block adf-pagination__controls-block\">\n              <button\n                  class=\"adf-pagination__previous-button\"\n                  mat-icon-button\n                  [disabled]=\"isFirstPage\"\n                  (click)=\"goPrevious()\">\n                  <mat-icon>keyboard_arrow_left</mat-icon>\n              </button>\n\n              <button\n                  class=\"adf-pagination__next-button\"\n                  mat-icon-button\n                  [disabled]=\"isLastPage\"\n                  (click)=\"goNext()\">\n                  <mat-icon>keyboard_arrow_right</mat-icon>\n              </button>\n          </div>\n      </ng-container>\n    ",
                styles: ["\n\n    "],
                changeDetection: core.ChangeDetectionStrategy.OnPush,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
PaginationComponent.ctorParameters = function () { return [
    { type: core.ChangeDetectorRef, },
]; };
PaginationComponent.propDecorators = {
    'target': [{ type: core.Input },],
    'supportedPageSizes': [{ type: core.Input },],
    'pagination': [{ type: core.Input },],
    'change': [{ type: core.Output },],
    'changePageNumber': [{ type: core.Output },],
    'changePageSize': [{ type: core.Output },],
    'nextPage': [{ type: core.Output },],
    'prevPage': [{ type: core.Output },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var PaginationModule = /** @class */ (function () {
    function PaginationModule() {
    }
    return PaginationModule;
}());
PaginationModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule,
                    MaterialModule,
                    core$1.TranslateModule
                ],
                declarations: [
                    InfinitePaginationComponent,
                    PaginationComponent
                ],
                exports: [
                    InfinitePaginationComponent,
                    PaginationComponent
                ]
            },] },
];
/**
 * @nocollapse
 */
PaginationModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var HostSettingsComponent = /** @class */ (function () {
    /**
     * @param {?} settingsService
     * @param {?} storage
     * @param {?} logService
     * @param {?} translationService
     */
    function HostSettingsComponent(settingsService, storage, logService, translationService) {
        this.settingsService = settingsService;
        this.storage = storage;
        this.logService = logService;
        this.translationService = translationService;
        this.HOST_REGEX = '^(http|https):\/\/.*[^/]$';
        this.urlFormControlEcm = new forms.FormControl('', [forms.Validators.required, forms.Validators.pattern(this.HOST_REGEX)]);
        this.urlFormControlBpm = new forms.FormControl('', [forms.Validators.required, forms.Validators.pattern(this.HOST_REGEX)]);
        this.providers = 'ALL';
        this.error = new core.EventEmitter();
        this.ecmHostTmp = this.ecmHost = storage.getItem('ecmHost') || this.settingsService.ecmHost;
        this.bpmHostTmp = this.bpmHost = storage.getItem('bpmHost') || this.settingsService.bpmHost;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    HostSettingsComponent.prototype.onChangeECMHost = function (event) {
        var _this = this;
        var /** @type {?} */ value = ((event.target)).value.trim();
        if (value && this.isValidUrl(value)) {
            this.logService.info("ECM host: " + value);
            this.ecmHostTmp = value;
        }
        else {
            this.translationService.get('CORE.HOST_SETTING.CS_URL_ERROR').subscribe(function (message) {
                _this.error.emit(message);
            });
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    HostSettingsComponent.prototype.onChangeBPMHost = function (event) {
        var _this = this;
        var /** @type {?} */ value = ((event.target)).value.trim();
        if (value && this.isValidUrl(value)) {
            this.logService.info("BPM host: " + value);
            this.bpmHostTmp = value;
        }
        else {
            this.translationService.get('CORE.HOST_SETTING.PS_URL_ERROR').subscribe(function (message) {
                _this.error.emit(message);
            });
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    HostSettingsComponent.prototype.save = function (event) {
        if (this.bpmHost !== this.bpmHostTmp) {
            this.storage.setItem("bpmHost", this.bpmHostTmp);
        }
        if (this.ecmHost !== this.ecmHostTmp) {
            this.storage.setItem("ecmHost", this.ecmHostTmp);
        }
        window.location.href = '/';
    };
    /**
     * @param {?} url
     * @return {?}
     */
    HostSettingsComponent.prototype.isValidUrl = function (url) {
        return /^(http|https):\/\/.*/.test(url);
    };
    return HostSettingsComponent;
}());
HostSettingsComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-host-settings',
                template: "\n      <div class=\"adf-setting-container\">\n          <div class=\"adf-setting-card-padding\"></div>\n          <mat-toolbar color=\"primary\" class=\"adf-setting-toolbar\">\n              <h3>{{'CORE.HOST_SETTINGS.TITLE' | translate}}</h3>\n          </mat-toolbar>\n\n          <mat-card class=\"adf-setting-card\">\n              <div *ngIf=\"providers==='ALL' || providers==='ECM'\">\n                  <mat-card-header>\n                      <mat-card-subtitle>{{'CORE.HOST_SETTINGS.CS-HOST' | translate }}</mat-card-subtitle>\n                  </mat-card-header>\n                  <mat-card-content>\n                      <mat-form-field class=\"full-width\">\n                          <mat-icon class=\"adf-CORE.HOST_SETTINGS-link-icon\" matPrefix>link</mat-icon>\n                          <input matInput\n                                 [formControl]=\"urlFormControlEcm\"\n                                 data-automation-id=\"ecmHost\"\n                                 type=\"text\"\n                                 (change)=\"onChangeECMHost($event)\"\n                                 tabindex=\"2\"\n                                 id=\"ecmHost\"\n                                 value=\"{{ecmHost}}\"\n                                 placeholder=\"http(s)://host|ip:port(/path)\">\n                          <mat-error *ngIf=\"urlFormControlEcm.hasError('pattern')\">\n                              {{ 'CORE.HOST_SETTINGS.NOT_VALID'| translate }}\n                          </mat-error>\n                      </mat-form-field>\n                      <p>\n                  </mat-card-content>\n              </div>\n              <p>\n              <div *ngIf=\"providers==='ALL' || providers==='BPM'\">\n                  <mat-card-header>\n                      <mat-card-subtitle>{{'CORE.HOST_SETTINGS.BP-HOST' | translate }}</mat-card-subtitle>\n                  </mat-card-header>\n                  <mat-card-content>\n\n                      <mat-form-field class=\"full-width\">\n                          <mat-icon class=\"adf-CORE.HOST_SETTINGS-link-icon\" matPrefix>link</mat-icon>\n                          <input matInput\n                                 [formControl]=\"urlFormControlBpm\"\n                                 data-automation-id=\"bpmHost\"\n                                 type=\"text\"\n                                 (change)=\"onChangeBPMHost($event)\"\n                                 tabindex=\"2\"\n                                 id=\"bpmHost\"\n                                 value=\"{{bpmHost}}\"\n                                 placeholder=\"http(s)://host|ip:port(/path)\">\n                          <mat-error *ngIf=\"urlFormControlBpm.hasError('pattern')\">\n                              {{ 'CORE.HOST_SETTINGS.NOT_VALID'| translate }}\n                          </mat-error>\n                      </mat-form-field>\n                  </mat-card-content>\n              </div>\n              <mat-card-actions class=\"adf-CORE.HOST_SETTINGS-actions\">\n\n                  <button mat-button onclick=\"window.history.back()\" color=\"primary\">\n                      {{'CORE.HOST_SETTINGS.BACK' | translate }}\n                  </button>\n\n                  <button mat-raised-button (click)=\"save($event)\"\n                          [disabled]=\"urlFormControlBpm.hasError('pattern') || urlFormControlEcm.hasError('pattern')\"\n                          color=\"primary\">\n                      {{'CORE.HOST_SETTINGS.APPLY' | translate }}\n                  </button>\n\n              </mat-card-actions>\n          </mat-card>\n          <div class=\"adf-setting-card-padding\"></div>\n      </div>\n    ",
                host: {
                    'class': 'adf-host-settings'
                },
                styles: ["\n\n    "],
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
HostSettingsComponent.ctorParameters = function () { return [
    { type: SettingsService, },
    { type: StorageService, },
    { type: LogService, },
    { type: TranslationService, },
]; };
HostSettingsComponent.propDecorators = {
    'providers': [{ type: core.Input },],
    'error': [{ type: core.Output },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var HostSettingsModule = /** @class */ (function () {
    function HostSettingsModule() {
    }
    return HostSettingsModule;
}());
HostSettingsModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule,
                    MaterialModule,
                    core$1.TranslateModule,
                    forms.FormsModule,
                    forms.ReactiveFormsModule
                ],
                declarations: [
                    HostSettingsComponent
                ],
                exports: [
                    HostSettingsComponent
                ]
            },] },
];
/**
 * @nocollapse
 */
HostSettingsModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ToolbarDividerComponent = /** @class */ (function () {
    function ToolbarDividerComponent() {
    }
    return ToolbarDividerComponent;
}());
ToolbarDividerComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-toolbar-divider',
                template: '<div></div>',
                host: { 'class': 'adf-toolbar-divider' },
                styles: ["\n        .adf-toolbar-divider > div {\n            height: 24px;\n            width: 1px;\n            background: rgba(0, 0, 0, 0.26);\n            margin-left: 5px;\n            margin-right: 5px;\n        }\n    "],
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
ToolbarDividerComponent.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ToolbarTitleComponent = /** @class */ (function () {
    function ToolbarTitleComponent() {
    }
    return ToolbarTitleComponent;
}());
ToolbarTitleComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-toolbar-title',
                template: '<ng-content></ng-content>',
                host: { 'class': 'adf-toolbar-title' }
            },] },
];
/**
 * @nocollapse
 */
ToolbarTitleComponent.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ToolbarComponent = /** @class */ (function () {
    function ToolbarComponent() {
        this.title = '';
    }
    return ToolbarComponent;
}());
ToolbarComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-toolbar',
                template: "\n      <mat-toolbar [color]=\"color\">\n          <span *ngIf=\"title\">{{ title }}</span>\n          <ng-content select=\"adf-toolbar-title\"></ng-content>\n          <span class=\"adf-toolbar--spacer\"></span>\n          <ng-content></ng-content>\n      </mat-toolbar>\n    ",
                styles: ["\n\n    "],
                changeDetection: core.ChangeDetectionStrategy.OnPush,
                encapsulation: core.ViewEncapsulation.None,
                host: { 'class': 'adf-toolbar' }
            },] },
];
/**
 * @nocollapse
 */
ToolbarComponent.ctorParameters = function () { return []; };
ToolbarComponent.propDecorators = {
    'title': [{ type: core.Input },],
    'color': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ToolbarModule = /** @class */ (function () {
    function ToolbarModule() {
    }
    return ToolbarModule;
}());
ToolbarModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule,
                    MaterialModule
                ],
                declarations: [
                    ToolbarComponent,
                    ToolbarTitleComponent,
                    ToolbarDividerComponent
                ],
                exports: [
                    ToolbarComponent,
                    ToolbarTitleComponent,
                    ToolbarDividerComponent
                ]
            },] },
];
/**
 * @nocollapse
 */
ToolbarModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var BpmUserModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function BpmUserModel(obj) {
        if (obj) {
            this.apps = obj.apps;
            this.capabilities = obj.capabilities;
            this.company = obj.company;
            this.created = obj.created;
            this.email = obj.email;
            this.externalId = obj.externalId;
            this.firstName = obj.firstName;
            this.lastName = obj.lastName;
            this.fullname = obj.fullname;
            this.fullNameDisplay = obj ? this.formatValue(obj.firstName).trim() + ' ' + this.formatValue(obj.lastName).trim() : null;
            this.groups = obj.groups;
            this.id = obj.id;
            this.lastUpdate = obj.lastUpdate;
            this.latestSyncTimeStamp = obj.latestSyncTimeStamp;
            this.password = obj.password;
            this.pictureId = obj.pictureId;
            this.status = obj.status;
            this.tenantId = obj.tenantId;
            this.tenantName = obj.tenantName;
            this.tenantPictureId = obj.tenantPictureId;
            this.type = obj.type;
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    BpmUserModel.prototype.formatValue = function (value) {
        return value && value !== 'null' ? value : '';
    };
    return BpmUserModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EcmUserModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function EcmUserModel(obj) {
        this.id = obj && obj.id || null;
        this.firstName = obj && obj.firstName;
        this.lastName = obj && obj.lastName;
        this.fullNameDisplay = obj ? this.formatValue(obj.firstName).trim() + ' ' + this.formatValue(obj.lastName).trim() : null;
        this.description = obj && obj.description || null;
        this.avatarId = obj && obj.avatarId || null;
        this.email = obj && obj.email || null;
        this.skypeId = obj && obj.skypeId;
        this.googleId = obj && obj.googleId;
        this.instantMessageId = obj && obj.instantMessageId;
        this.jobTitle = obj && obj.jobTitle || null;
        this.location = obj && obj.location || null;
        this.company = obj && obj.company;
        this.mobile = obj && obj.mobile;
        this.telephone = obj && obj.telephone;
        this.statusUpdatedAt = obj && obj.statusUpdatedAt;
        this.userStatus = obj && obj.userStatus;
        this.enabled = obj && obj.enabled;
        this.emailNotificationsEnabled = obj && obj.emailNotificationsEnabled;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    EcmUserModel.prototype.formatValue = function (value) {
        return value && value !== 'null' ? value : '';
    };
    return EcmUserModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 *
 * BPMUserService retrieve all the information of an Ecm user.
 *
 */
var BpmUserService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} logService
     */
    function BpmUserService(apiService, logService) {
        this.apiService = apiService;
        this.logService = logService;
    }
    /**
     * get Current User information for BPM
     * @return {?}
     */
    BpmUserService.prototype.getCurrentUserInfo = function () {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().activiti.profileApi.getProfile())
            .map(function (data) { /** @type {?} */ return (data); })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @return {?}
     */
    BpmUserService.prototype.getCurrentUserProfileImage = function () {
        return this.apiService.getInstance().activiti.profileApi.getProfilePictureUrl();
    };
    /**
     * Throw the error
     * @param {?} error
     * @return {?}
     */
    BpmUserService.prototype.handleError = function (error) {
        // in a real world app, we may send the error to some remote logging infrastructure
        // instead of just logging it to the console
        this.logService.error(error);
        return Observable.Observable.throw(error || 'Server error');
    };
    return BpmUserService;
}());
BpmUserService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
BpmUserService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EcmUserService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} contentService
     * @param {?} logService
     */
    function EcmUserService(apiService, contentService, logService) {
        this.apiService = apiService;
        this.contentService = contentService;
        this.logService = logService;
    }
    /**
     * get User Information via ECM
     * @param {?} userName - the user name
     * @return {?}
     */
    EcmUserService.prototype.getUserInfo = function (userName) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.peopleApi.getPerson(userName))
            .map(function (data) { /** @type {?} */ return (data['entry']); })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @return {?}
     */
    EcmUserService.prototype.getCurrentUserInfo = function () {
        return this.getUserInfo('-me-');
    };
    /**
     * @param {?} avatarId
     * @return {?}
     */
    EcmUserService.prototype.getUserProfileImage = function (avatarId) {
        if (avatarId) {
            var /** @type {?} */ nodeObj = { entry: { id: avatarId } };
            return this.contentService.getContentUrl(nodeObj);
        }
    };
    /**
     * Throw the error
     * @param {?} error
     * @return {?}
     */
    EcmUserService.prototype.handleError = function (error) {
        // in a real world app, we may send the error to some remote logging infrastructure
        // instead of just logging it to the console
        this.logService.error(error);
        return Observable.Observable.throw(error || 'Server error');
    };
    return EcmUserService;
}());
EcmUserService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
EcmUserService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: ContentService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var UserInfoComponent = /** @class */ (function () {
    /**
     * @param {?} ecmUserService
     * @param {?} bpmUserService
     * @param {?} authService
     */
    function UserInfoComponent(ecmUserService, bpmUserService, authService) {
        this.ecmUserService = ecmUserService;
        this.bpmUserService = bpmUserService;
        this.authService = authService;
        this.ecmBackgroundImage = './assets/images/ecm-background.png';
        this.bpmBackgroundImage = './assets/images/bpm-background.png';
        this.menuPositionX = 'after';
        this.menuPositionY = 'below';
        this.showName = true;
        this.namePosition = 'right';
    }
    /**
     * @return {?}
     */
    UserInfoComponent.prototype.ngOnInit = function () {
        this.getUserInfo();
    };
    /**
     * @return {?}
     */
    UserInfoComponent.prototype.getUserInfo = function () {
        this.loadEcmUserInfo();
        this.loadBpmUserInfo();
    };
    /**
     * @return {?}
     */
    UserInfoComponent.prototype.isLoggedIn = function () {
        return this.authService.isLoggedIn();
    };
    /**
     * @return {?}
     */
    UserInfoComponent.prototype.loadEcmUserInfo = function () {
        var _this = this;
        if (this.authService.isEcmLoggedIn()) {
            this.ecmUserService.getCurrentUserInfo()
                .subscribe(function (res) {
                _this.ecmUser = new EcmUserModel(res);
                _this.getEcmAvatar();
            });
        }
        else {
            this.ecmUser = null;
            this.ecmUserImage = null;
        }
    };
    /**
     * @return {?}
     */
    UserInfoComponent.prototype.loadBpmUserInfo = function () {
        var _this = this;
        if (this.authService.isBpmLoggedIn()) {
            this.bpmUserService.getCurrentUserInfo()
                .subscribe(function (res) {
                _this.bpmUser = new BpmUserModel(res);
            });
            this.bpmUserImage = this.bpmUserService.getCurrentUserProfileImage();
        }
        else {
            this.bpmUser = null;
            this.bpmUserImage = null;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    UserInfoComponent.prototype.stopClosing = function (event) {
        event.stopPropagation();
    };
    /**
     * @return {?}
     */
    UserInfoComponent.prototype.getEcmAvatar = function () {
        this.ecmUserImage = this.ecmUserService.getUserProfileImage(this.ecmUser.avatarId);
    };
    /**
     * @return {?}
     */
    UserInfoComponent.prototype.showOnRight = function () {
        return this.namePosition === 'right';
    };
    /**
     * @return {?}
     */
    UserInfoComponent.prototype.hasBpmUserPictureId = function () {
        return !!this.bpmUser.pictureId;
    };
    /**
     * @return {?}
     */
    UserInfoComponent.prototype.hasEcmUserAvatarId = function () {
        return !!this.ecmUser.avatarId;
    };
    return UserInfoComponent;
}());
UserInfoComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-userinfo',
                styles: ["\n\n    "],
                template: "\n      <div id=\"userinfo_container\"\n          [class.adf-userinfo-name-right]=\"showOnRight()\"\n          class=\"adf-userinfo-container\" *ngIf=\"isLoggedIn()\">\n          <span *ngIf=\"ecmUser && showName\" id=\"adf-userinfo-ecm-name-display\"\n                class=\"adf-userinfo-name\">{{ecmUser.fullNameDisplay}}</span>\n          <span *ngIf=\"bpmUser && !ecmUser && showName\" id=\"adf-userinfo-bpm-name-display\"\n                class=\"adf-userinfo-name\">{{bpmUser.fullNameDisplay}}</span>\n          <button mat-button [matMenuTriggerFor]=\"menu\" class=\"adf-userinfo-menu_button\">\n              <div class=\"adf-userinfo-button-profile\" id=\"user-profile\" data-automation-id=\"user-profile\">\n                  <div *ngIf=\"bpmUser && !ecmUser\" id=\"bpm-user-image\">\n                      <div *ngIf=\"!hasBpmUserPictureId()\" [outerHTML]=\"bpmUser | usernameInitials:'adf-userinfo-pic'\"></div>\n                      <div *ngIf=\"hasBpmUserPictureId()\" class=\"adf-userinfo-profile-container\">\n                          <img id=\"logged-user-img\" [src]=\"bpmUserImage\" alt=\"user-info-profile-button\"\n                              class=\"adf-userinfo-profile-image\"/>\n                      </div>\n                  </div>\n                  <div *ngIf=\"ecmUser\" id=\"ecm-user-image\">\n                          <div *ngIf=\"!hasEcmUserAvatarId()\" [outerHTML]=\"ecmUser | usernameInitials:'adf-userinfo-pic'\"></div>\n                          <div *ngIf=\"hasEcmUserAvatarId()\" class=\"adf-userinfo-profile-container\">\n                              <img id=\"logged-user-img\" [src]=\"ecmUserImage\" alt=\"user-info-profile-button\"\n                                  class=\"adf-userinfo-profile-image\"/>\n                          </div>\n                  </div>\n          </div>\n      </button>\n          <mat-menu #menu=\"matMenu\" id=\"user-profile-lists\" [xPosition]=\"menuPositionX\" [yPosition]=\"menuPositionY\" [overlapTrigger]=\"false\" class=\"adf-userinfo-menu\">\n              <mat-tab-group id=\"tab-group-env\" (click)=\"stopClosing($event)\"\n                  class=\"adf-userinfo-tab\" [class.adf-hide-tab]=\"!bpmUser || !ecmUser\">\n                  <mat-tab id=\"ecm-panel\" label=\"{{ 'USER_PROFILE.TAB.CS' | translate }}\" *ngIf=\"ecmUser\">\n                      <mat-card class=\"adf-userinfo-card\">\n                          <mat-card-header class=\"adf-userinfo-card-header\" [style.background-image]=\"'url(' + ecmBackgroundImage + ')'\">\n                              <div *ngIf=\"!hasEcmUserAvatarId()\" [outerHTML]=\"ecmUser | usernameInitials:'adf-userinfo-profile-initials adf-hide-small'\"></div>\n                              <div *ngIf=\"hasEcmUserAvatarId()\" class=\"adf-userinfo-profile-container adf-hide-small\">\n                                  <img class=\"adf-userinfo-profile-picture\" id=\"ecm-user-detail-image\"\n                                      alt=\"ecm-profile-image\" [src]=\"ecmUserImage\" />\n                              </div>\n                             <div class=\"adf-userinfo-title\" id=\"ecm-username\">{{ecmUser.fullNameDisplay}}</div>\n                          </mat-card-header>\n                          <mat-card-content>\n                              <div class=\"adf-userinfo-supporting-text\">\n                                      <div class=\"adf-userinfo-detail\">\n                                          <span id=\"ecm-full-name\" class=\"adf-userinfo__detail-title\">{{ecmUser.fullNameDisplay}}</span>\n                                          <span class=\"adf-userinfo__detail-profile\" id=\"ecm-email\"> {{ecmUser.email}} </span>\n                                      </div>\n                                      <div class=\"adf-userinfo-detail\">\n                                          <span class=\"adf-userinfo__secondary-info\">\n                                              {{ 'USER_PROFILE.LABELS.ECM.JOB_TITLE' | translate }}\n                                              <span id=\"ecm-job-title\" class=\"adf-userinfo__detail-profile\"> {{ ecmUser.jobTitle ? ecmUser.jobTitle : 'N/A' }} </span>\n                                          </span>\n                                      </div>\n                              </div>\n                          </mat-card-content>\n                      </mat-card>\n                  </mat-tab>\n                  <mat-tab id=\"bpm-panel\" label=\"{{ 'USER_PROFILE.TAB.PS' | translate }}\" *ngIf=\"bpmUser\">\n                  <mat-card class=\"adf-userinfo-card\">\n                      <mat-card-header class=\"adf-userinfo-card-header\" [style.background-image]=\"'url(' + bpmBackgroundImage + ')'\">\n                          <div *ngIf=\"!hasBpmUserPictureId()\" [outerHTML]=\"bpmUser | usernameInitials:'adf-userinfo-profile-initials adf-hide-small'\"></div>\n                          <img *ngIf=\"hasBpmUserPictureId()\" class=\"adf-userinfo-profile-picture adf-hide-small\" id=\"bpm-user-detail-image\"\n                                  alt=\"bpm-profile-image\" [src]=\"bpmUserImage\"/>\n                         <div class=\"adf-userinfo-title\" id=\"bpm-username\">{{bpmUser.fullNameDisplay}}</div>\n                      </mat-card-header>\n                      <mat-card-content>\n                          <div class=\"adf-userinfo-supporting-text\">\n                                  <div class=\"adf-userinfo-detail\">\n                                      <span id=\"bpm-full-name\" class=\"adf-userinfo__detail-title\">{{ bpmUser.fullNameDisplay }}</span>\n                                      <span class=\"adf-userinfo__detail-profile\" id=\"bpm-email\"> {{bpmUser.email}} </span>\n                                  </div>\n                                  <div class=\"adf-userinfo-detail\">\n                                      <span id=\"bpm-tenant\" class=\"adf-userinfo__secondary-info\">\n                                          {{ 'USER_PROFILE.LABELS.BPM.TENANT' | translate }}\n                                          <span class=\"adf-userinfo__detail-profile\">{{ bpmUser.tenantName ? bpmUser.tenantName : '' }}</span>\n                                      </span>\n                                  </div>\n                          </div>\n                      </mat-card-content>\n                  </mat-card>\n                  </mat-tab>\n              </mat-tab-group>\n          </mat-menu>\n      </div>\n    ",
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
UserInfoComponent.ctorParameters = function () { return [
    { type: EcmUserService, },
    { type: BpmUserService, },
    { type: AuthenticationService, },
]; };
UserInfoComponent.propDecorators = {
    'ecmBackgroundImage': [{ type: core.Input },],
    'bpmBackgroundImage': [{ type: core.Input },],
    'menuPositionX': [{ type: core.Input },],
    'menuPositionY': [{ type: core.Input },],
    'showName': [{ type: core.Input },],
    'namePosition': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var UserInfoModule = /** @class */ (function () {
    function UserInfoModule() {
    }
    return UserInfoModule;
}());
UserInfoModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule,
                    MaterialModule,
                    core$1.TranslateModule,
                    PipeModule
                ],
                declarations: [
                    UserInfoComponent
                ],
                providers: [
                    EcmUserService,
                    BpmUserService
                ],
                exports: [
                    UserInfoComponent
                ]
            },] },
];
/**
 * @nocollapse
 */
UserInfoModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ImgViewerComponent = /** @class */ (function () {
    /**
     * @param {?} contentService
     */
    function ImgViewerComponent(contentService) {
        this.contentService = contentService;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ImgViewerComponent.prototype.ngOnChanges = function (changes) {
        var /** @type {?} */ blobFile = changes['blobFile'];
        if (blobFile && blobFile.currentValue) {
            this.urlFile = this.contentService.createTrustedUrl(this.blobFile);
            return;
        }
        if (!this.urlFile && !this.blobFile) {
            throw new Error('Attribute urlFile or blobFile is required');
        }
    };
    return ImgViewerComponent;
}());
ImgViewerComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-img-viewer',
                template: "\n      <div class=\"image-container\">\n          <img id=\"viewer-image\" [src]=\"urlFile\" [alt]=\"nameFile\" />\n      </div>\n    ",
                styles: ["\n      .adf-img-viewer .image-container {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n        text-align: center;\n        -webkit-box-orient: horizontal;\n        -webkit-box-direction: normal;\n            -ms-flex-direction: row;\n                flex-direction: row;\n        -webkit-box-pack: center;\n            -ms-flex-pack: center;\n                justify-content: center;\n        height: 90vh; }\n        .adf-img-viewer .image-container img {\n          width: 100%;\n          -o-object-fit: contain;\n             object-fit: contain; }\n    "],
                host: { 'class': 'adf-img-viewer' },
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
ImgViewerComponent.ctorParameters = function () { return [
    { type: ContentService, },
]; };
ImgViewerComponent.propDecorators = {
    'urlFile': [{ type: core.Input },],
    'blobFile': [{ type: core.Input },],
    'nameFile': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MediaPlayerComponent = /** @class */ (function () {
    /**
     * @param {?} contentService
     */
    function MediaPlayerComponent(contentService) {
        this.contentService = contentService;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    MediaPlayerComponent.prototype.ngOnChanges = function (changes) {
        var /** @type {?} */ blobFile = changes['blobFile'];
        if (blobFile && blobFile.currentValue) {
            this.urlFile = this.contentService.createTrustedUrl(this.blobFile);
            return;
        }
        if (!this.urlFile && !this.blobFile) {
            throw new Error('Attribute urlFile or blobFile is required');
        }
    };
    return MediaPlayerComponent;
}());
MediaPlayerComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-media-player',
                template: "\n      <video controls>\n          <source [src]=\"urlFile\" [type]=\"mimeType\" />\n      </video>\n    ",
                styles: ["\n      .adf-media-player video {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n        max-height: 90vh; }\n    "],
                host: { 'class': 'adf-media-player' },
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
MediaPlayerComponent.ctorParameters = function () { return [
    { type: ContentService, },
]; };
MediaPlayerComponent.propDecorators = {
    'urlFile': [{ type: core.Input },],
    'blobFile': [{ type: core.Input },],
    'mimeType': [{ type: core.Input },],
    'nameFile': [{ type: core.Input },],
};
/* Copyright 2012 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 *
 * RenderingQueueServices rendering of the views for pages and thumbnails.
 *
 */
var RenderingQueueServices = /** @class */ (function () {
    function RenderingQueueServices() {
        this.renderingStates = {
            INITIAL: 0,
            RUNNING: 1,
            PAUSED: 2,
            FINISHED: 3
        };
        this.CLEANUP_TIMEOUT = 30000;
        this.pdfViewer = null;
        this.pdfThumbnailViewer = null;
        this.onIdle = null;
        this.highestPriorityPage = null;
        this.idleTimeout = null;
        this.printing = false;
        this.isThumbnailViewEnabled = false;
    }
    /**
     * @param {?} pdfViewer
     * @return {?}
     */
    RenderingQueueServices.prototype.setViewer = function (pdfViewer) {
        this.pdfViewer = pdfViewer;
    };
    /**
     * @param {?} pdfThumbnailViewer
     * @return {?}
     */
    RenderingQueueServices.prototype.setThumbnailViewer = function (pdfThumbnailViewer) {
        this.pdfThumbnailViewer = pdfThumbnailViewer;
    };
    /**
     * @param {?} view
     * @return {?}
     */
    RenderingQueueServices.prototype.isHighestPriority = function (view) {
        return this.highestPriorityPage === view.renderingId;
    };
    /**
     * @param {?} currentlyVisiblePages
     * @return {?}
     */
    RenderingQueueServices.prototype.renderHighestPriority = function (currentlyVisiblePages) {
        if (this.idleTimeout) {
            clearTimeout(this.idleTimeout);
            this.idleTimeout = null;
        }
        // Pages have a higher priority than thumbnails, so check them first.
        if (this.pdfViewer.forceRendering(currentlyVisiblePages)) {
            return;
        }
        // No pages needed rendering so check thumbnails.
        if (this.pdfThumbnailViewer && this.isThumbnailViewEnabled) {
            if (this.pdfThumbnailViewer.forceRendering()) {
                return;
            }
        }
        if (this.printing) {
            // If printing is currently ongoing do not reschedule cleanup.
            return;
        }
        if (this.onIdle) {
            this.idleTimeout = setTimeout(this.onIdle.bind(this), this.CLEANUP_TIMEOUT);
        }
    };
    /**
     * @param {?} visible
     * @param {?} views
     * @param {?} scrolledDown
     * @return {?}
     */
    RenderingQueueServices.prototype.getHighestPriority = function (visible, views, scrolledDown) {
        // The state has changed figure out which page has the highest priority to
        // render next (if any).
        // Priority:
        // 1 visible pages
        // 2 if last scrolled down page after the visible pages
        // 2 if last scrolled up page before the visible pages
        var /** @type {?} */ visibleViews = visible.views;
        var /** @type {?} */ numVisible = visibleViews.length;
        if (numVisible === 0) {
            return false;
        }
        for (var /** @type {?} */ i = 0; i < numVisible; ++i) {
            var /** @type {?} */ view = visibleViews[i].view;
            if (!this.isViewFinished(view)) {
                return view;
            }
        }
        // All the visible views have rendered, try to render next/previous pages.
        if (scrolledDown) {
            var /** @type {?} */ nextPageIndex = visible.last.id;
            // ID's start at 1 so no need to add 1.
            if (views[nextPageIndex] && !this.isViewFinished(views[nextPageIndex])) {
                return views[nextPageIndex];
            }
        }
        else {
            var /** @type {?} */ previousPageIndex = visible.first.id - 2;
            if (views[previousPageIndex] && !this.isViewFinished(views[previousPageIndex])) {
                return views[previousPageIndex];
            }
        }
        // Everything that needs to be rendered has been.
        return null;
    };
    /**
     * @param {?} view
     * @return {?}
     */
    RenderingQueueServices.prototype.isViewFinished = function (view) {
        return view.renderingState === this.renderingStates.FINISHED;
    };
    /**
     * Render a page or thumbnail view. This calls the appropriate function
     * based on the views state. If the view is already rendered it will return
     * false.
     * @param {?} view
     * @return {?}
     */
    RenderingQueueServices.prototype.renderView = function (view) {
        var /** @type {?} */ state$$1 = view.renderingState;
        switch (state$$1) {
            case this.renderingStates.FINISHED:
                return false;
            case this.renderingStates.PAUSED:
                this.highestPriorityPage = view.renderingId;
                view.resume();
                break;
            case this.renderingStates.RUNNING:
                this.highestPriorityPage = view.renderingId;
                break;
            case this.renderingStates.INITIAL:
                this.highestPriorityPage = view.renderingId;
                var /** @type {?} */ continueRendering = function () {
                    this.renderHighestPriority();
                }.bind(this);
                view.draw().then(continueRendering, continueRendering);
                break;
            default:
                break;
        }
        return true;
    };
    return RenderingQueueServices;
}());
RenderingQueueServices.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
RenderingQueueServices.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var PdfViewerComponent = /** @class */ (function () {
    /**
     * @param {?} renderingQueueServices
     * @param {?} logService
     */
    function PdfViewerComponent(renderingQueueServices, logService) {
        this.renderingQueueServices = renderingQueueServices;
        this.logService = logService;
        this.showToolbar = true;
        this.allowThumbnails = false;
        this.currentScaleMode = 'auto';
        this.MAX_AUTO_SCALE = 1.25;
        this.DEFAULT_SCALE_DELTA = 1.1;
        this.MIN_SCALE = 0.25;
        this.MAX_SCALE = 10.0;
        // needed to preserve "this" context when setting as a global document event listener
        this.onDocumentScroll = this.onDocumentScroll.bind(this);
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    PdfViewerComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if (!this.urlFile && !this.blobFile) {
            throw new Error('Attribute urlFile or blobFile is required');
        }
        if (this.urlFile) {
            return new Promise(function (resolve, reject) {
                _this.executePdf(_this.urlFile, resolve, reject);
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                var /** @type {?} */ reader = new FileReader();
                reader.onload = function () {
                    _this.executePdf(reader.result, resolve, reject);
                };
                reader.readAsArrayBuffer(_this.blobFile);
            });
        }
    };
    /**
     * @param {?} src
     * @param {?} resolve
     * @param {?} reject
     * @return {?}
     */
    PdfViewerComponent.prototype.executePdf = function (src, resolve, reject) {
        var _this = this;
        var /** @type {?} */ loadingTask = this.getPDFJS().getDocument(src);
        loadingTask.onProgress = function (progressData) {
            var /** @type {?} */ level = progressData.loaded / progressData.total;
            _this.loadingPercent = Math.round(level * 100);
        };
        loadingTask.then(function (pdfDocument) {
            _this.currentPdfDocument = pdfDocument;
            _this.totalPages = pdfDocument.numPages;
            _this.page = 1;
            _this.displayPage = 1;
            _this.initPDFViewer(_this.currentPdfDocument);
            _this.currentPdfDocument.getPage(1).then(function () {
                _this.scalePage('auto');
                resolve();
            }, function (error) {
                reject(error);
            });
        }, function (error) {
            reject(error);
        });
    };
    /**
     * return the PDFJS global object (exist to facilitate the mock of PDFJS in the test)
     *
     * @return {?}
     */
    PdfViewerComponent.prototype.getPDFJS = function () {
        return PDFJS;
    };
    /**
     * @param {?} pdfDocument
     * @return {?}
     */
    PdfViewerComponent.prototype.initPDFViewer = function (pdfDocument) {
        PDFJS.verbosity = 1;
        PDFJS.disableWorker = false;
        var /** @type {?} */ documentContainer = document.getElementById('viewer-pdf-container');
        var /** @type {?} */ viewer = document.getElementById('viewer-viewerPdf');
        window.document.addEventListener('scroll', this.onDocumentScroll, true);
        this.pdfViewer = new PDFJS.PDFViewer({
            container: documentContainer,
            viewer: viewer,
            renderingQueue: this.renderingQueueServices
        });
        this.renderingQueueServices.setViewer(this.pdfViewer);
        this.pdfViewer.setDocument(pdfDocument);
    };
    /**
     * @return {?}
     */
    PdfViewerComponent.prototype.ngOnDestroy = function () {
        window.document.removeEventListener('scroll', this.onDocumentScroll, true);
    };
    /**
     * Method to scale the page current support implementation
     *
     * @param {?} scaleMode
     * @return {?}
     */
    PdfViewerComponent.prototype.scalePage = function (scaleMode) {
        this.currentScaleMode = scaleMode;
        if (this.pdfViewer) {
            var /** @type {?} */ viewerContainer = document.getElementById('viewer-main-container');
            var /** @type {?} */ documentContainer = document.getElementById('viewer-pdf-container');
            var /** @type {?} */ widthContainer = void 0;
            var /** @type {?} */ heigthContainer = void 0;
            if (viewerContainer && viewerContainer.clientWidth <= documentContainer.clientWidth) {
                widthContainer = viewerContainer.clientWidth;
                heigthContainer = viewerContainer.clientHeight;
            }
            else {
                widthContainer = documentContainer.clientWidth;
                heigthContainer = documentContainer.clientHeight;
            }
            var /** @type {?} */ currentPage = this.pdfViewer._pages[this.pdfViewer._currentPageNumber - 1];
            var /** @type {?} */ padding = 20;
            var /** @type {?} */ pageWidthScale = (widthContainer - padding) / currentPage.width * currentPage.scale;
            var /** @type {?} */ pageHeightScale = (heigthContainer - padding) / currentPage.width * currentPage.scale;
            var /** @type {?} */ scale = void 0;
            switch (this.currentScaleMode) {
                case 'page-actual':
                    scale = 1;
                    break;
                case 'page-width':
                    scale = pageWidthScale;
                    break;
                case 'page-height':
                    scale = pageHeightScale;
                    break;
                case 'page-fit':
                    scale = Math.min(pageWidthScale, pageHeightScale);
                    break;
                case 'auto':
                    var /** @type {?} */ horizontalScale = void 0;
                    if (this.isLandscape) {
                        horizontalScale = Math.min(pageHeightScale, pageWidthScale);
                    }
                    else {
                        horizontalScale = pageWidthScale;
                    }
                    scale = Math.min(this.MAX_AUTO_SCALE, horizontalScale);
                    break;
                default:
                    this.logService.error('pdfViewSetScale: \'' + scaleMode + '\' is an unknown zoom value.');
                    return;
            }
            this.setScaleUpdatePages(scale);
        }
    };
    /**
     * Update all the pages with the newScale scale
     *
     * @param {?} newScale
     * @return {?}
     */
    PdfViewerComponent.prototype.setScaleUpdatePages = function (newScale) {
        if (!this.isSameScale(this.currentScale, newScale)) {
            this.currentScale = newScale;
            this.pdfViewer._pages.forEach(function (currentPage) {
                currentPage.update(newScale);
            });
            this.pdfViewer.update();
        }
    };
    /**
     * method to check if the request scale of the page is the same for avoid unuseful re-rendering
     *
     *
     * @param {?} oldScale
     * @param {?} newScale
     * @return {?}
     */
    PdfViewerComponent.prototype.isSameScale = function (oldScale, newScale) {
        return (newScale === oldScale);
    };
    /**
     * method to check if is a land scape view
     *
     *
     * @param {?} width
     * @param {?} height
     * @return {?}
     */
    PdfViewerComponent.prototype.isLandscape = function (width, height) {
        return (width > height);
    };
    /**
     * Method triggered when the page is resized
     * @return {?}
     */
    PdfViewerComponent.prototype.onResize = function () {
        this.scalePage(this.currentScaleMode);
    };
    /**
     * toggle the fit page pdf
     * @return {?}
     */
    PdfViewerComponent.prototype.pageFit = function () {
        if (this.currentScaleMode !== 'page-fit') {
            this.scalePage('page-fit');
        }
        else {
            this.scalePage('auto');
        }
    };
    /**
     * zoom in page pdf
     *
     * @param {?} ticks
     * @return {?}
     */
    PdfViewerComponent.prototype.zoomIn = function (ticks) {
        var /** @type {?} */ newScale = this.currentScale;
        do {
            newScale = (newScale * this.DEFAULT_SCALE_DELTA).toFixed(2);
            newScale = Math.ceil(newScale * 10) / 10;
            newScale = Math.min(this.MAX_SCALE, newScale);
        } while (--ticks > 0 && newScale < this.MAX_SCALE);
        this.currentScaleMode = 'auto';
        this.setScaleUpdatePages(newScale);
    };
    /**
     * zoom out page pdf
     *
     * @param {?} ticks
     * @return {?}
     */
    PdfViewerComponent.prototype.zoomOut = function (ticks) {
        var /** @type {?} */ newScale = this.currentScale;
        do {
            newScale = (newScale / this.DEFAULT_SCALE_DELTA).toFixed(2);
            newScale = Math.floor(newScale * 10) / 10;
            newScale = Math.max(this.MIN_SCALE, newScale);
        } while (--ticks > 0 && newScale > this.MIN_SCALE);
        this.currentScaleMode = 'auto';
        this.setScaleUpdatePages(newScale);
    };
    /**
     * load the previous page
     * @return {?}
     */
    PdfViewerComponent.prototype.previousPage = function () {
        if (this.pdfViewer && this.page > 1) {
            this.page--;
            this.displayPage = this.page;
            this.pdfViewer.currentPageNumber = this.page;
        }
    };
    /**
     * load the next page
     * @return {?}
     */
    PdfViewerComponent.prototype.nextPage = function () {
        if (this.pdfViewer && this.page < this.totalPages) {
            this.page++;
            this.displayPage = this.page;
            this.pdfViewer.currentPageNumber = this.page;
        }
    };
    /**
     * load the page in input
     *
     * @param {?} page
     * @return {?}
     */
    PdfViewerComponent.prototype.inputPage = function (page) {
        var /** @type {?} */ pageInput = parseInt(page, 10);
        if (!isNaN(pageInput) && pageInput > 0 && pageInput <= this.totalPages) {
            this.page = pageInput;
            this.displayPage = this.page;
            this.pdfViewer.currentPageNumber = this.page;
        }
        else {
            this.displayPage = this.page;
        }
    };
    /**
     * Litener Scroll Event
     *
     * @param {?} target
     * @return {?}
     */
    PdfViewerComponent.prototype.watchScroll = function (target) {
        var /** @type {?} */ outputPage = this.getVisibleElement(target);
        if (outputPage) {
            this.page = outputPage.id;
            this.displayPage = this.page;
        }
    };
    /**
     * find out what elements are visible within a scroll pane
     *
     *
     * @param {?} target
     * @return {?}
     */
    PdfViewerComponent.prototype.getVisibleElement = function (target) {
        var _this = this;
        return this.pdfViewer._pages.find(function (page) {
            return _this.isOnScreen(page, target);
        });
    };
    /**
     * check if a page is visible
     *
     *
     * @param {?} page
     * @param {?} target
     * @return {?}
     */
    PdfViewerComponent.prototype.isOnScreen = function (page, target) {
        var /** @type {?} */ viewport = {};
        viewport.top = target.scrollTop;
        viewport.bottom = viewport.top + target.scrollHeight;
        var /** @type {?} */ bounds = {};
        bounds.top = page.div.offsetTop;
        bounds.bottom = bounds.top + page.viewport.height;
        return ((bounds.top <= viewport.bottom) && (bounds.bottom >= viewport.top));
    };
    /**
     * Litener Keyboard Event
     * @param {?} event
     * @return {?}
     */
    PdfViewerComponent.prototype.handleKeyboardEvent = function (event) {
        var /** @type {?} */ key = event.keyCode;
        if (key === 39) {
            this.nextPage();
        }
        else if (key === 37) {
            this.previousPage();
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    PdfViewerComponent.prototype.onDocumentScroll = function (event) {
        if (event && event.target) {
            this.watchScroll(event.target);
        }
    };
    return PdfViewerComponent;
}());
PdfViewerComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-pdf-viewer',
                template: "\n      <div id=\"viewer-pdf-container\" class=\"viewer-pdf-container\" (window:resize)=\"onResize()\">\n          <div id=\"viewer-viewerPdf\" class=\"pdfViewer\">\n              <div id=\"loader-container\" class=\"loader-container\">\n                  <div class=\"loader-item\">\n                      <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>\n                  </div >\n              </div>\n          </div>\n      </div>\n\n      <div class=\"adf-pdf-viewer__toolbar\" *ngIf=\"showToolbar\">\n          <adf-toolbar>\n\n              <ng-container *ngIf=\"allowThumbnails\">\n                  <button mat-icon-button>\n                      <mat-icon>dashboard</mat-icon>\n                  </button>\n                  <adf-toolbar-divider></adf-toolbar-divider>\n              </ng-container>\n\n              <button\n                  id=\"viewer-previous-page-button\"\n                  attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.PREVIOUS_PAGE' | translate }}\"\n                  mat-icon-button\n                  (click)=\"previousPage()\">\n                  <mat-icon>keyboard_arrow_up</mat-icon>\n              </button>\n\n              <button\n                  id=\"viewer-next-page-button\"\n                  attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.NEXT_PAGE' | translate }}\"\n                  mat-icon-button\n                  (click)=\"nextPage()\">\n                  <mat-icon>keyboard_arrow_down</mat-icon>\n              </button>\n\n              <div>\n                  {{ 'ADF_VIEWER.PAGE_LABEL.SHOWING' | translate }}\n                  <input #page\n                      class=\"adf-pdf-viewer__toolbar-page-selector\"\n                      type=\"text\"\n                      pattern=\"-?[0-9]*(\\.[0-9]+)?\"\n                      value=\"{{ displayPage }}\"\n                      (keyup.enter)=\"inputPage(page.value)\">\n                  {{ 'ADF_VIEWER.PAGE_LABEL.OF' | translate }} {{ totalPages }}\n              </div>\n\n              <adf-toolbar-divider></adf-toolbar-divider>\n\n              <button\n                  id=\"viewer-zoom-in-button\"\n                  attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.ZOOM_IN' | translate }}\"\n                  mat-icon-button\n                  (click)=\"zoomIn()\">\n                  <mat-icon>zoom_in</mat-icon>\n              </button>\n\n              <button\n                  id=\"viewer-zoom-out-button\"\n                  attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.ZOOM_OUT' | translate }}\"\n                  mat-icon-button\n                  (click)=\"zoomOut()\">\n                  <mat-icon>zoom_out</mat-icon>\n              </button>\n\n              <button\n                  id=\"viewer-scale-page-button\"\n                  attr.aria-label=\"{{ 'ADF_VIEWER.ARIA.FIT_PAGE' | translate }}\"\n                  mat-icon-button\n                  (click)=\"pageFit()\">\n                  <mat-icon>zoom_out_map</mat-icon>\n              </button>\n\n          </adf-toolbar>\n      </div>\n    ",
                styles: ["\n      .adf-pdf-viewer .loader-container {\n        display: -webkit-box;\n        /* OLD - iOS 6-, Safari 3.1-6 */\n        /* OLD - Firefox 19- (buggy but mostly works) */\n        /* NEW - Chrome */\n        display: -ms-flexbox;\n        display: flex;\n        /* NEW, Spec - Opera 12.1, Firefox 20+ */\n        -webkit-box-flex-direction: row;\n        -moz-box-flex-direction: row;\n        -webkit-box-orient: horizontal;\n        -webkit-box-direction: normal;\n            -ms-flex-direction: row;\n                flex-direction: row;\n        height: 100%; }\n\n      .adf-pdf-viewer .loader-item {\n        margin: auto;\n        max-height: 100px;\n        max-width: 300px; }\n\n      .adf-pdf-viewer__toolbar {\n        position: absolute;\n        bottom: 0;\n        left: 50%;\n        -webkit-transform: translateX(-50%);\n                transform: translateX(-50%); }\n        .adf-pdf-viewer__toolbar-page-selector {\n          font-size: 16px;\n          padding: 4px 0;\n          text-align: right;\n          width: 33px;\n          margin-right: 4px;\n          height: 20px;\n          outline-width: 1px;\n          outline-color: gray; }\n      .adf-pdf-viewer .textLayer {\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        overflow: hidden;\n        opacity: 0.2;\n        line-height: 1.0;\n        border: 1px solid gray; }\n        .adf-pdf-viewer .textLayer > div {\n          color: transparent;\n          position: absolute;\n          white-space: pre;\n          cursor: text;\n          -webkit-transform-origin: 0% 0%;\n          transform-origin: 0% 0%; }\n        .adf-pdf-viewer .textLayer .highlight {\n          margin: -1px;\n          padding: 1px;\n          background-color: #b400aa;\n          border-radius: 4px; }\n          .adf-pdf-viewer .textLayer .highlight.begin {\n            border-radius: 4px 0px 0px 4px; }\n          .adf-pdf-viewer .textLayer .highlight.end {\n            border-radius: 0px 4px 4px 0px; }\n          .adf-pdf-viewer .textLayer .highlight.middle {\n            border-radius: 0px; }\n          .adf-pdf-viewer .textLayer .highlight.selected {\n            background-color: darkgreen; }\n        .adf-pdf-viewer .textLayer::-moz-selection {\n          background: blue; }\n        .adf-pdf-viewer .textLayer::selection {\n          background: blue; }\n        .adf-pdf-viewer .textLayer::-moz-selection {\n          background: blue; }\n        .adf-pdf-viewer .textLayer .endOfContent {\n          display: block;\n          position: absolute;\n          left: 0px;\n          top: 100%;\n          right: 0px;\n          bottom: 0px;\n          z-index: -1;\n          cursor: default;\n          user-select: none;\n          -webkit-user-select: none;\n          -ms-user-select: none;\n          -moz-user-select: none; }\n          .adf-pdf-viewer .textLayer .endOfContent.active {\n            top: 0px; }\n\n      .adf-pdf-viewer .annotationLayer section {\n        position: absolute; }\n\n      .adf-pdf-viewer .annotationLayer .linkAnnotation > a {\n        position: absolute;\n        font-size: 1em;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: url(\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\") 0 0 repeat; }\n        .adf-pdf-viewer .annotationLayer .linkAnnotation > a:hover {\n          opacity: 0.2;\n          background: #ff0;\n          -webkit-box-shadow: 0px 2px 10px #ff0;\n                  box-shadow: 0px 2px 10px #ff0; }\n\n      .adf-pdf-viewer .annotationLayer .textAnnotation img {\n        position: absolute;\n        cursor: pointer; }\n\n      .adf-pdf-viewer .annotationLayer .popupWrapper {\n        position: absolute;\n        width: 20em; }\n\n      .adf-pdf-viewer .annotationLayer .popup {\n        position: absolute;\n        z-index: 200;\n        max-width: 20em;\n        background-color: #FFFF99;\n        -webkit-box-shadow: 0px 2px 5px #333;\n                box-shadow: 0px 2px 5px #333;\n        border-radius: 2px;\n        padding: 0.6em;\n        margin-left: 5px;\n        cursor: pointer;\n        word-wrap: break-word; }\n        .adf-pdf-viewer .annotationLayer .popup h1 {\n          font-size: 1em;\n          border-bottom: 1px solid #000000;\n          padding-bottom: 0.2em; }\n        .adf-pdf-viewer .annotationLayer .popup p {\n          padding-top: 0.2em; }\n\n      .adf-pdf-viewer .annotationLayer .highlightAnnotation,\n      .adf-pdf-viewer .annotationLayer .underlineAnnotation,\n      .adf-pdf-viewer .annotationLayer .squigglyAnnotation,\n      .adf-pdf-viewer .annotationLayer .strikeoutAnnotation,\n      .adf-pdf-viewer .annotationLayer .fileAttachmentAnnotation {\n        cursor: pointer; }\n\n      .adf-pdf-viewer .pdfViewer canvasWrapper {\n        overflow: hidden; }\n\n      .adf-pdf-viewer .pdfViewer .page {\n        direction: ltr;\n        width: 816px;\n        height: 1056px;\n        margin: 1px auto -8px auto;\n        position: relative;\n        overflow: visible;\n        border: 9px solid transparent;\n        background-clip: content-box;\n        background-color: white; }\n        .adf-pdf-viewer .pdfViewer .page canvas {\n          margin: 0;\n          display: block; }\n        .adf-pdf-viewer .pdfViewer .page .loadingIcon {\n          position: absolute;\n          display: block;\n          left: 0;\n          top: 0;\n          right: 0;\n          bottom: 0; }\n\n      .adf-pdf-viewer .pdfViewer.removePageBorders .page {\n        margin: 0px auto 10px auto;\n        border: none; }\n\n      .adf-pdf-viewer .pdfViewer .loadingIcon {\n        width: 100px;\n        height: 100px;\n        left: 50% !important;\n        top: 50% !important;\n        margin-top: -50px;\n        margin-left: -50px;\n        font-size: 5px;\n        text-indent: -9999em;\n        border-top: 1.1em solid rgba(3, 0, 2, 0.2);\n        border-right: 1.1em solid rgba(3, 0, 2, 0.2);\n        border-bottom: 1.1em solid rgba(3, 0, 2, 0.2);\n        border-left: 1.1em solid #030002;\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        -webkit-animation: load8 1.1s infinite linear;\n        animation: load8 1.1s infinite linear;\n        border-radius: 50%; }\n        .adf-pdf-viewer .pdfViewer .loadingIcon:after {\n          border-radius: 50%; }\n\n      .adf-pdf-viewer * {\n        padding: 0;\n        margin: 0; }\n\n      .adf-pdf-viewer .hidden, .adf-pdf-viewer [hidden] {\n        display: none !important; }\n\n      @-webkit-keyframes load8 {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg); }\n        100% {\n          -webkit-transform: rotate(360deg);\n          transform: rotate(360deg); } }\n\n      @keyframes load8 {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg); }\n        100% {\n          -webkit-transform: rotate(360deg);\n          transform: rotate(360deg); } }\n\n      .viewer-pdf-container {\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        outline: none; }\n\n      html[dir='ltr'] .viewer-pdf-container {\n        -webkit-box-shadow: inset 1px 0 0 rgba(255, 255, 255, 0.05);\n                box-shadow: inset 1px 0 0 rgba(255, 255, 255, 0.05); }\n\n      html[dir='rtl'] .viewer-pdf-container {\n        -webkit-box-shadow: inset -1px 0 0 rgba(255, 255, 255, 0.05);\n                box-shadow: inset -1px 0 0 rgba(255, 255, 255, 0.05); }\n    "],
                providers: [RenderingQueueServices],
                host: { 'class': 'adf-pdf-viewer' },
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
PdfViewerComponent.ctorParameters = function () { return [
    { type: RenderingQueueServices, },
    { type: LogService, },
]; };
PdfViewerComponent.propDecorators = {
    'urlFile': [{ type: core.Input },],
    'blobFile': [{ type: core.Input },],
    'nameFile': [{ type: core.Input },],
    'showToolbar': [{ type: core.Input },],
    'allowThumbnails': [{ type: core.Input },],
    'handleKeyboardEvent': [{ type: core.HostListener, args: ['document:keydown', ['$event'],] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var TxtViewerComponent = /** @class */ (function () {
    /**
     * @param {?} http
     */
    function TxtViewerComponent(http$$1) {
        this.http = http$$1;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    TxtViewerComponent.prototype.ngOnChanges = function (changes) {
        var /** @type {?} */ blobFile = changes['blobFile'];
        if (blobFile && blobFile.currentValue) {
            return this.readBlob(blobFile.currentValue);
        }
        var /** @type {?} */ urlFile = changes['urlFile'];
        if (urlFile && urlFile.currentValue) {
            return this.getUrlContent(urlFile.currentValue);
        }
        if (!this.urlFile && !this.blobFile) {
            throw new Error('Attribute urlFile or blobFile is required');
        }
    };
    /**
     * @param {?} url
     * @return {?}
     */
    TxtViewerComponent.prototype.getUrlContent = function (url) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.http.get(url, { responseType: 'text' }).subscribe(function (res) {
                _this.content = res;
                resolve();
            }, function (event) {
                reject(event);
            });
        });
    };
    /**
     * @param {?} blob
     * @return {?}
     */
    TxtViewerComponent.prototype.readBlob = function (blob) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var /** @type {?} */ reader = new FileReader();
            reader.onload = function () {
                _this.content = reader.result;
                resolve();
            };
            reader.onerror = function (error) {
                reject(error);
            };
            reader.readAsText(blob);
        });
    };
    return TxtViewerComponent;
}());
TxtViewerComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-txt-viewer',
                template: "\n      <pre class=\"adf-txt-viewer-content\">\n          {{content}}\n      </pre>\n    ",
                styles: ["\n      .adf-txt-viewer {\n        background-color: white;\n        width: 100vw;\n        overflow: hidden;\n        overflow-y: scroll;\n        margin-bottom: 42px; }\n    "],
                host: { 'class': 'adf-txt-viewer' },
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
TxtViewerComponent.ctorParameters = function () { return [
    { type: http.HttpClient, },
]; };
TxtViewerComponent.propDecorators = {
    'urlFile': [{ type: core.Input },],
    'blobFile': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var UnknownFormatComponent = /** @class */ (function () {
    function UnknownFormatComponent() {
    }
    return UnknownFormatComponent;
}());
UnknownFormatComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-viewer-unknown-format',
                template: "\n      <div class=\"adf-viewer__unknown-format-view\">\n          <div>\n              <mat-icon class=\"icon\">wifi_tethering</mat-icon>\n              <div class=\"label\">{{ 'ADF_VIEWER.UNKNOWN_FORMAT' | translate }}</div>\n          </div>\n      </div>\n    ",
                styles: ["\n      .adf-viewer__unknown-format-view {\n        height: 90vh;\n        text-align: center;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n        -webkit-box-orient: vertical;\n        -webkit-box-direction: normal;\n            -ms-flex-direction: column;\n                flex-direction: column;\n        -webkit-box-pack: center;\n            -ms-flex-pack: center;\n                justify-content: center; }\n    "]
            },] },
];
/**
 * @nocollapse
 */
UnknownFormatComponent.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ViewerMoreActionsComponent = /** @class */ (function () {
    function ViewerMoreActionsComponent() {
    }
    return ViewerMoreActionsComponent;
}());
ViewerMoreActionsComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-viewer-more-actions',
                encapsulation: core.ViewEncapsulation.None,
                changeDetection: core.ChangeDetectionStrategy.OnPush,
                host: { class: 'adf-viewer-more-actions' },
                template: "<ng-content></ng-content>"
            },] },
];
/**
 * @nocollapse
 */
ViewerMoreActionsComponent.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ViewerOpenWithComponent = /** @class */ (function () {
    function ViewerOpenWithComponent() {
    }
    return ViewerOpenWithComponent;
}());
ViewerOpenWithComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-viewer-open-with',
                encapsulation: core.ViewEncapsulation.None,
                changeDetection: core.ChangeDetectionStrategy.OnPush,
                host: { class: 'adf-viewer-open-with' },
                template: "<ng-content></ng-content>"
            },] },
];
/**
 * @nocollapse
 */
ViewerOpenWithComponent.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ViewerSidebarComponent = /** @class */ (function () {
    function ViewerSidebarComponent() {
    }
    return ViewerSidebarComponent;
}());
ViewerSidebarComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-viewer-sidebar',
                encapsulation: core.ViewEncapsulation.None,
                changeDetection: core.ChangeDetectionStrategy.OnPush,
                host: { class: 'adf-viewer-sidebar' },
                template: "<ng-content></ng-content>"
            },] },
];
/**
 * @nocollapse
 */
ViewerSidebarComponent.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ViewerToolbarComponent = /** @class */ (function () {
    function ViewerToolbarComponent() {
    }
    return ViewerToolbarComponent;
}());
ViewerToolbarComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-viewer-toolbar',
                encapsulation: core.ViewEncapsulation.None,
                changeDetection: core.ChangeDetectionStrategy.OnPush,
                host: { class: 'adf-viewer-toolbar' },
                template: "<ng-content></ng-content>"
            },] },
];
/**
 * @nocollapse
 */
ViewerToolbarComponent.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * RenditionsService
 *
 */
var RenditionsService = /** @class */ (function () {
    /**
     * @param {?} apiService
     */
    function RenditionsService(apiService) {
        this.apiService = apiService;
    }
    /**
     * @param {?} nodeId
     * @param {?} encoding
     * @return {?}
     */
    RenditionsService.prototype.isRenditionAvailable = function (nodeId, encoding) {
        var _this = this;
        return Observable.Observable.create(function (observer) {
            _this.getRendition(nodeId, encoding).subscribe(function (res) {
                var /** @type {?} */ isAvailable = true;
                if (res.entry.status.toString() === 'NOT_CREATED') {
                    isAvailable = false;
                }
                observer.next(isAvailable);
                observer.complete();
            }, function () {
                observer.next(false);
                observer.complete();
            });
        });
    };
    /**
     * @param {?} nodeId
     * @param {?} encoding
     * @return {?}
     */
    RenditionsService.prototype.isConversionPossible = function (nodeId, encoding) {
        var _this = this;
        return Observable.Observable.create(function (observer) {
            _this.getRendition(nodeId, encoding).subscribe(function () {
                observer.next(true);
                observer.complete();
            }, function () {
                observer.next(false);
                observer.complete();
            });
        });
    };
    /**
     * @param {?} nodeId
     * @param {?} encoding
     * @return {?}
     */
    RenditionsService.prototype.getRenditionUrl = function (nodeId, encoding) {
        return this.apiService.contentApi.getRenditionUrl(nodeId, 'pdf');
    };
    /**
     * @param {?} nodeId
     * @param {?} encoding
     * @return {?}
     */
    RenditionsService.prototype.getRendition = function (nodeId, encoding) {
        return Observable.Observable.fromPromise(this.apiService.renditionsApi.getRendition(nodeId, encoding));
    };
    /**
     * @param {?} nodeId
     * @return {?}
     */
    RenditionsService.prototype.getRenditionsListByNodeId = function (nodeId) {
        return Observable.Observable.fromPromise(this.apiService.renditionsApi.getRenditions(nodeId));
    };
    /**
     * @param {?} nodeId
     * @param {?} encoding
     * @return {?}
     */
    RenditionsService.prototype.createRendition = function (nodeId, encoding) {
        return Observable.Observable.fromPromise(this.apiService.renditionsApi.createRendition(nodeId, { id: encoding }));
    };
    /**
     * @param {?} nodeId
     * @param {?} encoding
     * @param {?=} pollingInterval
     * @return {?}
     */
    RenditionsService.prototype.convert = function (nodeId, encoding, pollingInterval) {
        var _this = this;
        if (pollingInterval === void 0) { pollingInterval = 1000; }
        return this.createRendition(nodeId, encoding)
            .concatMap(function () { return _this.pollRendition(nodeId, encoding, pollingInterval); });
    };
    /**
     * @param {?} nodeId
     * @param {?} encoding
     * @param {?=} interval
     * @return {?}
     */
    RenditionsService.prototype.pollRendition = function (nodeId, encoding, interval$$1) {
        var _this = this;
        if (interval$$1 === void 0) { interval$$1 = 1000; }
        return Observable.Observable.interval(interval$$1)
            .switchMap(function () { return _this.getRendition(nodeId, encoding); })
            .takeWhile(function (data) {
            return (data.entry.status.toString() !== 'CREATED');
        });
    };
    return RenditionsService;
}());
RenditionsService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
RenditionsService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ViewerComponent = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} logService
     * @param {?} location
     * @param {?} renditionService
     */
    function ViewerComponent(apiService, logService, location, renditionService) {
        this.apiService = apiService;
        this.logService = logService;
        this.location = location;
        this.renditionService = renditionService;
        this.urlFile = '';
        this.fileNodeId = null;
        this.overlayMode = false;
        this.showViewer = true;
        this.showToolbar = true;
        this.allowGoBack = true;
        this.allowDownload = true;
        this.allowPrint = false;
        this.allowShare = false;
        this.allowSidebar = false;
        this.showSidebar = false;
        this.sidebarPosition = 'right';
        this.sidebarTemplate = null;
        this.goBack = new core.EventEmitter();
        this.download = new core.EventEmitter();
        this.print = new core.EventEmitter();
        this.share = new core.EventEmitter();
        this.showViewerChange = new core.EventEmitter();
        this.extensionChange = new core.EventEmitter();
        this.viewerType = 'unknown';
        this.downloadUrl = null;
        this.fileName = 'document';
        this.isLoading = false;
        this.extensionTemplates = [];
        this.externalExtensions = [];
        this.sidebarTemplateContext = { node: null };
        this.extensions = {
            image: ['png', 'jpg', 'jpeg', 'gif', 'bpm'],
            media: ['wav', 'mp4', 'mp3', 'webm', 'ogg'],
            text: ['txt', 'xml', 'js', 'html', 'json'],
            pdf: ['pdf']
        };
        this.mimeTypes = [
            { mimeType: 'application/x-javascript', type: 'text' },
            { mimeType: 'application/pdf', type: 'pdf' }
        ];
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ViewerComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if (this.showViewer) {
            if (!this.urlFile && !this.blobFile && !this.fileNodeId) {
                throw new Error('Attribute urlFile or fileNodeId or blobFile is required');
            }
            return new Promise(function (resolve, reject) {
                if (_this.blobFile) {
                    _this.displayName = _this.getDisplayName('Unknown');
                    _this.isLoading = true;
                    _this.mimeType = _this.blobFile.type;
                    _this.viewerType = _this.getViewerTypeByMimeType(_this.mimeType);
                    _this.allowDownload = false;
                    // TODO: wrap blob into the data url and allow downloading
                    _this.extensionChange.emit(_this.mimeType);
                    _this.isLoading = false;
                    _this.scrollTop();
                    resolve();
                }
                else if (_this.urlFile) {
                    _this.isLoading = true;
                    var /** @type {?} */ filenameFromUrl = _this.getFilenameFromUrl(_this.urlFile);
                    _this.displayName = _this.getDisplayName(filenameFromUrl);
                    _this.extension = _this.getFileExtension(filenameFromUrl);
                    _this.urlFileContent = _this.urlFile;
                    _this.downloadUrl = _this.urlFile;
                    _this.fileName = _this.displayName;
                    _this.viewerType = _this.getViewerTypeByExtension(_this.extension);
                    if (_this.viewerType === 'unknown') {
                        _this.viewerType = _this.getViewerTypeByMimeType(_this.mimeType);
                    }
                    _this.extensionChange.emit(_this.extension);
                    _this.isLoading = false;
                    _this.scrollTop();
                    resolve();
                }
                else if (_this.fileNodeId) {
                    _this.isLoading = true;
                    _this.apiService.getInstance().nodes.getNodeInfo(_this.fileNodeId).then(function (data) {
                        _this.mimeType = data.content.mimeType;
                        _this.displayName = _this.getDisplayName(data.name);
                        _this.urlFileContent = _this.apiService.getInstance().content.getContentUrl(data.id);
                        _this.extension = _this.getFileExtension(data.name);
                        _this.fileName = data.name;
                        _this.downloadUrl = _this.apiService.getInstance().content.getContentUrl(data.id, true);
                        _this.viewerType = _this.getViewerTypeByExtension(_this.extension);
                        if (_this.viewerType === 'unknown') {
                            _this.viewerType = _this.getViewerTypeByMimeType(_this.mimeType);
                        }
                        if (_this.viewerType === 'unknown') {
                            _this.displayAsPdf(data.id);
                        }
                        else {
                            _this.isLoading = false;
                        }
                        _this.extensionChange.emit(_this.extension);
                        _this.sidebarTemplateContext.node = data;
                        _this.scrollTop();
                        resolve();
                    }, function (error) {
                        _this.isLoading = false;
                        reject(error);
                        _this.logService.error('This node does not exist');
                    });
                }
            });
        }
    };
    /**
     * @param {?} name
     * @return {?}
     */
    ViewerComponent.prototype.getDisplayName = function (name) {
        return this.displayName || name;
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.scrollTop = function () {
        window.scrollTo(0, 1);
    };
    /**
     * @param {?} mimeType
     * @return {?}
     */
    ViewerComponent.prototype.getViewerTypeByMimeType = function (mimeType) {
        if (mimeType) {
            mimeType = mimeType.toLowerCase();
            if (mimeType.startsWith('image/')) {
                return 'image';
            }
            if (mimeType.startsWith('text/')) {
                return 'text';
            }
            if (mimeType.startsWith('video/')) {
                return 'media';
            }
            if (mimeType.startsWith('audio/')) {
                return 'media';
            }
            var /** @type {?} */ registered = this.mimeTypes.find(function (t) { return t.mimeType === mimeType; });
            if (registered) {
                return registered.type;
            }
        }
        return 'unknown';
    };
    /**
     * @param {?} extension
     * @return {?}
     */
    ViewerComponent.prototype.getViewerTypeByExtension = function (extension) {
        if (extension) {
            extension = extension.toLowerCase();
        }
        if (this.isCustomViewerExtension(extension)) {
            return 'custom';
        }
        if (this.extensions.image.indexOf(extension) >= 0) {
            return 'image';
        }
        if (this.extensions.media.indexOf(extension) >= 0) {
            return 'media';
        }
        if (this.extensions.text.indexOf(extension) >= 0) {
            return 'text';
        }
        if (this.extensions.pdf.indexOf(extension) >= 0) {
            return 'pdf';
        }
        return 'unknown';
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.onBackButtonClick = function () {
        if (this.overlayMode) {
            this.close();
        }
        else {
            var /** @type {?} */ event = new BaseEvent();
            this.goBack.next(event);
            if (!event.defaultPrevented) {
                this.location.back();
            }
        }
    };
    /**
     * close the viewer
     * @return {?}
     */
    ViewerComponent.prototype.close = function () {
        if (this.otherMenu) {
            this.otherMenu.hidden = false;
        }
        this.showViewer = false;
        this.showViewerChange.emit(this.showViewer);
    };
    /**
     * get File name from url
     *
     * @param {?} url
     * @return {?}
     */
    ViewerComponent.prototype.getFilenameFromUrl = function (url) {
        var /** @type {?} */ anchor = url.indexOf('#');
        var /** @type {?} */ query = url.indexOf('?');
        var /** @type {?} */ end = Math.min(anchor > 0 ? anchor : url.length, query > 0 ? query : url.length);
        return url.substring(url.lastIndexOf('/', end) + 1, end);
    };
    /**
     * Get the token from the local storage
     *
     * @param {?} fileName
     * @return {?}
     */
    ViewerComponent.prototype.getFileExtension = function (fileName) {
        return fileName.split('.').pop().toLowerCase();
    };
    /**
     * @param {?} extension
     * @return {?}
     */
    ViewerComponent.prototype.isCustomViewerExtension = function (extension) {
        var /** @type {?} */ extensions = this.externalExtensions || [];
        if (extension && extensions.length > 0) {
            extension = extension.toLowerCase();
            return extensions.indexOf(extension) >= 0;
        }
        return false;
    };
    /**
     * Litener Keyboard Event
     * @param {?} event
     * @return {?}
     */
    ViewerComponent.prototype.handleKeyboardEvent = function (event) {
        var /** @type {?} */ key = event.keyCode;
        if (key === 27 && this.overlayMode) {
            this.close();
        }
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.downloadContent = function () {
        if (this.allowDownload && this.downloadUrl && this.fileName) {
            var /** @type {?} */ args = new BaseEvent();
            this.download.next(args);
            if (!args.defaultPrevented) {
                var /** @type {?} */ link = document.createElement('a');
                link.style.display = 'none';
                link.download = this.fileName;
                link.href = this.downloadUrl;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.printContent = function () {
        if (this.allowPrint) {
            var /** @type {?} */ args = new BaseEvent();
            this.print.next(args);
        }
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.shareContent = function () {
        if (this.allowShare) {
            var /** @type {?} */ args = new BaseEvent();
            this.share.next(args);
        }
    };
    /**
     * @param {?} nodeId
     * @return {?}
     */
    ViewerComponent.prototype.displayAsPdf = function (nodeId) {
        var _this = this;
        this.isLoading = true;
        this.renditionService.getRendition(nodeId, 'pdf').subscribe(function (response) {
            var /** @type {?} */ status = response.entry.status.toString();
            if (status === 'CREATED') {
                _this.isLoading = false;
                _this.showPdfRendition(nodeId);
            }
            else if (status === 'NOT_CREATED') {
                _this.renditionService.convert(nodeId, 'pdf').subscribe({
                    complete: function () {
                        _this.isLoading = false;
                        _this.showPdfRendition(nodeId);
                    },
                    error: function (error) {
                        _this.isLoading = false;
                    }
                });
            }
            else {
                _this.isLoading = false;
            }
        }, function (err) {
            _this.isLoading = false;
        });
    };
    /**
     * @param {?} nodeId
     * @return {?}
     */
    ViewerComponent.prototype.showPdfRendition = function (nodeId) {
        if (nodeId) {
            this.viewerType = 'pdf';
            this.urlFileContent = this.renditionService.getRenditionUrl(nodeId, 'pdf');
        }
    };
    return ViewerComponent;
}());
ViewerComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-viewer',
                template: "\n      <div *ngIf=\"showViewer\"\n          class=\"adf-viewer-container\"\n          [class.adf-viewer-overlay-container]=\"overlayMode\"\n          [class.adf-viewer-inline-container]=\"!overlayMode\">\n\n          <div class=\"adf-viewer-content\" fxLayout=\"column\">\n              <ng-content select=\"adf-viewer-toolbar\"></ng-content>\n              <ng-container *ngIf=\"showToolbar && !toolbar\">\n                  <adf-toolbar color=\"default\" class=\"adf-viewer-toolbar\">\n\n                      <adf-toolbar-title>\n                          <button *ngIf=\"allowGoBack\"\n                              class=\"adf-viewer-close-button\"\n                              data-automation-id=\"toolbar-back\"\n                              mat-icon-button\n                              matTooltip=\"{{ 'ADF_VIEWER.ACTIONS.BACK' | translate }}\"\n                              (click)=\"onBackButtonClick()\">\n                              <mat-icon>arrow_back</mat-icon>\n                          </button>\n                          <img class=\"adf-viewer__mimeicon\" [src]=\"mimeType | adfMimeTypeIcon\">\n                          <span id=\"adf-viewer-display-name\">{{ displayName }}</span>\n                      </adf-toolbar-title>\n\n                      <ng-container *ngIf=\"mnuOpenWith\">\n                          <button\n                              mat-button\n                              [matMenuTriggerFor]=\"mnuOpenWith\"\n                              data-automation-id=\"toolbar-open-with\">\n                              <span>{{ 'ADF_VIEWER.ACTIONS.OPEN_WITH' | translate }}</span>\n                              <mat-icon>arrow_drop_down</mat-icon>\n                          </button>\n                          <mat-menu #mnuOpenWith=\"matMenu\" [overlapTrigger]=\"false\">\n                              <ng-content select=\"adf-viewer-open-with\"></ng-content>\n                          </mat-menu>\n                      </ng-container>\n\n                      <adf-toolbar-divider></adf-toolbar-divider>\n\n                      <button\n                          *ngIf=\"allowDownload\"\n                          mat-icon-button\n                          matTooltip=\"{{ 'ADF_VIEWER.ACTIONS.DOWNLOAD' | translate }}\"\n                          data-automation-id=\"toolbar-download\"\n                          (click)=\"downloadContent()\">\n                          <mat-icon>file_download</mat-icon>\n                      </button>\n\n                      <button\n                          *ngIf=\"allowPrint\"\n                          mat-icon-button\n                          matTooltip=\"{{ 'ADF_VIEWER.ACTIONS.PRINT' | translate }}\"\n                          data-automation-id=\"toolbar-print\"\n                          (click)=\"printContent()\">\n                          <mat-icon>print</mat-icon>\n                      </button>\n\n                      <button\n                          *ngIf=\"allowShare\"\n                          mat-icon-button\n                          matTooltip=\"{{ 'ADF_VIEWER.ACTIONS.SHARE' | translate }}\"\n                          data-automation-id=\"toolbar-share\"\n                          (click)=\"shareContent()\">\n                          <mat-icon>share</mat-icon>\n                      </button>\n\n                      <ng-container *ngIf=\"mnuMoreActions\">\n                          <button\n                              mat-icon-button\n                              [matMenuTriggerFor]=\"mnuMoreActions\"\n                              matTooltip=\"{{ 'ADF_VIEWER.ACTIONS.MORE_ACTIONS' | translate }}\"\n                              data-automation-id=\"toolbar-more-actions\">\n                              <mat-icon>more_vert</mat-icon>\n                          </button>\n                          <mat-menu #mnuMoreActions=\"matMenu\" [overlapTrigger]=\"false\">\n                              <ng-content select=\"adf-viewer-more-actions\"></ng-content>\n                          </mat-menu>\n                      </ng-container>\n\n                      <ng-container *ngIf=\"allowSidebar\">\n                          <adf-toolbar-divider></adf-toolbar-divider>\n\n                          <button\n                              mat-icon-button\n                              matTooltip=\"{{ 'ADF_VIEWER.ACTIONS.INFO' | translate }}\"\n                              data-automation-id=\"toolbar-sidebar\"\n                              [color]=\"showSidebar ? 'accent' : 'default'\"\n                              (click)=\"showSidebar = !showSidebar\">\n                              <mat-icon>info_outline</mat-icon>\n                          </button>\n                      </ng-container>\n\n                  </adf-toolbar>\n              </ng-container>\n\n              <ng-container *ngIf=\"isLoading\">\n                  <div class=\"adf-viewer__loading-screen\" fxFlex=\"1 1 auto\">\n                      <h2>{{ 'ADF_VIEWER.LOADING' | translate }}</h2>\n                      <div>\n                          <mat-spinner></mat-spinner>\n                      </div>\n                  </div>\n              </ng-container>\n\n              <div *ngIf=\"!isLoading\" fxLayout=\"row\" fxFlex=\"1 1 auto\">\n\n                  <ng-container *ngIf=\"showSidebar\">\n                      <div class=\"adf-viewer__sidebar\" fxFlexOrder=\"{{sidebarPosition === 'left'? 1: 2 }}\">\n                          <ng-container *ngIf=\"sidebarTemplate\">\n                              <ng-container *ngTemplateOutlet=\"sidebarTemplate;context:sidebarTemplateContext\"></ng-container>\n                          </ng-container>\n                          <ng-content *ngIf=\"!sidebarTemplate\" select=\"adf-viewer-sidebar\"></ng-content>\n                      </div>\n                  </ng-container>\n\n                  <div fxFlexOrder=\"{{sidebarPosition !== 'left'? 1: 2}}\" fxFlex=\"1 1 auto\">\n                      <div class=\"adf-viewer-layout-content\">\n                          <div class=\"adf-viewer-content-container\" [ngSwitch]=\"viewerType\">\n\n                              <ng-container *ngSwitchCase=\"'pdf'\">\n                                  <adf-pdf-viewer [blobFile]=\"blobFile\" [urlFile]=\"urlFileContent\" [nameFile]=\"displayName\"></adf-pdf-viewer>\n                              </ng-container>\n\n                              <ng-container *ngSwitchCase=\"'image'\">\n                                  <adf-img-viewer [urlFile]=\"urlFileContent\" [nameFile]=\"displayName\" [blobFile]=\"blobFile\"></adf-img-viewer>\n                              </ng-container>\n\n                              <ng-container *ngSwitchCase=\"'media'\">\n                                  <adf-media-player [urlFile]=\"urlFileContent\" [mimeType]=\"mimeType\" [blobFile]=\"blobFile\" [nameFile]=\"displayName\"></adf-media-player>\n                              </ng-container>\n\n                              <ng-container *ngSwitchCase=\"'text'\">\n                                  <adf-txt-viewer [urlFile]=\"urlFileContent\" [blobFile]=\"blobFile\"></adf-txt-viewer>\n                              </ng-container>\n\n                              <ng-container *ngSwitchCase=\"'custom'\">\n                                  <span *ngFor=\"let extensionTemplate of extensionTemplates\">\n                                      <ng-template *ngIf=\"extensionTemplate.isVisible\" [ngTemplateOutlet]=\"extensionTemplate.template\" [ngTemplateOutletContext]=\"{ urlFileContent: urlFileContent, extension:extension }\">\n                                      </ng-template>\n                                  </span>\n                              </ng-container>\n\n                              <ng-container *ngSwitchDefault>\n                                  <adf-viewer-unknown-format></adf-viewer-unknown-format>\n                              </ng-container>\n\n                          </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n      </div>\n    ",
                styles: ["\n\n    "],
                host: { 'class': 'adf-viewer' },
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
ViewerComponent.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: LogService, },
    { type: common.Location, },
    { type: RenditionsService, },
]; };
ViewerComponent.propDecorators = {
    'toolbar': [{ type: core.ContentChild, args: [ViewerToolbarComponent,] },],
    'sidebar': [{ type: core.ContentChild, args: [ViewerSidebarComponent,] },],
    'mnuOpenWith': [{ type: core.ContentChild, args: [ViewerOpenWithComponent,] },],
    'mnuMoreActions': [{ type: core.ContentChild, args: [ViewerMoreActionsComponent,] },],
    'urlFile': [{ type: core.Input },],
    'blobFile': [{ type: core.Input },],
    'fileNodeId': [{ type: core.Input },],
    'overlayMode': [{ type: core.Input },],
    'showViewer': [{ type: core.Input },],
    'showToolbar': [{ type: core.Input },],
    'displayName': [{ type: core.Input },],
    'allowGoBack': [{ type: core.Input },],
    'allowDownload': [{ type: core.Input },],
    'allowPrint': [{ type: core.Input },],
    'allowShare': [{ type: core.Input },],
    'allowSidebar': [{ type: core.Input },],
    'showSidebar': [{ type: core.Input },],
    'sidebarPosition': [{ type: core.Input },],
    'sidebarTemplate': [{ type: core.Input },],
    'goBack': [{ type: core.Output },],
    'download': [{ type: core.Output },],
    'print': [{ type: core.Output },],
    'share': [{ type: core.Output },],
    'showViewerChange': [{ type: core.Output },],
    'extensionChange': [{ type: core.Output },],
    'handleKeyboardEvent': [{ type: core.HostListener, args: ['document:keydown', ['$event'],] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ViewerExtensionDirective = /** @class */ (function () {
    /**
     * @param {?} viewerComponent
     */
    function ViewerExtensionDirective(viewerComponent) {
        this.viewerComponent = viewerComponent;
    }
    /**
     * @return {?}
     */
    ViewerExtensionDirective.prototype.ngAfterContentInit = function () {
        var _this = this;
        this.templateModel = { template: this.template, isVisible: false };
        this.viewerComponent.extensionTemplates.push(this.templateModel);
        this.viewerComponent.extensionChange.subscribe(function (fileExtension) {
            _this.templateModel.isVisible = _this.isVisible(fileExtension);
        });
        if (this.supportedExtensions instanceof Array) {
            this.supportedExtensions.forEach(function (extension) {
                _this.viewerComponent.externalExtensions.push(extension);
            });
        }
    };
    /**
     * check if the current extension in the viewer is compatible with this extension checking against supportedExtensions
     *
     * @param {?} fileExtension
     * @return {?}
     */
    ViewerExtensionDirective.prototype.isVisible = function (fileExtension) {
        var /** @type {?} */ supportedExtension;
        if (this.supportedExtensions && (this.supportedExtensions instanceof Array)) {
            supportedExtension = this.supportedExtensions.find(function (extension) {
                return extension.toLowerCase() === fileExtension;
            });
        }
        return !!supportedExtension;
    };
    return ViewerExtensionDirective;
}());
ViewerExtensionDirective.decorators = [
    { type: core.Directive, args: [{
                selector: 'adf-viewer-extension'
            },] },
];
/**
 * @nocollapse
 */
ViewerExtensionDirective.ctorParameters = function () { return [
    { type: ViewerComponent, },
]; };
ViewerExtensionDirective.propDecorators = {
    'template': [{ type: core.ContentChild, args: [core.TemplateRef,] },],
    'urlFileContent': [{ type: core.Input },],
    'extension': [{ type: core.Input },],
    'supportedExtensions': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ViewerModule = /** @class */ (function () {
    function ViewerModule() {
    }
    return ViewerModule;
}());
ViewerModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule,
                    MaterialModule,
                    core$1.TranslateModule,
                    ToolbarModule,
                    PipeModule,
                    flexLayout.FlexLayoutModule
                ],
                declarations: [
                    ViewerComponent,
                    ImgViewerComponent,
                    TxtViewerComponent,
                    MediaPlayerComponent,
                    PdfViewerComponent,
                    ViewerExtensionDirective,
                    UnknownFormatComponent,
                    ViewerToolbarComponent,
                    ViewerSidebarComponent,
                    ViewerOpenWithComponent,
                    ViewerMoreActionsComponent
                ],
                exports: [
                    ViewerComponent,
                    ImgViewerComponent,
                    TxtViewerComponent,
                    MediaPlayerComponent,
                    PdfViewerComponent,
                    ViewerExtensionDirective,
                    UnknownFormatComponent,
                    ViewerToolbarComponent,
                    ViewerSidebarComponent,
                    ViewerOpenWithComponent,
                    ViewerMoreActionsComponent
                ]
            },] },
];
/**
 * @nocollapse
 */
ViewerModule.ctorParameters = function () { return []; };
var FormDefinitionModel = /** @class */ (function () {
    /**
     * @param {?} id
     * @param {?} name
     * @param {?} lastUpdatedByFullName
     * @param {?} lastUpdated
     * @param {?} metadata
     */
    function FormDefinitionModel(id, name, lastUpdatedByFullName, lastUpdated, metadata) {
        this.reusable = false;
        this.newVersion = false;
        this.formImageBase64 = '';
        this.formRepresentation = {
            id: id,
            name: name,
            description: '',
            version: 1,
            lastUpdatedBy: 1,
            lastUpdatedByFullName: lastUpdatedByFullName,
            lastUpdated: lastUpdated,
            stencilSetId: 0,
            referenceId: null,
            formDefinition: {
                fields: [{
                        name: 'Label',
                        type: 'container',
                        fieldType: 'ContainerRepresentation',
                        numberOfColumns: 2,
                        required: false,
                        readOnly: false,
                        sizeX: 2,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        fields: { '1': this.metadataToFields(metadata) }
                    }],
                gridsterForm: false,
                javascriptEvents: [],
                metadata: {},
                outcomes: [],
                className: '',
                style: '',
                tabs: [],
                variables: []
            }
        };
    }
    /**
     * @param {?} metadata
     * @return {?}
     */
    FormDefinitionModel.prototype.metadataToFields = function (metadata) {
        var /** @type {?} */ fields = [];
        if (metadata) {
            metadata.forEach(function (property) {
                if (property) {
                    var /** @type {?} */ field = {
                        type: 'text',
                        id: property.name,
                        name: property.name,
                        required: false,
                        readOnly: false,
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        colspan: 1,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        layout: {
                            colspan: 1,
                            row: -1,
                            column: -1
                        }
                    };
                    fields.push(field);
                }
            });
        }
        return fields;
    };
    return FormDefinitionModel;
}());
var FormFieldTypes = /** @class */ (function () {
    function FormFieldTypes() {
    }
    /**
     * @param {?} type
     * @return {?}
     */
    FormFieldTypes.isReadOnlyType = function (type) {
        return FormFieldTypes.READONLY_TYPES.indexOf(type) > -1;
    };
    /**
     * @param {?} type
     * @return {?}
     */
    FormFieldTypes.isContainerType = function (type) {
        return type === FormFieldTypes.CONTAINER || type === FormFieldTypes.GROUP;
    };
    return FormFieldTypes;
}());
FormFieldTypes.CONTAINER = 'container';
FormFieldTypes.GROUP = 'group';
FormFieldTypes.DYNAMIC_TABLE = 'dynamic-table';
FormFieldTypes.TEXT = 'text';
FormFieldTypes.MULTILINE_TEXT = 'multi-line-text';
FormFieldTypes.DROPDOWN = 'dropdown';
FormFieldTypes.HYPERLINK = 'hyperlink';
FormFieldTypes.RADIO_BUTTONS = 'radio-buttons';
FormFieldTypes.DISPLAY_VALUE = 'readonly';
FormFieldTypes.READONLY_TEXT = 'readonly-text';
FormFieldTypes.UPLOAD = 'upload';
FormFieldTypes.TYPEAHEAD = 'typeahead';
FormFieldTypes.FUNCTIONAL_GROUP = 'functional-group';
FormFieldTypes.PEOPLE = 'people';
FormFieldTypes.BOOLEAN = 'boolean';
FormFieldTypes.NUMBER = 'integer';
FormFieldTypes.DATE = 'date';
FormFieldTypes.AMOUNT = 'amount';
FormFieldTypes.DOCUMENT = 'document';
FormFieldTypes.READONLY_TYPES = [
    FormFieldTypes.HYPERLINK,
    FormFieldTypes.DISPLAY_VALUE,
    FormFieldTypes.READONLY_TEXT
];
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @abstract
 */
var FormWidgetModel = /** @class */ (function () {
    /**
     * @param {?} form
     * @param {?} json
     */
    function FormWidgetModel(form, json) {
        this.form = form;
        this.json = json;
        if (json) {
            this.fieldType = json.fieldType;
            this.id = json.id;
            this.name = json.name;
            this.type = json.type;
            this.tab = json.tab;
        }
    }
    return FormWidgetModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ContainerColumnModel = /** @class */ (function () {
    function ContainerColumnModel() {
        this.size = 12;
        this.fields = [];
        this.colspan = 1;
        this.rowspan = 1;
    }
    /**
     * @return {?}
     */
    ContainerColumnModel.prototype.hasFields = function () {
        return this.fields && this.fields.length > 0;
    };
    return ContainerColumnModel;
}());
var ErrorMessageModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function ErrorMessageModel(obj) {
        this.message = '';
        this.attributes = null;
        this.message = obj && obj.message ? obj.message : '';
        this.attributes = new Map();
    }
    /**
     * @return {?}
     */
    ErrorMessageModel.prototype.isActive = function () {
        return this.message ? true : false;
    };
    /**
     * @return {?}
     */
    ErrorMessageModel.prototype.getAttributesAsJsonObj = function () {
        var /** @type {?} */ result = {};
        if (this.attributes.size > 0) {
            var /** @type {?} */ obj_1 = Object.create(null);
            this.attributes.forEach(function (value, key) {
                obj_1[key] = value;
            });
            result = JSON.stringify(obj_1);
        }
        return result;
    };
    return ErrorMessageModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var RequiredFieldValidator = /** @class */ (function () {
    function RequiredFieldValidator() {
        this.supportedTypes = [
            FormFieldTypes.TEXT,
            FormFieldTypes.MULTILINE_TEXT,
            FormFieldTypes.NUMBER,
            FormFieldTypes.TYPEAHEAD,
            FormFieldTypes.DROPDOWN,
            FormFieldTypes.PEOPLE,
            FormFieldTypes.FUNCTIONAL_GROUP,
            FormFieldTypes.RADIO_BUTTONS,
            FormFieldTypes.UPLOAD,
            FormFieldTypes.AMOUNT,
            FormFieldTypes.DYNAMIC_TABLE,
            FormFieldTypes.DATE
        ];
    }
    /**
     * @param {?} field
     * @return {?}
     */
    RequiredFieldValidator.prototype.isSupported = function (field) {
        return field &&
            this.supportedTypes.indexOf(field.type) > -1 &&
            field.required;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    RequiredFieldValidator.prototype.validate = function (field) {
        if (this.isSupported(field)) {
            if (field.type === FormFieldTypes.DROPDOWN) {
                if (field.hasEmptyValue && field.emptyOption) {
                    if (field.value === field.emptyOption.id) {
                        return false;
                    }
                }
            }
            if (field.type === FormFieldTypes.RADIO_BUTTONS) {
                var /** @type {?} */ option = field.options.find(function (opt) { return opt.id === field.value; });
                return !!option;
            }
            if (field.type === FormFieldTypes.UPLOAD) {
                return field.value && field.value.length > 0;
            }
            if (field.type === FormFieldTypes.DYNAMIC_TABLE) {
                return field.value && field.value instanceof Array && field.value.length > 0;
            }
            if (field.value === null || field.value === undefined || field.value === '') {
                return false;
            }
        }
        return true;
    };
    return RequiredFieldValidator;
}());
var NumberFieldValidator = /** @class */ (function () {
    function NumberFieldValidator() {
        this.supportedTypes = [
            FormFieldTypes.NUMBER,
            FormFieldTypes.AMOUNT
        ];
    }
    /**
     * @param {?} value
     * @return {?}
     */
    NumberFieldValidator.isNumber = function (value) {
        if (value === null || value === undefined || value === '') {
            return false;
        }
        return !isNaN(+value);
    };
    /**
     * @param {?} field
     * @return {?}
     */
    NumberFieldValidator.prototype.isSupported = function (field) {
        return field && this.supportedTypes.indexOf(field.type) > -1;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    NumberFieldValidator.prototype.validate = function (field) {
        if (this.isSupported(field)) {
            if (field.value === null ||
                field.value === undefined ||
                field.value === '') {
                return true;
            }
            var /** @type {?} */ valueStr = '' + field.value;
            var /** @type {?} */ pattern = new RegExp(/^-?\d+$/);
            if (field.enableFractions) {
                pattern = new RegExp(/^-?[0-9]+(\.[0-9]{1,2})?$/);
            }
            if (valueStr.match(pattern)) {
                return true;
            }
            field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_NUMBER';
            return false;
        }
        return true;
    };
    return NumberFieldValidator;
}());
var DateFieldValidator = /** @class */ (function () {
    function DateFieldValidator() {
        this.supportedTypes = [
            FormFieldTypes.DATE
        ];
    }
    /**
     * @param {?} inputDate
     * @param {?=} dateFormat
     * @return {?}
     */
    DateFieldValidator.isValidDate = function (inputDate, dateFormat) {
        if (dateFormat === void 0) { dateFormat = 'D-M-YYYY'; }
        if (inputDate) {
            var /** @type {?} */ d = moment(inputDate, dateFormat, true);
            return d.isValid();
        }
        return false;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    DateFieldValidator.prototype.isSupported = function (field) {
        return field && this.supportedTypes.indexOf(field.type) > -1;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    DateFieldValidator.prototype.validate = function (field) {
        if (this.isSupported(field) && field.value) {
            if (DateFieldValidator.isValidDate(field.value, field.dateDisplayFormat)) {
                return true;
            }
            field.validationSummary.message = field.dateDisplayFormat;
            return false;
        }
        return true;
    };
    return DateFieldValidator;
}());
var MinDateFieldValidator = /** @class */ (function () {
    function MinDateFieldValidator() {
        this.MIN_DATE_FORMAT = 'DD-MM-YYYY';
        this.supportedTypes = [
            FormFieldTypes.DATE
        ];
    }
    /**
     * @param {?} field
     * @return {?}
     */
    MinDateFieldValidator.prototype.isSupported = function (field) {
        return field &&
            this.supportedTypes.indexOf(field.type) > -1 && !!field.minValue;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    MinDateFieldValidator.prototype.validate = function (field) {
        if (this.isSupported(field) && field.value) {
            var /** @type {?} */ dateFormat = field.dateDisplayFormat;
            if (!DateFieldValidator.isValidDate(field.value, dateFormat)) {
                field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_DATE';
                return false;
            }
            // remove time and timezone info
            var /** @type {?} */ d = void 0;
            if (typeof field.value === 'string') {
                d = moment(field.value.split('T')[0], dateFormat);
            }
            else {
                d = field.value;
            }
            var /** @type {?} */ min = moment(field.minValue, this.MIN_DATE_FORMAT);
            if (d.isBefore(min)) {
                field.validationSummary.message = "FORM.FIELD.VALIDATOR.NOT_LESS_THAN";
                field.validationSummary.attributes.set('minValue', field.minValue.toLocaleString());
                return false;
            }
        }
        return true;
    };
    return MinDateFieldValidator;
}());
var MaxDateFieldValidator = /** @class */ (function () {
    function MaxDateFieldValidator() {
        this.MAX_DATE_FORMAT = 'DD-MM-YYYY';
        this.supportedTypes = [
            FormFieldTypes.DATE
        ];
    }
    /**
     * @param {?} field
     * @return {?}
     */
    MaxDateFieldValidator.prototype.isSupported = function (field) {
        return field &&
            this.supportedTypes.indexOf(field.type) > -1 && !!field.maxValue;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    MaxDateFieldValidator.prototype.validate = function (field) {
        if (this.isSupported(field) && field.value) {
            var /** @type {?} */ dateFormat = field.dateDisplayFormat;
            if (!DateFieldValidator.isValidDate(field.value, dateFormat)) {
                field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_DATE';
                return false;
            }
            // remove time and timezone info
            var /** @type {?} */ d = void 0;
            if (typeof field.value === 'string') {
                d = moment(field.value.split('T')[0], dateFormat);
            }
            else {
                d = field.value;
            }
            var /** @type {?} */ max = moment(field.maxValue, this.MAX_DATE_FORMAT);
            if (d.isAfter(max)) {
                field.validationSummary.message = "FORM.FIELD.VALIDATOR.NOT_GREATER_THAN";
                field.validationSummary.attributes.set('maxValue', field.maxValue.toLocaleString());
                return false;
            }
        }
        return true;
    };
    return MaxDateFieldValidator;
}());
var MinLengthFieldValidator = /** @class */ (function () {
    function MinLengthFieldValidator() {
        this.supportedTypes = [
            FormFieldTypes.TEXT,
            FormFieldTypes.MULTILINE_TEXT
        ];
    }
    /**
     * @param {?} field
     * @return {?}
     */
    MinLengthFieldValidator.prototype.isSupported = function (field) {
        return field &&
            this.supportedTypes.indexOf(field.type) > -1 &&
            field.minLength > 0;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    MinLengthFieldValidator.prototype.validate = function (field) {
        if (this.isSupported(field) && field.value) {
            if (field.value.length >= field.minLength) {
                return true;
            }
            field.validationSummary.message = "FORM.FIELD.VALIDATOR.AT_LEAST_LONG";
            field.validationSummary.attributes.set('minLength', field.minLength.toLocaleString());
            return false;
        }
        return true;
    };
    return MinLengthFieldValidator;
}());
var MaxLengthFieldValidator = /** @class */ (function () {
    function MaxLengthFieldValidator() {
        this.supportedTypes = [
            FormFieldTypes.TEXT,
            FormFieldTypes.MULTILINE_TEXT
        ];
    }
    /**
     * @param {?} field
     * @return {?}
     */
    MaxLengthFieldValidator.prototype.isSupported = function (field) {
        return field &&
            this.supportedTypes.indexOf(field.type) > -1 &&
            field.maxLength > 0;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    MaxLengthFieldValidator.prototype.validate = function (field) {
        if (this.isSupported(field) && field.value) {
            if (field.value.length <= field.maxLength) {
                return true;
            }
            field.validationSummary.message = "FORM.FIELD.VALIDATOR.NO_LONGER_THAN";
            field.validationSummary.attributes.set('maxLength', field.maxLength.toLocaleString());
            return false;
        }
        return true;
    };
    return MaxLengthFieldValidator;
}());
var MinValueFieldValidator = /** @class */ (function () {
    function MinValueFieldValidator() {
        this.supportedTypes = [
            FormFieldTypes.NUMBER,
            FormFieldTypes.AMOUNT
        ];
    }
    /**
     * @param {?} field
     * @return {?}
     */
    MinValueFieldValidator.prototype.isSupported = function (field) {
        return field &&
            this.supportedTypes.indexOf(field.type) > -1 &&
            NumberFieldValidator.isNumber(field.minValue);
    };
    /**
     * @param {?} field
     * @return {?}
     */
    MinValueFieldValidator.prototype.validate = function (field) {
        if (this.isSupported(field) && field.value) {
            var /** @type {?} */ value = +field.value;
            var /** @type {?} */ minValue = +field.minValue;
            if (value >= minValue) {
                return true;
            }
            field.validationSummary.message = "FORM.FIELD.VALIDATOR.NOT_LESS_THAN";
            field.validationSummary.attributes.set('minValue', field.minValue.toLocaleString());
            return false;
        }
        return true;
    };
    return MinValueFieldValidator;
}());
var MaxValueFieldValidator = /** @class */ (function () {
    function MaxValueFieldValidator() {
        this.supportedTypes = [
            FormFieldTypes.NUMBER,
            FormFieldTypes.AMOUNT
        ];
    }
    /**
     * @param {?} field
     * @return {?}
     */
    MaxValueFieldValidator.prototype.isSupported = function (field) {
        return field &&
            this.supportedTypes.indexOf(field.type) > -1 &&
            NumberFieldValidator.isNumber(field.maxValue);
    };
    /**
     * @param {?} field
     * @return {?}
     */
    MaxValueFieldValidator.prototype.validate = function (field) {
        if (this.isSupported(field) && field.value) {
            var /** @type {?} */ value = +field.value;
            var /** @type {?} */ maxValue = +field.maxValue;
            if (value <= maxValue) {
                return true;
            }
            field.validationSummary.message = "FORM.FIELD.VALIDATOR.NOT_GREATER_THAN";
            field.validationSummary.attributes.set('maxValue', field.maxValue.toLocaleString());
            return false;
        }
        return true;
    };
    return MaxValueFieldValidator;
}());
var RegExFieldValidator = /** @class */ (function () {
    function RegExFieldValidator() {
        this.supportedTypes = [
            FormFieldTypes.TEXT,
            FormFieldTypes.MULTILINE_TEXT
        ];
    }
    /**
     * @param {?} field
     * @return {?}
     */
    RegExFieldValidator.prototype.isSupported = function (field) {
        return field &&
            this.supportedTypes.indexOf(field.type) > -1 && !!field.regexPattern;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    RegExFieldValidator.prototype.validate = function (field) {
        if (this.isSupported(field) && field.value) {
            if (field.value.length > 0 && field.value.match(new RegExp('^' + field.regexPattern + '$'))) {
                return true;
            }
            field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_VALUE';
            return false;
        }
        return true;
    };
    return RegExFieldValidator;
}());
var FixedValueFieldValidator = /** @class */ (function () {
    function FixedValueFieldValidator() {
        this.supportedTypes = [
            FormFieldTypes.TYPEAHEAD
        ];
    }
    /**
     * @param {?} field
     * @return {?}
     */
    FixedValueFieldValidator.prototype.isSupported = function (field) {
        return field && this.supportedTypes.indexOf(field.type) > -1;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    FixedValueFieldValidator.prototype.hasValidNameOrValidId = function (field) {
        return this.hasValidName(field) || this.hasValidId(field);
    };
    /**
     * @param {?} field
     * @return {?}
     */
    FixedValueFieldValidator.prototype.hasValidName = function (field) {
        return field.options.find(function (item) { return item.name && item.name.toLocaleLowerCase() === field.value.toLocaleLowerCase(); }) ? true : false;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    FixedValueFieldValidator.prototype.hasValidId = function (field) {
        return field.options[field.value - 1] ? true : false;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    FixedValueFieldValidator.prototype.hasStringValue = function (field) {
        return field.value && typeof field.value === 'string';
    };
    /**
     * @param {?} field
     * @return {?}
     */
    FixedValueFieldValidator.prototype.hasOptions = function (field) {
        return field.options && field.options.length > 0;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    FixedValueFieldValidator.prototype.validate = function (field) {
        if (this.isSupported(field)) {
            if (this.hasStringValue(field) && this.hasOptions(field) && !this.hasValidNameOrValidId(field)) {
                field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_VALUE';
                return false;
            }
        }
        return true;
    };
    return FixedValueFieldValidator;
}());
var FORM_FIELD_VALIDATORS = [
    new RequiredFieldValidator(),
    new NumberFieldValidator(),
    new MinLengthFieldValidator(),
    new MaxLengthFieldValidator(),
    new MinValueFieldValidator(),
    new MaxValueFieldValidator(),
    new RegExFieldValidator(),
    new DateFieldValidator(),
    new MinDateFieldValidator(),
    new MaxDateFieldValidator(),
    new FixedValueFieldValidator()
];
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var FormFieldModel = /** @class */ (function (_super) {
    __extends(FormFieldModel, _super);
    /**
     * @param {?} form
     * @param {?=} json
     */
    function FormFieldModel(form, json) {
        var _this = _super.call(this, form, json) || this;
        _this._readOnly = false;
        _this._isValid = true;
        _this._required = false;
        _this.defaultDateFormat = 'D-M-YYYY';
        _this.rowspan = 1;
        _this.colspan = 1;
        _this.placeholder = null;
        _this.minLength = 0;
        _this.maxLength = 0;
        _this.options = [];
        _this.params = {};
        _this.isVisible = true;
        _this.visibilityCondition = null;
        _this.enableFractions = false;
        _this.currency = null;
        _this.dateDisplayFormat = _this.dateDisplayFormat || _this.defaultDateFormat;
        // container model members
        _this.numberOfColumns = 1;
        _this.fields = [];
        _this.columns = [];
        if (json) {
            _this.fieldType = json.fieldType;
            _this.id = json.id;
            _this.name = json.name;
            _this.type = json.type;
            _this._required = json.required;
            _this._readOnly = json.readOnly || json.type === 'readonly';
            _this.overrideId = json.overrideId;
            _this.tab = json.tab;
            _this.restUrl = json.restUrl;
            _this.restResponsePath = json.restResponsePath;
            _this.restIdProperty = json.restIdProperty;
            _this.restLabelProperty = json.restLabelProperty;
            _this.colspan = json.colspan;
            _this.minLength = json.minLength || 0;
            _this.maxLength = json.maxLength || 0;
            _this.minValue = json.minValue;
            _this.maxValue = json.maxValue;
            _this.regexPattern = json.regexPattern;
            _this.options = json.options || [];
            _this.hasEmptyValue = json.hasEmptyValue;
            _this.className = json.className;
            _this.optionType = json.optionType;
            _this.params = json.params || {};
            _this.hyperlinkUrl = json.hyperlinkUrl;
            _this.displayText = json.displayText;
            _this.visibilityCondition = json.visibilityCondition;
            _this.enableFractions = json.enableFractions;
            _this.currency = json.currency;
            _this.dateDisplayFormat = json.dateDisplayFormat || _this.defaultDateFormat;
            _this._value = _this.parseValue(json);
            _this.validationSummary = new ErrorMessageModel();
            if (json.placeholder && json.placeholder !== '' && json.placeholder !== 'null') {
                _this.placeholder = json.placeholder;
            }
            if (FormFieldTypes.isReadOnlyType(json.type)) {
                if (json.params && json.params.field) {
                    if (form.processVariables) {
                        var processVariable = _this.getProcessVariableValue(json.params.field, form);
                        if (processVariable) {
                            _this.value = processVariable;
                        }
                    }
                    else if (json.params.field.responseVariable) {
                        var formVariable = _this.getVariablesValue(json.params.field.name, form);
                        if (formVariable) {
                            _this.value = formVariable;
                        }
                    }
                }
            }
            if (FormFieldTypes.isContainerType(json.type)) {
                _this.containerFactory(json, form);
            }
        }
        if (_this.hasEmptyValue && _this.options && _this.options.length > 0) {
            _this.emptyOption = _this.options[0];
        }
        _this.updateForm();
        return _this;
    }
    Object.defineProperty(FormFieldModel.prototype, "value", {
        /**
         * @return {?}
         */
        get: function () {
            return this._value;
        },
        /**
         * @param {?} v
         * @return {?}
         */
        set: function (v) {
            this._value = v;
            this.validate();
            this.updateForm();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormFieldModel.prototype, "readOnly", {
        /**
         * @return {?}
         */
        get: function () {
            if (this.form && this.form.readOnly) {
                return true;
            }
            return this._readOnly;
        },
        /**
         * @param {?} readOnly
         * @return {?}
         */
        set: function (readOnly) {
            this._readOnly = readOnly;
            this.updateForm();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormFieldModel.prototype, "required", {
        /**
         * @return {?}
         */
        get: function () {
            return this._required;
        },
        /**
         * @param {?} value
         * @return {?}
         */
        set: function (value) {
            this._required = value;
            this.updateForm();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormFieldModel.prototype, "isValid", {
        /**
         * @return {?}
         */
        get: function () {
            return this._isValid;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormFieldModel.prototype.markAsInvalid = function () {
        this._isValid = false;
    };
    /**
     * @return {?}
     */
    FormFieldModel.prototype.validate = function () {
        this.validationSummary = new ErrorMessageModel();
        var /** @type {?} */ validators = this.form.fieldValidators || [];
        for (var _i = 0, validators_1 = validators; _i < validators_1.length; _i++) {
            var validator = validators_1[_i];
            if (!validator.validate(this)) {
                this._isValid = false;
                return this._isValid;
            }
        }
        this._isValid = true;
        return this._isValid;
    };
    /**
     * @param {?} type
     * @return {?}
     */
    FormFieldModel.prototype.isTypeaHeadFieldType = function (type) {
        return type === 'typeahead' ? true : false;
    };
    /**
     * @param {?} name
     * @return {?}
     */
    FormFieldModel.prototype.getFieldNameWithLabel = function (name) {
        return name += '_LABEL';
    };
    /**
     * @param {?} field
     * @param {?} form
     * @return {?}
     */
    FormFieldModel.prototype.getProcessVariableValue = function (field, form) {
        var /** @type {?} */ fieldName = field.name;
        if (this.isTypeaHeadFieldType(field.type)) {
            fieldName = this.getFieldNameWithLabel(field.id);
        }
        return this.findProcessVariableValue(fieldName, form);
    };
    /**
     * @param {?} variableName
     * @param {?} form
     * @return {?}
     */
    FormFieldModel.prototype.getVariablesValue = function (variableName, form) {
        var /** @type {?} */ variable = form.json.variables.find(function (currentVariable) {
            return currentVariable.name === variableName;
        });
        if (variable) {
            if (variable.type === 'boolean') {
                return JSON.parse(variable.value);
            }
            return variable.value;
        }
        return null;
    };
    /**
     * @param {?} variableName
     * @param {?} form
     * @return {?}
     */
    FormFieldModel.prototype.findProcessVariableValue = function (variableName, form) {
        if (form.processVariables) {
            var /** @type {?} */ variable = form.processVariables.find(function (currentVariable) {
                return currentVariable.name === variableName;
            });
            if (variable) {
                return variable.type === 'boolean' ? JSON.parse(variable.value) : variable.value;
            }
        }
        return undefined;
    };
    /**
     * @param {?} json
     * @param {?} form
     * @return {?}
     */
    FormFieldModel.prototype.containerFactory = function (json, form) {
        var _this = this;
        this.numberOfColumns = /** @type {?} */ (json.numberOfColumns) || 1;
        this.fields = json.fields;
        this.rowspan = 1;
        this.colspan = 1;
        if (json.fields) {
            for (var /** @type {?} */ currentField in json.fields) {
                if (json.fields.hasOwnProperty(currentField)) {
                    var /** @type {?} */ col = new ContainerColumnModel();
                    var /** @type {?} */ fields = (json.fields[currentField] || []).map(function (f) { return new FormFieldModel(form, f); });
                    col.fields = fields;
                    col.rowspan = json.fields[currentField].length;
                    col.fields.forEach(function (colFields) {
                        _this.colspan = colFields.colspan > _this.colspan ? colFields.colspan : _this.colspan;
                    });
                    this.rowspan = this.rowspan < col.rowspan ? col.rowspan : this.rowspan;
                    this.columns.push(col);
                }
            }
        }
    };
    /**
     * @param {?} json
     * @return {?}
     */
    FormFieldModel.prototype.parseValue = function (json) {
        var /** @type {?} */ value = json.value;
        /*
         This is needed due to Activiti issue related to reading dropdown values as value string
         but saving back as object: { id: <id>, name: <name> }
         */
        if (json.type === FormFieldTypes.DROPDOWN) {
            if (json.hasEmptyValue && json.options) {
                var /** @type {?} */ options = (json.options) || [];
                if (options.length > 0) {
                    var /** @type {?} */ emptyOption = json.options[0];
                    if (value === '' || value === emptyOption.id || value === emptyOption.name) {
                        value = emptyOption.id;
                    }
                }
            }
        }
        /*
         This is needed due to Activiti issue related to reading radio button values as value string
         but saving back as object: { id: <id>, name: <name> }
         */
        if (json.type === FormFieldTypes.RADIO_BUTTONS) {
            // Activiti has a bug with default radio button value where initial selection passed as `name` value
            // so try resolving current one with a fallback to first entry via name or id
            // TODO: needs to be reported and fixed at Activiti side
            var /** @type {?} */ entry = this.options.filter(function (opt) { return opt.id === value || opt.name === value; });
            if (entry.length > 0) {
                value = entry[0].id;
            }
        }
        /*
         This is needed due to Activiti displaying/editing dates in d-M-YYYY format
         but storing on server in ISO8601 format (i.e. 2013-02-04T22:44:30.652Z)
         */
        if (this.isDateField(json)) {
            if (value) {
                var /** @type {?} */ dateValue = void 0;
                if (NumberFieldValidator.isNumber(value)) {
                    dateValue = moment(value);
                }
                else {
                    dateValue = moment(value.split('T')[0], 'YYYY-M-D');
                }
                if (dateValue && dateValue.isValid()) {
                    value = dateValue.format(this.dateDisplayFormat);
                }
            }
        }
        return value;
    };
    /**
     * @return {?}
     */
    FormFieldModel.prototype.updateForm = function () {
        var _this = this;
        if (!this.form) {
            return;
        }
        switch (this.type) {
            case FormFieldTypes.DROPDOWN:
                /*
                 This is needed due to Activiti reading dropdown values as string
                 but saving back as object: { id: <id>, name: <name> }
                 */
                if (this.value === 'empty' || this.value === '') {
                    this.form.values[this.id] = {};
                }
                else {
                    var /** @type {?} */ entry = this.options.filter(function (opt) { return opt.id === _this.value; });
                    if (entry.length > 0) {
                        this.form.values[this.id] = entry[0];
                    }
                }
                break;
            case FormFieldTypes.RADIO_BUTTONS:
                /*
                 This is needed due to Activiti issue related to reading radio button values as value string
                 but saving back as object: { id: <id>, name: <name> }
                 */
                var /** @type {?} */ rbEntry = this.options.filter(function (opt) { return opt.id === _this.value; });
                if (rbEntry.length > 0) {
                    this.form.values[this.id] = rbEntry[0];
                }
                break;
            case FormFieldTypes.UPLOAD:
                if (this.value && this.value.length > 0) {
                    this.form.values[this.id] = this.value.map(function (elem) { return elem.id; }).join(',');
                }
                else {
                    this.form.values[this.id] = null;
                }
                break;
            case FormFieldTypes.TYPEAHEAD:
                var /** @type {?} */ taEntry = this.options.filter(function (opt) { return opt.id === _this.value; });
                if (taEntry.length > 0) {
                    this.form.values[this.id] = taEntry[0];
                }
                else if (this.options.length > 0) {
                    this.form.values[this.id] = null;
                }
                break;
            case FormFieldTypes.DATE:
                var /** @type {?} */ dateValue = moment(this.value, this.dateDisplayFormat, true);
                if (dateValue && dateValue.isValid()) {
                    this.form.values[this.id] = dateValue.format('YYYY-MM-DD') + "T00:00:00.000Z";
                }
                else {
                    this.form.values[this.id] = null;
                    this._value = this.value;
                }
                break;
            case FormFieldTypes.NUMBER:
                this.form.values[this.id] = parseInt(this.value, 10);
                break;
            case FormFieldTypes.AMOUNT:
                this.form.values[this.id] = this.enableFractions ? parseFloat(this.value) : parseInt(this.value, 10);
                break;
            default:
                if (!FormFieldTypes.isReadOnlyType(this.type) && !this.isInvalidFieldType(this.type)) {
                    this.form.values[this.id] = this.value;
                }
        }
        this.form.onFormFieldChanged(this);
    };
    /**
     * Skip the invalid field type
     * @param {?} type
     * @return {?}
     */
    FormFieldModel.prototype.isInvalidFieldType = function (type) {
        if (type === 'container') {
            return true;
        }
        else {
            return false;
        }
    };
    /**
     * @return {?}
     */
    FormFieldModel.prototype.getOptionName = function () {
        var _this = this;
        var /** @type {?} */ option = this.options.find(function (opt) { return opt.id === _this.value; });
        return option ? option.name : null;
    };
    /**
     * @return {?}
     */
    FormFieldModel.prototype.hasOptions = function () {
        return this.options && this.options.length > 0;
    };
    /**
     * @param {?} json
     * @return {?}
     */
    FormFieldModel.prototype.isDateField = function (json) {
        return (json.params &&
            json.params.field &&
            json.params.field.type === FormFieldTypes.DATE) ||
            json.type === FormFieldTypes.DATE;
    };
    return FormFieldModel;
}(FormWidgetModel));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FormEvent = /** @class */ (function () {
    /**
     * @param {?} form
     */
    function FormEvent(form) {
        this.isDefaultPrevented = false;
        this.form = form;
    }
    Object.defineProperty(FormEvent.prototype, "defaultPrevented", {
        /**
         * @return {?}
         */
        get: function () {
            return this.isDefaultPrevented;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormEvent.prototype.preventDefault = function () {
        this.isDefaultPrevented = true;
    };
    return FormEvent;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FormErrorEvent = /** @class */ (function (_super) {
    __extends(FormErrorEvent, _super);
    /**
     * @param {?} form
     * @param {?} error
     */
    function FormErrorEvent(form, error) {
        var _this = _super.call(this, form) || this;
        _this.error = error;
        return _this;
    }
    return FormErrorEvent;
}(FormEvent));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FormFieldEvent = /** @class */ (function (_super) {
    __extends(FormFieldEvent, _super);
    /**
     * @param {?} form
     * @param {?} field
     */
    function FormFieldEvent(form, field) {
        var _this = _super.call(this, form) || this;
        _this.field = field;
        return _this;
    }
    return FormFieldEvent;
}(FormEvent));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ValidateFormFieldEvent = /** @class */ (function (_super) {
    __extends(ValidateFormFieldEvent, _super);
    /**
     * @param {?} form
     * @param {?} field
     */
    function ValidateFormFieldEvent(form, field) {
        var _this = _super.call(this, form, field) || this;
        _this.isValid = true;
        return _this;
    }
    return ValidateFormFieldEvent;
}(FormFieldEvent));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ValidateFormEvent = /** @class */ (function (_super) {
    __extends(ValidateFormEvent, _super);
    /**
     * @param {?} form
     */
    function ValidateFormEvent(form) {
        var _this = _super.call(this, form) || this;
        _this.isValid = true;
        return _this;
    }
    return ValidateFormEvent;
}(FormEvent));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ValidateDynamicTableRowEvent = /** @class */ (function (_super) {
    __extends(ValidateDynamicTableRowEvent, _super);
    /**
     * @param {?} form
     * @param {?} field
     * @param {?} row
     * @param {?} summary
     */
    function ValidateDynamicTableRowEvent(form, field, row, summary) {
        var _this = _super.call(this, form, field) || this;
        _this.row = row;
        _this.summary = summary;
        _this.isValid = true;
        return _this;
    }
    return ValidateDynamicTableRowEvent;
}(FormFieldEvent));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ContainerModel = /** @class */ (function (_super) {
    __extends(ContainerModel, _super);
    /**
     * @param {?} field
     */
    function ContainerModel(field) {
        var _this = _super.call(this, field.form, field.json) || this;
        if (field) {
            _this.field = field;
        }
        return _this;
    }
    Object.defineProperty(ContainerModel.prototype, "isVisible", {
        /**
         * @return {?}
         */
        get: function () {
            return this.field.isVisible;
        },
        enumerable: true,
        configurable: true
    });
    return ContainerModel;
}(FormWidgetModel));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var FormOutcomeModel = /** @class */ (function (_super) {
    __extends(FormOutcomeModel, _super);
    /**
     * @param {?} form
     * @param {?=} json
     */
    function FormOutcomeModel(form, json) {
        var _this = _super.call(this, form, json) || this;
        _this.isSystem = false;
        _this.isSelected = false;
        if (json) {
            _this.isSystem = json.isSystem ? true : false;
            _this.isSelected = form && json.name === form.selectedOutcome ? true : false;
        }
        return _this;
    }
    return FormOutcomeModel;
}(FormWidgetModel));
FormOutcomeModel.SAVE_ACTION = 'Save'; // Activiti 'Save' action name
FormOutcomeModel.COMPLETE_ACTION = 'Complete'; // Activiti 'Complete' action name
FormOutcomeModel.START_PROCESS_ACTION = 'Start Process'; // Activiti 'Start Process' action name
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var TabModel = /** @class */ (function (_super) {
    __extends(TabModel, _super);
    /**
     * @param {?} form
     * @param {?=} json
     */
    function TabModel(form, json) {
        var _this = _super.call(this, form, json) || this;
        _this.isVisible = true;
        _this.fields = [];
        if (json) {
            _this.title = json.title;
            _this.visibilityCondition = json.visibilityCondition;
        }
        return _this;
    }
    /**
     * @return {?}
     */
    TabModel.prototype.hasContent = function () {
        return this.fields && this.fields.length > 0;
    };
    return TabModel;
}(FormWidgetModel));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var FormModel = /** @class */ (function () {
    /**
     * @param {?=} json
     * @param {?=} data
     * @param {?=} readOnly
     * @param {?=} formService
     */
    function FormModel(json, data, readOnly, formService) {
        if (readOnly === void 0) { readOnly = false; }
        var _this = this;
        this.formService = formService;
        this.taskName = FormModel.UNSET_TASK_NAME;
        this._isValid = true;
        this.readOnly = false;
        this.tabs = [];
        /**
         * Stores root containers
         */
        this.fields = [];
        this.outcomes = [];
        this.customFieldTemplates = {};
        this.fieldValidators = FORM_FIELD_VALIDATORS.slice();
        this.values = {};
        this.readOnly = readOnly;
        if (json) {
            this.json = json;
            this.id = json.id;
            this.name = json.name;
            this.taskId = json.taskId;
            this.taskName = json.taskName || json.name || FormModel.UNSET_TASK_NAME;
            this.processDefinitionId = json.processDefinitionId;
            this.customFieldTemplates = json.customFieldTemplates || {};
            this.selectedOutcome = json.selectedOutcome || {};
            this.className = json.className || '';
            var tabCache_1 = {};
            this.processVariables = json.processVariables;
            this.tabs = (json.tabs || []).map(function (t) {
                var model = new TabModel(_this, t);
                tabCache_1[model.id] = model;
                return model;
            });
            this.fields = this.parseRootFields(json);
            if (data) {
                this.loadData(data);
            }
            for (var i = 0; i < this.fields.length; i++) {
                var field = this.fields[i];
                if (field.tab) {
                    var tab = tabCache_1[field.tab];
                    if (tab) {
                        tab.fields.push(field);
                    }
                }
            }
            if (json.fields) {
                var saveOutcome = new FormOutcomeModel(this, { id: FormModel.SAVE_OUTCOME, name: 'Save', isSystem: true });
                var completeOutcome = new FormOutcomeModel(this, { id: FormModel.COMPLETE_OUTCOME, name: 'Complete', isSystem: true });
                var startProcessOutcome = new FormOutcomeModel(this, { id: FormModel.START_PROCESS_OUTCOME, name: 'Start Process', isSystem: true });
                var customOutcomes = (json.outcomes || []).map(function (obj) { return new FormOutcomeModel(_this, obj); });
                this.outcomes = [saveOutcome].concat(customOutcomes.length > 0 ? customOutcomes : [completeOutcome, startProcessOutcome]);
            }
        }
        this.validateForm();
    }
    Object.defineProperty(FormModel.prototype, "isValid", {
        /**
         * @return {?}
         */
        get: function () {
            return this._isValid;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormModel.prototype.hasTabs = function () {
        return this.tabs && this.tabs.length > 0;
    };
    /**
     * @return {?}
     */
    FormModel.prototype.hasFields = function () {
        return this.fields && this.fields.length > 0;
    };
    /**
     * @return {?}
     */
    FormModel.prototype.hasOutcomes = function () {
        return this.outcomes && this.outcomes.length > 0;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    FormModel.prototype.onFormFieldChanged = function (field) {
        this.validateField(field);
        if (this.formService) {
            this.formService.formFieldValueChanged.next(new FormFieldEvent(this, field));
        }
    };
    /**
     * @param {?} fieldId
     * @return {?}
     */
    FormModel.prototype.getFieldById = function (fieldId) {
        return this.getFormFields().find(function (field) { return field.id === fieldId; });
    };
    /**
     * @return {?}
     */
    FormModel.prototype.getFormFields = function () {
        var /** @type {?} */ result = [];
        for (var /** @type {?} */ i = 0; i < this.fields.length; i++) {
            var /** @type {?} */ field = this.fields[i];
            if (field instanceof ContainerModel) {
                var /** @type {?} */ container = (field);
                result.push(container.field);
                container.field.columns.forEach(function (column) {
                    result.push.apply(result, column.fields);
                });
            }
        }
        return result;
    };
    /**
     * @return {?}
     */
    FormModel.prototype.markAsInvalid = function () {
        this._isValid = false;
    };
    /**
     * Validates entire form and all form fields.
     *
     * \@memberof FormModel
     * @return {?}
     */
    FormModel.prototype.validateForm = function () {
        var /** @type {?} */ validateFormEvent = new ValidateFormEvent(this);
        if (this.formService) {
            this.formService.validateForm.next(validateFormEvent);
        }
        this._isValid = validateFormEvent.isValid;
        if (validateFormEvent.defaultPrevented) {
            return;
        }
        if (validateFormEvent.isValid) {
            var /** @type {?} */ fields = this.getFormFields();
            for (var /** @type {?} */ i = 0; i < fields.length; i++) {
                if (!fields[i].validate()) {
                    this._isValid = false;
                    return;
                }
            }
        }
    };
    /**
     * Validates a specific form field, triggers form validation.
     *
     * \@memberof FormModel
     * @param {?} field
     * @return {?}
     */
    FormModel.prototype.validateField = function (field) {
        if (!field) {
            return;
        }
        var /** @type {?} */ validateFieldEvent = new ValidateFormFieldEvent(this, field);
        if (this.formService) {
            this.formService.validateFormField.next(validateFieldEvent);
        }
        if (!validateFieldEvent.isValid) {
            this._isValid = false;
            return;
        }
        if (validateFieldEvent.defaultPrevented) {
            return;
        }
        if (!field.validate()) {
            this._isValid = false;
            return;
        }
        this.validateForm();
    };
    /**
     * @param {?} json
     * @return {?}
     */
    FormModel.prototype.parseRootFields = function (json) {
        var /** @type {?} */ fields = [];
        if (json.fields) {
            fields = json.fields;
        }
        else if (json.formDefinition && json.formDefinition.fields) {
            fields = json.formDefinition.fields;
        }
        var /** @type {?} */ result = [];
        for (var _i = 0, fields_1 = fields; _i < fields_1.length; _i++) {
            var field = fields_1[_i];
            if (field.type === FormFieldTypes.DISPLAY_VALUE) {
                // workaround for dynamic table on a completed/readonly form
                if (field.params) {
                    var /** @type {?} */ originalField = field.params['field'];
                    if (originalField.type === FormFieldTypes.DYNAMIC_TABLE) {
                        result.push(new ContainerModel(new FormFieldModel(this, field)));
                    }
                }
            }
            else {
                result.push(new ContainerModel(new FormFieldModel(this, field)));
            }
        }
        return result;
    };
    /**
     * @param {?} data
     * @return {?}
     */
    FormModel.prototype.loadData = function (data) {
        for (var _i = 0, _a = this.getFormFields(); _i < _a.length; _i++) {
            var field = _a[_i];
            if (data[field.id]) {
                field.json.value = data[field.id];
                field.value = field.parseValue(field.json);
                if (field.type === FormFieldTypes.DROPDOWN ||
                    field.type === FormFieldTypes.RADIO_BUTTONS) {
                    field.value = data[field.id].id;
                }
            }
        }
    };
    return FormModel;
}());
FormModel.UNSET_TASK_NAME = 'Nameless task';
FormModel.SAVE_OUTCOME = '$save';
FormModel.COMPLETE_OUTCOME = '$complete';
FormModel.START_PROCESS_OUTCOME = '$startProcess';
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FormOutcomeEvent = /** @class */ (function () {
    /**
     * @param {?} outcome
     */
    function FormOutcomeEvent(outcome) {
        this._defaultPrevented = false;
        this._outcome = outcome;
    }
    Object.defineProperty(FormOutcomeEvent.prototype, "outcome", {
        /**
         * @return {?}
         */
        get: function () {
            return this._outcome;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormOutcomeEvent.prototype, "defaultPrevented", {
        /**
         * @return {?}
         */
        get: function () {
            return this._defaultPrevented;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormOutcomeEvent.prototype.preventDefault = function () {
        this._defaultPrevented = true;
    };
    return FormOutcomeEvent;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ContentLinkModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function ContentLinkModel(obj) {
        this.contentAvailable = obj && obj.contentAvailable;
        this.created = obj && obj.created;
        this.createdBy = obj && obj.createdBy || {};
        this.id = obj && obj.id;
        this.link = obj && obj.link;
        this.mimeType = obj && obj.mimeType;
        this.name = obj && obj.name;
        this.previewStatus = obj && obj.previewStatus;
        this.relatedContent = obj && obj.relatedContent;
        this.simpleType = obj && obj.simpleType;
        this.thumbnailStatus = obj && obj.thumbnailStatus;
    }
    /**
     * @return {?}
     */
    ContentLinkModel.prototype.hasPreviewStatus = function () {
        return this.previewStatus === 'supported' ? true : false;
    };
    /**
     * @return {?}
     */
    ContentLinkModel.prototype.isTypeImage = function () {
        return this.simpleType === 'image' ? true : false;
    };
    /**
     * @return {?}
     */
    ContentLinkModel.prototype.isTypePdf = function () {
        return this.simpleType === 'pdf' ? true : false;
    };
    /**
     * @return {?}
     */
    ContentLinkModel.prototype.isTypeDoc = function () {
        return this.simpleType === 'word' || this.simpleType === 'content' ? true : false;
    };
    /**
     * @return {?}
     */
    ContentLinkModel.prototype.isThumbnailReady = function () {
        return this.thumbnailStatus === 'created';
    };
    /**
     * @return {?}
     */
    ContentLinkModel.prototype.isThumbnailSupported = function () {
        return this.isTypeImage() || ((this.isTypePdf() || this.isTypeDoc()) && this.isThumbnailReady());
    };
    return ContentLinkModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EcmModelService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} logService
     */
    function EcmModelService(apiService, logService) {
        this.apiService = apiService;
        this.logService = logService;
    }
    /**
     * @param {?} formName
     * @param {?} form
     * @return {?}
     */
    EcmModelService.prototype.createEcmTypeForActivitiForm = function (formName, form) {
        var _this = this;
        return Observable.Observable.create(function (observer) {
            _this.searchActivitiEcmModel().subscribe(function (model) {
                if (!model) {
                    _this.createActivitiEcmModel(formName, form).subscribe(function (typeForm) {
                        observer.next(typeForm);
                        observer.complete();
                    });
                }
                else {
                    _this.saveFomType(formName, form).subscribe(function (typeForm) {
                        observer.next(typeForm);
                        observer.complete();
                    });
                }
            }, function (err) { return _this.handleError(err); });
        });
    };
    /**
     * @return {?}
     */
    EcmModelService.prototype.searchActivitiEcmModel = function () {
        return this.getEcmModels().map(function (ecmModels) {
            return ecmModels.list.entries.find(function (model) { return model.entry.name === EcmModelService.MODEL_NAME; });
        });
    };
    /**
     * @param {?} formName
     * @param {?} form
     * @return {?}
     */
    EcmModelService.prototype.createActivitiEcmModel = function (formName, form) {
        var _this = this;
        return Observable.Observable.create(function (observer) {
            _this.createEcmModel(EcmModelService.MODEL_NAME, EcmModelService.MODEL_NAMESPACE).subscribe(function (model) {
                _this.logService.info('model created', model);
                _this.activeEcmModel(EcmModelService.MODEL_NAME).subscribe(function (modelActive) {
                    _this.logService.info('model active', modelActive);
                    _this.createEcmTypeWithProperties(formName, form).subscribe(function (typeCreated) {
                        observer.next(typeCreated);
                        observer.complete();
                    });
                }, function (err) { return _this.handleError(err); });
            }, function (err) { return _this.handleError(err); });
        });
    };
    /**
     * @param {?} formName
     * @param {?} form
     * @return {?}
     */
    EcmModelService.prototype.saveFomType = function (formName, form) {
        var _this = this;
        return Observable.Observable.create(function (observer) {
            _this.searchEcmType(formName, EcmModelService.MODEL_NAME).subscribe(function (ecmType) {
                _this.logService.info('custom types', ecmType);
                if (!ecmType) {
                    _this.createEcmTypeWithProperties(formName, form).subscribe(function (typeCreated) {
                        observer.next(typeCreated);
                        observer.complete();
                    });
                }
                else {
                    observer.next(ecmType);
                    observer.complete();
                }
            }, function (err) { return _this.handleError(err); });
        });
    };
    /**
     * @param {?} formName
     * @param {?} form
     * @return {?}
     */
    EcmModelService.prototype.createEcmTypeWithProperties = function (formName, form) {
        var _this = this;
        return Observable.Observable.create(function (observer) {
            _this.createEcmType(formName, EcmModelService.MODEL_NAME, EcmModelService.TYPE_MODEL).subscribe(function (typeCreated) {
                _this.logService.info('type Created', typeCreated);
                _this.addPropertyToAType(EcmModelService.MODEL_NAME, formName, form).subscribe(function (properyAdded) {
                    _this.logService.info('property Added', properyAdded);
                    observer.next(typeCreated);
                    observer.complete();
                }, function (err) { return _this.handleError(err); });
            }, function (err) { return _this.handleError(err); });
        });
    };
    /**
     * @param {?} typeName
     * @param {?} modelName
     * @return {?}
     */
    EcmModelService.prototype.searchEcmType = function (typeName, modelName) {
        return this.getEcmType(modelName).map(function (customTypes) {
            return customTypes.list.entries.find(function (type) { return type.entry.prefixedName === typeName || type.entry.title === typeName; });
        });
    };
    /**
     * @param {?} modelName
     * @return {?}
     */
    EcmModelService.prototype.activeEcmModel = function (modelName) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.activateCustomModel(modelName))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} modelName
     * @param {?} nameSpace
     * @return {?}
     */
    EcmModelService.prototype.createEcmModel = function (modelName, nameSpace) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.createCustomModel('DRAFT', '', modelName, modelName, nameSpace))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @return {?}
     */
    EcmModelService.prototype.getEcmModels = function () {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.getAllCustomModel())
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} modelName
     * @return {?}
     */
    EcmModelService.prototype.getEcmType = function (modelName) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.getAllCustomType(modelName))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} typeName
     * @param {?} modelName
     * @param {?} parentType
     * @return {?}
     */
    EcmModelService.prototype.createEcmType = function (typeName, modelName, parentType) {
        var _this = this;
        var /** @type {?} */ name = this.cleanNameType(typeName);
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.createCustomType(modelName, name, parentType, typeName, ''))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} modelName
     * @param {?} typeName
     * @param {?} formFields
     * @return {?}
     */
    EcmModelService.prototype.addPropertyToAType = function (modelName, typeName, formFields) {
        var _this = this;
        var /** @type {?} */ name = this.cleanNameType(typeName);
        var /** @type {?} */ properties = [];
        if (formFields && formFields.values) {
            for (var /** @type {?} */ key in formFields.values) {
                if (key) {
                    properties.push({
                        name: key,
                        title: key,
                        description: key,
                        dataType: 'd:text',
                        multiValued: false,
                        mandatory: false,
                        mandatoryEnforced: false
                    });
                }
            }
        }
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.addPropertyToType(modelName, name, properties))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} name
     * @return {?}
     */
    EcmModelService.prototype.cleanNameType = function (name) {
        var /** @type {?} */ cleanName = name;
        if (name.indexOf(':') !== -1) {
            cleanName = name.split(':')[1];
        }
        return cleanName.replace(/[^a-zA-Z ]/g, '');
    };
    /**
     * @param {?} res
     * @return {?}
     */
    EcmModelService.prototype.toJson = function (res) {
        if (res) {
            return res || {};
        }
        return {};
    };
    /**
     * @param {?} err
     * @return {?}
     */
    EcmModelService.prototype.handleError = function (err) {
        this.logService.error(err);
    };
    return EcmModelService;
}());
EcmModelService.MODEL_NAMESPACE = 'activitiForms';
EcmModelService.MODEL_NAME = 'activitiFormsModel';
EcmModelService.TYPE_MODEL = 'cm:folder';
EcmModelService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
EcmModelService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FormService = /** @class */ (function () {
    /**
     * @param {?} ecmModelService
     * @param {?} apiService
     * @param {?} logService
     */
    function FormService(ecmModelService, apiService, logService) {
        this.ecmModelService = ecmModelService;
        this.apiService = apiService;
        this.logService = logService;
        this.formLoaded = new Subject.Subject();
        this.formDataRefreshed = new Subject.Subject();
        this.formFieldValueChanged = new Subject.Subject();
        this.formEvents = new Subject.Subject();
        this.taskCompleted = new Subject.Subject();
        this.taskCompletedError = new Subject.Subject();
        this.taskSaved = new Subject.Subject();
        this.taskSavedError = new Subject.Subject();
        this.formContentClicked = new Subject.Subject();
        this.validateForm = new Subject.Subject();
        this.validateFormField = new Subject.Subject();
        this.validateDynamicTableRow = new Subject.Subject();
        this.executeOutcome = new Subject.Subject();
    }
    Object.defineProperty(FormService.prototype, "taskApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().activiti.taskApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormService.prototype, "modelsApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().activiti.modelsApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormService.prototype, "editorApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().activiti.editorApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormService.prototype, "processApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().activiti.processApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormService.prototype, "processInstanceVariablesApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().activiti.processInstanceVariablesApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormService.prototype, "usersWorkflowApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().activiti.usersWorkflowApi;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormService.prototype, "groupsApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().activiti.groupsApi;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} json
     * @param {?=} data
     * @param {?=} readOnly
     * @return {?}
     */
    FormService.prototype.parseForm = function (json, data, readOnly) {
        if (readOnly === void 0) { readOnly = false; }
        if (json) {
            var /** @type {?} */ form = new FormModel(json, data, readOnly, this);
            if (!json.fields) {
                form.outcomes = [
                    new FormOutcomeModel(form, {
                        id: '$custom',
                        name: FormOutcomeModel.SAVE_ACTION,
                        isSystem: true
                    })
                ];
            }
            return form;
        }
        return null;
    };
    /**
     * Create a Form with a fields for each metadata properties
     * @param {?} formName
     * @return {?}
     */
    FormService.prototype.createFormFromANode = function (formName) {
        var _this = this;
        return Observable.Observable.create(function (observer) {
            _this.createForm(formName).subscribe(function (form) {
                _this.ecmModelService.searchEcmType(formName, EcmModelService.MODEL_NAME).subscribe(function (customType) {
                    var /** @type {?} */ formDefinitionModel = new FormDefinitionModel(form.id, form.name, form.lastUpdatedByFullName, form.lastUpdated, customType.entry.properties);
                    _this.addFieldsToAForm(form.id, formDefinitionModel).subscribe(function (formData) {
                        observer.next(formData);
                        observer.complete();
                    }, function (err) { return _this.handleError(err); });
                }, function (err) { return _this.handleError(err); });
            }, function (err) { return _this.handleError(err); });
        });
    };
    /**
     * Create a Form
     * @param {?} formName
     * @return {?}
     */
    FormService.prototype.createForm = function (formName) {
        var /** @type {?} */ dataModel = {
            name: formName,
            description: '',
            modelType: 2,
            stencilSet: 0
        };
        return Observable.Observable.fromPromise(this.modelsApi.createModel(dataModel));
    };
    /**
     * @param {?} formId
     * @param {?} formModel
     * @return {?}
     */
    FormService.prototype.saveForm = function (formId, formModel) {
        return Observable.Observable.fromPromise(this.editorApi.saveForm(formId, formModel));
    };
    /**
     * @deprecated in 1.7.0, use saveForm API instead
     * Add Fileds to A form
     * @param {?} formId
     * @param {?} formModel
     * @return {?}
     */
    FormService.prototype.addFieldsToAForm = function (formId, formModel) {
        this.logService.log('addFieldsToAForm is deprecated in 1.7.0, use saveForm API instead');
        return Observable.Observable.fromPromise(this.editorApi.saveForm(formId, formModel));
    };
    /**
     * Search For A Form by name
     * @param {?} name
     * @return {?}
     */
    FormService.prototype.searchFrom = function (name) {
        var _this = this;
        var /** @type {?} */ opts = {
            'modelType': 2
        };
        return Observable.Observable.fromPromise(this.modelsApi.getModels(opts))
            .map(function (forms$$1) {
            return forms$$1.data.find(function (formdata) { return formdata.name === name; });
        })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Get All the forms
     * @return {?}
     */
    FormService.prototype.getForms = function () {
        var _this = this;
        var /** @type {?} */ opts = {
            'modelType': 2
        };
        return Observable.Observable.fromPromise(this.modelsApi.getModels(opts))
            .map(this.toJsonArray)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Get Process Definitions
     * @return {?}
     */
    FormService.prototype.getProcessDefinitions = function () {
        var _this = this;
        return Observable.Observable.fromPromise(this.processApi.getProcessDefinitions({}))
            .map(this.toJsonArray)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} processInstanceId
     * @return {?}
     */
    FormService.prototype.getProcessVarablesById = function (processInstanceId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.processInstanceVariablesApi.getProcessInstanceVariables(processInstanceId))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Get All the Tasks
     * @return {?}
     */
    FormService.prototype.getTasks = function () {
        var _this = this;
        return Observable.Observable.fromPromise(this.taskApi.listTasks({}))
            .map(this.toJsonArray)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Get Task
     * @param {?} taskId Task Id
     * @return {?}
     */
    FormService.prototype.getTask = function (taskId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.taskApi.getTask(taskId))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Save Task Form
     * @param {?} taskId Task Id
     * @param {?} formValues Form Values
     * @return {?}
     */
    FormService.prototype.saveTaskForm = function (taskId, formValues) {
        var _this = this;
        var /** @type {?} */ body = JSON.stringify({ values: formValues });
        return Observable.Observable.fromPromise(this.taskApi.saveTaskForm(taskId, body))
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Complete Task Form
     * @param {?} taskId Task Id
     * @param {?} formValues Form Values
     * @param {?=} outcome Form Outcome
     * @return {?}
     */
    FormService.prototype.completeTaskForm = function (taskId, formValues, outcome) {
        var _this = this;
        var /** @type {?} */ data = { values: formValues };
        if (outcome) {
            data.outcome = outcome;
        }
        var /** @type {?} */ body = JSON.stringify(data);
        return Observable.Observable.fromPromise(this.taskApi.completeTaskForm(taskId, body))
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Get Form related to a taskId
     * @param {?} taskId Task Id
     * @return {?}
     */
    FormService.prototype.getTaskForm = function (taskId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.taskApi.getTaskForm(taskId))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Get Form Definition
     * @param {?} formId Form Id
     * @return {?}
     */
    FormService.prototype.getFormDefinitionById = function (formId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.editorApi.getForm(formId))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Returns form definition by a given name.
     * @param {?} name
     * @return {?}
     */
    FormService.prototype.getFormDefinitionByName = function (name) {
        var _this = this;
        var /** @type {?} */ opts = {
            'filter': 'myReusableForms',
            'filterText': name,
            'modelType': 2
        };
        return Observable.Observable.fromPromise(this.modelsApi.getModels(opts))
            .map(this.getFormId)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Get start form instance for a given processId
     * @param {?} processId Process definition ID
     * @return {?}
     */
    FormService.prototype.getStartFormInstance = function (processId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.processApi.getProcessInstanceStartForm(processId))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} processId
     * @return {?}
     */
    FormService.prototype.getProcessIntance = function (processId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.processApi.getProcessInstance(processId))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Get start form definition for a given process
     * @param {?} processId Process definition ID
     * @return {?}
     */
    FormService.prototype.getStartFormDefinition = function (processId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.processApi.getProcessDefinitionStartForm(processId))
            .map(this.toJson)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} taskId
     * @param {?} field
     * @return {?}
     */
    FormService.prototype.getRestFieldValues = function (taskId, field) {
        var _this = this;
        return Observable.Observable.fromPromise(this.taskApi.getRestFieldValues(taskId, field)).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} processDefinitionId
     * @param {?} field
     * @return {?}
     */
    FormService.prototype.getRestFieldValuesByProcessId = function (processDefinitionId, field) {
        var _this = this;
        return Observable.Observable.fromPromise(this.processApi.getRestFieldValues(processDefinitionId, field)).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} processDefinitionId
     * @param {?} field
     * @param {?=} column
     * @return {?}
     */
    FormService.prototype.getRestFieldValuesColumnByProcessId = function (processDefinitionId, field, column) {
        var _this = this;
        return Observable.Observable.fromPromise(this.processApi.getRestTableFieldValues(processDefinitionId, field, column)).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} taskId
     * @param {?} field
     * @param {?=} column
     * @return {?}
     */
    FormService.prototype.getRestFieldValuesColumn = function (taskId, field, column) {
        var _this = this;
        return Observable.Observable.fromPromise(this.taskApi.getRestFieldValuesColumn(taskId, field, column)).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} userId
     * @return {?}
     */
    FormService.prototype.getUserProfileImageApi = function (userId) {
        return this.apiService.getInstance().activiti.userApi.getUserProfilePictureUrl(userId);
    };
    /**
     * @param {?} filter
     * @param {?=} groupId
     * @return {?}
     */
    FormService.prototype.getWorkflowUsers = function (filter$$1, groupId) {
        var _this = this;
        var /** @type {?} */ option = { filter: filter$$1 };
        if (groupId) {
            option.groupId = groupId;
        }
        return Observable.Observable.fromPromise(this.usersWorkflowApi.getUsers(option))
            .switchMap(function (response) { /** @type {?} */ return (response.data) || []; })
            .map(function (user) {
            user.userImage = _this.getUserProfileImageApi(user.id);
            return Observable.Observable.of(user);
        })
            .combineAll()
            .defaultIfEmpty([])
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} filter
     * @param {?=} groupId
     * @return {?}
     */
    FormService.prototype.getWorkflowGroups = function (filter$$1, groupId) {
        var _this = this;
        var /** @type {?} */ option = { filter: filter$$1 };
        if (groupId) {
            option.groupId = groupId;
        }
        return Observable.Observable.fromPromise(this.groupsApi.getGroups(option))
            .map(function (response) { /** @type {?} */ return (response.data) || []; })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} res
     * @return {?}
     */
    FormService.prototype.getFormId = function (res) {
        var /** @type {?} */ result = null;
        if (res && res.data && res.data.length > 0) {
            result = res.data[0].id;
        }
        return result;
    };
    /**
     * @param {?} res
     * @return {?}
     */
    FormService.prototype.toJson = function (res) {
        if (res) {
            return res || {};
        }
        return {};
    };
    /**
     * @param {?} res
     * @return {?}
     */
    FormService.prototype.toJsonArray = function (res) {
        if (res) {
            return res.data || [];
        }
        return [];
    };
    /**
     * @param {?} error
     * @return {?}
     */
    FormService.prototype.handleError = function (error) {
        var /** @type {?} */ errMsg = FormService.UNKNOWN_ERROR_MESSAGE;
        if (error) {
            errMsg = (error.message) ? error.message :
                error.status ? error.status + " - " + error.statusText : FormService.GENERIC_ERROR_MESSAGE;
        }
        this.logService.error(errMsg);
        return Observable.Observable.throw(errMsg);
    };
    return FormService;
}());
FormService.UNKNOWN_ERROR_MESSAGE = 'Unknown error';
FormService.GENERIC_ERROR_MESSAGE = 'Server error';
FormService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
FormService.ctorParameters = function () { return [
    { type: EcmModelService, },
    { type: AlfrescoApiService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var baseHost = {
    '(click)': 'event($event)',
    '(blur)': 'event($event)',
    '(change)': 'event($event)',
    '(focus)': 'event($event)',
    '(focusin)': 'event($event)',
    '(focusout)': 'event($event)',
    '(input)': 'event($event)',
    '(invalid)': 'event($event)',
    '(select)': 'event($event)'
};
/**
 * Base widget component.
 */
var WidgetComponent = /** @class */ (function () {
    /**
     * @param {?=} formService
     */
    function WidgetComponent(formService) {
        this.formService = formService;
        this.readOnly = false;
        /**
         * @deprecated used only to trigger visibility engine, components should do that internally if needed
         */
        this.fieldChanged = new core.EventEmitter();
    }
    /**
     * @return {?}
     */
    WidgetComponent.prototype.hasField = function () {
        return this.field ? true : false;
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.isRequired = function () {
        if (this.field && this.field.required) {
            return true;
        }
        return null;
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.isValid = function () {
        return this.field.validationSummary ? true : false;
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.hasValue = function () {
        return this.field &&
            this.field.value !== null &&
            this.field.value !== undefined;
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.isInvalidFieldRequired = function () {
        return !this.field.isValid && !this.field.validationSummary && this.isRequired();
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.ngAfterViewInit = function () {
        this.fieldChanged.emit(this.field);
    };
    /**
     * @deprecated used only to trigger visibility engine, components should do that internally if needed
     * @param {?} field
     * @return {?}
     */
    WidgetComponent.prototype.checkVisibility = function (field) {
        this.fieldChanged.emit(field);
    };
    /**
     * @deprecated used only to trigger visibility engine, components should do that internally if needed
     * @param {?} field
     * @return {?}
     */
    WidgetComponent.prototype.onFieldChanged = function (field) {
        this.fieldChanged.emit(field);
    };
    /**
     * @param {?} field
     * @return {?}
     */
    WidgetComponent.prototype.getHyperlinkUrl = function (field) {
        var /** @type {?} */ url = WidgetComponent.DEFAULT_HYPERLINK_URL;
        if (field && field.hyperlinkUrl) {
            url = field.hyperlinkUrl;
            if (!/^https?:\/\//i.test(url)) {
                url = "" + WidgetComponent.DEFAULT_HYPERLINK_SCHEME + url;
            }
        }
        return url;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    WidgetComponent.prototype.getHyperlinkText = function (field) {
        if (field) {
            return field.displayText || field.hyperlinkUrl;
        }
        return null;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    WidgetComponent.prototype.event = function (event) {
        this.formService.formEvents.next(event);
    };
    return WidgetComponent;
}());
WidgetComponent.DEFAULT_HYPERLINK_URL = '#';
WidgetComponent.DEFAULT_HYPERLINK_SCHEME = 'http://';
WidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'base-widget',
                template: '',
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
WidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
WidgetComponent.propDecorators = {
    'readOnly': [{ type: core.Input },],
    'field': [{ type: core.Input },],
    'fieldChanged': [{ type: core.Output },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ContainerWidgetComponentModel = /** @class */ (function (_super) {
    __extends(ContainerWidgetComponentModel, _super);
    /**
     * @param {?} field
     */
    function ContainerWidgetComponentModel(field) {
        var _this = _super.call(this, field) || this;
        _this.columns = [];
        _this.isExpanded = true;
        _this.rowspan = 1;
        _this.colspan = 1;
        if (_this.field) {
            _this.columns = _this.field.columns || [];
            _this.isExpanded = !_this.isCollapsedByDefault();
            _this.colspan = field.colspan;
            _this.rowspan = field.rowspan;
        }
        return _this;
    }
    /**
     * @return {?}
     */
    ContainerWidgetComponentModel.prototype.isGroup = function () {
        return this.type === FormFieldTypes.GROUP;
    };
    /**
     * @return {?}
     */
    ContainerWidgetComponentModel.prototype.isCollapsible = function () {
        var /** @type {?} */ allowCollapse = false;
        if (this.isGroup() && this.field.params['allowCollapse']) {
            allowCollapse = /** @type {?} */ (this.field.params['allowCollapse']);
        }
        return allowCollapse;
    };
    /**
     * @return {?}
     */
    ContainerWidgetComponentModel.prototype.isCollapsedByDefault = function () {
        var /** @type {?} */ collapseByDefault = false;
        if (this.isCollapsible() && this.field.params['collapseByDefault']) {
            collapseByDefault = /** @type {?} */ (this.field.params['collapseByDefault']);
        }
        return collapseByDefault;
    };
    return ContainerWidgetComponentModel;
}(ContainerModel));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var ContainerWidgetComponent = /** @class */ (function (_super) {
    __extends(ContainerWidgetComponent, _super);
    /**
     * @param {?} formService
     */
    function ContainerWidgetComponent(formService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        return _this;
    }
    /**
     * @return {?}
     */
    ContainerWidgetComponent.prototype.onExpanderClicked = function () {
        if (this.content && this.content.isCollapsible()) {
            this.content.isExpanded = !this.content.isExpanded;
        }
    };
    /**
     * @return {?}
     */
    ContainerWidgetComponent.prototype.ngOnInit = function () {
        if (this.field) {
            this.content = new ContainerWidgetComponentModel(this.field);
        }
    };
    Object.defineProperty(ContainerWidgetComponent.prototype, "fields", {
        /**
         * Serializes column fields
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ fields = [];
            var /** @type {?} */ rowContainsElement = true, /** @type {?} */ rowIndex = 0;
            while (rowContainsElement) {
                rowContainsElement = false;
                for (var /** @type {?} */ i = 0; i < this.content.columns.length; i++) {
                    var /** @type {?} */ field = this.content.columns[i].fields[rowIndex];
                    if (field) {
                        rowContainsElement = true;
                    }
                    fields.push(field);
                }
                rowIndex++;
            }
            return fields;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Calculate the column width based on the numberOfColumns and current field's colspan property
     *
     * @param {?} field
     * @return {?}
     */
    ContainerWidgetComponent.prototype.getColumnWith = function (field) {
        var /** @type {?} */ colspan = field ? field.colspan : 1;
        return (100 / this.content.json.numberOfColumns) * colspan + '%';
    };
    return ContainerWidgetComponent;
}(WidgetComponent));
ContainerWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'container-widget',
                template: "\n      <div [hidden]=\"!(content?.isGroup() && content?.isVisible)\" class=\"container-widget__header\">\n          <h4 class=\"container-widget__header-text\" id=\"container-header\"\n              [class.collapsible]=\"content?.isCollapsible()\">\n              <button *ngIf=\"content?.isCollapsible()\"\n                      mat-icon-button\n                      class=\"mdl-button--icon\"\n                      (click)=\"onExpanderClicked()\">\n                  <mat-icon>{{ content?.isExpanded ? 'expand_less' : 'expand_more' }}</mat-icon>\n              </button>\n              <span (click)=\"onExpanderClicked()\" id=\"container-header-label\">{{content.name}}</span>\n          </h4>\n      </div>\n\n      <section class=\"grid-list\" [ngClass]=\"{'hidden':!(content?.isVisible && content?.isExpanded)}\">\n          <div class=\"grid-list-item\" *ngFor=\"let field of fields\" [style.width]=\"getColumnWith(field)\">\n              <form-field *ngIf=\"field\" [field]=\"field\"></form-field>\n          </div>\n      </section>\n    ",
                styles: ["\n\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
ContainerWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var TabsWidgetComponent = /** @class */ (function () {
    function TabsWidgetComponent() {
        this.tabs = [];
        this.formTabChanged = new core.EventEmitter();
        this.visibleTabs = [];
    }
    /**
     * @return {?}
     */
    TabsWidgetComponent.prototype.hasTabs = function () {
        return this.tabs && this.tabs.length > 0;
    };
    /**
     * @return {?}
     */
    TabsWidgetComponent.prototype.ngAfterContentChecked = function () {
        this.filterVisibleTabs();
    };
    /**
     * @return {?}
     */
    TabsWidgetComponent.prototype.filterVisibleTabs = function () {
        this.visibleTabs = this.tabs.filter(function (tab) {
            return tab.isVisible;
        });
    };
    /**
     * @param {?} field
     * @return {?}
     */
    TabsWidgetComponent.prototype.tabChanged = function (field) {
        this.formTabChanged.emit(field);
    };
    return TabsWidgetComponent;
}());
TabsWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'tabs-widget',
                template: "\n      <div *ngIf=\"hasTabs()\" class=\"alfresco-tabs-widget\">\n          <mat-tab-group>\n              <mat-tab *ngFor=\"let tab of visibleTabs\" [label]=\"tab.title\">\n                  <div *ngFor=\"let field of tab.fields\">\n                      <form-field [field]=\"field.field\"></form-field>\n                   </div>\n              </mat-tab>\n          </mat-tab-group>\n      </div>\n    ",
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
TabsWidgetComponent.ctorParameters = function () { return []; };
TabsWidgetComponent.propDecorators = {
    'tabs': [{ type: core.Input },],
    'formTabChanged': [{ type: core.Output },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var UnknownWidgetComponent = /** @class */ (function (_super) {
    __extends(UnknownWidgetComponent, _super);
    /**
     * @param {?} formService
     */
    function UnknownWidgetComponent(formService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        return _this;
    }
    return UnknownWidgetComponent;
}(WidgetComponent));
UnknownWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'unknown-widget',
                template: "\n            <mat-list class=\"adf-unknown-widget\">\n                <mat-list-item>\n                     <mat-icon class=\"mat-24\">error_outline</mat-icon>\n                     <span class=\"adf-unknown-text\">Unknown type: {{field.type}}</span>\n                </mat-list-item>\n            </mat-list>\n\n    ",
                styles: ["\n      .adf-unknown-text {\n        margin-left: 10px;\n        color: red; }\n\n      .adf-unknown-widget {\n        margin: 42px; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
UnknownWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var AmountWidgetComponent = /** @class */ (function (_super) {
    __extends(AmountWidgetComponent, _super);
    /**
     * @param {?} formService
     */
    function AmountWidgetComponent(formService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.currency = AmountWidgetComponent.DEFAULT_CURRENCY;
        return _this;
    }
    /**
     * @return {?}
     */
    AmountWidgetComponent.prototype.ngOnInit = function () {
        if (this.field && this.field.currency) {
            this.currency = this.field.currency;
        }
    };
    return AmountWidgetComponent;
}(WidgetComponent));
AmountWidgetComponent.DEFAULT_CURRENCY = '$';
AmountWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'amount-widget',
                template: "\n      <div class=\"adf-amount-widget__container adf-amount-widget {{field.className}}\" [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\">\n          <mat-form-field floatPlaceholder=\"never\" class=\"adf-amount-widget__input\">\n              <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}}<span *ngIf=\"isRequired()\">*</span></label>\n              <span matPrefix class=\"adf-amount-widget__prefix-spacing\"> {{currency }}</span>\n              <input matInput\n                      class=\"adf-amount-widget\"\n                      type=\"text\"\n                      [id]=\"field.id\"\n                      [required]=\"isRequired()\"\n                      [value]=\"field.value\"\n                      [(ngModel)]=\"field.value\"\n                      (ngModelChange)=\"checkVisibility(field)\"\n                      [disabled]=\"field.readOnly\"\n                      placeholder=\"{{field.placeholder}}\">\n          </mat-form-field>\n          <error-widget [error]=\"field.validationSummary\" ></error-widget>\n          <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n      </div>\n    ",
                styles: ["\n      .adf-amount-widget {\n        width: 100%;\n        vertical-align: baseline !important; }\n        .adf-amount-widget .mat-input-element {\n          margin-left: 11px; }\n        .adf-amount-widget .mat-input-prefix {\n          position: absolute;\n          margin-top: 42px; }\n        .adf-amount-widget .mat-input-placeholder {\n          margin-top: 5px; }\n\n      .adf-amount-widget__container {\n        max-width: 100%; }\n        .adf-amount-widget__container .mat-input-placeholder-wrapper {\n          top: -6px !important; }\n        .adf-amount-widget__container .mat-input-placeholder-wrapper {\n          top: 0 !important;\n          left: 13px; }\n\n      .adf-amount-widget__input .mat-focused {\n        -webkit-transition: none;\n        transition: none; }\n\n      .adf-amount-widget__prefix-spacing {\n        padding-right: 5px; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
AmountWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ActivitiContentService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} logService
     */
    function ActivitiContentService(apiService, logService) {
        this.apiService = apiService;
        this.logService = logService;
    }
    /**
     * Returns a list of child nodes below the specified folder
     *
     * @param {?} accountId
     * @param {?} folderId
     * @return {?}
     */
    ActivitiContentService.prototype.getAlfrescoNodes = function (accountId, folderId) {
        var _this = this;
        var /** @type {?} */ apiService = this.apiService.getInstance();
        var /** @type {?} */ accountShortId = accountId.replace('alfresco-', '');
        return Observable.Observable.fromPromise(apiService.activiti.alfrescoApi.getContentInFolder(accountShortId, folderId))
            .map(this.toJsonArray)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * Returns a list of child nodes below the specified folder
     *
     * @param {?} accountId
     * @param {?} node
     * @param {?} siteId
     * @return {?}
     */
    ActivitiContentService.prototype.linkAlfrescoNode = function (accountId, node, siteId) {
        var _this = this;
        var /** @type {?} */ apiService = this.apiService.getInstance();
        return Observable.Observable.fromPromise(apiService.activiti.contentApi.createTemporaryRelatedContent({
            link: true,
            name: node.title,
            simpleType: node.simpleType,
            source: accountId,
            sourceId: node.id + '@' + siteId
        })).map(this.toJson).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} res
     * @return {?}
     */
    ActivitiContentService.prototype.toJson = function (res) {
        if (res) {
            return res || {};
        }
        return {};
    };
    /**
     * @param {?} res
     * @return {?}
     */
    ActivitiContentService.prototype.toJsonArray = function (res) {
        if (res) {
            return res.data || [];
        }
        return [];
    };
    /**
     * @param {?} error
     * @return {?}
     */
    ActivitiContentService.prototype.handleError = function (error) {
        var /** @type {?} */ errMsg = ActivitiContentService.UNKNOWN_ERROR_MESSAGE;
        if (error) {
            errMsg = (error.message) ? error.message :
                error.status ? error.status + " - " + error.statusText : ActivitiContentService.GENERIC_ERROR_MESSAGE;
        }
        this.logService.error(errMsg);
        return Observable.Observable.throw(errMsg);
    };
    return ActivitiContentService;
}());
ActivitiContentService.UNKNOWN_ERROR_MESSAGE = 'Unknown error';
ActivitiContentService.GENERIC_ERROR_MESSAGE = 'Server error';
ActivitiContentService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
ActivitiContentService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var AttachWidgetComponent = /** @class */ (function (_super) {
    __extends(AttachWidgetComponent, _super);
    /**
     * @param {?} formService
     * @param {?} contentService
     */
    function AttachWidgetComponent(formService, contentService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.contentService = contentService;
        _this.fieldChanged = new core.EventEmitter();
        _this.error = new core.EventEmitter();
        return _this;
    }
    /**
     * @return {?}
     */
    AttachWidgetComponent.prototype.ngOnInit = function () {
        if (this.field) {
            var /** @type {?} */ params = this.field.params;
            if (params &&
                params.fileSource &&
                params.fileSource.selectedFolder) {
                this.selectedFolderSiteId = params.fileSource.selectedFolder.siteId;
                this.selectedFolderSiteName = params.fileSource.selectedFolder.site;
                this.setupFileBrowser();
                this.getExternalContentNodes();
            }
        }
    };
    /**
     * @return {?}
     */
    AttachWidgetComponent.prototype.setupFileBrowser = function () {
        if (this.field) {
            var /** @type {?} */ params = this.field.params;
            this.selectedFolderPathId = params.fileSource.selectedFolder.pathId;
            this.selectedFolderAccountId = params.fileSource.selectedFolder.accountId;
        }
    };
    /**
     * @return {?}
     */
    AttachWidgetComponent.prototype.getLinkedFileName = function () {
        var /** @type {?} */ result = this.fileName;
        if (this.selectedFile &&
            this.selectedFile.title) {
            result = this.selectedFile.title;
        }
        if (this.field &&
            this.field.value &&
            this.field.value.length > 0 &&
            this.field.value[0].name) {
            result = this.field.value[0].name;
        }
        return result;
    };
    /**
     * @return {?}
     */
    AttachWidgetComponent.prototype.getExternalContentNodes = function () {
        var _this = this;
        this.contentService.getAlfrescoNodes(this.selectedFolderAccountId, this.selectedFolderPathId)
            .subscribe(function (nodes) { return _this.selectedFolderNodes = nodes; }, function (err) {
            _this.error.emit(err);
        });
    };
    /**
     * @param {?} node
     * @param {?} $event
     * @return {?}
     */
    AttachWidgetComponent.prototype.selectFile = function (node, $event) {
        var _this = this;
        this.contentService.linkAlfrescoNode(this.selectedFolderAccountId, node, this.selectedFolderSiteId).subscribe(function (link) {
            _this.selectedFile = node;
            _this.field.value = [link];
            _this.field.json.value = [link];
            _this.closeDialog();
            _this.fieldChanged.emit(_this.field);
        });
    };
    /**
     * @param {?} node
     * @param {?} $event
     * @return {?}
     */
    AttachWidgetComponent.prototype.selectFolder = function (node, $event) {
        this.selectedFolderPathId = node.id;
        this.getExternalContentNodes();
    };
    /**
     * @return {?}
     */
    AttachWidgetComponent.prototype.showDialog = function () {
        this.setupFileBrowser();
        this.getExternalContentNodes();
        if (this.dialog) {
            // todo: show dialog
            return true;
        }
        return false;
    };
    /**
     * @return {?}
     */
    AttachWidgetComponent.prototype.closeDialog = function () {
        if (this.dialog) {
            this.dialog.nativeElement.close();
        }
    };
    /**
     * @return {?}
     */
    AttachWidgetComponent.prototype.cancel = function () {
        this.closeDialog();
    };
    /**
     * @return {?}
     */
    AttachWidgetComponent.prototype.reset = function () {
        this.field.value = null;
        this.field.json.value = null;
    };
    /**
     * @return {?}
     */
    AttachWidgetComponent.prototype.hasFile = function () {
        return this.field && this.field.value;
    };
    return AttachWidgetComponent;
}(WidgetComponent));
AttachWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'attach-widget',
                template: "\n      <div class=\"attach-widget {{field.className}}\">\n          <label [attr.for]=\"field.id\">{{field.name}}<span *ngIf=\"isRequired()\">*</span></label>\n          <div>\n              <span *ngIf=\"hasFile()\" class=\"attach-widget__file mdl-chip\"><span class=\"mdl-chip__text\">{{getLinkedFileName()}}</span></span>\n              <button #browseFile [disabled]=\"field.readOnly\" (click)=\"showDialog();\" class=\"mdl-button mdl-jsm-button mdl-js-ripple-effect attach-widget__browser\">\n                  <mat-icon>image</mat-icon>\n                  Browse {{selectedFolderSiteName}}\n              </button>\n              <button *ngIf=\"hasFile\" [disabled]=\"field.readOnly\" (click)=\"reset(file);\" class=\"mdl-button mdl-js-button mdl-js-ripple-effect attach-widget__reset\">Clear</button>\n          </div>\n      </div>\n\n      <dialog class=\"mdl-dialog\" #dialog>\n          <h4 class=\"mdl-dialog__title\">Select content</h4>\n          <div class=\"mdl-dialog__content\">\n              <ul class='mdl-list'>\n                  <li class=\"mdl-list__item\" *ngFor=\"let node of selectedFolderNodes\">\n                  <span class=\"mdl-list__item-primary-content\" *ngIf=\"node.folder\">\n                  <mat-icon class=\"mdl-list__item-icon\">folder</mat-icon>\n                  <a (click)=\"selectFolder(node, $event)\">{{node.title}}</a>\n                  </span>\n                  <span class=\"mdl-list__item-primary-content\" *ngIf=\"!node.folder\">\n                  <mat-icon class=\"mdl-list__item-icon\">description</mat-icon>\n                  <a (click)=\"selectFile(node, $event)\">{{node.title}}</a>\n                  </span>\n                  </li>\n              </ul>\n          </div>\n          <div class=\"mdl-dialog__actions\">\n              <button type=\"button\" (click)=\"cancel()\" class=\"mdl-button close\">Cancel</button>\n          </div>\n      </dialog>\n    ",
                styles: ["\n      .attach-widget {\n          width:100%\n      }\n\n      .attach-widget__icon {\n          float: left;\n      }\n\n      .attach-widget__file {\n          margin-top: 4px;\n      }\n\n      .attach-widget__reset {\n          margin-top: 4px;\n      }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
AttachWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: ActivitiContentService, },
]; };
AttachWidgetComponent.propDecorators = {
    'fieldChanged': [{ type: core.Output },],
    'error': [{ type: core.Output },],
    'dialog': [{ type: core.ViewChild, args: ['dialog',] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var WidgetVisibilityService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} logService
     */
    function WidgetVisibilityService(apiService, logService) {
        this.apiService = apiService;
        this.logService = logService;
    }
    /**
     * @param {?} form
     * @return {?}
     */
    WidgetVisibilityService.prototype.refreshVisibility = function (form) {
        var _this = this;
        if (form && form.tabs && form.tabs.length > 0) {
            form.tabs.map(function (tabModel) { return _this.refreshEntityVisibility(tabModel); });
        }
        if (form) {
            form.getFormFields().map(function (field) { return _this.refreshEntityVisibility(field); });
        }
    };
    /**
     * @param {?} element
     * @return {?}
     */
    WidgetVisibilityService.prototype.refreshEntityVisibility = function (element) {
        var /** @type {?} */ visible = this.evaluateVisibility(element.form, element.visibilityCondition);
        element.isVisible = visible;
    };
    /**
     * @param {?} form
     * @param {?} visibilityObj
     * @return {?}
     */
    WidgetVisibilityService.prototype.evaluateVisibility = function (form, visibilityObj) {
        var /** @type {?} */ isLeftFieldPresent = visibilityObj && (visibilityObj.leftFormFieldId || visibilityObj.leftRestResponseId);
        if (!isLeftFieldPresent || isLeftFieldPresent === 'null') {
            return true;
        }
        else {
            return this.isFieldVisible(form, visibilityObj);
        }
    };
    /**
     * @param {?} form
     * @param {?} visibilityObj
     * @return {?}
     */
    WidgetVisibilityService.prototype.isFieldVisible = function (form, visibilityObj) {
        var /** @type {?} */ leftValue = this.getLeftValue(form, visibilityObj);
        var /** @type {?} */ rightValue = this.getRightValue(form, visibilityObj);
        var /** @type {?} */ actualResult = this.evaluateCondition(leftValue, rightValue, visibilityObj.operator);
        if (visibilityObj.nextCondition) {
            return this.evaluateLogicalOperation(visibilityObj.nextConditionOperator, actualResult, this.isFieldVisible(form, visibilityObj.nextCondition));
        }
        else {
            return actualResult;
        }
    };
    /**
     * @param {?} form
     * @param {?} visibilityObj
     * @return {?}
     */
    WidgetVisibilityService.prototype.getLeftValue = function (form, visibilityObj) {
        var /** @type {?} */ leftValue = '';
        if (visibilityObj.leftRestResponseId && visibilityObj.leftRestResponseId !== 'null') {
            leftValue = this.getVariableValue(form, visibilityObj.leftRestResponseId, this.processVarList);
        }
        else {
            leftValue = this.getFormValue(form, visibilityObj.leftFormFieldId);
            leftValue = leftValue ? leftValue : this.getVariableValue(form, visibilityObj.leftFormFieldId, this.processVarList);
        }
        return leftValue;
    };
    /**
     * @param {?} form
     * @param {?} visibilityObj
     * @return {?}
     */
    WidgetVisibilityService.prototype.getRightValue = function (form, visibilityObj) {
        var /** @type {?} */ valueFound = '';
        if (visibilityObj.rightRestResponseId) {
            valueFound = this.getVariableValue(form, visibilityObj.rightRestResponseId, this.processVarList);
        }
        else if (visibilityObj.rightFormFieldId) {
            valueFound = this.getFormValue(form, visibilityObj.rightFormFieldId);
        }
        else {
            if (moment(visibilityObj.rightValue, 'YYYY-MM-DD', true).isValid()) {
                valueFound = visibilityObj.rightValue + 'T00:00:00.000Z';
            }
            else {
                valueFound = visibilityObj.rightValue;
            }
        }
        return valueFound;
    };
    /**
     * @param {?} form
     * @param {?} fieldId
     * @return {?}
     */
    WidgetVisibilityService.prototype.getFormValue = function (form, fieldId) {
        var /** @type {?} */ value = this.getFieldValue(form.values, fieldId);
        if (!value) {
            value = this.searchValueInForm(form, fieldId);
        }
        return value;
    };
    /**
     * @param {?} valueList
     * @param {?} fieldId
     * @return {?}
     */
    WidgetVisibilityService.prototype.getFieldValue = function (valueList, fieldId) {
        var /** @type {?} */ dropDownFilterByName, /** @type {?} */ valueFound;
        if (fieldId && fieldId.indexOf('_LABEL') > 0) {
            dropDownFilterByName = fieldId.substring(0, fieldId.length - 6);
            if (valueList[dropDownFilterByName]) {
                valueFound = valueList[dropDownFilterByName].name;
            }
        }
        else if (valueList[fieldId] && valueList[fieldId].id) {
            valueFound = valueList[fieldId].id;
        }
        else {
            valueFound = valueList[fieldId];
        }
        return valueFound;
    };
    /**
     * @param {?} form
     * @param {?} fieldId
     * @return {?}
     */
    WidgetVisibilityService.prototype.searchValueInForm = function (form, fieldId) {
        var _this = this;
        var /** @type {?} */ fieldValue = '';
        form.getFormFields().forEach(function (formField) {
            if (_this.isSearchedField(formField, fieldId)) {
                fieldValue = _this.getObjectValue(formField);
                if (!fieldValue) {
                    if (formField.value && formField.value.id) {
                        fieldValue = formField.value.id;
                    }
                    else {
                        fieldValue = formField.value;
                    }
                }
            }
        });
        return fieldValue;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    WidgetVisibilityService.prototype.getObjectValue = function (field) {
        var /** @type {?} */ value = '';
        if (field.value && field.value.name) {
            value = field.value.name;
        }
        else if (field.options) {
            var /** @type {?} */ option = field.options.find(function (opt) { return opt.id === field.value; });
            if (option) {
                value = option.name;
            }
            else {
                value = field.value;
            }
        }
        return value;
    };
    /**
     * @param {?} field
     * @param {?} fieldToFind
     * @return {?}
     */
    WidgetVisibilityService.prototype.isSearchedField = function (field, fieldToFind) {
        var /** @type {?} */ formattedFieldName = this.removeLabel(field, fieldToFind);
        return field.id ? field.id.toUpperCase() === formattedFieldName.toUpperCase() : false;
    };
    /**
     * @param {?} field
     * @param {?} fieldToFind
     * @return {?}
     */
    WidgetVisibilityService.prototype.removeLabel = function (field, fieldToFind) {
        var /** @type {?} */ formattedFieldName = fieldToFind || '';
        if (field.fieldType === 'RestFieldRepresentation' && fieldToFind.indexOf('_LABEL') > 0) {
            formattedFieldName = fieldToFind.substring(0, fieldToFind.length - 6);
        }
        return formattedFieldName;
    };
    /**
     * @param {?} form
     * @param {?} name
     * @param {?} processVarList
     * @return {?}
     */
    WidgetVisibilityService.prototype.getVariableValue = function (form, name, processVarList) {
        return this.getFormVariableValue(form, name) ||
            this.getProcessVariableValue(name, processVarList);
    };
    /**
     * @param {?} form
     * @param {?} name
     * @return {?}
     */
    WidgetVisibilityService.prototype.getFormVariableValue = function (form, name) {
        if (form.json.variables) {
            var /** @type {?} */ formVariable = form.json.variables.find(function (formVar) { return formVar.name === name; });
            return formVariable ? formVariable.value : formVariable;
        }
    };
    /**
     * @param {?} name
     * @param {?} processVarList
     * @return {?}
     */
    WidgetVisibilityService.prototype.getProcessVariableValue = function (name, processVarList) {
        if (this.processVarList) {
            var /** @type {?} */ processVariable = this.processVarList.find(function (variable) { return variable.id === name; });
            return processVariable ? processVariable.value : processVariable;
        }
    };
    /**
     * @param {?} logicOp
     * @param {?} previousValue
     * @param {?} newValue
     * @return {?}
     */
    WidgetVisibilityService.prototype.evaluateLogicalOperation = function (logicOp, previousValue, newValue) {
        switch (logicOp) {
            case 'and':
                return previousValue && newValue;
            case 'or':
                return previousValue || newValue;
            case 'and-not':
                return previousValue && !newValue;
            case 'or-not':
                return previousValue || !newValue;
            default:
                this.logService.error('NO valid operation! wrong op request : ' + logicOp);
                break;
        }
    };
    /**
     * @param {?} leftValue
     * @param {?} rightValue
     * @param {?} operator
     * @return {?}
     */
    WidgetVisibilityService.prototype.evaluateCondition = function (leftValue, rightValue, operator) {
        switch (operator) {
            case '==':
                return leftValue + '' === rightValue + '';
            case '<':
                return leftValue < rightValue;
            case '!=':
                return leftValue + '' !== rightValue + '';
            case '>':
                return leftValue > rightValue;
            case '>=':
                return leftValue >= rightValue;
            case '<=':
                return leftValue <= rightValue;
            case 'empty':
                return leftValue ? leftValue === '' : true;
            case '!empty':
                return leftValue ? leftValue !== '' : false;
            default:
                this.logService.error('NO valid operation!');
                break;
        }
        return;
    };
    /**
     * @return {?}
     */
    WidgetVisibilityService.prototype.cleanProcessVariable = function () {
        this.processVarList = [];
    };
    /**
     * @param {?} taskId
     * @return {?}
     */
    WidgetVisibilityService.prototype.getTaskProcessVariable = function (taskId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().activiti.taskFormsApi.getTaskFormVariables(taskId))
            .map(function (res) {
            var /** @type {?} */ jsonRes = _this.toJson(res);
            _this.processVarList = /** @type {?} */ (jsonRes);
            return jsonRes;
        })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} res
     * @return {?}
     */
    WidgetVisibilityService.prototype.toJson = function (res) {
        return res || {};
    };
    /**
     * @param {?} err
     * @return {?}
     */
    WidgetVisibilityService.prototype.handleError = function (err) {
        this.logService.error('Error while performing a call');
        return Observable.Observable.throw('Error while performing a call - Server error');
    };
    return WidgetVisibilityService;
}());
WidgetVisibilityService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
WidgetVisibilityService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var CheckboxWidgetComponent = /** @class */ (function (_super) {
    __extends(CheckboxWidgetComponent, _super);
    /**
     * @param {?} visibilityService
     * @param {?} formService
     */
    function CheckboxWidgetComponent(visibilityService, formService) {
        var _this = _super.call(this, formService) || this;
        _this.visibilityService = visibilityService;
        _this.formService = formService;
        return _this;
    }
    /**
     * @return {?}
     */
    CheckboxWidgetComponent.prototype.onChange = function () {
        this.visibilityService.refreshVisibility(this.field.form);
    };
    return CheckboxWidgetComponent;
}(WidgetComponent));
CheckboxWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'checkbox-widget',
                template: "\n      <div [ngClass]=\"field.className\">\n          <mat-checkbox\n              [id]=\"field.id\"\n              color=\"primary\"\n              [required]=\"field.required\"\n              [disabled]=\"field.readOnly || readOnly\"\n              [(ngModel)]=\"field.value\"\n              (change)=\"onChange()\">\n              {{field.name}}\n              <span *ngIf=\"field.required\">*</span>\n          </mat-checkbox>\n      </div>\n    ",
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
CheckboxWidgetComponent.ctorParameters = function () { return [
    { type: WidgetVisibilityService, },
    { type: FormService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var DateWidgetComponent = /** @class */ (function (_super) {
    __extends(DateWidgetComponent, _super);
    /**
     * @param {?} formService
     * @param {?} dateAdapter
     * @param {?} preferences
     */
    function DateWidgetComponent(formService, dateAdapter, preferences) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.dateAdapter = dateAdapter;
        _this.preferences = preferences;
        return _this;
    }
    /**
     * @return {?}
     */
    DateWidgetComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.preferences.locale$.subscribe(function (locale) {
            _this.dateAdapter.setLocale(locale);
        });
        var /** @type {?} */ momentDateAdapter = (this.dateAdapter);
        momentDateAdapter.overrideDisplyaFormat = this.field.dateDisplayFormat;
        if (this.field) {
            if (this.field.minValue) {
                this.minDate = moment(this.field.minValue, 'DD/MM/YYYY');
            }
            if (this.field.maxValue) {
                this.maxDate = moment(this.field.maxValue, 'DD/MM/YYYY');
            }
        }
        this.displayDate = moment(this.field.value, this.field.dateDisplayFormat);
    };
    /**
     * @param {?} newDateValue
     * @return {?}
     */
    DateWidgetComponent.prototype.onDateChanged = function (newDateValue) {
        if (newDateValue && newDateValue.value) {
            this.field.value = newDateValue.value.format(this.field.dateDisplayFormat);
        }
        else if (newDateValue) {
            this.field.value = newDateValue;
        }
        else {
            this.field.value = null;
        }
        this.checkVisibility(this.field);
    };
    return DateWidgetComponent;
}(WidgetComponent));
DateWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'date-widget',
                providers: [
                    { provide: material.DateAdapter, useClass: MomentDateAdapter },
                    { provide: material.MAT_DATE_FORMATS, useValue: MOMENT_DATE_FORMATS }
                ],
                template: "\n      <div class=\"{{field.className}}\" *ngIf=\"field?.isVisible\" id=\"data-widget\" [class.adf-invalid]=\"!field.isValid || field.validationSummary.message\">\n          <mat-form-field class=\"adf-date-widget\">\n              <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}} ({{field.dateDisplayFormat}})<span *ngIf=\"isRequired()\">*</span></label>\n              <input matInput\n                     [id]=\"field.id\"\n                     [matDatepicker]=\"datePicker\"\n                     [(ngModel)]=\"displayDate\"\n                     [required]=\"isRequired()\"\n                     [disabled]=\"field.readOnly\"\n                     [min]=\"minDate\"\n                     [max]=\"maxDate\"\n                     (focusout)=\"onDateChanged($event.srcElement.value)\"\n                     (dateChange)=\"onDateChanged($event)\"\n                     placeholder=\"{{field.placeholder}}\">\n              <mat-datepicker-toggle  matSuffix [for]=\"datePicker\" [disabled]=\"field.readOnly\" ></mat-datepicker-toggle>\n          </mat-form-field>\n          <error-widget [error]=\"field.validationSummary\"></error-widget>\n          <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n          <mat-datepicker #datePicker [touchUi]=\"true\" [startAt]=\"startAt\" ></mat-datepicker>\n      </div>\n    ",
                styles: ["\n      .adf-date-widget .mat-input-suffix {\n        text-align: right;\n        position: absolute;\n        margin-top: 30px;\n        width: 100%; }\n\n      .adf-date-widget-date-widget-button {\n        position: relative;\n        float: right; }\n\n      .adf-date-widget-date-input {\n        padding-top: 5px;\n        padding-bottom: 5px; }\n\n      .adf-date-widget-grid-date-widget {\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n        padding: 0; }\n\n      .adf-date-widget-date-widget-button__cell {\n        margin-top: 0;\n        margin-bottom: 0; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
DateWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: material.DateAdapter, },
    { type: UserPreferencesService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var DisplayTextWidgetComponentComponent = /** @class */ (function (_super) {
    __extends(DisplayTextWidgetComponentComponent, _super);
    /**
     * @param {?} formService
     */
    function DisplayTextWidgetComponentComponent(formService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        return _this;
    }
    return DisplayTextWidgetComponentComponent;
}(WidgetComponent));
DisplayTextWidgetComponentComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'display-text-widget',
                template: "\n      <div class=\"adf-display-text-widget {{field.className}}\">{{field.value}}</div>\n    ",
                styles: ["\n      .adf-display-text-widget {\n        white-space: pre-wrap; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
DisplayTextWidgetComponentComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DocumentWidgetComponent = /** @class */ (function (_super) {
    __extends(DocumentWidgetComponent, _super);
    /**
     * @param {?} formService
     */
    function DocumentWidgetComponent(formService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.fileId = null;
        _this.hasFile = false;
        return _this;
    }
    /**
     * @return {?}
     */
    DocumentWidgetComponent.prototype.ngOnInit = function () {
        if (this.field) {
            var /** @type {?} */ file = this.field.value;
            if (file) {
                this.fileId = file.id;
                this.hasFile = true;
            }
            else {
                this.fileId = null;
                this.hasFile = false;
            }
        }
    };
    return DocumentWidgetComponent;
}(WidgetComponent));
DocumentWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-form-document-widget',
                template: "\n      <div class=\"adf-form-document-widget {{field.className}}\">\n          <ng-container *ngIf=\"hasFile\">\n              <adf-content [id]=\"fileId\" [showDocumentContent]=\"true\"></adf-content>\n          </ng-container>\n      </div>\n    ",
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
DocumentWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var DropdownWidgetComponent = /** @class */ (function (_super) {
    __extends(DropdownWidgetComponent, _super);
    /**
     * @param {?} formService
     * @param {?} visibilityService
     * @param {?} logService
     */
    function DropdownWidgetComponent(formService, visibilityService, logService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.visibilityService = visibilityService;
        _this.logService = logService;
        return _this;
    }
    /**
     * @return {?}
     */
    DropdownWidgetComponent.prototype.ngOnInit = function () {
        if (this.field && this.field.restUrl) {
            if (this.field.form.taskId) {
                this.getValuesByTaskId();
            }
            else {
                this.getValuesByProcessDefinitionId();
            }
        }
    };
    /**
     * @return {?}
     */
    DropdownWidgetComponent.prototype.getValuesByTaskId = function () {
        var _this = this;
        this.formService
            .getRestFieldValues(this.field.form.taskId, this.field.id)
            .subscribe(function (result) {
            var /** @type {?} */ options = [];
            if (_this.field.emptyOption) {
                options.push(_this.field.emptyOption);
            }
            _this.field.options = options.concat((result || []));
            _this.field.updateForm();
        }, function (err) { return _this.handleError(err); });
    };
    /**
     * @return {?}
     */
    DropdownWidgetComponent.prototype.getValuesByProcessDefinitionId = function () {
        var _this = this;
        this.formService
            .getRestFieldValuesByProcessId(this.field.form.processDefinitionId, this.field.id)
            .subscribe(function (result) {
            var /** @type {?} */ options = [];
            if (_this.field.emptyOption) {
                options.push(_this.field.emptyOption);
            }
            _this.field.options = options.concat((result || []));
            _this.field.updateForm();
        }, function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} option
     * @param {?} fieldValue
     * @return {?}
     */
    DropdownWidgetComponent.prototype.getOptionValue = function (option, fieldValue) {
        var /** @type {?} */ optionValue = '';
        if (option.id === 'empty' || option.name !== fieldValue) {
            optionValue = option.id;
        }
        else {
            optionValue = option.name;
        }
        return optionValue;
    };
    /**
     * @return {?}
     */
    DropdownWidgetComponent.prototype.checkVisibility = function () {
        this.visibilityService.refreshVisibility(this.field.form);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    DropdownWidgetComponent.prototype.handleError = function (error) {
        this.logService.error(error);
    };
    /**
     * @return {?}
     */
    DropdownWidgetComponent.prototype.isReadOnlyType = function () {
        return this.field.type === 'readonly' ? true : false;
    };
    return DropdownWidgetComponent;
}(WidgetComponent));
DropdownWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'dropdown-widget',
                template: "\n      <div class=\"adf-dropdown-widget {{field.className}}\"\n           [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\" *ngIf=\"field?.isVisible\">\n          <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}}<span *ngIf=\"isRequired()\">*</span></label>\n          <mat-form-field>\n              <mat-select class=\"adf-select\"\n                          [id]=\"field.id\"\n                          [(ngModel)]=\"field.value\"\n                          [disabled]=\"field.readOnly\"\n                          (ngModelChange)=\"checkVisibility(field)\">\n                  <mat-option *ngFor=\"let opt of field.options\"\n                              [value]=\"getOptionValue(opt, field.value)\"\n                              [id]=\"opt.id\">{{opt.name}}\n                  </mat-option>\n                  <mat-option id=\"readonlyOption\" *ngIf=\"isReadOnlyType()\" [value]=\"field.value\">{{field.value}}</mat-option>\n              </mat-select>\n          </mat-form-field>\n          <error-widget [error]=\"field.validationSummary\"></error-widget>\n          <error-widget class=\"adf-dropdown-required-message\" *ngIf=\"isInvalidFieldRequired()\"\n                        required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n      </div>\n    ",
                styles: ["\n      .adf-dropdown-widget {\n        width: 100%;\n        margin-top: 13px; }\n        .adf-dropdown-widget .adf-select {\n          padding-top: 0 !important;\n          width: 100%; }\n        .adf-dropdown-widget .mat-select-value-text {\n          font-size: 14px; }\n        .adf-dropdown-widget-select {\n          width: 100%; }\n        .adf-dropdown-widget-dropdown-required-message .adf-error-text-container {\n          margin-top: 1px !important; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
DropdownWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: WidgetVisibilityService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var DateCellValidator = /** @class */ (function () {
    function DateCellValidator() {
        this.supportedTypes = [
            'Date'
        ];
    }
    /**
     * @param {?} column
     * @return {?}
     */
    DateCellValidator.prototype.isSupported = function (column) {
        return column && column.editable && this.supportedTypes.indexOf(column.type) > -1;
    };
    /**
     * @param {?} row
     * @param {?} column
     * @param {?=} summary
     * @return {?}
     */
    DateCellValidator.prototype.validate = function (row, column, summary) {
        if (this.isSupported(column)) {
            var /** @type {?} */ value = row.value[column.id];
            var /** @type {?} */ dateValue = moment(value, 'D-M-YYYY');
            if (!dateValue.isValid()) {
                if (summary) {
                    summary.isValid = false;
                    summary.message = "Invalid '" + column.name + "' format.";
                }
                return false;
            }
        }
        return true;
    };
    return DateCellValidator;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var DynamicRowValidationSummary = /** @class */ (function (_super) {
    __extends(DynamicRowValidationSummary, _super);
    /**
     * @param {?=} json
     */
    function DynamicRowValidationSummary(json) {
        var _this = _super.call(this, json) || this;
        _this.isValid = json.isValid;
        return _this;
    }
    return DynamicRowValidationSummary;
}(ErrorMessageModel));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NumberCellValidator = /** @class */ (function () {
    function NumberCellValidator() {
        this.supportedTypes = [
            'Number',
            'Amount'
        ];
    }
    /**
     * @param {?} column
     * @return {?}
     */
    NumberCellValidator.prototype.isSupported = function (column) {
        return column && column.required && this.supportedTypes.indexOf(column.type) > -1;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    NumberCellValidator.prototype.isNumber = function (value) {
        if (value === null || value === undefined || value === '') {
            return false;
        }
        return !isNaN(+value);
    };
    /**
     * @param {?} row
     * @param {?} column
     * @param {?=} summary
     * @return {?}
     */
    NumberCellValidator.prototype.validate = function (row, column, summary) {
        if (this.isSupported(column)) {
            var /** @type {?} */ value = row.value[column.id];
            if (value === null ||
                value === undefined ||
                value === '' ||
                this.isNumber(value)) {
                return true;
            }
            if (summary) {
                summary.isValid = false;
                summary.message = "Field '" + column.name + "' must be a number.";
            }
            return false;
        }
        return true;
    };
    return NumberCellValidator;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var RequiredCellValidator = /** @class */ (function () {
    function RequiredCellValidator() {
        this.supportedTypes = [
            'String',
            'Number',
            'Amount',
            'Date',
            'Dropdown'
        ];
    }
    /**
     * @param {?} column
     * @return {?}
     */
    RequiredCellValidator.prototype.isSupported = function (column) {
        return column && column.required && this.supportedTypes.indexOf(column.type) > -1;
    };
    /**
     * @param {?} row
     * @param {?} column
     * @param {?=} summary
     * @return {?}
     */
    RequiredCellValidator.prototype.validate = function (row, column, summary) {
        if (this.isSupported(column)) {
            var /** @type {?} */ value = row.value[column.id];
            if (column.required) {
                if (value === null || value === undefined || value === '') {
                    if (summary) {
                        summary.isValid = false;
                        summary.message = "Field '" + column.name + "' is required.";
                    }
                    return false;
                }
            }
        }
        return true;
    };
    return RequiredCellValidator;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var DynamicTableModel = /** @class */ (function (_super) {
    __extends(DynamicTableModel, _super);
    /**
     * @param {?} field
     * @param {?} formService
     */
    function DynamicTableModel(field, formService) {
        var _this = _super.call(this, field.form, field.json) || this;
        _this.formService = formService;
        _this.columns = [];
        _this.visibleColumns = [];
        _this.rows = [];
        _this._validators = [];
        _this.field = field;
        if (field.json) {
            var columns = _this.getColumns(field);
            if (columns) {
                _this.columns = columns;
                _this.visibleColumns = _this.columns.filter(function (col) { return col.visible; });
            }
            if (field.json.value) {
                _this.rows = field.json.value.map(function (obj) { return ({ selected: false, value: obj }); });
            }
        }
        _this._validators = [
            new RequiredCellValidator(),
            new DateCellValidator(),
            new NumberCellValidator()
        ];
        return _this;
    }
    Object.defineProperty(DynamicTableModel.prototype, "selectedRow", {
        /**
         * @return {?}
         */
        get: function () {
            return this._selectedRow;
        },
        /**
         * @param {?} value
         * @return {?}
         */
        set: function (value) {
            if (this._selectedRow && this._selectedRow === value) {
                this._selectedRow.selected = false;
                this._selectedRow = null;
                return;
            }
            this.rows.forEach(function (row) { return row.selected = false; });
            this._selectedRow = value;
            if (value) {
                this._selectedRow.selected = true;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} field
     * @return {?}
     */
    DynamicTableModel.prototype.getColumns = function (field) {
        if (field && field.json) {
            var /** @type {?} */ definitions = field.json.columnDefinitions;
            if (!definitions && field.json.params && field.json.params.field) {
                definitions = field.json.params.field.columnDefinitions;
            }
            if (definitions) {
                return definitions.map(function (obj) { /** @type {?} */ return (obj); });
            }
        }
        return null;
    };
    /**
     * @return {?}
     */
    DynamicTableModel.prototype.flushValue = function () {
        if (this.field) {
            this.field.value = this.rows.map(function (r) { return r.value; });
            this.field.updateForm();
        }
    };
    /**
     * @param {?} row
     * @param {?} offset
     * @return {?}
     */
    DynamicTableModel.prototype.moveRow = function (row, offset) {
        var /** @type {?} */ oldIndex = this.rows.indexOf(row);
        if (oldIndex > -1) {
            var /** @type {?} */ newIndex = (oldIndex + offset);
            if (newIndex < 0) {
                newIndex = 0;
            }
            else if (newIndex >= this.rows.length) {
                newIndex = this.rows.length;
            }
            var /** @type {?} */ arr = this.rows.slice();
            arr.splice(oldIndex, 1);
            arr.splice(newIndex, 0, row);
            this.rows = arr;
            this.flushValue();
        }
    };
    /**
     * @param {?} row
     * @return {?}
     */
    DynamicTableModel.prototype.deleteRow = function (row) {
        if (row) {
            if (this.selectedRow === row) {
                this.selectedRow = null;
            }
            var /** @type {?} */ idx = this.rows.indexOf(row);
            if (idx > -1) {
                this.rows.splice(idx, 1);
                this.flushValue();
            }
        }
    };
    /**
     * @param {?} row
     * @return {?}
     */
    DynamicTableModel.prototype.addRow = function (row) {
        if (row) {
            this.rows.push(row);
            // this.selectedRow = row;
        }
    };
    /**
     * @param {?} row
     * @return {?}
     */
    DynamicTableModel.prototype.validateRow = function (row) {
        var /** @type {?} */ summary = new DynamicRowValidationSummary({
            isValid: true,
            message: null
        });
        var /** @type {?} */ event = new ValidateDynamicTableRowEvent(this.form, this.field, row, summary);
        this.formService.validateDynamicTableRow.next(event);
        if (event.defaultPrevented || !summary.isValid) {
            return summary;
        }
        if (row) {
            for (var _i = 0, _a = this.columns; _i < _a.length; _i++) {
                var col = _a[_i];
                for (var _b = 0, _c = this._validators; _b < _c.length; _b++) {
                    var validator = _c[_b];
                    if (!validator.validate(row, col, summary)) {
                        return summary;
                    }
                }
            }
        }
        return summary;
    };
    /**
     * @param {?} row
     * @param {?} column
     * @return {?}
     */
    DynamicTableModel.prototype.getCellValue = function (row, column) {
        var /** @type {?} */ result = row.value[column.id];
        if (column.type === 'Dropdown') {
            if (result) {
                return result.name;
            }
        }
        if (column.type === 'Boolean') {
            return result ? true : false;
        }
        if (column.type === 'Date') {
            if (result) {
                return moment(result.split('T')[0], 'YYYY-MM-DD').format('DD-MM-YYYY');
            }
        }
        return result || '';
    };
    /**
     * @param {?} column
     * @return {?}
     */
    DynamicTableModel.prototype.getDisplayText = function (column) {
        var /** @type {?} */ result = column.name;
        if (column.type === 'Amount') {
            var /** @type {?} */ currency = column.amountCurrency || '$';
            result = column.name + " (" + currency + ")";
        }
        return result;
    };
    return DynamicTableModel;
}(FormWidgetModel));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var DynamicTableWidgetComponent = /** @class */ (function (_super) {
    __extends(DynamicTableWidgetComponent, _super);
    /**
     * @param {?} formService
     * @param {?} elementRef
     * @param {?} visibilityService
     * @param {?} logService
     * @param {?} cd
     */
    function DynamicTableWidgetComponent(formService, elementRef, visibilityService, logService, cd) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.elementRef = elementRef;
        _this.visibilityService = visibilityService;
        _this.logService = logService;
        _this.cd = cd;
        _this.ERROR_MODEL_NOT_FOUND = 'Table model not found';
        _this.editMode = false;
        _this.editRow = null;
        _this.selectArrayCode = [32, 0, 13];
        return _this;
    }
    /**
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.ngOnInit = function () {
        if (this.field) {
            this.content = new DynamicTableModel(this.field, this.formService);
            this.visibilityService.refreshVisibility(this.field.form);
        }
    };
    /**
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.forceFocusOnAddButton = function () {
        if (this.content) {
            this.cd.detectChanges();
            var /** @type {?} */ buttonAddRow = (this.elementRef.nativeElement.querySelector('#' + this.content.id + '-add-row'));
            if (this.isDynamicTableReady(buttonAddRow)) {
                buttonAddRow.focus();
            }
        }
    };
    /**
     * @param {?} buttonAddRow
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.isDynamicTableReady = function (buttonAddRow) {
        return this.field && !this.editMode && buttonAddRow;
    };
    /**
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.isValid = function () {
        var /** @type {?} */ result = true;
        if (this.content && this.content.field) {
            result = this.content.field.isValid;
        }
        return result;
    };
    /**
     * @param {?} row
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.onRowClicked = function (row) {
        if (this.content) {
            this.content.selectedRow = row;
        }
    };
    /**
     * @param {?} $event
     * @param {?} row
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.onKeyPressed = function ($event, row) {
        if (this.content && this.isEnterOrSpacePressed($event.keyCode)) {
            this.content.selectedRow = row;
        }
    };
    /**
     * @param {?} keycode
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.isEnterOrSpacePressed = function (keycode) {
        return this.selectArrayCode.indexOf(keycode) !== -1;
    };
    /**
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.hasSelection = function () {
        return !!(this.content && this.content.selectedRow);
    };
    /**
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.moveSelectionUp = function () {
        if (this.content && !this.readOnly) {
            this.content.moveRow(this.content.selectedRow, -1);
            return true;
        }
        return false;
    };
    /**
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.moveSelectionDown = function () {
        if (this.content && !this.readOnly) {
            this.content.moveRow(this.content.selectedRow, 1);
            return true;
        }
        return false;
    };
    /**
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.deleteSelection = function () {
        if (this.content && !this.readOnly) {
            this.content.deleteRow(this.content.selectedRow);
            return true;
        }
        return false;
    };
    /**
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.addNewRow = function () {
        if (this.content && !this.readOnly) {
            this.editRow = /** @type {?} */ ({
                isNew: true,
                selected: false,
                value: {}
            });
            this.editMode = true;
            return true;
        }
        return false;
    };
    /**
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.editSelection = function () {
        if (this.content && !this.readOnly) {
            this.editRow = this.copyRow(this.content.selectedRow);
            this.editMode = true;
            return true;
        }
        return false;
    };
    /**
     * @param {?} row
     * @param {?} column
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.getCellValue = function (row, column) {
        if (this.content) {
            var /** @type {?} */ result = this.content.getCellValue(row, column);
            if (column.type === 'Amount') {
                return (column.amountCurrency || '$') + ' ' + (result || 0);
            }
            return result;
        }
        return null;
    };
    /**
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.onSaveChanges = function () {
        if (this.content) {
            if (this.editRow.isNew) {
                var /** @type {?} */ row = this.copyRow(this.editRow);
                this.content.selectedRow = null;
                this.content.addRow(row);
                this.editRow.isNew = false;
            }
            else {
                this.content.selectedRow.value = this.copyObject(this.editRow.value);
            }
            this.content.flushValue();
        }
        else {
            this.logService.error(this.ERROR_MODEL_NOT_FOUND);
        }
        this.editMode = false;
        this.forceFocusOnAddButton();
    };
    /**
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.onCancelChanges = function () {
        this.editMode = false;
        this.editRow = null;
        this.forceFocusOnAddButton();
    };
    /**
     * @param {?} row
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.copyRow = function (row) {
        return /** @type {?} */ ({
            value: this.copyObject(row.value)
        });
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    DynamicTableWidgetComponent.prototype.copyObject = function (obj) {
        var _this = this;
        var /** @type {?} */ result = obj;
        if (typeof obj === 'object' && obj !== null && obj !== undefined) {
            result = Object.assign({}, obj);
            Object.keys(obj).forEach(function (key) {
                if (typeof obj[key] === 'object') {
                    result[key] = _this.copyObject(obj[key]);
                }
            });
        }
        return result;
    };
    return DynamicTableWidgetComponent;
}(WidgetComponent));
DynamicTableWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'dynamic-table-widget',
                template: "\n      <div class=\"{{field.className}}\"\n          [class.adf-invalid]=\"!isValid()\" *ngIf=\"field?.isVisible\">\n          <div class=\"adf-label\">{{content.name}}<span *ngIf=\"isRequired()\">*</span></div>\n\n          <div *ngIf=\"!editMode\">\n              <div class=\"adf-table-container\">\n                  <table class=\"full-width adf-dynamic-table\" id=\"dynamic-table-{{content.id}}\">\n                      <thead>\n                          <tr>\n                              <th *ngFor=\"let column of content.visibleColumns\">\n                                  {{column.name}}\n                              </th>\n                          </tr>\n                      </thead>\n                      <tbody>\n                          <tr *ngFor=\"let row of content.rows; let idx = index\" tabindex=\"0\" id=\"{{content.id}}-row-{{idx}}\"\n                              [class.adf-dynamic-table-widget__row-selected]=\"row.selected\" (keyup)=\"onKeyPressed($event, row)\">\n                              <td *ngFor=\"let column of content.visibleColumns\"\n                                  (click)=\"onRowClicked(row)\">\n                                  {{ getCellValue(row, column) }}\n                              </td>\n                          </tr>\n                      </tbody>\n                  </table>\n              </div>\n\n              <div *ngIf=\"!readOnly\">\n                  <button mat-button\n                          [disabled]=\"!hasSelection()\"\n                          (click)=\"moveSelectionUp()\">\n                      <mat-icon>arrow_upward</mat-icon>\n                  </button>\n                  <button mat-button\n                          [disabled]=\"!hasSelection()\"\n                          (click)=\"moveSelectionDown()\">\n                      <mat-icon>arrow_downward</mat-icon>\n                  </button>\n                  <button mat-button\n                          [disabled]=\"field.readOnly\"\n                          id=\"{{content.id}}-add-row\"\n                          (click)=\"addNewRow()\">\n                      <mat-icon>add_circle_outline</mat-icon>\n                  </button>\n                  <button mat-button\n                          [disabled]=\"!hasSelection()\"\n                          (click)=\"deleteSelection()\">\n                      <mat-icon>remove_circle_outline</mat-icon>\n                  </button>\n                  <button mat-button\n                          [disabled]=\"!hasSelection()\"\n                          (click)=\"editSelection()\">\n                      <mat-icon>edit</mat-icon>\n                  </button>\n              </div>\n           </div>\n\n           <row-editor *ngIf=\"editMode\"\n              [table]=\"content\"\n              [row]=\"editRow\"\n              [column]=\"column\"\n              (save)=\"onSaveChanges()\"\n              (cancel)=\"onCancelChanges()\">\n           </row-editor>\n          <error-widget [error]=\"field.validationSummary\" ></error-widget>\n          <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n      </div>\n    ",
                styles: ["\n\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
DynamicTableWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: core.ElementRef, },
    { type: WidgetVisibilityService, },
    { type: LogService, },
    { type: core.ChangeDetectorRef, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var BooleanEditorComponent = /** @class */ (function () {
    function BooleanEditorComponent() {
    }
    /**
     * @param {?} row
     * @param {?} column
     * @param {?} event
     * @return {?}
     */
    BooleanEditorComponent.prototype.onValueChanged = function (row, column, event) {
        var /** @type {?} */ value = ((event)).checked;
        row.value[column.id] = value;
    };
    return BooleanEditorComponent;
}());
BooleanEditorComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-boolean-editor',
                template: "\n       <label [attr.for]=\"column.id\">\n          <mat-checkbox\n              color=\"primary\"\n              [id]=\"column.id\"\n              [checked]=\"table.getCellValue(row, column)\"\n              [required]=\"column.required\"\n              [disabled]=\"!column.editable\"\n              (change)=\"onValueChanged(row, column, $event)\">\n          <span class=\"adf-checkbox-label\">{{column.name}}</span>\n          </mat-checkbox>\n      </label>\n    ",
                styles: ["\n      .adf-checkbox-label {\n        position: relative;\n        cursor: pointer;\n        font-size: 16px;\n        line-height: 24px;\n        margin: 0; }\n    "]
            },] },
];
/**
 * @nocollapse
 */
BooleanEditorComponent.ctorParameters = function () { return []; };
BooleanEditorComponent.propDecorators = {
    'table': [{ type: core.Input },],
    'row': [{ type: core.Input },],
    'column': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var DateEditorComponent = /** @class */ (function () {
    /**
     * @param {?} dateAdapter
     * @param {?} preferences
     */
    function DateEditorComponent(dateAdapter, preferences) {
        this.dateAdapter = dateAdapter;
        this.preferences = preferences;
        this.DATE_FORMAT = 'DD-MM-YYYY';
    }
    /**
     * @return {?}
     */
    DateEditorComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.preferences.locale$.subscribe(function (locale) {
            _this.dateAdapter.setLocale(locale);
        });
        var /** @type {?} */ momentDateAdapter = (this.dateAdapter);
        momentDateAdapter.overrideDisplyaFormat = this.DATE_FORMAT;
        this.value = moment(this.table.getCellValue(this.row, this.column), this.DATE_FORMAT);
    };
    /**
     * @param {?} newDateValue
     * @return {?}
     */
    DateEditorComponent.prototype.onDateChanged = function (newDateValue) {
        if (newDateValue) {
            var /** @type {?} */ momentDate = moment(newDateValue, this.DATE_FORMAT, true);
            if (!momentDate.isValid()) {
                this.row.value[this.column.id] = '';
            }
            else {
                this.row.value[this.column.id] = momentDate.format('YYYY-MM-DD') + "T00:00:00.000Z";
                this.table.flushValue();
            }
        }
    };
    return DateEditorComponent;
}());
DateEditorComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-date-editor',
                template: "\n      <div>\n          <mat-form-field class=\"adf-date-editor\">\n              <label [attr.for]=\"column.id\">{{column.name}} (d-M-yyyy)</label>\n              <input matInput\n                  id=\"dateInput\"\n                  type=\"text\"\n                  [matDatepicker]=\"datePicker\"\n                  [value]=\"value\"\n                  [id]=\"column.id\"\n                  [required]=\"column.required\"\n                  [disabled]=\"!column.editable\"\n                 (focusout)=\"onDateChanged($event.srcElement.value)\">\n              <mat-datepicker-toggle  *ngIf=\"column.editable\" matSuffix [for]=\"datePicker\" class=\"adf-date-editor-button\" ></mat-datepicker-toggle>\n          </mat-form-field>\n          <mat-datepicker #datePicker (dateChange)=\"onDateChanged($event)\" [touchUi]=\"true\"></mat-datepicker>\n      </div>\n    ",
                providers: [
                    { provide: material.DateAdapter, useClass: MomentDateAdapter },
                    { provide: material.MAT_DATE_FORMATS, useValue: MOMENT_DATE_FORMATS }
                ],
                styles: ["\n      .adf-date-editor {\n        width: 100%; }\n\n      .adf-date-editor-button {\n        position: relative;\n        top: 25px; }\n    "]
            },] },
];
/**
 * @nocollapse
 */
DateEditorComponent.ctorParameters = function () { return [
    { type: material.DateAdapter, },
    { type: UserPreferencesService, },
]; };
DateEditorComponent.propDecorators = {
    'table': [{ type: core.Input },],
    'row': [{ type: core.Input },],
    'column': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var DropdownEditorComponent = /** @class */ (function () {
    /**
     * @param {?} formService
     * @param {?} logService
     */
    function DropdownEditorComponent(formService, logService) {
        this.formService = formService;
        this.logService = logService;
        this.value = null;
        this.options = [];
    }
    /**
     * @return {?}
     */
    DropdownEditorComponent.prototype.ngOnInit = function () {
        var /** @type {?} */ field = this.table.field;
        if (field) {
            if (this.column.optionType === 'rest') {
                if (this.table.form && this.table.form.taskId) {
                    this.getValuesByTaskId(field);
                }
                else {
                    this.getValuesByProcessDefinitionId(field);
                }
            }
            else {
                this.options = this.column.options || [];
                this.value = this.table.getCellValue(this.row, this.column);
            }
        }
    };
    /**
     * @param {?} field
     * @return {?}
     */
    DropdownEditorComponent.prototype.getValuesByTaskId = function (field) {
        var _this = this;
        this.formService
            .getRestFieldValuesColumn(field.form.taskId, field.id, this.column.id)
            .subscribe(function (result) {
            _this.column.options = result || [];
            _this.options = _this.column.options;
            _this.value = _this.table.getCellValue(_this.row, _this.column);
        }, function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} field
     * @return {?}
     */
    DropdownEditorComponent.prototype.getValuesByProcessDefinitionId = function (field) {
        var _this = this;
        this.formService
            .getRestFieldValuesColumnByProcessId(field.form.processDefinitionId, field.id, this.column.id)
            .subscribe(function (result) {
            _this.column.options = result || [];
            _this.options = _this.column.options;
            _this.value = _this.table.getCellValue(_this.row, _this.column);
        }, function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} row
     * @param {?} column
     * @param {?} event
     * @return {?}
     */
    DropdownEditorComponent.prototype.onValueChanged = function (row, column, event) {
        var /** @type {?} */ value = ((event)).value;
        value = column.options.find(function (opt) { return opt.name === value; });
        row.value[column.id] = value;
    };
    /**
     * @param {?} error
     * @return {?}
     */
    DropdownEditorComponent.prototype.handleError = function (error) {
        this.logService.error(error);
    };
    return DropdownEditorComponent;
}());
DropdownEditorComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-dropdown-editor',
                template: "\n      <div class=\"dropdown-editor\">\n          <label [attr.for]=\"column.id\">{{column.name}}</label>\n          <mat-form-field>\n              <mat-select\n                  floatPlaceholder=\"never\"\n                  class=\"adf-dropdown-editor-select\"\n                  [id]=\"column.id\"\n                  [(ngModel)]=\"value\"\n                  [required]=\"column.required\"\n                  [disabled]=\"!column.editable\"\n                  (change)=\"onValueChanged(row, column, $event)\">\n                  <mat-option></mat-option>\n                  <mat-option *ngFor=\"let opt of options\" [value]=\"opt.name\" [id]=\"opt.id\">{{opt.name}}</mat-option>\n              </mat-select>\n          </mat-form-field>\n      </div>\n    ",
                styles: ["\n      .adf-dropdown-editor-select {\n        width: 100%; }\n    "]
            },] },
];
/**
 * @nocollapse
 */
DropdownEditorComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: LogService, },
]; };
DropdownEditorComponent.propDecorators = {
    'table': [{ type: core.Input },],
    'row': [{ type: core.Input },],
    'column': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var RowEditorComponent = /** @class */ (function () {
    function RowEditorComponent() {
        this.save = new core.EventEmitter();
        this.cancel = new core.EventEmitter();
        this.validationSummary = new DynamicRowValidationSummary({ isValid: true, message: '' });
    }
    /**
     * @return {?}
     */
    RowEditorComponent.prototype.onCancelChanges = function () {
        this.cancel.emit({
            table: this.table,
            row: this.row,
            column: this.column
        });
    };
    /**
     * @return {?}
     */
    RowEditorComponent.prototype.onSaveChanges = function () {
        this.validate();
        if (this.isValid()) {
            this.save.emit({
                table: this.table,
                row: this.row,
                column: this.column
            });
        }
    };
    /**
     * @return {?}
     */
    RowEditorComponent.prototype.isValid = function () {
        return this.validationSummary && this.validationSummary.isValid;
    };
    /**
     * @return {?}
     */
    RowEditorComponent.prototype.validate = function () {
        this.validationSummary = this.table.validateRow(this.row);
    };
    return RowEditorComponent;
}());
RowEditorComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'row-editor',
                template: "\n      <div class=\"row-editor mdl-shadow--2dp\"\n          [class.row-editor__invalid]=\"!validationSummary.isValid\">\n          <div class=\"mdl-grid\" *ngFor=\"let column of table.columns\">\n              <div class=\"mdl-cell mdl-cell--6-col\" [ngSwitch]=\"column.type\">\n                  <div *ngSwitchCase=\"'Dropdown'\">\n                      <adf-dropdown-editor\n                          [table]=\"table\"\n                          [row]=\"row\"\n                          [column]=\"column\">\n                      </adf-dropdown-editor>\n                      </div>\n                      <div *ngSwitchCase=\"'Date'\">\n                          <adf-date-editor\n                          [table]=\"table\"\n                          [row]=\"row\"\n                          [column]=\"column\">\n                      </adf-date-editor>\n                      </div>\n\n                      <div *ngSwitchCase=\"'Boolean'\">\n                      <adf-boolean-editor\n                          [table]=\"table\"\n                          [row]=\"row\"\n                          [column]=\"column\">\n                      </adf-boolean-editor>\n                      </div>\n                      <div *ngSwitchDefault>\n                      <adf-text-editor\n                          [table]=\"table\"\n                          [row]=\"row\"\n                          [column]=\"column\">\n                      </adf-text-editor>\n                  </div>\n              </div>\n          </div>\n          <error-widget [error]=\"validationSummary\"></error-widget>\n          <div>\n              <button mat-button (click)=\"onCancelChanges()\">Cancel</button>\n              <button mat-button (click)=\"onSaveChanges()\">Save</button>\n          </div>\n      </div>\n    ",
                styles: ["\n      .row-editor {\n          padding: 8px;\n      }\n\n      .row-editor__validation-summary {\n          visibility: hidden;\n      }\n\n      .row-editor__invalid .row-editor__validation-summary {\n          padding-left: 16px;\n          padding-right: 16px;\n          padding-top: 8px;\n          padding-bottom: 8px;\n          color: #d50000;\n          visibility: visible;\n      }\n    "]
            },] },
];
/**
 * @nocollapse
 */
RowEditorComponent.ctorParameters = function () { return []; };
RowEditorComponent.propDecorators = {
    'table': [{ type: core.Input },],
    'row': [{ type: core.Input },],
    'column': [{ type: core.Input },],
    'save': [{ type: core.Output },],
    'cancel': [{ type: core.Output },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var TextEditorComponent = /** @class */ (function () {
    function TextEditorComponent() {
    }
    /**
     * @return {?}
     */
    TextEditorComponent.prototype.ngOnInit = function () {
        this.displayName = this.table.getDisplayText(this.column);
    };
    /**
     * @param {?} row
     * @param {?} column
     * @param {?} event
     * @return {?}
     */
    TextEditorComponent.prototype.onValueChanged = function (row, column, event) {
        var /** @type {?} */ value = ((event.target)).value;
        row.value[column.id] = value;
    };
    return TextEditorComponent;
}());
TextEditorComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-text-editor',
                template: "\n      <div class=\"adf-text-editor\">\n          <mat-form-field>\n          <label [attr.for]=\"column.id\">{{displayName}}</label>\n          <input matInput\n              type=\"text\"\n              [value]=\"table.getCellValue(row, column)\"\n              (keyup)=\"onValueChanged(row, column, $event)\"\n              [required]=\"column.required\"\n              [disabled]=\"!column.editable\"\n              [id]=\"column.id\">\n          </mat-form-field>\n      </div>\n    ",
                styles: ["\n      .adf-text-editor {\n        width: 100%; }\n    "]
            },] },
];
/**
 * @nocollapse
 */
TextEditorComponent.ctorParameters = function () { return []; };
TextEditorComponent.propDecorators = {
    'table': [{ type: core.Input },],
    'row': [{ type: core.Input },],
    'column': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var ErrorWidgetComponent = /** @class */ (function (_super) {
    __extends(ErrorWidgetComponent, _super);
    /**
     * @param {?} formService
     */
    function ErrorWidgetComponent(formService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.translateParameters = null;
        _this._subscriptAnimationState = '';
        return _this;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ErrorWidgetComponent.prototype.ngOnChanges = function (changes) {
        if (changes['required']) {
            this.required = changes.required.currentValue;
            this._subscriptAnimationState = 'enter';
        }
        if (changes['error'] && changes['error'].currentValue) {
            if (changes.error.currentValue.isActive()) {
                this.error = changes.error.currentValue;
                this.translateParameters = this.error.getAttributesAsJsonObj();
                this._subscriptAnimationState = 'enter';
            }
        }
    };
    return ErrorWidgetComponent;
}(WidgetComponent));
ErrorWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'error-widget',
                template: "\n      <div class=\"adf-error-text-container\">\n          <div *ngIf=\"error?.isActive()\" [@transitionMessages]=\"_subscriptAnimationState\">\n              <div class=\"adf-error-text\">{{error.message | translate:translateParameters}}</div>\n              <mat-icon class=\"adf-error-icon\">warning</mat-icon>\n          </div>\n          <div *ngIf=\"required\" [@transitionMessages]=\"_subscriptAnimationState\">\n                  <div class=\"adf-error-text\">{{required}}</div>\n          </div>\n      </div>\n    ",
                styles: ["\n      .adf-error-text {\n        width: 85%; }\n    "],
                animations: [
                    animations$1.trigger('transitionMessages', [
                        animations$1.state('enter', animations$1.style({ opacity: 1, transform: 'translateY(0%)' })),
                        animations$1.transition('void => enter', [
                            animations$1.style({ opacity: 0, transform: 'translateY(-100%)' }),
                            animations$1.animate('300ms cubic-bezier(0.55, 0, 0.55, 0.2)')
                        ])
                    ])
                ],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
ErrorWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
ErrorWidgetComponent.propDecorators = {
    'error': [{ type: core.Input },],
    'required': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var FunctionalGroupWidgetComponent = /** @class */ (function (_super) {
    __extends(FunctionalGroupWidgetComponent, _super);
    /**
     * @param {?} formService
     * @param {?} elementRef
     */
    function FunctionalGroupWidgetComponent(formService, elementRef) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.elementRef = elementRef;
        _this.groups = [];
        _this.minTermLength = 1;
        return _this;
    }
    /**
     * @return {?}
     */
    FunctionalGroupWidgetComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (this.field) {
            var /** @type {?} */ group = this.field.value;
            if (group) {
                this.value = group.name;
            }
            var /** @type {?} */ params = this.field.params;
            if (params && params['restrictWithGroup']) {
                var /** @type {?} */ restrictWithGroup = (params['restrictWithGroup']);
                this.groupId = restrictWithGroup.id;
            }
            // Load auto-completion for previously saved value
            if (this.value) {
                this.formService
                    .getWorkflowGroups(this.value, this.groupId)
                    .subscribe(function (result) { return _this.groups = result || []; });
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FunctionalGroupWidgetComponent.prototype.onKeyUp = function (event) {
        var _this = this;
        if (this.value && this.value.length >= this.minTermLength && this.oldValue !== this.value) {
            if (event.keyCode !== keycodes.ESCAPE && event.keyCode !== keycodes.ENTER) {
                this.oldValue = this.value;
                this.formService.getWorkflowGroups(this.value, this.groupId)
                    .subscribe(function (result) {
                    _this.groups = result || [];
                });
            }
        }
    };
    /**
     * @return {?}
     */
    FunctionalGroupWidgetComponent.prototype.flushValue = function () {
        var _this = this;
        var /** @type {?} */ option = this.groups.find(function (item) { return item.name.toLocaleLowerCase() === _this.value.toLocaleLowerCase(); });
        if (option) {
            this.field.value = option;
            this.value = option.name;
        }
        else {
            this.field.value = null;
            this.value = null;
        }
        this.field.updateForm();
    };
    /**
     * @param {?} item
     * @param {?} event
     * @return {?}
     */
    FunctionalGroupWidgetComponent.prototype.onItemClick = function (item, event) {
        if (item) {
            this.field.value = item;
            this.value = item.name;
        }
        if (event) {
            event.preventDefault();
        }
    };
    /**
     * @param {?} item
     * @return {?}
     */
    FunctionalGroupWidgetComponent.prototype.onItemSelect = function (item) {
        if (item) {
            this.field.value = item;
            this.value = item.name;
        }
    };
    return FunctionalGroupWidgetComponent;
}(WidgetComponent));
FunctionalGroupWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'functional-group-widget',
                template: "\n      <div class=\"adf-group-widget {{field.className}}\"\n           [class.is-dirty]=\"value\"\n           [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\" id=\"functional-group-div\" *ngIf=\"field.isVisible\">\n          <mat-form-field>\n              <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}}<span *ngIf=\"isRequired()\">*</span></label>\n              <input matInput\n                     class=\"adf-input\"\n                     type=\"text\"\n                     [id]=\"field.id\"\n                     [(ngModel)]=\"value\"\n                     (keyup)=\"onKeyUp($event)\"\n                     [disabled]=\"field.readOnly\"\n                     placeholder=\"{{field.placeholder}}\"\n                     [matAutocomplete]=\"auto\">\n              <mat-autocomplete #auto=\"matAutocomplete\" (optionSelected)=\"onItemSelect($event.option.value)\">\n                  <mat-option *ngFor=\"let item of groups\"\n                             [id]=\"field.id +'-'+item.id\"\n                             (click)=\"onItemClick(item, $event)\"  [value]=\"item\">\n                      <span>{{item.name}}</span>\n                  </mat-option>\n              </mat-autocomplete>\n\n          </mat-form-field>\n          <error-widget [error]=\"field.validationSummary\"></error-widget>\n          <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n      </div>\n    ",
                styles: ["\n      .adf-group-widget {\n        width: 100%; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
FunctionalGroupWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: core.ElementRef, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var HyperlinkWidgetComponent = /** @class */ (function (_super) {
    __extends(HyperlinkWidgetComponent, _super);
    /**
     * @param {?} formService
     */
    function HyperlinkWidgetComponent(formService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.linkUrl = WidgetComponent.DEFAULT_HYPERLINK_URL;
        _this.linkText = null;
        return _this;
    }
    /**
     * @return {?}
     */
    HyperlinkWidgetComponent.prototype.ngOnInit = function () {
        if (this.field) {
            this.linkUrl = this.getHyperlinkUrl(this.field);
            this.linkText = this.getHyperlinkText(this.field);
        }
    };
    return HyperlinkWidgetComponent;
}(WidgetComponent));
HyperlinkWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'hyperlink-widget',
                template: "\n      <div class=\"adf-hyperlink-widget {{field.className}}\">\n          <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}}<span *ngIf=\"isRequired()\">*</span></label>\n          <div>\n              <a [href]=\"linkUrl\" target=\"_blank\" rel=\"nofollow\">{{linkText}}</a>\n          </div>\n      </div>\n    ",
                styles: ["\n\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
HyperlinkWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var MultilineTextWidgetComponentComponent = /** @class */ (function (_super) {
    __extends(MultilineTextWidgetComponentComponent, _super);
    /**
     * @param {?} formService
     */
    function MultilineTextWidgetComponentComponent(formService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        return _this;
    }
    return MultilineTextWidgetComponentComponent;
}(WidgetComponent));
MultilineTextWidgetComponentComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'multiline-text-widget',
                template: "\n      <div class=\"adf-multiline-text-widget {{field.className}}\"\n           [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\">\n          <mat-form-field floatPlaceholder=\"never\">\n              <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}}<span *ngIf=\"isRequired()\">*</span></label>\n              <textarea matInput class=\"adf-input\"\n                        matTextareaAutosize\n                        type=\"text\"\n                        rows=\"3\"\n                        [id]=\"field.id\"\n                        [required]=\"isRequired()\"\n                        [(ngModel)]=\"field.value\"\n                        (ngModelChange)=\"checkVisibility(field)\"\n                        [disabled]=\"field.readOnly || readOnly\"\n                        placeholder=\"{{field.placeholder}}\">\n              </textarea>\n          </mat-form-field>\n          <div *ngIf=\"field.maxLength > 0\" class=\"adf-multiline-word-counter\">\n              <span>{{field?.value?.length || 0}}/{{field.maxLength}}</span>\n          </div>\n          <error-widget [error]=\"field.validationSummary\"></error-widget>\n          <error-widget class=\"adf-multiline-required-message\" *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n      </div>\n    ",
                styles: ["\n      .adf-multiline-text-widget {\n        width: 100%; }\n\n      .adf-multiline-word-counter {\n        float: right;\n        margin-top: -20px !important;\n        min-height: 24px;\n        min-width: 1px;\n        font-size: 12px;\n        line-height: 14px;\n        overflow: hidden;\n        -webkit-transition: all 0.3s cubic-bezier(0.55, 0, 0.55, 0.2);\n        transition: all 0.3s cubic-bezier(0.55, 0, 0.55, 0.2);\n        opacity: 1;\n        padding-top: 5px;\n        text-align: right;\n        padding-right: 2px;\n        padding-left: 0; }\n\n      .adf-multiline-required-message {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
MultilineTextWidgetComponentComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var NumberWidgetComponent = /** @class */ (function (_super) {
    __extends(NumberWidgetComponent, _super);
    /**
     * @param {?} formService
     */
    function NumberWidgetComponent(formService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        return _this;
    }
    return NumberWidgetComponent;
}(WidgetComponent));
NumberWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'number-widget',
                template: "\n      <div class=\"adf-textfield adf-number-widget {{field.className}}\"\n           [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\">\n          <mat-form-field>\n              <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}}<span *ngIf=\"isRequired()\">*</span></label>\n              <input matInput\n                     class=\"adf-input\"\n                     type=\"text\"\n                     pattern=\"-?[0-9]*(\\.[0-9]+)?\"\n                     [id]=\"field.id\"\n                     [required]=\"isRequired()\"\n                     [value]=\"field.value\"\n                     [(ngModel)]=\"field.value\"\n                     (ngModelChange)=\"checkVisibility(field)\"\n                     [disabled]=\"field.readOnly\"\n                     placeholder=\"{{field.placeholder}}\">\n          </mat-form-field>\n          <error-widget [error]=\"field.validationSummary\" ></error-widget>\n          <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n      </div>\n    ",
                styles: ["\n      .adf-number-widget {\n        width: 100%; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
NumberWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var PeopleProcessService = /** @class */ (function () {
    /**
     * @param {?} alfrescoJsApi
     * @param {?} logService
     */
    function PeopleProcessService(alfrescoJsApi, logService) {
        this.alfrescoJsApi = alfrescoJsApi;
        this.logService = logService;
    }
    /**
     * @param {?=} taskId
     * @param {?=} searchWord
     * @return {?}
     */
    PeopleProcessService.prototype.getWorkflowUsers = function (taskId, searchWord) {
        var _this = this;
        var /** @type {?} */ option = { excludeTaskId: taskId, filter: searchWord };
        return Observable.Observable.fromPromise(this.getWorkflowUserApi(option))
            .map(function (response) { /** @type {?} */ return (response.data) || []; })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} user
     * @return {?}
     */
    PeopleProcessService.prototype.getUserImage = function (user) {
        return this.getUserProfileImageApi(user.id);
    };
    /**
     * @param {?} taskId
     * @param {?} idToInvolve
     * @return {?}
     */
    PeopleProcessService.prototype.involveUserWithTask = function (taskId, idToInvolve) {
        var _this = this;
        var /** @type {?} */ node = { userId: idToInvolve };
        return Observable.Observable.fromPromise(this.involveUserToTaskApi(taskId, node))
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} taskId
     * @param {?} idToRemove
     * @return {?}
     */
    PeopleProcessService.prototype.removeInvolvedUser = function (taskId, idToRemove) {
        var _this = this;
        var /** @type {?} */ node = { userId: idToRemove };
        return Observable.Observable.fromPromise(this.removeInvolvedUserFromTaskApi(taskId, node))
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} options
     * @return {?}
     */
    PeopleProcessService.prototype.getWorkflowUserApi = function (options) {
        return this.alfrescoJsApi.getInstance().activiti.usersWorkflowApi.getUsers(options);
    };
    /**
     * @param {?} taskId
     * @param {?} node
     * @return {?}
     */
    PeopleProcessService.prototype.involveUserToTaskApi = function (taskId, node) {
        return this.alfrescoJsApi.getInstance().activiti.taskActionsApi.involveUser(taskId, node);
    };
    /**
     * @param {?} taskId
     * @param {?} node
     * @return {?}
     */
    PeopleProcessService.prototype.removeInvolvedUserFromTaskApi = function (taskId, node) {
        return this.alfrescoJsApi.getInstance().activiti.taskActionsApi.removeInvolvedUser(taskId, node);
    };
    /**
     * @param {?} userId
     * @return {?}
     */
    PeopleProcessService.prototype.getUserProfileImageApi = function (userId) {
        return this.alfrescoJsApi.getInstance().activiti.userApi.getUserProfilePictureUrl(userId);
    };
    /**
     * Throw the error
     * @param {?} error
     * @return {?}
     */
    PeopleProcessService.prototype.handleError = function (error) {
        this.logService.error(error);
        return Observable.Observable.throw(error || 'Server error');
    };
    return PeopleProcessService;
}());
PeopleProcessService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
PeopleProcessService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var PeopleWidgetComponent = /** @class */ (function (_super) {
    __extends(PeopleWidgetComponent, _super);
    /**
     * @param {?} formService
     * @param {?} peopleProcessService
     */
    function PeopleWidgetComponent(formService, peopleProcessService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.peopleProcessService = peopleProcessService;
        _this.minTermLength = 1;
        _this.users = [];
        return _this;
    }
    /**
     * @return {?}
     */
    PeopleWidgetComponent.prototype.ngOnInit = function () {
        if (this.field) {
            var /** @type {?} */ params = this.field.params;
            if (params && params.restrictWithGroup) {
                var /** @type {?} */ restrictWithGroup = (params.restrictWithGroup);
                this.groupId = restrictWithGroup.id;
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    PeopleWidgetComponent.prototype.onKeyUp = function (event) {
        var /** @type {?} */ value = ((this.input.nativeElement)).value;
        if (value && value.length >= this.minTermLength && this.oldValue !== value) {
            if (event.keyCode !== keycodes.ESCAPE && event.keyCode !== keycodes.ENTER) {
                if (value.length >= this.minTermLength) {
                    this.oldValue = value;
                    this.searchUsers(value);
                }
            }
        }
        else {
            this.validateValue(value);
        }
    };
    /**
     * @param {?} userName
     * @return {?}
     */
    PeopleWidgetComponent.prototype.searchUsers = function (userName) {
        var _this = this;
        this.formService.getWorkflowUsers(userName, this.groupId)
            .subscribe(function (result) {
            _this.users = result || [];
            _this.validateValue(userName);
        });
    };
    /**
     * @param {?} userName
     * @return {?}
     */
    PeopleWidgetComponent.prototype.validateValue = function (userName) {
        if (this.isValidUser(userName)) {
            this.field.validationSummary.message = '';
        }
        else if (!userName) {
            this.field.value = null;
            this.users = [];
        }
        else {
            this.field.validationSummary.message = 'FORM.FIELD.VALIDATOR.INVALID_VALUE';
            this.field.markAsInvalid();
            this.field.form.markAsInvalid();
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    PeopleWidgetComponent.prototype.isValidUser = function (value) {
        var _this = this;
        var /** @type {?} */ isValid = false;
        if (value) {
            var /** @type {?} */ resultUser = this.users.find(function (user) { return _this.getDisplayName(user).toLocaleLowerCase() === value.toLocaleLowerCase(); });
            if (resultUser) {
                isValid = true;
            }
        }
        return isValid;
    };
    /**
     * @param {?} model
     * @return {?}
     */
    PeopleWidgetComponent.prototype.getDisplayName = function (model) {
        if (model) {
            var /** @type {?} */ displayName = (model.firstName || '') + " " + (model.lastName || '');
            return displayName.trim();
        }
        return '';
    };
    /**
     * @param {?} item
     * @return {?}
     */
    PeopleWidgetComponent.prototype.onItemSelect = function (item) {
        if (item) {
            this.field.value = item;
        }
    };
    return PeopleWidgetComponent;
}(WidgetComponent));
PeopleWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'people-widget',
                template: "\n      <div class=\"adf-people-widget {{field.className}}\"\n           [class.is-dirty]=\"value\"\n           [class.adf-invalid]=\"!field.isValid\"\n           [class.adf-readonly]=\"field.readOnly\"\n           id=\"people-widget-content\"\n           *ngIf=\"field.isVisible\">\n          <mat-form-field>\n              <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}}<span *ngIf=\"isRequired()\">*</span></label>\n              <input #inputValue\n                     matInput\n                     class=\"adf-input\"\n                     type=\"text\"\n                     [id]=\"field.id\"\n                     [value]=\"getDisplayName(field.value)\"\n                     (keyup)=\"onKeyUp($event)\"\n                     [disabled]=\"field.readOnly\"\n                     placeholder=\"{{field.placeholder}}\"\n                     [matAutocomplete]=\"auto\">\n              <mat-autocomplete #auto=\"matAutocomplete\" (optionSelected)=\"onItemSelect($event.option.value)\"  [displayWith]=\"getDisplayName\">\n                  <mat-option *ngFor=\"let user of users; let i = index\" [value]=\"user\">\n                      <div class=\"adf-people-widget-row\" id=\"adf-people-widget-user-{{i}}\">\n                          <div [outerHTML]=\"user | usernameInitials:'adf-people-widget-pic'\"></div>\n                          <div *ngIf=\"user.pictureId\" class=\"adf-people-widget-image-row\">\n                              <img id=\"adf-people-widget-pic-{{i}}\" class=\"adf-people-widget-image\"\n                                   [src]=\"peopleProcessService.getUserImage(user)\"/>\n                          </div>\n                          <span class=\"adf-people-label-name\">{{getDisplayName(user)}}</span>\n                      </div>\n                  </mat-option>\n              </mat-autocomplete>\n          </mat-form-field>\n          <error-widget [error]=\"field.validationSummary\"></error-widget>\n          <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n      </div>\n    ",
                styles: ["\n\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
PeopleWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: PeopleProcessService, },
]; };
PeopleWidgetComponent.propDecorators = {
    'input': [{ type: core.ViewChild, args: ['inputValue',] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var RadioButtonsWidgetComponent = /** @class */ (function (_super) {
    __extends(RadioButtonsWidgetComponent, _super);
    /**
     * @param {?} formService
     * @param {?} visibilityService
     * @param {?} logService
     */
    function RadioButtonsWidgetComponent(formService, visibilityService, logService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.visibilityService = visibilityService;
        _this.logService = logService;
        return _this;
    }
    /**
     * @return {?}
     */
    RadioButtonsWidgetComponent.prototype.ngOnInit = function () {
        if (this.field && this.field.restUrl) {
            if (this.field.form.taskId) {
                this.getOptionsByTaskId();
            }
            else {
                this.getOptionsByProcessDefinitionId();
            }
        }
    };
    /**
     * @return {?}
     */
    RadioButtonsWidgetComponent.prototype.getOptionsByTaskId = function () {
        var _this = this;
        this.formService
            .getRestFieldValues(this.field.form.taskId, this.field.id)
            .subscribe(function (result) {
            _this.field.options = result || [];
            _this.field.updateForm();
        }, function (err) { return _this.handleError(err); });
    };
    /**
     * @return {?}
     */
    RadioButtonsWidgetComponent.prototype.getOptionsByProcessDefinitionId = function () {
        var _this = this;
        this.formService
            .getRestFieldValuesByProcessId(this.field.form.processDefinitionId, this.field.id)
            .subscribe(function (result) {
            _this.field.options = result || [];
            _this.field.updateForm();
        }, function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} optionSelected
     * @return {?}
     */
    RadioButtonsWidgetComponent.prototype.onOptionClick = function (optionSelected) {
        this.field.value = optionSelected;
        this.checkVisibility();
    };
    /**
     * @return {?}
     */
    RadioButtonsWidgetComponent.prototype.checkVisibility = function () {
        this.visibilityService.refreshVisibility(this.field.form);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    RadioButtonsWidgetComponent.prototype.handleError = function (error) {
        this.logService.error(error);
    };
    return RadioButtonsWidgetComponent;
}(WidgetComponent));
RadioButtonsWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'radio-buttons-widget',
                template: "\n      <div class=\"adf-radio-buttons-widget {{field.className}}\"\n           [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\" [id]=\"field.id\" *ngIf=\"field?.isVisible\">\n          <div class=\"adf-radio-button-container\">\n              <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}}<span *ngIf=\"isRequired()\">*</span></label>\n              <mat-radio-group class=\"adf-radio-group\" [(ngModel)]=\"field.value\">\n                  <mat-radio-button\n                      [id]=\"field.id + '-' + opt.id\"\n                      [name]=\"field.id\"\n                      [value]=\"opt.id\"\n                      [disabled]=\"field.readOnly\"\n                      [checked]=\"field.value === opt.id\"\n                      (change)=\"onOptionClick(opt.id)\"\n                      color=\"primary\"\n                      class=\"adf-radio-button\" *ngFor=\"let opt of field.options\" >\n                      {{opt.name}}\n                  </mat-radio-button>\n              </mat-radio-group>\n          </div>\n          <error-widget [error]=\"field.validationSummary\" ></error-widget>\n          <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n      </div>\n    ",
                styles: ["\n      .adf-radio-button-container {\n        margin-bottom: 15px; }\n\n      .adf-radio-group {\n        display: -webkit-inline-box;\n        display: -ms-inline-flexbox;\n        display: inline-flex;\n        -webkit-box-orient: vertical;\n        -webkit-box-direction: normal;\n            -ms-flex-direction: column;\n                flex-direction: column; }\n\n      .adf-radio-button {\n        margin: 5px; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
RadioButtonsWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: WidgetVisibilityService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable: component-selector, no-use-before-declare  */
var CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR = {
    provide: forms.NG_VALUE_ACCESSOR,
    useExisting: core.forwardRef(function () { return InputMaskDirective; }),
    multi: true
};
var InputMaskDirective = /** @class */ (function () {
    /**
     * @param {?} el
     * @param {?} render
     */
    function InputMaskDirective(el, render) {
        this.el = el;
        this.render = render;
        this.translationMask = {
            '0': { pattern: /\d/ },
            '9': { pattern: /\d/, optional: true },
            '#': { pattern: /\d/, recursive: true },
            'A': { pattern: /[a-zA-Z0-9]/ },
            'S': { pattern: /[a-zA-Z]/ }
        };
        this.byPassKeys = [9, 16, 17, 18, 36, 37, 38, 39, 40, 91];
        this.invalidCharacters = [];
        this._onChange = function (_) {
        };
        this._onTouched = function () {
        };
    }
    /**
     * @param {?} event
     * @return {?}
     */
    InputMaskDirective.prototype.onTextInput = function (event) {
        if (this.inputMask && this.inputMask.mask) {
            this.maskValue(this.el.nativeElement.value, this.el.nativeElement.selectionStart, this.inputMask.mask, this.inputMask.isReversed, event.keyCode);
        }
        else {
            this._onChange(this.el.nativeElement.value);
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    InputMaskDirective.prototype.ngOnChanges = function (changes) {
        if (changes['inputMask'] && changes['inputMask'].currentValue['mask']) {
            this.inputMask = changes['inputMask'].currentValue;
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    InputMaskDirective.prototype.writeValue = function (value) {
        this.el.nativeElement.value = value;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    InputMaskDirective.prototype.registerOnChange = function (fn) {
        this._onChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    InputMaskDirective.prototype.registerOnTouched = function (fn) {
        this._onTouched = fn;
    };
    /**
     * @param {?} actualValue
     * @param {?} startCaret
     * @param {?} maskToApply
     * @param {?} isMaskReversed
     * @param {?} keyCode
     * @return {?}
     */
    InputMaskDirective.prototype.maskValue = function (actualValue, startCaret, maskToApply, isMaskReversed, keyCode) {
        if (this.byPassKeys.indexOf(keyCode) === -1) {
            var /** @type {?} */ value = this.getMasked(false, actualValue, maskToApply, isMaskReversed);
            var /** @type {?} */ calculatedCaret = this.calculateCaretPosition(startCaret, actualValue, keyCode);
            this.render.setElementAttribute(this.el.nativeElement, 'value', value);
            this.el.nativeElement.value = value;
            this.setValue(value);
            this._onChange(value);
            this.setCaretPosition(calculatedCaret);
        }
    };
    /**
     * @param {?} caretPosition
     * @return {?}
     */
    InputMaskDirective.prototype.setCaretPosition = function (caretPosition) {
        this.el.nativeElement.moveStart = caretPosition;
        this.el.nativeElement.moveEnd = caretPosition;
    };
    /**
     * @param {?} caretPosition
     * @param {?} newValue
     * @param {?} keyCode
     * @return {?}
     */
    InputMaskDirective.prototype.calculateCaretPosition = function (caretPosition, newValue, keyCode) {
        var /** @type {?} */ newValueLength = newValue.length;
        var /** @type {?} */ oldValue = this.getValue() || '';
        var /** @type {?} */ oldValueLength = oldValue.length;
        if (keyCode === 8 && oldValue !== newValue) {
            caretPosition = caretPosition - (newValue.slice(0, caretPosition).length - oldValue.slice(0, caretPosition).length);
        }
        else if (oldValue !== newValue) {
            if (caretPosition >= oldValueLength) {
                caretPosition = newValueLength;
            }
            else {
                caretPosition = caretPosition + (newValue.slice(0, caretPosition).length - oldValue.slice(0, caretPosition).length);
            }
        }
        return caretPosition;
    };
    /**
     * @param {?} skipMaskChars
     * @param {?} val
     * @param {?} mask
     * @param {?=} isReversed
     * @return {?}
     */
    InputMaskDirective.prototype.getMasked = function (skipMaskChars, val, mask, isReversed) {
        if (isReversed === void 0) { isReversed = false; }
        var /** @type {?} */ buf = [], /** @type {?} */ value = val, /** @type {?} */ maskIndex = 0, /** @type {?} */ maskLen = mask.length, /** @type {?} */ valueIndex = 0, /** @type {?} */ valueLength = value.length, /** @type {?} */ offset = 1, /** @type {?} */ addMethod = 'push', /** @type {?} */ resetPos = -1, /** @type {?} */ lastMaskChar, /** @type {?} */ lastUntranslatedMaskChar, /** @type {?} */ check;
        if (isReversed) {
            addMethod = 'unshift';
            offset = -1;
            lastMaskChar = 0;
            maskIndex = maskLen - 1;
            valueIndex = valueLength - 1;
        }
        else {
            lastMaskChar = maskLen - 1;
        }
        check = this.isToCheck(isReversed, maskIndex, maskLen, valueIndex, valueLength);
        while (check) {
            var /** @type {?} */ maskDigit = mask.charAt(maskIndex), /** @type {?} */ valDigit = value.charAt(valueIndex), /** @type {?} */ translation = this.translationMask[maskDigit];
            if (translation) {
                if (valDigit.match(translation.pattern)) {
                    buf[addMethod](valDigit);
                    if (translation.recursive) {
                        if (resetPos === -1) {
                            resetPos = maskIndex;
                        }
                        else if (maskIndex === lastMaskChar) {
                            maskIndex = resetPos - offset;
                        }
                        if (lastMaskChar === resetPos) {
                            maskIndex -= offset;
                        }
                    }
                    maskIndex += offset;
                }
                else if (valDigit === lastUntranslatedMaskChar) {
                    lastUntranslatedMaskChar = undefined;
                }
                else if (translation.optional) {
                    maskIndex += offset;
                    valueIndex -= offset;
                }
                else {
                    this.invalidCharacters.push({
                        index: valueIndex,
                        digit: valDigit,
                        translated: translation.pattern
                    });
                }
                valueIndex += offset;
            }
            else {
                if (!skipMaskChars) {
                    buf[addMethod](maskDigit);
                }
                if (valDigit === maskDigit) {
                    valueIndex += offset;
                }
                else {
                    lastUntranslatedMaskChar = maskDigit;
                }
                maskIndex += offset;
            }
            check = this.isToCheck(isReversed, maskIndex, maskLen, valueIndex, valueLength);
        }
        var /** @type {?} */ lastMaskCharDigit = mask.charAt(lastMaskChar);
        if (maskLen === valueLength + 1 && !this.translationMask[lastMaskCharDigit]) {
            buf.push(lastMaskCharDigit);
        }
        return buf.join('');
    };
    /**
     * @param {?} isReversed
     * @param {?} maskIndex
     * @param {?} maskLen
     * @param {?} valueIndex
     * @param {?} valueLength
     * @return {?}
     */
    InputMaskDirective.prototype.isToCheck = function (isReversed, maskIndex, maskLen, valueIndex, valueLength) {
        var /** @type {?} */ check = false;
        if (isReversed) {
            check = (maskIndex > -1) && (valueIndex > -1);
        }
        else {
            check = (maskIndex < maskLen) && (valueIndex < valueLength);
        }
        return check;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    InputMaskDirective.prototype.setValue = function (value) {
        this.value = value;
    };
    /**
     * @return {?}
     */
    InputMaskDirective.prototype.getValue = function () {
        return this.value;
    };
    return InputMaskDirective;
}());
InputMaskDirective.decorators = [
    { type: core.Directive, args: [{
                selector: '[textMask]',
                providers: [CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR]
            },] },
];
/**
 * @nocollapse
 */
InputMaskDirective.ctorParameters = function () { return [
    { type: core.ElementRef, },
    { type: core.Renderer, },
]; };
InputMaskDirective.propDecorators = {
    'inputMask': [{ type: core.Input, args: ['textMask',] },],
    'onTextInput': [{ type: core.HostListener, args: ['input', ['$event'],] }, { type: core.HostListener, args: ['keyup', ['$event'],] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var TextWidgetComponent = /** @class */ (function (_super) {
    __extends(TextWidgetComponent, _super);
    /**
     * @param {?} formService
     */
    function TextWidgetComponent(formService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        return _this;
    }
    /**
     * @return {?}
     */
    TextWidgetComponent.prototype.ngOnInit = function () {
        if (this.field.params && this.field.params['inputMask']) {
            this.mask = this.field.params['inputMask'];
            this.isMaskReversed = this.field.params['inputMaskReversed'] ? this.field.params['inputMaskReversed'] : false;
        }
    };
    return TextWidgetComponent;
}(WidgetComponent));
TextWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'text-widget',
                template: "\n      <div class=\"adf-textfield adf-text-widget {{field.className}}\"\n           [class.adf-invalid]=\"!field.isValid\" [class.adf-readonly]=\"field.readOnly\">\n          <mat-form-field>\n              <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}}<span *ngIf=\"isRequired()\">*</span></label>\n              <input matInput\n                     class=\"adf-input\"\n                     type=\"text\"\n                     [id]=\"field.id\"\n                     [required]=\"isRequired()\"\n                     [value]=\"field.value\"\n                     [(ngModel)]=\"field.value\"\n                     (ngModelChange)=\"onFieldChanged(field)\"\n                     [disabled]=\"field.readOnly || readOnly\"\n                     [textMask]=\"{mask: mask, isReversed: isMaskReversed}\"\n                     placeholder=\"{{field.placeholder}}\">\n          </mat-form-field>\n          <error-widget [error]=\"field.validationSummary\"></error-widget>\n          <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n      </div>\n    ",
                styles: ["\n      .adf-text-widget {\n        width: 100%; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
TextWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var TypeaheadWidgetComponent = /** @class */ (function (_super) {
    __extends(TypeaheadWidgetComponent, _super);
    /**
     * @param {?} formService
     * @param {?} visibilityService
     * @param {?} logService
     */
    function TypeaheadWidgetComponent(formService, visibilityService, logService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.visibilityService = visibilityService;
        _this.logService = logService;
        _this.minTermLength = 1;
        _this.options = [];
        return _this;
    }
    /**
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.ngOnInit = function () {
        if (this.field.form.taskId) {
            this.getValuesByTaskId();
        }
        else if (this.field.form.processDefinitionId) {
            this.getValuesByProcessDefinitionId();
        }
        if (this.isReadOnlyType()) {
            this.value = this.field.value;
        }
    };
    /**
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.getValuesByTaskId = function () {
        var _this = this;
        this.formService
            .getRestFieldValues(this.field.form.taskId, this.field.id)
            .subscribe(function (result) {
            var /** @type {?} */ options = result || [];
            _this.field.options = options;
            var /** @type {?} */ fieldValue = _this.field.value;
            if (fieldValue) {
                var /** @type {?} */ toSelect = options.find(function (item) { return item.id === fieldValue; });
                if (toSelect) {
                    _this.value = toSelect.name;
                }
            }
            _this.field.updateForm();
            _this.visibilityService.refreshEntityVisibility(_this.field);
        }, function (err) { return _this.handleError(err); });
    };
    /**
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.getValuesByProcessDefinitionId = function () {
        var _this = this;
        this.formService
            .getRestFieldValuesByProcessId(this.field.form.processDefinitionId, this.field.id)
            .subscribe(function (result) {
            var /** @type {?} */ options = result || [];
            _this.field.options = options;
            var /** @type {?} */ fieldValue = _this.field.value;
            if (fieldValue) {
                var /** @type {?} */ toSelect = options.find(function (item) { return item.id === fieldValue; });
                if (toSelect) {
                    _this.value = toSelect.name;
                }
            }
            _this.field.updateForm();
            _this.visibilityService.refreshEntityVisibility(_this.field);
        }, function (err) { return _this.handleError(err); });
    };
    /**
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.getOptions = function () {
        var /** @type {?} */ val = this.value.trim().toLocaleLowerCase();
        return this.field.options.filter(function (item) {
            var /** @type {?} */ name = item.name.toLocaleLowerCase();
            return name.indexOf(val) > -1;
        });
    };
    /**
     * @param {?} optionName
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.isValidOptionName = function (optionName) {
        var /** @type {?} */ option = this.field.options.find(function (item) { return item.name && item.name.toLocaleLowerCase() === optionName.toLocaleLowerCase(); });
        return option ? true : false;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.onKeyUp = function (event) {
        if (this.value && this.value.trim().length >= this.minTermLength && this.oldValue !== this.value) {
            if (event.keyCode !== keycodes.ESCAPE && event.keyCode !== keycodes.ENTER) {
                if (this.value.length >= this.minTermLength) {
                    this.options = this.getOptions();
                    this.oldValue = this.value;
                    if (this.isValidOptionName(this.value)) {
                        this.field.value = this.options[0].id;
                    }
                }
            }
        }
        if (this.isValueDefined() && this.value.trim().length === 0) {
            this.oldValue = this.value;
            this.options = [];
        }
    };
    /**
     * @param {?} item
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.onItemSelect = function (item) {
        if (item) {
            this.field.value = item.id;
            this.value = item.name;
            this.checkVisibility();
        }
    };
    /**
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.validate = function () {
        this.field.value = this.value;
    };
    /**
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.isValueDefined = function () {
        return this.value !== null && this.value !== undefined;
    };
    /**
     * @param {?} error
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.handleError = function (error) {
        this.logService.error(error);
    };
    /**
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.checkVisibility = function () {
        this.visibilityService.refreshVisibility(this.field.form);
    };
    /**
     * @return {?}
     */
    TypeaheadWidgetComponent.prototype.isReadOnlyType = function () {
        return this.field.type === 'readonly' ? true : false;
    };
    return TypeaheadWidgetComponent;
}(WidgetComponent));
TypeaheadWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'typeahead-widget',
                template: "\n      <div class=\"adf-typeahead-widget-container\">\n          <div class=\"adf-typeahead-widget {{field.className}}\"\n              [class.is-dirty]=\"value\"\n              [class.adf-invalid]=\"!field.isValid\"\n              [class.adf-readonly]=\"field.readOnly\"\n              id=\"typehead-div\" *ngIf=\"field.isVisible\">\n              <mat-form-field>\n                  <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}}</label>\n                  <input matInput class=\"adf-input\"\n                         type=\"text\"\n                         [id]=\"field.id\"\n                         [(ngModel)]=\"value\"\n                         (ngModelChange)=\"validate()\"\n                         (keyup)=\"onKeyUp($event)\"\n                         [disabled]=\"field.readOnly\"\n                         placeholder=\"{{field.placeholder}}\"\n                         [matAutocomplete]=\"auto\">\n                  <mat-autocomplete #auto=\"matAutocomplete\" (optionSelected)=\"onItemSelect($event.option.value)\">\n                      <mat-option *ngFor=\"let item of options\" [value]=\"item\">\n                          <span [id]=\"field.name+'_option_'+item.id\">{{item.name}}</span>\n                      </mat-option>\n                  </mat-autocomplete>\n              </mat-form-field>\n\n              <error-widget [error]=\"field.validationSummary\"></error-widget>\n              <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n          </div>\n      </div>\n    ",
                styles: ["\n      .adf-typeahead-widget-container {\n        position: relative;\n        display: block; }\n\n      .adf-typeahead-widget {\n        width: 100%; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
TypeaheadWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: WidgetVisibilityService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ProcessContentService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} logService
     */
    function ProcessContentService(apiService, logService) {
        this.apiService = apiService;
        this.logService = logService;
    }
    Object.defineProperty(ProcessContentService.prototype, "contentApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().activiti.contentApi;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} file
     * @return {?}
     */
    ProcessContentService.prototype.createTemporaryRawRelatedContent = function (file) {
        var _this = this;
        return Observable.Observable.fromPromise(this.contentApi.createTemporaryRawRelatedContent(file)).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} contentId
     * @return {?}
     */
    ProcessContentService.prototype.getFileContent = function (contentId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.contentApi.getContent(contentId)).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} contentId
     * @return {?}
     */
    ProcessContentService.prototype.getFileRawContent = function (contentId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.contentApi.getRawContent(contentId)).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} contentId
     * @return {?}
     */
    ProcessContentService.prototype.getContentPreview = function (contentId) {
        var _this = this;
        return new Observable.Observable(function (observer) {
            _this.contentApi.getContentPreview(contentId).then(function (result) {
                observer.next(result);
                observer.complete();
            }, function () {
                _this.contentApi.getRawContent(contentId).then(function (data) {
                    observer.next(data);
                    observer.complete();
                }, function (err) {
                    observer.error(err);
                    observer.complete();
                });
            });
        });
    };
    /**
     * @param {?} contentId
     * @return {?}
     */
    ProcessContentService.prototype.getFileRawContentUrl = function (contentId) {
        return this.contentApi.getRawContentUrl(contentId);
    };
    /**
     * @param {?} contentId
     * @return {?}
     */
    ProcessContentService.prototype.getContentThumbnail = function (contentId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.contentApi.getContentThumbnail(contentId)).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} taskId
     * @return {?}
     */
    ProcessContentService.prototype.getTaskRelatedContent = function (taskId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.contentApi.getRelatedContentForTask(taskId))
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} processId
     * @return {?}
     */
    ProcessContentService.prototype.getProcessRelatedContent = function (processId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.contentApi.getRelatedContentForProcessInstance(processId))
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} contentId
     * @return {?}
     */
    ProcessContentService.prototype.deleteRelatedContent = function (contentId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.contentApi.deleteContent(contentId))
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} processInstanceId
     * @param {?} content
     * @param {?=} opts
     * @return {?}
     */
    ProcessContentService.prototype.createProcessRelatedContent = function (processInstanceId, content, opts) {
        var _this = this;
        return Observable.Observable.fromPromise(this.contentApi.createRelatedContentOnProcessInstance(processInstanceId, content, opts))
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} taskId
     * @param {?} file
     * @param {?=} opts
     * @return {?}
     */
    ProcessContentService.prototype.createTaskRelatedContent = function (taskId, file, opts) {
        var _this = this;
        return Observable.Observable.fromPromise(this.contentApi.createRelatedContentOnTask(taskId, file, opts))
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} res
     * @return {?}
     */
    ProcessContentService.prototype.toJson = function (res) {
        if (res) {
            return res || {};
        }
        return {};
    };
    /**
     * @param {?} res
     * @return {?}
     */
    ProcessContentService.prototype.toJsonArray = function (res) {
        if (res) {
            return res.data || [];
        }
        return [];
    };
    /**
     * @param {?} error
     * @return {?}
     */
    ProcessContentService.prototype.handleError = function (error) {
        var /** @type {?} */ errMsg = ProcessContentService.UNKNOWN_ERROR_MESSAGE;
        if (error) {
            errMsg = (error.message) ? error.message :
                error.status ? error.status + " - " + error.statusText : ProcessContentService.GENERIC_ERROR_MESSAGE;
        }
        this.logService.error(errMsg);
        return Observable.Observable.throw(errMsg);
    };
    return ProcessContentService;
}());
ProcessContentService.UNKNOWN_ERROR_MESSAGE = 'Unknown error';
ProcessContentService.GENERIC_ERROR_MESSAGE = 'Server error';
ProcessContentService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
ProcessContentService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:component-selector  */
var UploadWidgetComponent = /** @class */ (function (_super) {
    __extends(UploadWidgetComponent, _super);
    /**
     * @param {?} formService
     * @param {?} logService
     * @param {?} thumbnailService
     * @param {?} processContentService
     */
    function UploadWidgetComponent(formService, logService, thumbnailService, processContentService) {
        var _this = _super.call(this, formService) || this;
        _this.formService = formService;
        _this.logService = logService;
        _this.thumbnailService = thumbnailService;
        _this.processContentService = processContentService;
        _this.multipleOption = '';
        return _this;
    }
    /**
     * @return {?}
     */
    UploadWidgetComponent.prototype.ngOnInit = function () {
        if (this.field &&
            this.field.value &&
            this.field.value.length > 0) {
            this.hasFile = true;
        }
        this.getMultipleFileParam();
    };
    /**
     * @param {?} file
     * @return {?}
     */
    UploadWidgetComponent.prototype.removeFile = function (file) {
        if (this.field) {
            this.removeElementFromList(file);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    UploadWidgetComponent.prototype.onFileChanged = function (event) {
        var _this = this;
        var /** @type {?} */ files = event.target.files;
        var /** @type {?} */ filesSaved = [];
        if (this.field.json.value) {
            filesSaved = this.field.json.value.slice();
        }
        if (files && files.length > 0) {
            Observable.Observable.from(files).mergeMap(function (file) { return _this.uploadRawContent(file); }).subscribe(function (res) {
                filesSaved.push(res);
            }, function (error) {
                _this.logService.error('Error uploading file. See console output for more details.');
            }, function () {
                _this.field.value = filesSaved;
                _this.field.json.value = filesSaved;
            });
            this.hasFile = true;
        }
    };
    /**
     * @param {?} file
     * @return {?}
     */
    UploadWidgetComponent.prototype.uploadRawContent = function (file) {
        var _this = this;
        return this.processContentService.createTemporaryRawRelatedContent(file)
            .map(function (response) {
            _this.logService.info(response);
            return response;
        });
    };
    /**
     * @return {?}
     */
    UploadWidgetComponent.prototype.getMultipleFileParam = function () {
        if (this.field &&
            this.field.params &&
            this.field.params.multiple) {
            this.multipleOption = this.field.params.multiple ? 'multiple' : '';
        }
    };
    /**
     * @param {?} file
     * @return {?}
     */
    UploadWidgetComponent.prototype.removeElementFromList = function (file) {
        var /** @type {?} */ index = this.field.value.indexOf(file);
        if (index !== -1) {
            this.field.value.splice(index, 1);
            this.field.json.value = this.field.value;
            this.field.updateForm();
        }
        this.hasFile = this.field.value.length > 0;
        this.resetFormValueWithNoFiles();
    };
    /**
     * @return {?}
     */
    UploadWidgetComponent.prototype.resetFormValueWithNoFiles = function () {
        if (this.field.value.length === 0) {
            this.field.value = [];
            this.field.json.value = [];
        }
    };
    /**
     * @param {?} mimeType
     * @return {?}
     */
    UploadWidgetComponent.prototype.getIcon = function (mimeType) {
        return this.thumbnailService.getMimeTypeIcon(mimeType);
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    UploadWidgetComponent.prototype.fileClicked = function (obj) {
        var _this = this;
        var /** @type {?} */ file = new ContentLinkModel(obj);
        var /** @type {?} */ fetch = this.processContentService.getContentPreview(file.id);
        if (file.isTypeImage() || file.isTypePdf()) {
            fetch = this.processContentService.getFileRawContent(file.id);
        }
        fetch.subscribe(function (blob) {
            file.contentBlob = blob;
            _this.formService.formContentClicked.next(file);
        }, function (error) {
            _this.logService.error('Unable to send event for file ' + file.name);
        });
    };
    return UploadWidgetComponent;
}(WidgetComponent));
UploadWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'upload-widget',
                template: "\n      <div class=\"adf-upload-widget {{field.className}}\"\n           [class.adf-invalid]=\"!field.isValid\"\n           [class.adf-readonly]=\"field.readOnly\">\n          <label class=\"adf-label\" [attr.for]=\"field.id\">{{field.name}}<span *ngIf=\"isRequired()\">*</span></label>\n          <div class=\"adf-upload-widget-container\">\n              <div>\n                  <mat-list *ngIf=\"hasFile\">\n                      <mat-list-item class=\"adf-upload-files-row\" *ngFor=\"let file of field.value\">\n                          <img mat-list-icon class=\"adf-upload-widget__icon\"\n                               [id]=\"'file-'+file.id+'-icon'\"\n                               [src]=\"getIcon(file.mimeType)\"\n                               [alt]=\"mimeTypeIcon\"\n                               (click)=\"fileClicked(file)\"\n                               (keyup.enter)=\"fileClicked(file)\"\n                               role=\"button\"\n                               tabindex=\"0\"/>\n                          <span matLine id=\"{{'file-'+file.id}}\" (click)=\"fileClicked(file)\" (keyup.enter)=\"fileClicked(file)\"\n                                role=\"button\" tabindex=\"0\" class=\"adf-file\">{{file.name}}</span>\n                          <button *ngIf=\"!field.readOnly\" mat-icon-button [id]=\"'file-'+file.id+'-remove'\"\n                                  (click)=\"removeFile(file);\" (keyup.enter)=\"removeFile(file);\">\n                              <mat-icon class=\"mat-24\">highlight_off</mat-icon>\n                          </button>\n                      </mat-list-item>\n                  </mat-list>\n              </div>\n\n              <div class=\"button-row\" *ngIf=\"(!hasFile || multipleOption) && !field.readOnly\">\n                  <a mat-raised-button color=\"primary\">\n                      {{ 'FORM.FIELD.UPLOAD' | translate }}<mat-icon>file_upload</mat-icon>\n                      <input #uploadFiles\n                             [multiple]=\"multipleOption\"\n                             type=\"file\"\n                             [id]=\"field.id\"\n                             (change)=\"onFileChanged($event)\"/>\n                  </a>\n              </div>\n          </div>\n          <error-widget [error]=\"field.validationSummary\"></error-widget>\n          <error-widget *ngIf=\"isInvalidFieldRequired()\" required=\"{{ 'FORM.FIELD.REQUIRED' | translate }}\"></error-widget>\n      </div>\n    ",
                styles: ["\n      .adf-upload-widget-container {\n        margin-bottom: 15px; }\n        .adf-upload-widget-container input {\n          cursor: pointer;\n          height: 100%;\n          right: 0;\n          opacity: 0;\n          position: absolute;\n          top: 0;\n          width: 300px;\n          z-index: 4; }\n\n      .adf-upload-widget {\n        width: 100%;\n        word-break: break-all;\n        padding: 0.4375em 0;\n        border-top: 0.84375em solid transparent; }\n\n      .adf-upload-widget__icon {\n        padding: 6px;\n        float: left;\n        cursor: pointer; }\n\n      .adf-upload-widget__reset {\n        margin-top: -2px; }\n\n      .adf-upload-files-row .mat-line {\n        margin-bottom: 0px; }\n    "],
                host: baseHost,
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
UploadWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: LogService, },
    { type: ThumbnailService, },
    { type: ProcessContentService, },
]; };
UploadWidgetComponent.propDecorators = {
    'fileInput': [{ type: core.ViewChild, args: ['uploadFiles',] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var WIDGET_DIRECTIVES = [
    UnknownWidgetComponent,
    TabsWidgetComponent,
    ContainerWidgetComponent,
    TextWidgetComponent,
    NumberWidgetComponent,
    CheckboxWidgetComponent,
    MultilineTextWidgetComponentComponent,
    DropdownWidgetComponent,
    HyperlinkWidgetComponent,
    RadioButtonsWidgetComponent,
    DisplayTextWidgetComponentComponent,
    UploadWidgetComponent,
    AttachWidgetComponent,
    TypeaheadWidgetComponent,
    FunctionalGroupWidgetComponent,
    PeopleWidgetComponent,
    DateWidgetComponent,
    AmountWidgetComponent,
    DynamicTableWidgetComponent,
    DateEditorComponent,
    DropdownEditorComponent,
    BooleanEditorComponent,
    TextEditorComponent,
    RowEditorComponent,
    ErrorWidgetComponent,
    DocumentWidgetComponent
];
var MASK_DIRECTIVE = [
    InputMaskDirective
];
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var StartFormCustomButtonDirective = /** @class */ (function () {
    function StartFormCustomButtonDirective() {
    }
    return StartFormCustomButtonDirective;
}());
StartFormCustomButtonDirective.decorators = [
    { type: core.Directive, args: [{ selector: '[form-custom-button]' },] },
];
/**
 * @nocollapse
 */
StartFormCustomButtonDirective.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FormRenderingService = /** @class */ (function (_super) {
    __extends(FormRenderingService, _super);
    function FormRenderingService() {
        var _this = _super.call(this) || this;
        _this.defaultValue = UnknownWidgetComponent;
        _this.types = {
            'text': DynamicComponentResolver.fromType(TextWidgetComponent),
            'string': DynamicComponentResolver.fromType(TextWidgetComponent),
            'integer': DynamicComponentResolver.fromType(NumberWidgetComponent),
            'multi-line-text': DynamicComponentResolver.fromType(MultilineTextWidgetComponentComponent),
            'boolean': DynamicComponentResolver.fromType(CheckboxWidgetComponent),
            'dropdown': DynamicComponentResolver.fromType(DropdownWidgetComponent),
            'date': DynamicComponentResolver.fromType(DateWidgetComponent),
            'amount': DynamicComponentResolver.fromType(AmountWidgetComponent),
            'radio-buttons': DynamicComponentResolver.fromType(RadioButtonsWidgetComponent),
            'hyperlink': DynamicComponentResolver.fromType(HyperlinkWidgetComponent),
            'readonly-text': DynamicComponentResolver.fromType(DisplayTextWidgetComponentComponent),
            'typeahead': DynamicComponentResolver.fromType(TypeaheadWidgetComponent),
            'people': DynamicComponentResolver.fromType(PeopleWidgetComponent),
            'functional-group': DynamicComponentResolver.fromType(FunctionalGroupWidgetComponent),
            'dynamic-table': DynamicComponentResolver.fromType(DynamicTableWidgetComponent),
            'container': DynamicComponentResolver.fromType(ContainerWidgetComponent),
            'group': DynamicComponentResolver.fromType(ContainerWidgetComponent),
            'document': DynamicComponentResolver.fromType(DocumentWidgetComponent)
        };
        _this.types['upload'] = function (field) {
            if (field) {
                var params = field.params;
                if (params && params.link) {
                    return AttachWidgetComponent;
                }
                return UploadWidgetComponent;
            }
            return UnknownWidgetComponent;
        };
        return _this;
    }
    return FormRenderingService;
}(DynamicComponentMapper));
FormRenderingService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
FormRenderingService.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FormFieldComponent = /** @class */ (function () {
    /**
     * @param {?} formRenderingService
     * @param {?} componentFactoryResolver
     * @param {?} visibilityService
     * @param {?} compiler
     */
    function FormFieldComponent(formRenderingService, componentFactoryResolver, visibilityService, compiler) {
        this.formRenderingService = formRenderingService;
        this.componentFactoryResolver = componentFactoryResolver;
        this.visibilityService = visibilityService;
        this.compiler = compiler;
        this.field = null;
        this.focus = false;
    }
    /**
     * @return {?}
     */
    FormFieldComponent.prototype.ngOnInit = function () {
        var _this = this;
        var /** @type {?} */ originalField = this.getField();
        if (originalField) {
            var /** @type {?} */ customTemplate = this.field.form.customFieldTemplates[originalField.type];
            if (customTemplate && this.hasController(originalField.type)) {
                var /** @type {?} */ factory = this.getComponentFactorySync(originalField.type, customTemplate);
                this.componentRef = this.container.createComponent(factory);
                var /** @type {?} */ instance = this.componentRef.instance;
                if (instance) {
                    instance.field = originalField;
                }
            }
            else {
                var /** @type {?} */ componentType = this.formRenderingService.resolveComponentType(originalField);
                if (componentType) {
                    var /** @type {?} */ factory = this.componentFactoryResolver.resolveComponentFactory(componentType);
                    this.componentRef = this.container.createComponent(factory);
                    var /** @type {?} */ instance = (this.componentRef.instance);
                    instance.field = this.field;
                    instance.fieldChanged.subscribe(function (field) {
                        if (field && _this.field.form) {
                            _this.visibilityService.refreshVisibility(_this.field.form);
                        }
                    });
                }
            }
        }
    };
    /**
     * @return {?}
     */
    FormFieldComponent.prototype.ngOnDestroy = function () {
        if (this.componentRef) {
            this.componentRef.destroy();
            this.componentRef = null;
        }
    };
    /**
     * @return {?}
     */
    FormFieldComponent.prototype.getField = function () {
        if (this.field && this.field.params) {
            var /** @type {?} */ wrappedField = this.field.params.field;
            if (wrappedField && wrappedField.type) {
                return wrappedField;
            }
        }
        return this.field;
    };
    /**
     * @param {?} type
     * @return {?}
     */
    FormFieldComponent.prototype.hasController = function (type) {
        return (adf && adf.components && adf.components[type]);
    };
    /**
     * @param {?} type
     * @param {?} template
     * @return {?}
     */
    FormFieldComponent.prototype.getComponentFactorySync = function (type, template) {
        var /** @type {?} */ componentInfo = adf.components[type];
        if (componentInfo.factory) {
            return componentInfo.factory;
        }
        var /** @type {?} */ metadata = {
            selector: "runtime-component-" + type,
            template: template
        };
        var /** @type {?} */ factory = this.createComponentFactorySync(this.compiler, metadata, componentInfo.class);
        componentInfo.factory = factory;
        return factory;
    };
    /**
     * @param {?} compiler
     * @param {?} metadata
     * @param {?} componentClass
     * @return {?}
     */
    FormFieldComponent.prototype.createComponentFactorySync = function (compiler, metadata, componentClass) {
        var /** @type {?} */ cmpClass = componentClass || /** @class */ (function () {
            function RuntimeComponent() {
            }
            return RuntimeComponent;
        }());
        var /** @type {?} */ decoratedCmp = core.Component(metadata)(cmpClass);
        var RuntimeComponentModule = /** @class */ (function () {
            function RuntimeComponentModule() {
            }
            return RuntimeComponentModule;
        }());
        RuntimeComponentModule.decorators = [
            { type: core.NgModule, args: [{ imports: [], declarations: [decoratedCmp] },] },
        ];
        /**
         * @nocollapse
         */
        RuntimeComponentModule.ctorParameters = function () { return []; };
        var /** @type {?} */ module = compiler.compileModuleAndAllComponentsSync(RuntimeComponentModule);
        return module.componentFactories.find(function (x) { return x.componentType === decoratedCmp; });
    };
    /**
     * @return {?}
     */
    FormFieldComponent.prototype.focusToggle = function () {
        this.focus = !this.focus;
    };
    return FormFieldComponent;
}());
FormFieldComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-form-field, form-field',
                template: "\n        <div [hidden]=\"!field?.isVisible\"\n            [class.adf-focus]=\"focus\"\n            (focusin)=\"focusToggle()\"\n            (focusout)=\"focusToggle()\">\n            <div #container></div>\n        </div>\n    ",
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
FormFieldComponent.ctorParameters = function () { return [
    { type: FormRenderingService, },
    { type: core.ComponentFactoryResolver, },
    { type: WidgetVisibilityService, },
    { type: core.Compiler, },
]; };
FormFieldComponent.propDecorators = {
    'container': [{ type: core.ViewChild, args: ['container', { read: core.ViewContainerRef },] },],
    'field': [{ type: core.Input },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FormListComponent = /** @class */ (function () {
    /**
     * @param {?} formService
     */
    function FormListComponent(formService) {
        this.formService = formService;
        this.forms = [];
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    FormListComponent.prototype.ngOnChanges = function (changes) {
        this.getForms();
    };
    /**
     * @return {?}
     */
    FormListComponent.prototype.isEmpty = function () {
        return this.forms && this.forms.length === 0;
    };
    /**
     * @return {?}
     */
    FormListComponent.prototype.getForms = function () {
        var _this = this;
        this.formService.getForms().subscribe(function (forms$$1) {
            (_a = _this.forms).push.apply(_a, forms$$1);
            var _a;
        });
    };
    return FormListComponent;
}());
FormListComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-form-list',
                template: "\n      <adf-datatable *ngIf=\"!isEmpty()\"\n          [rows]=\"forms\">\n          <data-columns>\n              <data-column key=\"name\" type=\"text\" title=\"Name\" class=\"ellipsis-cell\" [sortable]=\"true\"></data-column>\n              <data-column key=\"lastUpdatedByFullName\" type=\"text\" title=\"User\" class=\"ellipsis-cell\" [sortable]=\"true\"></data-column>\n              <data-column key=\"lastUpdated\" type=\"date\" format=\"shortDate\" title=\"Date\"></data-column>\n          </data-columns>\n      </adf-datatable>\n    ",
                styles: ["\n\n    "],
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
FormListComponent.ctorParameters = function () { return [
    { type: FormService, },
]; };
FormListComponent.propDecorators = {
    'forms': [{ type: core.Input },],
};
var NodeMetadata = /** @class */ (function () {
    /**
     * @param {?} metadata
     * @param {?} nodeType
     */
    function NodeMetadata(metadata, nodeType) {
        this.metadata = metadata;
        this.nodeType = nodeType;
    }
    return NodeMetadata;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NodeService = /** @class */ (function () {
    /**
     * @param {?} apiService
     */
    function NodeService(apiService) {
        this.apiService = apiService;
    }
    /**
     * Get All the metadata and the nodeType for a nodeId cleaned by the prefix
     * @param {?} nodeId Node Id
     * @return {?} NodeMetadata
     */
    NodeService.prototype.getNodeMetadata = function (nodeId) {
        return Observable.Observable.fromPromise(this.apiService.getInstance().nodes.getNodeInfo(nodeId)).map(this.cleanMetadataFromSemicolon);
    };
    /**
     * Create a new Node from form metadata
     * @param {?} nodeType node type
     * @param {?} nameSpace namespace node
     * @param {?} data data to store
     * @param {?} path path
     * @param {?=} name
     * @return {?} NodeMetadata
     */
    NodeService.prototype.createNodeMetadata = function (nodeType, nameSpace, data, path, name) {
        var /** @type {?} */ properties = {};
        for (var /** @type {?} */ key in data) {
            if (data[key]) {
                properties[nameSpace + ':' + key] = data[key];
            }
        }
        return this.createNode(name || this.generateUuid(), nodeType, properties, path);
    };
    /**
     * Create a new Node from form metadata
     * @param {?} name path
     * @param {?} nodeType node type
     * @param {?} properties namespace node
     * @param {?} path path
     * @return {?} NodeMetadata
     */
    NodeService.prototype.createNode = function (name, nodeType, properties, path) {
        var /** @type {?} */ body = {
            name: name,
            nodeType: nodeType,
            properties: properties,
            relativePath: path
        };
        // TODO: requires update to alfresco-js-api typings
        var /** @type {?} */ apiService = this.apiService.getInstance();
        return Observable.Observable.fromPromise(apiService.nodes.addNode('-root-', body, {}));
    };
    /**
     * @return {?}
     */
    NodeService.prototype.generateUuid = function () {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            var /** @type {?} */ r = Math.random() * 16 | 0, /** @type {?} */ v = c === 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    };
    /**
     * @param {?} data
     * @return {?}
     */
    NodeService.prototype.cleanMetadataFromSemicolon = function (data) {
        var /** @type {?} */ metadata = {};
        if (data && data.properties) {
            for (var /** @type {?} */ key in data.properties) {
                if (key) {
                    if (key.indexOf(':') !== -1) {
                        metadata[key.split(':')[1]] = data.properties[key];
                    }
                    else {
                        metadata[key] = data.properties[key];
                    }
                }
            }
        }
        return new NodeMetadata(metadata, data.nodeType);
    };
    return NodeService;
}());
NodeService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
NodeService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable */
var FormComponent = /** @class */ (function () {
    /**
     * @param {?} formService
     * @param {?} visibilityService
     * @param {?} ecmModelService
     * @param {?} nodeService
     */
    function FormComponent(formService, visibilityService, ecmModelService, nodeService) {
        this.formService = formService;
        this.visibilityService = visibilityService;
        this.ecmModelService = ecmModelService;
        this.nodeService = nodeService;
        this.saveMetadata = false;
        this.showTitle = true;
        this.showCompleteButton = true;
        this.disableCompleteButton = false;
        this.disableStartProcessButton = false;
        this.showSaveButton = true;
        this.showDebugButton = false;
        this.readOnly = false;
        this.showRefreshButton = true;
        this.showValidationIcon = true;
        this.fieldValidators = [];
        this.formSaved = new core.EventEmitter();
        this.formCompleted = new core.EventEmitter();
        this.formContentClicked = new core.EventEmitter();
        this.formLoaded = new core.EventEmitter();
        this.formDataRefreshed = new core.EventEmitter();
        this.executeOutcome = new core.EventEmitter();
        this.onError = new core.EventEmitter();
        this.debugMode = false;
    }
    /**
     * @return {?}
     */
    FormComponent.prototype.hasForm = function () {
        return this.form ? true : false;
    };
    /**
     * @return {?}
     */
    FormComponent.prototype.isTitleEnabled = function () {
        if (this.showTitle) {
            if (this.form && this.form.taskName) {
                return true;
            }
        }
        return false;
    };
    /**
     * @param {?} outcome
     * @return {?}
     */
    FormComponent.prototype.isOutcomeButtonEnabled = function (outcome) {
        if (this.form.readOnly) {
            return false;
        }
        if (outcome) {
            // Make 'Save' button always available
            if (outcome.name === FormOutcomeModel.SAVE_ACTION) {
                return true;
            }
            if (outcome.name === FormOutcomeModel.COMPLETE_ACTION) {
                return this.disableCompleteButton ? false : this.form.isValid;
            }
            if (outcome.name === FormOutcomeModel.START_PROCESS_ACTION) {
                return this.disableStartProcessButton ? false : this.form.isValid;
            }
            return this.form.isValid;
        }
        return false;
    };
    /**
     * @param {?} outcome
     * @param {?} isFormReadOnly
     * @return {?}
     */
    FormComponent.prototype.isOutcomeButtonVisible = function (outcome, isFormReadOnly) {
        if (outcome && outcome.name) {
            if (outcome.name === FormOutcomeModel.COMPLETE_ACTION) {
                return this.showCompleteButton;
            }
            if (isFormReadOnly) {
                return outcome.isSelected;
            }
            if (outcome.name === FormOutcomeModel.SAVE_ACTION) {
                return this.showSaveButton;
            }
            if (outcome.name === FormOutcomeModel.START_PROCESS_ACTION) {
                return false;
            }
            return true;
        }
        return false;
    };
    /**
     * @return {?}
     */
    FormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.formService.formContentClicked.subscribe(function (content) {
            _this.formContentClicked.emit(content);
        });
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    FormComponent.prototype.ngOnChanges = function (changes) {
        var /** @type {?} */ taskId = changes['taskId'];
        if (taskId && taskId.currentValue) {
            this.getFormByTaskId(taskId.currentValue);
            return;
        }
        var /** @type {?} */ formId = changes['formId'];
        if (formId && formId.currentValue) {
            this.getFormDefinitionByFormId(formId.currentValue);
            return;
        }
        var /** @type {?} */ formName = changes['formName'];
        if (formName && formName.currentValue) {
            this.getFormDefinitionByFormName(formName.currentValue);
            return;
        }
        var /** @type {?} */ nodeId = changes['nodeId'];
        if (nodeId && nodeId.currentValue) {
            this.loadFormForEcmNode(nodeId.currentValue);
            return;
        }
        var /** @type {?} */ data = changes['data'];
        if (data && data.currentValue) {
            this.refreshFormData();
            return;
        }
    };
    /**
     * Invoked when user clicks outcome button.
     * @param {?} outcome Form outcome model
     * @return {?}
     */
    FormComponent.prototype.onOutcomeClicked = function (outcome) {
        if (!this.readOnly && outcome && this.form) {
            if (!this.onExecuteOutcome(outcome)) {
                return false;
            }
            if (outcome.isSystem) {
                if (outcome.id === FormComponent.SAVE_OUTCOME_ID) {
                    this.saveTaskForm();
                    return true;
                }
                if (outcome.id === FormComponent.COMPLETE_OUTCOME_ID) {
                    this.completeTaskForm();
                    return true;
                }
                if (outcome.id === FormComponent.START_PROCESS_OUTCOME_ID) {
                    this.completeTaskForm();
                    return true;
                }
                if (outcome.id === FormComponent.CUSTOM_OUTCOME_ID) {
                    this.onTaskSaved(this.form);
                    this.storeFormAsMetadata();
                    return true;
                }
            }
            else {
                // Note: Activiti is using NAME field rather than ID for outcomes
                if (outcome.name) {
                    this.onTaskSaved(this.form);
                    this.completeTaskForm(outcome.name);
                    return true;
                }
            }
        }
        return false;
    };
    /**
     * Invoked when user clicks form refresh button.
     * @return {?}
     */
    FormComponent.prototype.onRefreshClicked = function () {
        this.loadForm();
    };
    /**
     * @return {?}
     */
    FormComponent.prototype.loadForm = function () {
        if (this.taskId) {
            this.getFormByTaskId(this.taskId);
            return;
        }
        if (this.formId) {
            this.getFormDefinitionByFormId(this.formId);
            return;
        }
        if (this.formName) {
            this.getFormDefinitionByFormName(this.formName);
            return;
        }
    };
    /**
     * @param {?} taskId
     * @return {?}
     */
    FormComponent.prototype.findProcessVariablesByTaskId = function (taskId) {
        var _this = this;
        return this.formService.getTask(taskId).
            switchMap(function (task) {
            if (_this.isAProcessTask(task)) {
                return _this.visibilityService.getTaskProcessVariable(taskId);
            }
            else {
                return Observable.Observable.of({});
            }
        });
    };
    /**
     * @param {?} taskRepresentation
     * @return {?}
     */
    FormComponent.prototype.isAProcessTask = function (taskRepresentation) {
        return taskRepresentation.processDefinitionId && taskRepresentation.processDefinitionDeploymentId !== 'null';
    };
    /**
     * @param {?} taskId
     * @return {?}
     */
    FormComponent.prototype.getFormByTaskId = function (taskId) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.findProcessVariablesByTaskId(taskId).subscribe(function (processVariables) {
                _this.formService
                    .getTaskForm(taskId)
                    .subscribe(function (form) {
                    var /** @type {?} */ parsedForm = _this.parseForm(form);
                    _this.visibilityService.refreshVisibility(parsedForm);
                    _this.form = parsedForm;
                    _this.onFormLoaded(_this.form);
                    resolve(_this.form);
                }, function (error) {
                    _this.handleError(error);
                    // reject(error);
                    resolve(null);
                });
            });
        });
    };
    /**
     * @param {?} formId
     * @return {?}
     */
    FormComponent.prototype.getFormDefinitionByFormId = function (formId) {
        var _this = this;
        this.formService
            .getFormDefinitionById(formId)
            .subscribe(function (form) {
            _this.formName = form.name;
            _this.form = _this.parseForm(form);
            _this.onFormLoaded(_this.form);
        }, function (error) {
            _this.handleError(error);
        });
    };
    /**
     * @param {?} formName
     * @return {?}
     */
    FormComponent.prototype.getFormDefinitionByFormName = function (formName) {
        var _this = this;
        this.formService
            .getFormDefinitionByName(formName)
            .subscribe(function (id) {
            _this.formService.getFormDefinitionById(id).subscribe(function (form) {
                _this.form = _this.parseForm(form);
                _this.onFormLoaded(_this.form);
            }, function (error) {
                _this.handleError(error);
            });
        }, function (error) {
            _this.handleError(error);
        });
    };
    /**
     * @return {?}
     */
    FormComponent.prototype.saveTaskForm = function () {
        var _this = this;
        if (this.form && this.form.taskId) {
            this.formService
                .saveTaskForm(this.form.taskId, this.form.values)
                .subscribe(function () {
                _this.onTaskSaved(_this.form);
                _this.storeFormAsMetadata();
            }, function (error) { return _this.onTaskSavedError(_this.form, error); });
        }
    };
    /**
     * @param {?=} outcome
     * @return {?}
     */
    FormComponent.prototype.completeTaskForm = function (outcome) {
        var _this = this;
        if (this.form && this.form.taskId) {
            this.formService
                .completeTaskForm(this.form.taskId, this.form.values, outcome)
                .subscribe(function () {
                _this.onTaskCompleted(_this.form);
                _this.storeFormAsMetadata();
            }, function (error) { return _this.onTaskCompletedError(_this.form, error); });
        }
    };
    /**
     * @param {?} err
     * @return {?}
     */
    FormComponent.prototype.handleError = function (err) {
        this.onError.emit(err);
    };
    /**
     * @param {?} json
     * @return {?}
     */
    FormComponent.prototype.parseForm = function (json) {
        if (json) {
            var /** @type {?} */ form = new FormModel(json, this.data, this.readOnly, this.formService);
            if (!json.fields) {
                form.outcomes = this.getFormDefinitionOutcomes(form);
            }
            if (this.fieldValidators && this.fieldValidators.length > 0) {
                form.fieldValidators = this.fieldValidators;
            }
            return form;
        }
        return null;
    };
    /**
     * Get custom set of outcomes for a Form Definition.
     * @param {?} form Form definition model.
     * @return {?}
     */
    FormComponent.prototype.getFormDefinitionOutcomes = function (form) {
        return [
            new FormOutcomeModel(form, { id: '$custom', name: FormOutcomeModel.SAVE_ACTION, isSystem: true })
        ];
    };
    /**
     * @param {?} field
     * @return {?}
     */
    FormComponent.prototype.checkVisibility = function (field) {
        if (field && field.form) {
            this.visibilityService.refreshVisibility(field.form);
        }
    };
    /**
     * @return {?}
     */
    FormComponent.prototype.refreshFormData = function () {
        this.form = this.parseForm(this.form.json);
        this.onFormLoaded(this.form);
        this.onFormDataRefreshed(this.form);
    };
    /**
     * @param {?} nodeId
     * @return {?}
     */
    FormComponent.prototype.loadFormForEcmNode = function (nodeId) {
        var _this = this;
        this.nodeService.getNodeMetadata(nodeId).subscribe(function (data) {
            _this.data = data.metadata;
            _this.loadFormFromActiviti(data.nodeType);
        }, this.handleError);
    };
    /**
     * @param {?} nodeType
     * @return {?}
     */
    FormComponent.prototype.loadFormFromActiviti = function (nodeType) {
        var _this = this;
        this.formService.searchFrom(nodeType).subscribe(function (form) {
            if (!form) {
                _this.formService.createFormFromANode(nodeType).subscribe(function (formMetadata) {
                    _this.loadFormFromFormId(formMetadata.id);
                });
            }
            else {
                _this.loadFormFromFormId(form.id);
            }
        }, function (error) {
            _this.handleError(error);
        });
    };
    /**
     * @param {?} formId
     * @return {?}
     */
    FormComponent.prototype.loadFormFromFormId = function (formId) {
        this.formId = formId;
        this.loadForm();
    };
    /**
     * @return {?}
     */
    FormComponent.prototype.storeFormAsMetadata = function () {
        var _this = this;
        if (this.saveMetadata) {
            this.ecmModelService.createEcmTypeForActivitiForm(this.formName, this.form).subscribe(function (type) {
                _this.nodeService.createNodeMetadata(type.nodeType || type.entry.prefixedName, EcmModelService.MODEL_NAMESPACE, _this.form.values, _this.path, _this.nameNode);
            }, function (error) {
                _this.handleError(error);
            });
        }
    };
    /**
     * @param {?} form
     * @return {?}
     */
    FormComponent.prototype.onFormLoaded = function (form) {
        this.formLoaded.emit(form);
        this.formService.formLoaded.next(new FormEvent(form));
    };
    /**
     * @param {?} form
     * @return {?}
     */
    FormComponent.prototype.onFormDataRefreshed = function (form) {
        this.formDataRefreshed.emit(form);
        this.formService.formDataRefreshed.next(new FormEvent(form));
    };
    /**
     * @param {?} form
     * @return {?}
     */
    FormComponent.prototype.onTaskSaved = function (form) {
        this.formSaved.emit(form);
        this.formService.taskSaved.next(new FormEvent(form));
    };
    /**
     * @param {?} form
     * @param {?} error
     * @return {?}
     */
    FormComponent.prototype.onTaskSavedError = function (form, error) {
        this.handleError(error);
        this.formService.taskSavedError.next(new FormErrorEvent(form, error));
    };
    /**
     * @param {?} form
     * @return {?}
     */
    FormComponent.prototype.onTaskCompleted = function (form) {
        this.formCompleted.emit(form);
        this.formService.taskCompleted.next(new FormEvent(form));
    };
    /**
     * @param {?} form
     * @param {?} error
     * @return {?}
     */
    FormComponent.prototype.onTaskCompletedError = function (form, error) {
        this.handleError(error);
        this.formService.taskCompletedError.next(new FormErrorEvent(form, error));
    };
    /**
     * @param {?} outcome
     * @return {?}
     */
    FormComponent.prototype.onExecuteOutcome = function (outcome) {
        var /** @type {?} */ args = new FormOutcomeEvent(outcome);
        this.formService.executeOutcome.next(args);
        if (args.defaultPrevented) {
            return false;
        }
        this.executeOutcome.emit(args);
        if (args.defaultPrevented) {
            return false;
        }
        return true;
    };
    return FormComponent;
}());
FormComponent.SAVE_OUTCOME_ID = '$save';
FormComponent.COMPLETE_OUTCOME_ID = '$complete';
FormComponent.START_PROCESS_OUTCOME_ID = '$startProcess';
FormComponent.CUSTOM_OUTCOME_ID = '$custom';
FormComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-form',
                template: "\n      <div *ngIf=\"!hasForm()\">\n          <ng-content select=\"[empty-form]\">\n          </ng-content>\n      </div>\n      <div *ngIf=\"hasForm()\" class=\"{{form.className}}\">\n          <mat-card>\n              <mat-card-header>\n                  <mat-card-title>\n                      <h4 *ngIf=\"isTitleEnabled()\">\n                          <div *ngIf=\"showRefreshButton\" class=\"adf-form-reload-button\">\n                              <button mat-icon-button (click)=\"onRefreshClicked()\">\n                                  <mat-icon>refresh</mat-icon>\n                              </button>\n                          </div>\n                          <mat-icon>{{ form.isValid ? 'event_available' : 'event_busy' }}</mat-icon>\n                          <span>{{form.taskName}}</span>\n\n                      </h4>\n                  </mat-card-title>\n              </mat-card-header>\n              <mat-card-content>\n                  <div *ngIf=\"form.hasTabs()\">\n                      <tabs-widget [tabs]=\"form.tabs\" (formTabChanged)=\"checkVisibility($event);\"></tabs-widget>\n                  </div>\n\n                  <div *ngIf=\"!form.hasTabs() && form.hasFields()\">\n                      <div *ngFor=\"let field of form.fields\">\n                          <form-field [field]=\"field.field\"></form-field>\n                      </div>\n                  </div>\n              </mat-card-content>\n              <mat-card-actions *ngIf=\"form.hasOutcomes()\">\n                  <!--[class.mdl-button--colored]=\"!outcome.isSystem\"-->\n                  <button *ngFor=\"let outcome of form.outcomes\"\n                          mat-button\n                          [disabled]=\"!isOutcomeButtonEnabled(outcome)\"\n                          [class.adf-form-hide-button]=\"!isOutcomeButtonVisible(outcome, form.readOnly)\"\n                          (click)=\"onOutcomeClicked(outcome, $event)\">\n                      {{outcome.name | uppercase}}\n                  </button>\n              </mat-card-actions>\n          </mat-card>\n      </div>\n      <!--\n      For debugging and data visualisation purposes,\n      will be removed during future revisions\n      -->\n      <div *ngIf=\"showDebugButton\" class=\"adf-form-debug-container\">\n          <mat-slide-toggle [(ngModel)]=\"debugMode\">Debug mode</mat-slide-toggle>\n          <div *ngIf=\"debugMode && hasForm()\">\n              <h4>Values</h4>\n              <pre>{{form.values | json}}</pre>\n\n              <h4>Form</h4>\n              <pre>{{form.json | json}}</pre>\n          </div>\n      </div>\n    ",
                styles: ["\n      .adf-form-container {\n        width: 100%;\n        min-height: 100px;\n        overflow: visible; }\n\n      .adf-form-debug-container {\n        padding: 10px; }\n\n      .adf-form-debug-container .debug-toggle-text {\n        padding-left: 15px;\n        cursor: pointer; }\n\n      .adf-form-debug-container .debug-toggle-text:hover {\n        font-weight: bold; }\n\n      .adf-form-reload-button {\n        position: absolute;\n        right: 0;\n        top: 0; }\n\n      .adf-form-hide-button {\n        display: none; }\n\n      .adf-task-title {\n        text-align: center; }\n\n      form-field {\n        width: 100%; }\n        form-field .mat-input-element {\n          font-size: 14px;\n          padding-top: 8px;\n          line-height: normal; }\n    "],
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
FormComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: WidgetVisibilityService, },
    { type: EcmModelService, },
    { type: NodeService, },
]; };
FormComponent.propDecorators = {
    'form': [{ type: core.Input },],
    'taskId': [{ type: core.Input },],
    'nodeId': [{ type: core.Input },],
    'formId': [{ type: core.Input },],
    'formName': [{ type: core.Input },],
    'saveMetadata': [{ type: core.Input },],
    'data': [{ type: core.Input },],
    'path': [{ type: core.Input },],
    'nameNode': [{ type: core.Input },],
    'showTitle': [{ type: core.Input },],
    'showCompleteButton': [{ type: core.Input },],
    'disableCompleteButton': [{ type: core.Input },],
    'disableStartProcessButton': [{ type: core.Input },],
    'showSaveButton': [{ type: core.Input },],
    'showDebugButton': [{ type: core.Input },],
    'readOnly': [{ type: core.Input },],
    'showRefreshButton': [{ type: core.Input },],
    'showValidationIcon': [{ type: core.Input },],
    'fieldValidators': [{ type: core.Input },],
    'formSaved': [{ type: core.Output },],
    'formCompleted': [{ type: core.Output },],
    'formContentClicked': [{ type: core.Output },],
    'formLoaded': [{ type: core.Output },],
    'formDataRefreshed': [{ type: core.Output },],
    'executeOutcome': [{ type: core.Output },],
    'onError': [{ type: core.Output },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * Displays the start form for a named process definition, which can be used to retrieve values to start a new process.
 *
 * After the form has been completed the form values are available from the attribute component.form.values and
 * component.form.isValid (boolean) can be used to check the if the form is valid or not. Both of these properties are
 * updated as the user types into the form.
 *
 * \@Input
 * {processDefinitionId} string: The process definition ID
 * {showOutcomeButtons} boolean: Whether form outcome buttons should be shown, this is now always active to show form outcomes
 *  \@Output
 *  {formLoaded} EventEmitter - This event is fired when the form is loaded, it pass all the value in the form.
 *  {formSaved} EventEmitter - This event is fired when the form is saved, it pass all the value in the form.
 *  {formCompleted} EventEmitter - This event is fired when the form is completed, it pass all the value in the form.
 *
 */
var StartFormComponent = /** @class */ (function (_super) {
    __extends(StartFormComponent, _super);
    /**
     * @param {?} formService
     * @param {?} visibilityService
     * @param {?} logService
     */
    function StartFormComponent(formService, visibilityService, logService) {
        var _this = _super.call(this, formService, visibilityService, null, null) || this;
        _this.showOutcomeButtons = true;
        _this.showRefreshButton = true;
        _this.readOnlyForm = false;
        _this.outcomeClick = new core.EventEmitter();
        _this.formContentClicked = new core.EventEmitter();
        _this.outcomesContainer = null;
        _this.showTitle = false;
        return _this;
    }
    /**
     * @return {?}
     */
    StartFormComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.formService.formContentClicked.subscribe(function (content) {
            _this.formContentClicked.emit(content);
        });
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    StartFormComponent.prototype.ngOnChanges = function (changes) {
        var /** @type {?} */ processDefinitionId = changes['processDefinitionId'];
        if (processDefinitionId && processDefinitionId.currentValue) {
            this.visibilityService.cleanProcessVariable();
            this.getStartFormDefinition(processDefinitionId.currentValue);
            return;
        }
        var /** @type {?} */ processId = changes['processId'];
        if (processId && processId.currentValue) {
            this.visibilityService.cleanProcessVariable();
            this.loadStartForm(processId.currentValue);
            return;
        }
    };
    /**
     * @param {?} processId
     * @return {?}
     */
    StartFormComponent.prototype.loadStartForm = function (processId) {
        var _this = this;
        this.formService.getProcessIntance(processId)
            .subscribe(function (intance) {
            _this.formService
                .getStartFormInstance(processId)
                .subscribe(function (form) {
                _this.formName = form.name;
                if (intance.variables) {
                    form.processVariables = intance.variables;
                }
                _this.form = _this.parseForm(form);
                _this.form.readOnly = _this.readOnlyForm;
                _this.onFormLoaded(_this.form);
            }, function (error) { return _this.handleError(error); });
        });
    };
    /**
     * @param {?} processId
     * @return {?}
     */
    StartFormComponent.prototype.getStartFormDefinition = function (processId) {
        var _this = this;
        this.formService
            .getStartFormDefinition(processId)
            .subscribe(function (form) {
            _this.formName = form.processDefinitionName;
            _this.form = _this.parseForm(form);
            _this.form.readOnly = _this.readOnlyForm;
            _this.onFormLoaded(_this.form);
        }, function (error) { return _this.handleError(error); });
    };
    /**
     * @override
     * @param {?} outcome
     * @param {?} isFormReadOnly
     * @return {?}
     */
    StartFormComponent.prototype.isOutcomeButtonVisible = function (outcome, isFormReadOnly) {
        if (outcome && outcome.isSystem && (outcome.name === FormOutcomeModel.SAVE_ACTION ||
            outcome.name === FormOutcomeModel.COMPLETE_ACTION)) {
            return false;
        }
        else if (outcome && outcome.name === FormOutcomeModel.START_PROCESS_ACTION) {
            return true;
        }
        return _super.prototype.isOutcomeButtonVisible.call(this, outcome, isFormReadOnly);
    };
    /**
     * @override
     * @return {?}
     */
    StartFormComponent.prototype.saveTaskForm = function () {
        // do nothing
    };
    /**
     * @override
     * @return {?}
     */
    StartFormComponent.prototype.onRefreshClicked = function () {
        if (this.processDefinitionId) {
            this.visibilityService.cleanProcessVariable();
            this.getStartFormDefinition(this.processDefinitionId);
        }
        else if (this.processId) {
            this.visibilityService.cleanProcessVariable();
            this.loadStartForm(this.processId);
        }
    };
    /**
     * @param {?=} outcome
     * @return {?}
     */
    StartFormComponent.prototype.completeTaskForm = function (outcome) {
        this.outcomeClick.emit(outcome);
    };
    return StartFormComponent;
}(FormComponent));
StartFormComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-start-form',
                template: "\n      <div class=\"adf-start-form-container\" *ngIf=\"hasForm()\">\n          <mat-card>\n              <mat-card-header>\n                  <mat-card-title>\n                      <h2 *ngIf=\"isTitleEnabled()\" class=\"mdl-card__title-text\">{{form.taskName}}</h2>\n                  </mat-card-title>\n              </mat-card-header>\n              <mat-card-content>\n                  <div *ngIf=\"form.hasTabs()\">\n                      <tabs-widget [tabs]=\"form.tabs\" (formTabChanged)=\"checkVisibility($event);\"></tabs-widget>\n                  </div>\n\n                  <div *ngIf=\"!form.hasTabs() && form.hasFields()\">\n                      <div *ngFor=\"let field of form.fields\">\n                          <form-field [field]=\"field.field\"></form-field>\n                      </div>\n                  </div>\n              </mat-card-content>\n              <mat-card-content class=\"adf-start-form-actions\" *ngIf=\"showOutcomeButtons && form.hasOutcomes()\" #outcomesContainer>\n                   <ng-content select=\"[form-custom-button]\"></ng-content>\n                  <button *ngFor=\"let outcome of form.outcomes\"\n                          mat-button\n                          [disabled]=\"!isOutcomeButtonEnabled(outcome)\"\n                          [class.mdl-button--colored]=\"!outcome.isSystem\"\n                          [class.adf-form-hide-button]=\"!isOutcomeButtonVisible(outcome, form.readOnly)\"\n                          (click)=\"onOutcomeClicked(outcome, $event)\">\n                      {{outcome.name}}\n                  </button>\n              </mat-card-content>\n              <mat-card-actions *ngIf=\"showRefreshButton\">\n                  <button mat-button\n                          (click)=\"onRefreshClicked()\">\n                      <mat-icon>refresh</mat-icon>\n                  </button>\n              </mat-card-actions>\n          </mat-card>\n      </div>\n    ",
                styles: ["\n      .adf-form-container {\n        width: 100%;\n        min-height: 100px;\n        overflow: visible; }\n\n      .adf-form-debug-container {\n        padding: 10px; }\n\n      .adf-form-debug-container .debug-toggle-text {\n        padding-left: 15px;\n        cursor: pointer; }\n\n      .adf-form-debug-container .debug-toggle-text:hover {\n        font-weight: bold; }\n\n      .adf-form-reload-button {\n        position: absolute;\n        right: 0;\n        top: 0; }\n\n      .adf-form-hide-button {\n        display: none; }\n\n      .adf-task-title {\n        text-align: center; }\n\n      form-field {\n        width: 100%; }\n        form-field .mat-input-element {\n          font-size: 14px;\n          padding-top: 8px;\n          line-height: normal; }\n    "],
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
StartFormComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: WidgetVisibilityService, },
    { type: LogService, },
]; };
StartFormComponent.propDecorators = {
    'processDefinitionId': [{ type: core.Input },],
    'processId': [{ type: core.Input },],
    'showOutcomeButtons': [{ type: core.Input },],
    'showRefreshButton': [{ type: core.Input },],
    'readOnlyForm': [{ type: core.Input },],
    'outcomeClick': [{ type: core.Output },],
    'formContentClicked': [{ type: core.Output },],
    'outcomesContainer': [{ type: core.ViewChild, args: ['outcomesContainer', {},] },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ContentWidgetComponent = /** @class */ (function () {
    /**
     * @param {?} formService
     * @param {?} logService
     * @param {?} contentService
     * @param {?} processContentService
     */
    function ContentWidgetComponent(formService, logService, contentService, processContentService) {
        this.formService = formService;
        this.logService = logService;
        this.contentService = contentService;
        this.processContentService = processContentService;
        this.showDocumentContent = true;
        this.contentClick = new core.EventEmitter();
        this.thumbnailLoaded = new core.EventEmitter();
        this.contentLoaded = new core.EventEmitter();
        this.error = new core.EventEmitter();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ContentWidgetComponent.prototype.ngOnChanges = function (changes) {
        var /** @type {?} */ contentId = changes['id'];
        if (contentId && contentId.currentValue) {
            this.loadContent(contentId.currentValue);
        }
    };
    /**
     * @param {?} id
     * @return {?}
     */
    ContentWidgetComponent.prototype.loadContent = function (id) {
        var _this = this;
        this.processContentService
            .getFileContent(id)
            .subscribe(function (response) {
            _this.content = new ContentLinkModel(response);
            _this.contentLoaded.emit(_this.content);
            _this.loadThumbnailUrl(_this.content);
        }, function (error) {
            _this.error.emit(error);
        });
    };
    /**
     * @param {?} content
     * @return {?}
     */
    ContentWidgetComponent.prototype.loadThumbnailUrl = function (content) {
        var _this = this;
        if (this.content.isThumbnailSupported()) {
            var /** @type {?} */ observable = void 0;
            if (this.content.isTypeImage()) {
                observable = this.processContentService.getFileRawContent(content.id);
            }
            else {
                observable = this.processContentService.getContentThumbnail(content.id);
            }
            if (observable) {
                observable.subscribe(function (response) {
                    _this.content.thumbnailUrl = _this.contentService.createTrustedUrl(response);
                    _this.thumbnailLoaded.emit(_this.content.thumbnailUrl);
                }, function (error) {
                    _this.error.emit(error);
                });
            }
        }
    };
    /**
     * @param {?} content
     * @return {?}
     */
    ContentWidgetComponent.prototype.openViewer = function (content) {
        var _this = this;
        var /** @type {?} */ fetch = this.processContentService.getContentPreview(content.id);
        if (content.isTypeImage() || content.isTypePdf()) {
            fetch = this.processContentService.getFileRawContent(content.id);
        }
        fetch.subscribe(function (blob) {
            content.contentBlob = blob;
            _this.contentClick.emit(content);
            _this.logService.info('Content clicked' + content.id);
            _this.formService.formContentClicked.next(content);
        }, function (error) {
            _this.error.emit(error);
        });
    };
    /**
     * Invoke content download.
     * @param {?} content
     * @return {?}
     */
    ContentWidgetComponent.prototype.download = function (content) {
        var _this = this;
        this.processContentService.getFileRawContent(content.id).subscribe(function (blob) { return _this.contentService.downloadBlob(blob, content.name); }, function (error) {
            _this.error.emit(error);
        });
    };
    return ContentWidgetComponent;
}());
ContentWidgetComponent.decorators = [
    { type: core.Component, args: [{
                selector: 'adf-content',
                template: "\n      <mat-card class=\"adf-content-container\" *ngIf=\"content\">\n          <mat-card-content *ngIf=\"showDocumentContent\">\n              <div *ngIf=\"content.isThumbnailSupported()\" >\n                  <img id=\"thumbnailPreview\" class=\"adf-img-upload-widget\" [src]=\"content.thumbnailUrl\" alt=\"{{content.name}}\">\n              </div>\n              <div *ngIf=\"!content.isThumbnailSupported()\">\n                  <mat-icon>image</mat-icon>\n                  <div id=\"unsupported-thumbnail\" class=\"adf-content-widget-preview-text\">{{ 'FORM.PREVIEW.IMAGE_NOT_AVAILABLE' | translate }}\n                  </div>\n              </div>\n              <div class=\"mdl-card__supporting-text upload-widget__content-text\">{{content.name}}</div>\n          </mat-card-content>\n\n          <mat-card-actions>\n              <button mat-icon-button id=\"view\" (click)=\"openViewer(content)\">\n                  <mat-icon class=\"mat-24\">zoom_in</mat-icon>\n              </button>\n              <button mat-icon-button id=\"download\" (click)=\"download(content)\">\n                  <mat-icon class=\"mat-24\">file_download</mat-icon>\n              </button>\n          </mat-card-actions>\n      </mat-card>\n    ",
                styles: ["\n      .adf-img-upload-widget {\n        width: 100%;\n        height: 100%;\n        border: 1px solid rgba(117, 117, 117, 0.57);\n        -webkit-box-shadow: 1px 1px 2px #dddddd;\n                box-shadow: 1px 1px 2px #dddddd;\n        background-color: #ffffff; }\n\n      .adf-content-widget-preview-text {\n        word-wrap: break-word;\n        word-break: break-all;\n        text-align: center; }\n    "],
                encapsulation: core.ViewEncapsulation.None
            },] },
];
/**
 * @nocollapse
 */
ContentWidgetComponent.ctorParameters = function () { return [
    { type: FormService, },
    { type: LogService, },
    { type: ContentService, },
    { type: ProcessContentService, },
]; };
ContentWidgetComponent.propDecorators = {
    'id': [{ type: core.Input },],
    'showDocumentContent': [{ type: core.Input },],
    'contentClick': [{ type: core.Output },],
    'thumbnailLoaded': [{ type: core.Output },],
    'contentLoaded': [{ type: core.Output },],
    'error': [{ type: core.Output },],
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FormModule = /** @class */ (function () {
    function FormModule() {
    }
    return FormModule;
}());
FormModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    common.CommonModule,
                    DataTableModule,
                    http$1.HttpModule,
                    MaterialModule,
                    core$1.TranslateModule,
                    forms.FormsModule,
                    forms.ReactiveFormsModule,
                    DataColumnModule,
                    PipeModule
                ],
                declarations: [
                    ContentWidgetComponent,
                    FormFieldComponent,
                    FormComponent,
                    FormListComponent,
                    StartFormComponent,
                    StartFormCustomButtonDirective
                ].concat(WIDGET_DIRECTIVES, MASK_DIRECTIVE, [
                    WidgetComponent
                ]),
                entryComponents: WIDGET_DIRECTIVES.slice(),
                providers: [
                    ActivitiContentService,
                    EcmModelService,
                    FormRenderingService,
                    FormService,
                    NodeService,
                    ProcessContentService,
                    WidgetVisibilityService
                ],
                exports: [
                    ContentWidgetComponent,
                    FormFieldComponent,
                    FormComponent,
                    FormListComponent,
                    StartFormComponent,
                    StartFormCustomButtonDirective
                ].concat(WIDGET_DIRECTIVES)
            },] },
];
/**
 * @nocollapse
 */
FormModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AppsProcessService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} logService
     */
    function AppsProcessService(apiService, logService) {
        this.apiService = apiService;
        this.logService = logService;
    }
    /**
     * @return {?}
     */
    AppsProcessService.prototype.getDeployedApplications = function () {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().activiti.appsApi.getAppDefinitions())
            .map(function (response) {
            return response.data;
        })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} name
     * @return {?}
     */
    AppsProcessService.prototype.getDeployedApplicationsByName = function (name) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().activiti.appsApi.getAppDefinitions())
            .map(function (response) {
            return response.data.find(function (app) { return app.name === name; });
        })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} appId
     * @return {?}
     */
    AppsProcessService.prototype.getApplicationDetailsById = function (appId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().activiti.appsApi.getAppDefinitions())
            .map(function (response) {
            return response.data.find(function (app) { return app.id === appId; });
        })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} error
     * @return {?}
     */
    AppsProcessService.prototype.handleError = function (error) {
        this.logService.error(error);
        return Observable.Observable.throw(error || 'Server error');
    };
    return AppsProcessService;
}());
AppsProcessService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
AppsProcessService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AuthGuardBpm = /** @class */ (function () {
    /**
     * @param {?} authService
     * @param {?} router
     */
    function AuthGuardBpm(authService, router$$1) {
        this.authService = authService;
        this.router = router$$1;
    }
    /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    AuthGuardBpm.prototype.canActivate = function (route, state$$1) {
        return this.checkLogin(state$$1.url);
    };
    /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    AuthGuardBpm.prototype.canActivateChild = function (route, state$$1) {
        return this.canActivate(route, state$$1);
    };
    /**
     * @param {?} redirectUrl
     * @return {?}
     */
    AuthGuardBpm.prototype.checkLogin = function (redirectUrl) {
        if (this.authService.isBpmLoggedIn()) {
            return true;
        }
        this.authService.setRedirectUrl(redirectUrl);
        this.router.navigate(['/login']);
        return false;
    };
    return AuthGuardBpm;
}());
AuthGuardBpm.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
AuthGuardBpm.ctorParameters = function () { return [
    { type: AuthenticationService, },
    { type: router.Router, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AuthGuardEcm = /** @class */ (function () {
    /**
     * @param {?} authService
     * @param {?} apiService
     * @param {?} router
     */
    function AuthGuardEcm(authService, apiService, router$$1) {
        this.authService = authService;
        this.apiService = apiService;
        this.router = router$$1;
    }
    Object.defineProperty(AuthGuardEcm.prototype, "authApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().ecmAuth;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    AuthGuardEcm.prototype.isLoggedIn = function () {
        if (!this.authApi.isLoggedIn()) {
            return Promise.resolve(false);
        }
        return this.authApi
            .validateTicket()
            .then(function () { return true; }, function () { return false; })
            .catch(function () { return false; });
    };
    /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    AuthGuardEcm.prototype.canActivateChild = function (route, state$$1) {
        return this.canActivate(route, state$$1);
    };
    /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    AuthGuardEcm.prototype.canActivate = function (route, state$$1) {
        var _this = this;
        return this.isLoggedIn().then(function (isLoggedIn) {
            if (!isLoggedIn) {
                _this.authService.setRedirectUrl(state$$1.url);
                _this.router.navigate(['/login']);
            }
            return isLoggedIn;
        });
    };
    return AuthGuardEcm;
}());
AuthGuardEcm.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
AuthGuardEcm.ctorParameters = function () { return [
    { type: AuthenticationService, },
    { type: AlfrescoApiService, },
    { type: router.Router, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AuthGuard = /** @class */ (function () {
    /**
     * @param {?} authService
     * @param {?} router
     */
    function AuthGuard(authService, router$$1) {
        this.authService = authService;
        this.router = router$$1;
    }
    /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    AuthGuard.prototype.canActivate = function (route, state$$1) {
        var /** @type {?} */ redirectUrl = state$$1.url;
        return this.checkLogin(redirectUrl);
    };
    /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    AuthGuard.prototype.canActivateChild = function (route, state$$1) {
        return this.canActivate(route, state$$1);
    };
    /**
     * @param {?} redirectUrl
     * @return {?}
     */
    AuthGuard.prototype.checkLogin = function (redirectUrl) {
        if (this.authService.isLoggedIn()) {
            return true;
        }
        this.authService.setRedirectUrl(redirectUrl);
        this.router.navigate(['/login']);
        return false;
    };
    return AuthGuard;
}());
AuthGuard.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
AuthGuard.ctorParameters = function () { return [
    { type: AuthenticationService, },
    { type: router.Router, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CommentProcessModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function CommentProcessModel(obj) {
        if (obj) {
            this.id = obj.id;
            this.message = obj.message;
            this.created = obj.created;
            this.createdBy = obj.createdBy;
        }
    }
    return CommentProcessModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var UserProcessModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function UserProcessModel(obj) {
        this.pictureId = null;
        if (obj) {
            this.id = obj.id;
            this.email = obj.email || null;
            this.firstName = obj.firstName || null;
            this.lastName = obj.lastName || null;
            this.pictureId = obj.pictureId || null;
        }
    }
    return UserProcessModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CommentProcessService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} logService
     */
    function CommentProcessService(apiService, logService) {
        this.apiService = apiService;
        this.logService = logService;
    }
    /**
     * @param {?} taskId
     * @param {?} message
     * @return {?}
     */
    CommentProcessService.prototype.addTaskComment = function (taskId, message) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().activiti.taskApi.addTaskComment({ message: message }, taskId))
            .map(function (res) { return res; })
            .map(function (response) {
            return new CommentProcessModel({ id: response.id, message: response.message, created: response.created, createdBy: response.createdBy });
        }).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} taskId
     * @return {?}
     */
    CommentProcessService.prototype.getTaskComments = function (taskId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().activiti.taskApi.getTaskComments(taskId))
            .map(function (res) { return res; })
            .map(function (response) {
            var /** @type {?} */ comments = [];
            response.data.forEach(function (comment) {
                var /** @type {?} */ user = new UserProcessModel(comment.createdBy);
                comments.push(new CommentProcessModel({ id: comment.id, message: comment.message, created: comment.created, createdBy: user }));
            });
            return comments;
        }).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} processInstanceId
     * @return {?}
     */
    CommentProcessService.prototype.getProcessInstanceComments = function (processInstanceId) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().activiti.commentsApi.getProcessInstanceComments(processInstanceId))
            .map(function (res) { return res; })
            .map(function (response) {
            var /** @type {?} */ comments = [];
            response.data.forEach(function (comment) {
                var /** @type {?} */ user = new UserProcessModel(comment.createdBy);
                comments.push(new CommentProcessModel({ id: comment.id, message: comment.message, created: comment.created, createdBy: user }));
            });
            return comments;
        }).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} processInstanceId
     * @param {?} message
     * @return {?}
     */
    CommentProcessService.prototype.addProcessInstanceComment = function (processInstanceId, message) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().activiti.commentsApi.addProcessInstanceComment({ message: message }, processInstanceId))
            .map(function (response) {
            return new CommentProcessModel({ id: response.id, message: response.message, created: response.created, createdBy: response.createdBy });
        }).catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} error
     * @return {?}
     */
    CommentProcessService.prototype.handleError = function (error) {
        this.logService.error(error);
        return Observable.Observable.throw(error || 'Server error');
    };
    return CommentProcessService;
}());
CommentProcessService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
CommentProcessService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DeletedNodesApiService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} preferences
     */
    function DeletedNodesApiService(apiService, preferences) {
        this.apiService = apiService;
        this.preferences = preferences;
    }
    Object.defineProperty(DeletedNodesApiService.prototype, "nodesApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().core.nodesApi;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?=} options
     * @return {?}
     */
    DeletedNodesApiService.prototype.getDeletedNodes = function (options) {
        var _a = this, nodesApi = _a.nodesApi, handleError = _a.handleError;
        var /** @type {?} */ defaultOptions = {
            include: ['path', 'properties'],
            maxItems: this.preferences.paginationSize,
            skipCount: 0
        };
        var /** @type {?} */ queryOptions = Object.assign(defaultOptions, options);
        var /** @type {?} */ promise = nodesApi.getDeletedNodes(queryOptions);
        return Observable.Observable
            .fromPromise(promise)
            .catch(handleError);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    DeletedNodesApiService.prototype.handleError = function (error) {
        return Observable.Observable.of(error);
    };
    return DeletedNodesApiService;
}());
DeletedNodesApiService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
DeletedNodesApiService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: UserPreferencesService, },
]; };
var BpmProductVersionModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function BpmProductVersionModel(obj) {
        if (obj) {
            this.edition = obj.edition || null;
            this.majorVersion = obj.majorVersion || null;
            this.revisionVersion = obj.revisionVersion || null;
            this.minorVersion = obj.minorVersion || null;
            this.type = obj.type || null;
        }
    }
    return BpmProductVersionModel;
}());
var EcmProductVersionModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function EcmProductVersionModel(obj) {
        var _this = this;
        this.modules = [];
        if (obj && obj.entry && obj.entry.repository) {
            this.edition = obj.entry.repository.edition || null;
            this.version = new VersionModel(obj.entry.repository.version);
            this.license = new LicenseModel(obj.entry.repository.license);
            this.status = new VersionStatusModel(obj.entry.repository.status);
            if (obj.entry.repository.modules) {
                obj.entry.repository.modules.forEach(function (module) {
                    _this.modules.push(new VersionModuleModel(module));
                });
            }
        }
    }
    return EcmProductVersionModel;
}());
var VersionModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function VersionModel(obj) {
        if (obj) {
            this.major = obj.major || null;
            this.minor = obj.minor || null;
            this.patch = obj.patch || null;
            this.hotfix = obj.hotfix || null;
            this.schema = obj.schema || null;
            this.label = obj.label || null;
            this.display = obj.display || null;
        }
    }
    return VersionModel;
}());
var LicenseModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function LicenseModel(obj) {
        if (obj) {
            this.issuedAt = obj.issuedAt || null;
            this.expiresAt = obj.expiresAt || null;
            this.remainingDays = obj.remainingDays || null;
            this.holder = obj.holder || null;
            this.mode = obj.mode || null;
            this.isClusterEnabled = obj.isClusterEnabled ? true : false;
            this.isCryptodocEnabled = obj.isCryptodocEnabled ? true : false;
        }
    }
    return LicenseModel;
}());
var VersionStatusModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function VersionStatusModel(obj) {
        if (obj) {
            this.isReadOnly = obj.isReadOnly ? true : false;
            this.isAuditEnabled = obj.isAuditEnabled ? true : false;
            this.isQuickShareEnabled = obj.isQuickShareEnabled ? true : false;
            this.isThumbnailGenerationEnabled = obj.isThumbnailGenerationEnabled ? true : false;
        }
    }
    return VersionStatusModel;
}());
var VersionModuleModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function VersionModuleModel(obj) {
        if (obj) {
            this.id = obj.id || null;
            this.title = obj.title || null;
            this.description = obj.description || null;
            this.version = obj.version || null;
            this.installDate = obj.installDate || null;
            this.installState = obj.installState || null;
            this.versionMin = obj.versionMin || null;
            this.versionMax = obj.versionMax || null;
        }
    }
    return VersionModuleModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DiscoveryApiService = /** @class */ (function () {
    /**
     * @param {?} apiService
     */
    function DiscoveryApiService(apiService) {
        this.apiService = apiService;
    }
    /**
     * @return {?}
     */
    DiscoveryApiService.prototype.getEcmProductInfo = function () {
        return Observable.Observable.fromPromise(this.apiService.getInstance().discovery.discoveryApi.getRepositoryInformation())
            .map(function (res) { return new EcmProductVersionModel(res); })
            .catch(this.handleError);
    };
    /**
     * @return {?}
     */
    DiscoveryApiService.prototype.getBpmProductInfo = function () {
        return Observable.Observable.fromPromise(this.apiService.getInstance().activiti.aboutApi.getAppVersion())
            .map(function (res) { return new BpmProductVersionModel(res); })
            .catch(this.handleError);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    DiscoveryApiService.prototype.handleError = function (error) {
        return Observable.Observable.throw(error);
    };
    return DiscoveryApiService;
}());
DiscoveryApiService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
DiscoveryApiService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FavoritesApiService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} preferences
     */
    function FavoritesApiService(apiService, preferences) {
        this.apiService = apiService;
        this.preferences = preferences;
    }
    /**
     * @param {?=} data
     * @return {?}
     */
    FavoritesApiService.remapFavoritesData = function (data) {
        if (data === void 0) { data = {}; }
        var /** @type {?} */ list = (data.list || {});
        var /** @type {?} */ pagination = (list.pagination || {});
        var /** @type {?} */ entries = FavoritesApiService
            .remapFavoriteEntries(list.entries || []);
        return /** @type {?} */ ({
            list: { entries: entries, pagination: pagination }
        });
    };
    /**
     * @param {?} __0
     * @return {?}
     */
    FavoritesApiService.remapEntry = function (_a) {
        var entry = _a.entry;
        entry.properties = {
            'cm:title': entry.title,
            'cm:description': entry.description
        };
        return { entry: entry };
    };
    /**
     * @param {?} entries
     * @return {?}
     */
    FavoritesApiService.remapFavoriteEntries = function (entries) {
        return entries
            .map(function (_a) {
            var target = _a.entry.target;
            return ({
                entry: target.file || target.folder
            });
        })
            .filter(function (_a) {
            var entry = _a.entry;
            return (!!entry);
        })
            .map(FavoritesApiService.remapEntry);
    };
    Object.defineProperty(FavoritesApiService.prototype, "favoritesApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().core.favoritesApi;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} personId
     * @param {?=} options
     * @return {?}
     */
    FavoritesApiService.prototype.getFavorites = function (personId, options) {
        var _a = this, favoritesApi = _a.favoritesApi, handleError = _a.handleError;
        var /** @type {?} */ defaultOptions = {
            maxItems: this.preferences.paginationSize,
            skipCount: 0,
            where: '(EXISTS(target/file) OR EXISTS(target/folder))',
            include: ['properties', 'allowableOperations']
        };
        var /** @type {?} */ queryOptions = Object.assign(defaultOptions, options);
        var /** @type {?} */ promise = favoritesApi
            .getFavorites(personId, queryOptions)
            .then(FavoritesApiService.remapFavoritesData);
        return Observable.Observable
            .fromPromise(promise)
            .catch(handleError);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    FavoritesApiService.prototype.handleError = function (error) {
        return Observable.Observable.of(error);
    };
    return FavoritesApiService;
}());
FavoritesApiService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
FavoritesApiService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: UserPreferencesService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NodesApiService = /** @class */ (function () {
    /**
     * @param {?} api
     * @param {?} preferences
     */
    function NodesApiService(api, preferences) {
        this.api = api;
        this.preferences = preferences;
    }
    Object.defineProperty(NodesApiService.prototype, "nodesApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.api.getInstance().core.nodesApi;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} entity
     * @return {?}
     */
    NodesApiService.prototype.getEntryFromEntity = function (entity) {
        return entity.entry;
    };
    /**
     * @param {?} nodeId
     * @param {?=} options
     * @return {?}
     */
    NodesApiService.prototype.getNode = function (nodeId, options) {
        if (options === void 0) { options = {}; }
        var _a = this, nodesApi = _a.nodesApi, handleError = _a.handleError, getEntryFromEntity = _a.getEntryFromEntity;
        var /** @type {?} */ defaults = {
            include: ['path', 'properties', 'allowableOperations']
        };
        var /** @type {?} */ queryOptions = Object.assign(defaults, options);
        var /** @type {?} */ promise = nodesApi
            .getNode(nodeId, queryOptions)
            .then(getEntryFromEntity);
        return Observable.Observable
            .fromPromise(promise)
            .catch(handleError);
    };
    /**
     * @param {?} nodeId
     * @param {?=} options
     * @return {?}
     */
    NodesApiService.prototype.getNodeChildren = function (nodeId, options) {
        if (options === void 0) { options = {}; }
        var _a = this, nodesApi = _a.nodesApi, handleError = _a.handleError;
        var /** @type {?} */ defaults = {
            maxItems: this.preferences.paginationSize,
            skipCount: 0,
            include: ['path', 'properties', 'allowableOperations']
        };
        var /** @type {?} */ queryOptions = Object.assign(defaults, options);
        var /** @type {?} */ promise = nodesApi
            .getNodeChildren(nodeId, queryOptions);
        return Observable.Observable
            .fromPromise(promise)
            .catch(handleError);
    };
    /**
     * @param {?} parentNodeId
     * @param {?} nodeBody
     * @param {?=} options
     * @return {?}
     */
    NodesApiService.prototype.createNode = function (parentNodeId, nodeBody, options) {
        if (options === void 0) { options = {}; }
        var _a = this, nodesApi = _a.nodesApi, handleError = _a.handleError, getEntryFromEntity = _a.getEntryFromEntity;
        var /** @type {?} */ promise = nodesApi
            .addNode(parentNodeId, nodeBody, options)
            .then(getEntryFromEntity);
        return Observable.Observable.fromPromise(promise).catch(handleError);
    };
    /**
     * @param {?} parentNodeId
     * @param {?} nodeBody
     * @param {?=} options
     * @return {?}
     */
    NodesApiService.prototype.createFolder = function (parentNodeId, nodeBody, options) {
        if (options === void 0) { options = {}; }
        var /** @type {?} */ body = Object.assign({ nodeType: 'cm:folder' }, nodeBody);
        return this.createNode(parentNodeId, body, options);
    };
    /**
     * @param {?} nodeId
     * @param {?} nodeBody
     * @param {?=} options
     * @return {?}
     */
    NodesApiService.prototype.updateNode = function (nodeId, nodeBody, options) {
        if (options === void 0) { options = {}; }
        var _a = this, nodesApi = _a.nodesApi, handleError = _a.handleError, getEntryFromEntity = _a.getEntryFromEntity;
        var /** @type {?} */ promise = nodesApi
            .updateNode(nodeId, nodeBody, options)
            .then(getEntryFromEntity);
        return Observable.Observable.fromPromise(promise).catch(handleError);
    };
    /**
     * @param {?} nodeId
     * @param {?=} options
     * @return {?}
     */
    NodesApiService.prototype.deleteNode = function (nodeId, options) {
        if (options === void 0) { options = {}; }
        var _a = this, nodesApi = _a.nodesApi, handleError = _a.handleError;
        var /** @type {?} */ promise = nodesApi
            .deleteNode(nodeId, options);
        return Observable.Observable
            .fromPromise(promise)
            .catch(handleError);
    };
    /**
     * @param {?} nodeId
     * @return {?}
     */
    NodesApiService.prototype.restoreNode = function (nodeId) {
        var _a = this, nodesApi = _a.nodesApi, handleError = _a.handleError, getEntryFromEntity = _a.getEntryFromEntity;
        var /** @type {?} */ promise = nodesApi
            .restoreNode(nodeId)
            .then(getEntryFromEntity);
        return Observable.Observable
            .fromPromise(promise)
            .catch(handleError);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    NodesApiService.prototype.handleError = function (error) {
        return Observable.Observable.throw(error);
    };
    return NodesApiService;
}());
NodesApiService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
NodesApiService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: UserPreferencesService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var PageTitleService = /** @class */ (function () {
    /**
     * @param {?} titleService
     * @param {?} appConfig
     */
    function PageTitleService(titleService, appConfig) {
        this.titleService = titleService;
        this.appConfig = appConfig;
    }
    /**
     * @param {?=} value
     * @return {?}
     */
    PageTitleService.prototype.setTitle = function (value) {
        if (value === void 0) { value = ''; }
        var /** @type {?} */ name = this.appConfig.get('application.name') || 'Alfresco ADF Application';
        var /** @type {?} */ title = value ? value + " - " + name : "" + name;
        this.titleService.setTitle(title);
    };
    return PageTitleService;
}());
PageTitleService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
PageTitleService.ctorParameters = function () { return [
    { type: platformBrowser.Title, },
    { type: AppConfigService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var PeopleContentService = /** @class */ (function () {
    /**
     * @param {?} apiService
     */
    function PeopleContentService(apiService) {
        this.apiService = apiService;
    }
    Object.defineProperty(PeopleContentService.prototype, "peopleApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().core.peopleApi;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} personId
     * @return {?}
     */
    PeopleContentService.prototype.getPerson = function (personId) {
        var _a = this, peopleApi = _a.peopleApi, handleError = _a.handleError;
        var /** @type {?} */ promise = peopleApi.getPerson(personId);
        return Observable.Observable
            .fromPromise(promise)
            .catch(handleError);
    };
    /**
     * @return {?}
     */
    PeopleContentService.prototype.getCurrentPerson = function () {
        return this.getPerson('-me-');
    };
    /**
     * @param {?} error
     * @return {?}
     */
    PeopleContentService.prototype.handleError = function (error) {
        return Observable.Observable.of(error);
    };
    return PeopleContentService;
}());
PeopleContentService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
PeopleContentService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * Internal service used by Document List component.
 */
var SearchService = /** @class */ (function () {
    /**
     * @param {?} authService
     * @param {?} apiService
     */
    function SearchService(authService, apiService) {
        this.authService = authService;
        this.apiService = apiService;
    }
    /**
     * @param {?} term
     * @param {?=} options
     * @return {?}
     */
    SearchService.prototype.getNodeQueryResults = function (term, options) {
        var _this = this;
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.queriesApi.findNodes(term, options))
            .map(function (res) { /** @type {?} */ return (res); })
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} query
     * @return {?}
     */
    SearchService.prototype.search = function (query) {
        var _this = this;
        var /** @type {?} */ searchQuery = Object.assign(query);
        var /** @type {?} */ promise = this.apiService.getInstance().search.searchApi.search(searchQuery);
        return Observable.Observable
            .fromPromise(promise)
            .catch(function (err) { return _this.handleError(err); });
    };
    /**
     * @param {?} error
     * @return {?}
     */
    SearchService.prototype.handleError = function (error) {
        return Observable.Observable.throw(error || 'Server error');
    };
    return SearchService;
}());
SearchService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
SearchService.ctorParameters = function () { return [
    { type: AuthenticationService, },
    { type: AlfrescoApiService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var SharedLinksApiService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} preferences
     */
    function SharedLinksApiService(apiService, preferences) {
        this.apiService = apiService;
        this.preferences = preferences;
    }
    Object.defineProperty(SharedLinksApiService.prototype, "sharedLinksApi", {
        /**
         * @return {?}
         */
        get: function () {
            return this.apiService.getInstance().core.sharedlinksApi;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?=} options
     * @return {?}
     */
    SharedLinksApiService.prototype.getSharedLinks = function (options) {
        if (options === void 0) { options = {}; }
        var _a = this, sharedLinksApi = _a.sharedLinksApi, handleError = _a.handleError;
        var /** @type {?} */ defaultOptions = {
            maxItems: this.preferences.paginationSize,
            skipCount: 0,
            include: ['properties', 'allowableOperations']
        };
        var /** @type {?} */ queryOptions = Object.assign({}, defaultOptions, options);
        var /** @type {?} */ promise = sharedLinksApi
            .findSharedLinks(queryOptions);
        return Observable.Observable
            .fromPromise(promise)
            .catch(handleError);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    SharedLinksApiService.prototype.handleError = function (error) {
        return Observable.Observable.of(error);
    };
    return SharedLinksApiService;
}());
SharedLinksApiService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
SharedLinksApiService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: UserPreferencesService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var SiteContentsModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function SiteContentsModel(obj) {
        if (obj) {
            this.id = obj.id || null;
            this.folderId = obj.folderId || null;
        }
    }
    return SiteContentsModel;
}());
var SiteMembersModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function SiteMembersModel(obj) {
        this.emailNotificationsEnabled = false;
        this.enable = false;
        if (obj) {
            this.role = obj.role;
            this.firstName = obj.firstName || null;
            this.emailNotificationsEnabled = obj.emailNotificationsEnabled;
            this.company = obj.company || null;
            this.id = obj.id || null;
            this.enable = obj.enable;
            this.email = obj.email;
        }
    }
    return SiteMembersModel;
}());
var SiteModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function SiteModel(obj) {
        var _this = this;
        this.contents = [];
        this.members = [];
        if (obj && obj.entry) {
            this.role = obj.entry.role || null;
            this.visibility = obj.entry.visibility || null;
            this.guid = obj.entry.guid || null;
            this.description = obj.entry.description || null;
            this.id = obj.entry.id || null;
            this.preset = obj.entry.preset;
            this.title = obj.entry.title;
            this.pagination = obj.pagination || null;
            if (obj.relations && obj.relations.containers) {
                obj.relations.containers.list.entries.forEach(function (content) {
                    _this.contents.push(new SiteContentsModel(content.entry));
                });
            }
            if (obj.relations && obj.relations.members) {
                obj.relations.members.list.entries.forEach(function (member) {
                    _this.members.push(new SiteMembersModel(member.entry));
                });
            }
        }
    }
    return SiteModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var SitesService = /** @class */ (function () {
    /**
     * @param {?} apiService
     */
    function SitesService(apiService) {
        this.apiService = apiService;
    }
    /**
     * @param {?=} opts
     * @return {?}
     */
    SitesService.prototype.getSites = function (opts) {
        var _this = this;
        if (opts === void 0) { opts = {}; }
        var /** @type {?} */ defaultOptions = {
            skipCount: 0,
            include: ['properties']
        };
        var /** @type {?} */ queryOptions = Object.assign({}, defaultOptions, opts);
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.sitesApi.getSites(queryOptions))
            .map(function (res) { return _this.convertToModel(res); })
            .catch(this.handleError);
    };
    /**
     * @param {?} siteId
     * @param {?=} opts
     * @return {?}
     */
    SitesService.prototype.getSite = function (siteId, opts) {
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.sitesApi.getSite(siteId, opts))
            .map(function (res) { return new SiteModel(res); })
            .catch(this.handleError);
    };
    /**
     * @param {?} siteId
     * @param {?=} permanentFlag
     * @return {?}
     */
    SitesService.prototype.deleteSite = function (siteId, permanentFlag) {
        if (permanentFlag === void 0) { permanentFlag = true; }
        var /** @type {?} */ options = {};
        options.permanent = permanentFlag;
        return Observable.Observable.fromPromise(this.apiService.getInstance().core.sitesApi.deleteSite(siteId, options)
            .catch(this.handleError));
    };
    /**
     * @param {?} siteId
     * @return {?}
     */
    SitesService.prototype.getSiteContent = function (siteId) {
        return this.getSite(siteId, { relations: ['containers'] });
    };
    /**
     * @param {?} siteId
     * @return {?}
     */
    SitesService.prototype.getSiteMembers = function (siteId) {
        return this.getSite(siteId, { relations: ['members'] });
    };
    /**
     * @param {?} error
     * @return {?}
     */
    SitesService.prototype.handleError = function (error) {
        console.error(error);
        return Observable.Observable.throw(error || 'Server error');
    };
    /**
     * @param {?} response
     * @return {?}
     */
    SitesService.prototype.convertToModel = function (response) {
        var /** @type {?} */ convertedList = [];
        if (response &&
            response.list &&
            response.list.entries &&
            response.list.entries.length > 0) {
            response.list.entries.forEach(function (element) {
                element.pagination = response.list.pagination;
                convertedList.push(new SiteModel(element));
            });
        }
        return convertedList;
    };
    return SitesService;
}());
SitesService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
SitesService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
]; };
var ComponentTranslationModel = /** @class */ (function () {
    /**
     * @param {?=} obj
     */
    function ComponentTranslationModel(obj) {
        this.name = obj && obj.name;
        this.path = obj && obj.path;
        this.json = obj && obj.json || [];
    }
    return ComponentTranslationModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var TranslateLoaderService = /** @class */ (function () {
    /**
     * @param {?} http
     * @param {?} logService
     */
    function TranslateLoaderService(http$$1, logService) {
        this.http = http$$1;
        this.logService = logService;
        this.prefix = 'i18n';
        this.suffix = '.json';
        this.providers = [];
        this.queue = [];
    }
    /**
     * @param {?} name
     * @param {?} path
     * @return {?}
     */
    TranslateLoaderService.prototype.registerProvider = function (name, path) {
        var /** @type {?} */ registered = this.providers.find(function (provider) { return provider.name === name; });
        if (registered) {
            registered.path = path;
        }
        else {
            this.providers.push(new ComponentTranslationModel({ name: name, path: path }));
        }
    };
    /**
     * @param {?} name
     * @return {?}
     */
    TranslateLoaderService.prototype.providerRegistered = function (name) {
        return this.providers.find(function (x) { return x.name === name; }) ? true : false;
    };
    /**
     * @param {?} lang
     * @return {?}
     */
    TranslateLoaderService.prototype.getComponentToFetch = function (lang) {
        var _this = this;
        var /** @type {?} */ observableBatch = [];
        if (!this.queue[lang]) {
            this.queue[lang] = [];
        }
        this.providers.forEach(function (component) {
            if (!_this.isComponentInQueue(lang, component.name)) {
                _this.queue[lang].push(component.name);
                var /** @type {?} */ currentObserv = Observable.Observable.create(function (observer) {
                    _this.http.get(component.path + "/" + _this.prefix + "/" + lang + _this.suffix)
                        .map(function (res) {
                        component.json[lang] = res;
                    }).subscribe(function (result) {
                        observer.next(result);
                        observer.complete();
                    }, function () {
                        observer.next('');
                        observer.complete();
                    });
                });
                observableBatch.push(currentObserv);
            }
        });
        return observableBatch;
    };
    /**
     * @param {?} lang
     * @return {?}
     */
    TranslateLoaderService.prototype.init = function (lang) {
        if (this.queue[lang] === undefined) {
            this.queue[lang] = [];
        }
    };
    /**
     * @param {?} lang
     * @param {?} name
     * @return {?}
     */
    TranslateLoaderService.prototype.isComponentInQueue = function (lang, name) {
        return (this.queue[lang] || []).find(function (x) { return x === name; }) ? true : false;
    };
    /**
     * @param {?} lang
     * @return {?}
     */
    TranslateLoaderService.prototype.getFullTranslationJSON = function (lang) {
        var /** @type {?} */ result = {};
        this.providers
            .slice(0)
            .sort(function (a, b) {
            if (a.name === 'app') {
                return 1;
            }
            if (b.name === 'app') {
                return -1;
            }
            return a.name.localeCompare(b.name);
        })
            .forEach(function (model) {
            if (model.json && model.json[lang]) {
                result = ObjectUtils.merge(result, model.json[lang]);
            }
        });
        return result;
    };
    /**
     * @param {?} lang
     * @return {?}
     */
    TranslateLoaderService.prototype.getTranslation = function (lang) {
        var _this = this;
        var /** @type {?} */ observableBatch = this.getComponentToFetch(lang);
        return Observable.Observable.create(function (observer) {
            if (observableBatch.length > 0) {
                Observable.Observable.forkJoin(observableBatch).subscribe(function () {
                    var /** @type {?} */ fullTranslation = _this.getFullTranslationJSON(lang);
                    if (fullTranslation) {
                        observer.next(fullTranslation);
                    }
                    observer.complete();
                }, function (err) {
                    _this.logService.error(err);
                });
            }
            else {
                var /** @type {?} */ fullTranslation = _this.getFullTranslationJSON(lang);
                if (fullTranslation) {
                    observer.next(fullTranslation);
                }
            }
        });
    };
    return TranslateLoaderService;
}());
TranslateLoaderService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
TranslateLoaderService.ctorParameters = function () { return [
    { type: http.HttpClient, },
    { type: LogService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var minimatch = minimatch___default__default || minimatch___default;
var UploadService = /** @class */ (function () {
    /**
     * @param {?} apiService
     * @param {?} appConfigService
     */
    function UploadService(apiService, appConfigService) {
        this.apiService = apiService;
        this.appConfigService = appConfigService;
        this.queue = [];
        this.cache = {};
        this.totalComplete = 0;
        this.totalAborted = 0;
        this.totalError = 0;
        this.activeTask = null;
        this.excludedFileList = [];
        this.queueChanged = new Subject.Subject();
        this.fileUpload = new Subject.Subject();
        this.fileUploadStarting = new Subject.Subject();
        this.fileUploadCancelled = new Subject.Subject();
        this.fileUploadProgress = new Subject.Subject();
        this.fileUploadAborted = new Subject.Subject();
        this.fileUploadError = new Subject.Subject();
        this.fileUploadComplete = new Subject.Subject();
        this.fileUploadDeleted = new Subject.Subject();
        this.fileDeleted = new Subject.Subject();
        this.excludedFileList = this.appConfigService.get('files.excluded');
    }
    /**
     * Checks whether the service is uploading a file.
     *
     *
     * \@memberof UploadService
     * @return {?}
     */
    UploadService.prototype.isUploading = function () {
        return this.activeTask ? true : false;
    };
    /**
     * Returns the file Queue
     *
     * @return {?}
     */
    UploadService.prototype.getQueue = function () {
        return this.queue;
    };
    /**
     * Add files to the uploading queue to be uploaded.
     *
     * Examples:
     *  addToQueue(file); // pass one file
     *  addToQueue(file1, file2, file3); // pass multiple files
     *  addToQueue(...[file1, file2, file3]); // pass an array of files
     * @param {...?} files
     * @return {?}
     */
    UploadService.prototype.addToQueue = function () {
        var _this = this;
        var files = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            files[_i] = arguments[_i];
        }
        var /** @type {?} */ allowedFiles = files.filter(function (f) { return _this.filterElement(f); });
        this.queue = this.queue.concat(allowedFiles);
        this.queueChanged.next(this.queue);
        return allowedFiles;
    };
    /**
     * @param {?} file
     * @return {?}
     */
    UploadService.prototype.filterElement = function (file) {
        var /** @type {?} */ isAllowed = true;
        if (this.excludedFileList) {
            isAllowed = this.excludedFileList.filter(function (expr) { return minimatch(file.name, expr); }).length === 0;
        }
        return isAllowed;
    };
    /**
     * Pick all the files in the queue that are not been uploaded yet and upload it into the directory folder.
     *
     *
     * \@memberof UploadService
     * @param {?} emitter
     * @return {?}
     */
    UploadService.prototype.uploadFilesInTheQueue = function (emitter) {
        var _this = this;
        if (!this.activeTask) {
            var /** @type {?} */ file = this.queue.find(function (f) { return f.status === FileUploadStatus.Pending; });
            if (file) {
                this.onUploadStarting(file);
                var /** @type {?} */ promise = this.beginUpload(file, emitter);
                this.activeTask = promise;
                this.cache[file.id] = promise;
                var /** @type {?} */ next_1 = function () {
                    _this.activeTask = null;
                    setTimeout(function () { return _this.uploadFilesInTheQueue(emitter); }, 100);
                };
                promise.next = next_1;
                promise.then(function () { return next_1(); }, function () { return next_1(); });
            }
        }
    };
    /**
     * @param {...?} files
     * @return {?}
     */
    UploadService.prototype.cancelUpload = function () {
        var _this = this;
        var files = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            files[_i] = arguments[_i];
        }
        files.forEach(function (file) {
            var /** @type {?} */ promise = _this.cache[file.id];
            if (promise) {
                promise.abort();
                delete _this.cache[file.id];
            }
            else {
                var /** @type {?} */ performAction = _this.getAction(file);
                performAction();
            }
        });
    };
    /**
     * @return {?}
     */
    UploadService.prototype.clearQueue = function () {
        this.queue = [];
        this.totalComplete = 0;
        this.totalAborted = 0;
        this.totalError = 0;
    };
    /**
     * @param {?} file
     * @return {?}
     */
    UploadService.prototype.getUploadPromise = function (file) {
        var /** @type {?} */ opts = {
            renditions: 'doclib'
        };
        if (file.options.newVersion === true) {
            opts.overwrite = true;
            opts.majorVersion = true;
        }
        else {
            opts.autoRename = true;
        }
        return this.apiService.getInstance().upload.uploadFile(file.file, file.options.path, file.options.parentId, null, opts);
    };
    /**
     * @param {?} file
     * @param {?} emitter
     * @return {?}
     */
    UploadService.prototype.beginUpload = function (file, /* @deprecated */ emitter) {
        var _this = this;
        var /** @type {?} */ promise = this.getUploadPromise(file);
        promise.on('progress', function (progress) {
            _this.onUploadProgress(file, progress);
        })
            .on('abort', function () {
            _this.onUploadAborted(file);
            emitter.emit({ value: 'File aborted' });
        })
            .on('error', function (err) {
            _this.onUploadError(file, err);
            emitter.emit({ value: 'Error file uploaded' });
        })
            .on('success', function (data) {
            _this.onUploadComplete(file, data);
            emitter.emit({ value: data });
        })
            .catch(function (err) {
            throw err;
        });
        return promise;
    };
    /**
     * @param {?} file
     * @return {?}
     */
    UploadService.prototype.onUploadStarting = function (file) {
        if (file) {
            file.status = FileUploadStatus.Starting;
            var /** @type {?} */ event = new FileUploadEvent(file, FileUploadStatus.Starting);
            this.fileUpload.next(event);
            this.fileUploadStarting.next(event);
        }
    };
    /**
     * @param {?} file
     * @param {?} progress
     * @return {?}
     */
    UploadService.prototype.onUploadProgress = function (file, progress) {
        if (file) {
            file.progress = progress;
            file.status = FileUploadStatus.Progress;
            var /** @type {?} */ event = new FileUploadEvent(file, FileUploadStatus.Progress);
            this.fileUpload.next(event);
            this.fileUploadProgress.next(event);
        }
    };
    /**
     * @param {?} file
     * @param {?} error
     * @return {?}
     */
    UploadService.prototype.onUploadError = function (file, error) {
        if (file) {
            file.status = FileUploadStatus.Error;
            this.totalError++;
            var /** @type {?} */ promise = this.cache[file.id];
            if (promise) {
                delete this.cache[file.id];
            }
            var /** @type {?} */ event = new FileUploadErrorEvent(file, error, this.totalError);
            this.fileUpload.next(event);
            this.fileUploadError.next(event);
        }
    };
    /**
     * @param {?} file
     * @param {?} data
     * @return {?}
     */
    UploadService.prototype.onUploadComplete = function (file, data) {
        if (file) {
            file.status = FileUploadStatus.Complete;
            file.data = data;
            this.totalComplete++;
            var /** @type {?} */ promise = this.cache[file.id];
            if (promise) {
                delete this.cache[file.id];
            }
            var /** @type {?} */ event = new FileUploadCompleteEvent(file, this.totalComplete, data, this.totalAborted);
            this.fileUpload.next(event);
            this.fileUploadComplete.next(event);
        }
    };
    /**
     * @param {?} file
     * @return {?}
     */
    UploadService.prototype.onUploadAborted = function (file) {
        if (file) {
            file.status = FileUploadStatus.Aborted;
            this.totalAborted++;
            var /** @type {?} */ promise = this.cache[file.id];
            if (promise) {
                delete this.cache[file.id];
            }
            var /** @type {?} */ event = new FileUploadEvent(file, FileUploadStatus.Aborted);
            this.fileUpload.next(event);
            this.fileUploadAborted.next(event);
            promise.next();
        }
    };
    /**
     * @param {?} file
     * @return {?}
     */
    UploadService.prototype.onUploadCancelled = function (file) {
        if (file) {
            file.status = FileUploadStatus.Cancelled;
            var /** @type {?} */ event = new FileUploadEvent(file, FileUploadStatus.Cancelled);
            this.fileUpload.next(event);
            this.fileUploadCancelled.next(event);
        }
    };
    /**
     * @param {?} file
     * @return {?}
     */
    UploadService.prototype.onUploadDeleted = function (file) {
        if (file) {
            file.status = FileUploadStatus.Deleted;
            this.totalComplete--;
            var /** @type {?} */ event = new FileUploadDeleteEvent(file, this.totalComplete);
            this.fileUpload.next(event);
            this.fileUploadDeleted.next(event);
        }
    };
    /**
     * @param {?} file
     * @return {?}
     */
    UploadService.prototype.getAction = function (file) {
        var _this = this;
        var /** @type {?} */ actions = (_a = {}, _a[FileUploadStatus.Pending] = function () { return _this.onUploadCancelled(file); }, _a[FileUploadStatus.Deleted] = function () { return _this.onUploadDeleted(file); }, _a[FileUploadStatus.Error] = function () { return _this.onUploadError(file, null); }, _a);
        return actions[file.status];
        var _a;
    };
    return UploadService;
}());
UploadService.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
UploadService.ctorParameters = function () { return [
    { type: AlfrescoApiService, },
    { type: AppConfigService, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ServiceModule = /** @class */ (function () {
    function ServiceModule() {
    }
    return ServiceModule;
}());
ServiceModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [],
                declarations: [],
                providers: [
                    AuthenticationService,
                    AlfrescoApiService,
                    SettingsService,
                    ContentService,
                    AuthGuard,
                    AuthGuardEcm,
                    AuthGuardBpm,
                    AppsProcessService,
                    PageTitleService,
                    StorageService,
                    CookieService,
                    RenditionsService,
                    NotificationService,
                    LogService,
                    TranslationService,
                    TranslateLoaderService,
                    ThumbnailService,
                    UploadService,
                    CardItemTypeService,
                    CardViewUpdateService,
                    UserPreferencesService,
                    HighlightTransformService,
                    DeletedNodesApiService,
                    FavoritesApiService,
                    NodesApiService,
                    PeopleContentService,
                    PeopleProcessService,
                    SearchService,
                    SharedLinksApiService,
                    SitesService,
                    DiscoveryApiService,
                    CommentProcessService
                ],
                exports: []
            },] },
];
/**
 * @nocollapse
 */
ServiceModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @param {?} http
 * @param {?} logService
 * @return {?}
 */
function createTranslateLoader(http$$1, logService) {
    return new TranslateLoaderService(http$$1, logService);
}
var CoreModule = /** @class */ (function () {
    function CoreModule() {
    }
    return CoreModule;
}());
CoreModule.decorators = [
    { type: core.NgModule, args: [{
                imports: [
                    ViewerModule,
                    PipeModule,
                    common.CommonModule,
                    DirectiveModule,
                    forms.FormsModule,
                    forms.ReactiveFormsModule,
                    http.HttpClientModule,
                    animations.BrowserAnimationsModule,
                    HostSettingsModule,
                    UserInfoModule,
                    MaterialModule,
                    AppConfigModule,
                    PaginationModule,
                    ToolbarModule,
                    ContextMenuModule,
                    CardViewModule,
                    CollapsableModule,
                    ServiceModule,
                    FormModule,
                    core$1.TranslateModule.forRoot({
                        loader: {
                            provide: core$1.TranslateLoader,
                            useFactory: (createTranslateLoader),
                            deps: [http.HttpClient, LogService]
                        }
                    })
                ],
                providers: [
                    {
                        provide: TRANSLATION_PROVIDER,
                        multi: true,
                        useValue: {
                            name: 'adf-core',
                            source: 'assets/adf-core'
                        }
                    },
                    TranslationService
                ],
                exports: [
                    AppConfigModule,
                    animations.BrowserAnimationsModule,
                    common.CommonModule,
                    forms.FormsModule,
                    forms.ReactiveFormsModule,
                    core$1.TranslateModule,
                    ContextMenuModule,
                    CardViewModule,
                    CollapsableModule,
                    PaginationModule,
                    ToolbarModule,
                    LoginModule,
                    UserInfoModule,
                    LanguageMenuModule,
                    InfoDrawerModule,
                    DataColumnModule,
                    DataTableModule,
                    HostSettingsModule,
                    ServiceModule,
                    ViewerModule,
                    PipeModule,
                    DirectiveModule,
                    FormModule,
                    MaterialModule
                ]
            },] },
];
/**
 * @nocollapse
 */
CoreModule.ctorParameters = function () { return []; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @abstract
 */
var CardViewBaseItemModel = /** @class */ (function () {
    /**
     * @param {?} obj
     */
    function CardViewBaseItemModel(obj) {
        this.label = obj.label || '';
        this.value = obj.value;
        this.key = obj.key;
        this.default = obj.default;
        this.editable = !!obj.editable;
        this.clickable = !!obj.clickable;
    }
    /**
     * @return {?}
     */
    CardViewBaseItemModel.prototype.isEmpty = function () {
        return this.value === undefined || this.value === null || this.value === '';
    };
    return CardViewBaseItemModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CardViewTextItemModel = /** @class */ (function (_super) {
    __extends(CardViewTextItemModel, _super);
    /**
     * @param {?} obj
     */
    function CardViewTextItemModel(obj) {
        var _this = _super.call(this, obj) || this;
        _this.type = 'text';
        _this.multiline = !!obj.multiline;
        _this.pipes = obj.pipes || [];
        return _this;
    }
    Object.defineProperty(CardViewTextItemModel.prototype, "displayValue", {
        /**
         * @return {?}
         */
        get: function () {
            return this.applyPipes(this.value);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} displayValue
     * @return {?}
     */
    CardViewTextItemModel.prototype.applyPipes = function (displayValue) {
        if (this.pipes.length) {
            displayValue = this.pipes.reduce(function (accumulator, _a) {
                var pipe = _a.pipe, params = _a.params;
                return pipe.transform.apply(pipe, [accumulator].concat(params));
            }, displayValue);
        }
        return displayValue;
    };
    return CardViewTextItemModel;
}(CardViewBaseItemModel));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CardViewMapItemModel = /** @class */ (function (_super) {
    __extends(CardViewMapItemModel, _super);
    /**
     * @param {?} obj
     */
    function CardViewMapItemModel(obj) {
        var _this = _super.call(this, obj) || this;
        _this.type = 'map';
        return _this;
    }
    Object.defineProperty(CardViewMapItemModel.prototype, "displayValue", {
        /**
         * @return {?}
         */
        get: function () {
            if (this.value && this.value.size > 0) {
                return this.value.values().next().value;
            }
            else {
                return this.default;
            }
        },
        enumerable: true,
        configurable: true
    });
    return CardViewMapItemModel;
}(CardViewBaseItemModel));
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 *
 * This object represent the basic structure of a card view.
 *
 *
 * @returns {CardViewDateItemModel} .
 */
var CardViewDateItemModel = /** @class */ (function (_super) {
    __extends(CardViewDateItemModel, _super);
    /**
     * @param {?} obj
     */
    function CardViewDateItemModel(obj) {
        var _this = _super.call(this, obj) || this;
        _this.type = 'date';
        _this.format = obj.format || 'MMM DD YYYY';
        return _this;
    }
    Object.defineProperty(CardViewDateItemModel.prototype, "displayValue", {
        /**
         * @return {?}
         */
        get: function () {
            if (!this.value) {
                return this.default;
            }
            else {
                return moment(this.value).format(this.format);
            }
        },
        enumerable: true,
        configurable: true
    });
    return CardViewDateItemModel;
}(CardViewBaseItemModel));
var PermissionsEnum = /** @class */ (function (_super) {
    __extends(PermissionsEnum, _super);
    function PermissionsEnum() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return PermissionsEnum;
}(String));
PermissionsEnum.DELETE = 'delete';
PermissionsEnum.UPDATE = 'update';
PermissionsEnum.CREATE = 'create';
PermissionsEnum.UPDATEPERMISSIONS = 'updatePermissions';
PermissionsEnum.NOT_DELETE = '!delete';
PermissionsEnum.NOT_UPDATE = '!update';
PermissionsEnum.NOT_CREATE = '!create';
PermissionsEnum.NOT_UPDATEPERMISSIONS = '!updatePermissions';
var EcmCompanyModel = /** @class */ (function () {
    function EcmCompanyModel() {
    }
    return EcmCompanyModel;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AlfrescoApiMock = /** @class */ (function () {
    function AlfrescoApiMock() {
    }
    /**
     * @param {?} username
     * @param {?} password
     * @return {?}
     */
    AlfrescoApiMock.prototype.login = function (username, password) {
        return new Promise(function (resolve) {
            resolve('TICKET_4479f4d3bb155195879bfbb8d5206f433488a1b1');
        });
    };
    /**
     * @return {?}
     */
    AlfrescoApiMock.prototype.logout = function () {
        return new Promise(function (resolve) {
            resolve('logout');
        });
    };
    /**
     * @return {?}
     */
    AlfrescoApiMock.prototype.changeConfig = function () {
    };
    return AlfrescoApiMock;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AppConfigServiceMock = /** @class */ (function (_super) {
    __extends(AppConfigServiceMock, _super);
    /**
     * @param {?} http
     */
    function AppConfigServiceMock(http$$1) {
        var _this = _super.call(this, http$$1) || this;
        _this.config = {
            application: {
                name: 'Alfresco ADF Application'
            },
            ecmHost: 'http://{hostname}{:port}/ecm',
            bpmHost: 'http://{hostname}{:port}/bpm',
            logLevel: 'silent'
        };
        return _this;
    }
    /**
     * @return {?}
     */
    AppConfigServiceMock.prototype.load = function () {
        var _this = this;
        return new Promise(function (resolve) {
            resolve(_this.config);
        });
    };
    return AppConfigServiceMock;
}(AppConfigService));
AppConfigServiceMock.decorators = [
    { type: core.Injectable },
];
/**
 * @nocollapse
 */
AppConfigServiceMock.ctorParameters = function () { return [
    { type: http.HttpClient, },
]; };
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fakeApps = {
    size: 2, total: 2, start: 0,
    data: [
        {
            id: 1, defaultAppId: null, name: 'Sales-Fakes-App', description: 'desc-fake1', modelId: 22,
            theme: 'theme-1-fake', icon: 'glyphicon-asterisk', 'deploymentId': '111', 'tenantId': null
        },
        {
            id: 2, defaultAppId: null, name: 'health-care-Fake', description: 'desc-fake2', modelId: 33,
            theme: 'theme-2-fake', icon: 'glyphicon-asterisk', 'deploymentId': '444', 'tenantId': null
        }
    ]
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AuthenticationMock /*extends AuthenticationService*/ = /** @class */ (function () {
    function AuthenticationMock() {
        this.redirectUrl = '';
    }
    /**
     * @param {?} url
     * @return {?}
     */
    AuthenticationMock.prototype.setRedirectUrl = function (url) {
        this.redirectUrl = url;
    };
    /**
     * @return {?}
     */
    AuthenticationMock.prototype.getRedirectUrl = function () {
        return this.redirectUrl;
    };
    /**
     * @param {?} username
     * @param {?} password
     * @return {?}
     */
    AuthenticationMock.prototype.login = function (username, password) {
        if (username === 'fake-username' && password === 'fake-password') {
            return Observable.Observable.of({ type: 'type', ticket: 'ticket' });
        }
        if (username === 'fake-username-CORS-error' && password === 'fake-password') {
            return Observable.Observable.throw({
                error: {
                    crossDomain: true,
                    message: 'ERROR: the network is offline, Origin is not allowed by Access-Control-Allow-Origin'
                }
            });
        }
        if (username === 'fake-username-CSRF-error' && password === 'fake-password') {
            return Observable.Observable.throw({ message: 'ERROR: Invalid CSRF-token', status: 403 });
        }
        if (username === 'fake-username-ECM-access-error' && password === 'fake-password') {
            return Observable.Observable.throw({ message: 'ERROR: 00170728 Access Denied.  The system is currently in read-only mode', status: 403 });
        }
        return Observable.Observable.throw('Fake server error');
    };
    return AuthenticationMock;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fakeBpmUserNoImage = {
    apps: [],
    capabilities: 'fake-capability',
    company: 'fake-company',
    created: 'fake-create-date',
    email: 'fakeBpm@fake.com',
    externalId: 'fake-external-id',
    firstName: 'fake-first-name',
    lastName: 'fake-last-name',
    fullname: 'fake-full-name',
    groups: [],
    id: 'fake-id',
    lastUpdate: 'fake-update-date',
    latestSyncTimeStamp: 'fake-timestamp',
    password: 'fake-password',
    pictureId: undefined,
    status: 'fake-status',
    tenantId: 'fake-tenant-id',
    tenantName: 'fake-tenant-name',
    tenantPictureId: 'fake-tenant-picture-id',
    type: 'fake-type'
};
var fakeBpmUser = {
    apps: [],
    capabilities: null,
    company: 'fake-company',
    created: 'fake-create-date',
    email: 'fakeBpm@fake.com',
    externalId: 'fake-external-id',
    firstName: 'fake-bpm-first-name',
    lastName: 'fake-bpm-last-name',
    fullname: 'fake-bpm-full-name',
    groups: [],
    id: 'fake-id',
    lastUpdate: 'fake-update-date',
    latestSyncTimeStamp: 'fake-timestamp',
    password: 'fake-password',
    pictureId: 12,
    status: 'fake-status',
    tenantId: 'fake-tenant-id',
    tenantName: 'fake-tenant-name',
    tenantPictureId: 'fake-tenant-picture-id',
    type: 'fake-type'
};
var fakeBpmEditedUser = {
    apps: [],
    capabilities: 'fake-capability',
    company: 'fake-company',
    created: 'fake-create-date',
    email: 'fakeBpm@fake.com',
    externalId: 'fake-external-id',
    firstName: 'fake-first-name',
    lastName: 'fake-last-name',
    fullname: 'fake-full-name',
    groups: [],
    id: 'fake-id',
    lastUpdate: 'fake-update-date',
    latestSyncTimeStamp: 'fake-timestamp',
    password: 'fake-password',
    pictureId: 'src/assets/images/bpmImg.gif',
    status: 'fake-status',
    tenantId: 'fake-tenant-id',
    tenantName: 'fake-tenant-name',
    tenantPictureId: 'fake-tenant-picture-id',
    type: 'fake-type'
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fakeUser1 = { id: 1, email: 'fake-email@dom.com', firstName: 'firstName', lastName: 'lastName' };
var fakeUser2 = { id: 1001, email: 'some-one@somegroup.com', firstName: 'some', lastName: 'one' };
var fakeTasksComment = {
    size: 2, total: 2, start: 0,
    data: [
        {
            id: 1, message: 'fake-message-1', created: '', createdBy: fakeUser1
        },
        {
            id: 2, message: 'fake-message-2', created: '', createdBy: fakeUser1
        }
    ]
};
var fakeProcessComment = new CommentProcessModel({ id: 1, message: 'Test', created: new Date('2016-11-10T03:37:30.010+0000'), createdBy: new UserProcessModel({
        id: 13,
        firstName: 'Wilbur',
        lastName: 'Adams',
        email: 'wilbur@app.com'
    }) });
var CookieServiceMock = /** @class */ (function () {
    function CookieServiceMock() {
    }
    /**
     * @param {?} key
     * @return {?}
     */
    CookieServiceMock.prototype.getItem = function (key) {
        return this[key] && this[key].data || null;
    };
    /**
     * @param {?} key
     * @param {?} data
     * @param {?} expiration
     * @param {?} path
     * @return {?}
     */
    CookieServiceMock.prototype.setItem = function (key, data, expiration, path) {
        this[key] = { data: data, expiration: expiration, path: path };
    };
    return CookieServiceMock;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fakeEcmCompany = {
    organization: 'company-fake-name',
    address1: 'fake-address-1',
    address2: 'fake-address-2',
    address3: 'fake-address-3',
    postcode: 'fAk1',
    telephone: '00000000',
    fax: '11111111',
    email: 'fakeCompany@fake.com'
};
var fakeEcmUser = {
    id: 'fake-id',
    firstName: 'fake-ecm-first-name',
    lastName: 'fake-ecm-last-name',
    description: 'i am a fake user for test',
    avatarId: 'fake-avatar-id',
    email: 'fakeEcm@ecmUser.com',
    skypeId: 'fake-skype-id',
    googleId: 'fake-googleId-id',
    instantMessageId: 'fake-instantMessageId-id',
    company: null,
    jobTitle: 'job-ecm-test',
    location: 'fake location',
    mobile: '000000000',
    telephone: '11111111',
    statusUpdatedAt: 'fake-date',
    userStatus: 'active',
    enabled: true,
    emailNotificationsEnabled: true
};
var fakeEcmUserNoImage = {
    id: 'fake-id',
    firstName: 'fake-first-name',
    lastName: 'fake-last-name',
    description: 'i am a fake user for test',
    avatarId: null,
    email: 'fakeEcm@ecmUser.com',
    skypeId: 'fake-skype-id',
    googleId: 'fake-googleId-id',
    instantMessageId: 'fake-instantMessageId-id',
    company: null,
    jobTitle: null,
    location: 'fake location',
    mobile: '000000000',
    telephone: '11111111',
    statusUpdatedAt: 'fake-date',
    userStatus: 'active',
    enabled: true,
    emailNotificationsEnabled: true
};
var fakeEcmEditedUser = {
    id: 'fake-id',
    firstName: null,
    lastName: 'fake-last-name',
    description: 'i am a fake user for test',
    avatarId: 'fake-avatar-id',
    email: 'fakeEcm@ecmUser.com',
    skypeId: 'fake-skype-id',
    googleId: 'fake-googleId-id',
    instantMessageId: 'fake-instantMessageId-id',
    company: null,
    jobTitle: 'test job',
    location: 'fake location',
    mobile: '000000000',
    telephone: '11111111',
    statusUpdatedAt: 'fake-date',
    userStatus: 'active',
    enabled: true,
    emailNotificationsEnabled: true
};
var EventMock = /** @class */ (function () {
    function EventMock() {
    }
    /**
     * @param {?} key
     * @return {?}
     */
    EventMock.keyDown = function (key) {
        var /** @type {?} */ event = document.createEvent('Event');
        event.keyCode = key;
        event.initEvent('keydown');
        document.dispatchEvent(event);
    };
    /**
     * @return {?}
     */
    EventMock.resizeMobileView = function () {
        // todo: no longer compiles with TS 2.0.2 as innerWidth/innerHeight are readonly fields
        /*
        window.innerWidth = 320;
        window.innerHeight = 568;
        */
        window.dispatchEvent(new Event('resize'));
    };
    return EventMock;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fakeRedition = {
    'entry': {
        'id': 'pdf',
        'content': { 'mimeType': 'application/pdf', 'mimeTypeName': 'Adobe PDF Document' },
        'status': 'NOT_CREATED'
    }
};
var fakeReditionCreated = {
    'entry': {
        'id': 'pdf',
        'content': { 'mimeType': 'application/pdf', 'mimeTypeName': 'Adobe PDF Document' },
        'status': 'CREATED'
    }
};
var fakeReditionsList = {
    'list': {
        'pagination': {
            'count': 6,
            'hasMoreItems': false,
            'totalItems': 6,
            'skipCount': 0,
            'maxItems': 100
        },
        'entries': [{
                'entry': {
                    'id': 'avatar',
                    'content': { 'mimeType': 'image/png', 'mimeTypeName': 'PNG Image' },
                    'status': 'NOT_CREATED'
                }
            }, {
                'entry': {
                    'id': 'avatar32',
                    'content': { 'mimeType': 'image/png', 'mimeTypeName': 'PNG Image' },
                    'status': 'NOT_CREATED'
                }
            }, {
                'entry': {
                    'id': 'doclib',
                    'content': { 'mimeType': 'image/png', 'mimeTypeName': 'PNG Image' },
                    'status': 'NOT_CREATED'
                }
            }, {
                'entry': {
                    'id': 'imgpreview',
                    'content': { 'mimeType': 'image/jpeg', 'mimeTypeName': 'JPEG Image' },
                    'status': 'NOT_CREATED'
                }
            }, {
                'entry': {
                    'id': 'medium',
                    'content': { 'mimeType': 'image/jpeg', 'mimeTypeName': 'JPEG Image' },
                    'status': 'NOT_CREATED'
                }
            }, {
                'entry': {
                    'id': 'pdf',
                    'content': { 'mimeType': 'application/pdf', 'mimeTypeName': 'Adobe PDF Document' },
                    'status': 'NOT_CREATED'
                }
            }]
    }
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fakeSearch = {
    list: {
        pagination: {
            count: 1,
            hasMoreItems: false,
            totalItems: 1,
            skipCount: 0,
            maxItems: 100
        },
        entries: [
            {
                entry: {
                    id: '123',
                    name: 'MyDoc',
                    content: {
                        mimetype: 'text/plain'
                    },
                    createdByUser: {
                        displayName: 'John Doe'
                    },
                    modifiedByUser: {
                        displayName: 'John Doe'
                    }
                }
            }
        ]
    }
};
var mockError = {
    error: {
        errorKey: 'Search failed',
        statusCode: 400,
        briefSummary: '08220082 search failed',
        stackTrace: 'For security reasons the stack trace is no longer displayed, but the property is kept for previous versions.',
        descriptionURL: 'https://api-explorer.alfresco.com'
    }
};
var searchMockApi = {
    core: {
        queriesApi: {
            findNodes: function (term, opts) { return Promise.resolve(fakeSearch); }
        }
    }
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var TranslationMock = /** @class */ (function () {
    function TranslationMock() {
        this.onLangChange = new core.EventEmitter();
    }
    /**
     * @return {?}
     */
    TranslationMock.prototype.addTranslationFolder = function () {
    };
    /**
     * @param {?} key
     * @param {?=} interpolateParams
     * @return {?}
     */
    TranslationMock.prototype.get = function (key, interpolateParams) {
        return Observable.Observable.of(key);
    };
    return TranslationMock;
}());
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fakeForm = {
    id: 1001,
    name: 'ISSUE_FORM',
    processDefinitionId: 'ISSUE_APP:1:2504',
    processDefinitionName: 'ISSUE_APP',
    processDefinitionKey: 'ISSUE_APP',
    taskId: '7506',
    taskDefinitionKey: 'sid-F67A2996-1684-4774-855A-4591490081FD',
    tabs: [],
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: '1498212398417',
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                1: [
                    {
                        fieldType: 'RestFieldRepresentation',
                        id: 'label',
                        name: 'Label',
                        type: 'dropdown',
                        value: 'Choose one...',
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: true,
                        options: [
                            {
                                id: 'empty',
                                name: 'Choose one...'
                            },
                            {
                                id: 'option_1',
                                name: 'test1'
                            },
                            {
                                id: 'option_2',
                                name: 'test2'
                            },
                            {
                                id: 'option_3',
                                name: 'test3'
                            }
                        ],
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null,
                        endpoint: null,
                        requestHeaders: null
                    }
                ],
                2: [
                    {
                        fieldType: 'RestFieldRepresentation',
                        id: 'raduio',
                        name: 'raduio',
                        type: 'radio-buttons',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: [
                            {
                                id: 'option_1',
                                name: 'Option 1'
                            },
                            {
                                id: 'option_2',
                                name: 'Option 2'
                            },
                            {
                                id: 'option_3',
                                name: 'Option 3'
                            }
                        ],
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 1
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 2,
                        row: -1,
                        col: -1,
                        visibilityCondition: null,
                        endpoint: null,
                        requestHeaders: null
                    }
                ]
            }
        },
        {
            fieldType: 'ContainerRepresentation',
            id: '1498212413062',
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                1: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'date',
                        name: 'date',
                        type: 'date',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ],
                2: []
            }
        }
    ],
    outcomes: [],
    javascriptEvents: [],
    className: '',
    style: '',
    customFieldTemplates: {},
    metadata: {},
    variables: [],
    customFieldsValueInfo: {},
    gridsterForm: false,
    globalDateFormat: 'D-M-YYYY'
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var formDefinitionTwoTextFields = {
    id: 20,
    name: 'formTextDefinition',
    processDefinitionId: 'textDefinition:1:153',
    processDefinitionName: 'textDefinition',
    processDefinitionKey: 'textDefinition',
    taskId: '159',
    taskDefinitionKey: 'sid-D941F49F-2B04-4FBB-9B49-9E95991993E8',
    tabs: [],
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: '1507044399260',
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                '1': [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'firstname',
                        name: 'firstName',
                        type: 'text',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ],
                '2': [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'lastname',
                        name: 'lastName',
                        type: 'text',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 1
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ]
            }
        }
    ],
    outcomes: [],
    javascriptEvents: [],
    className: '',
    style: '',
    customFieldTemplates: {},
    metadata: {},
    variables: [],
    customFieldsValueInfo: {},
    gridsterForm: false,
    globalDateFormat: 'D-M-YYYY'
};
var formDefinitionDropdownField = {
    id: 21,
    name: 'dropdownDefinition',
    processDefinitionId: 'textDefinition:2:163',
    processDefinitionName: 'textDefinition',
    processDefinitionKey: 'textDefinition',
    taskId: '169',
    taskDefinitionKey: 'sid-D941F49F-2B04-4FBB-9B49-9E95991993E8',
    tabs: [],
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: '1507046026940',
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                '1': [
                    {
                        fieldType: 'RestFieldRepresentation',
                        id: 'country',
                        name: 'country',
                        type: 'dropdown',
                        value: 'Choose one...',
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: true,
                        options: [
                            {
                                id: 'empty',
                                name: 'Choose one...'
                            },
                            {
                                id: 'option_1',
                                name: 'united kingdom'
                            },
                            {
                                id: 'option_2',
                                name: 'italy'
                            },
                            {
                                id: 'option_3',
                                name: 'france'
                            }
                        ],
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null,
                        endpoint: null,
                        requestHeaders: null
                    }
                ],
                '2': []
            }
        }
    ],
    outcomes: [],
    javascriptEvents: [],
    className: '',
    style: '',
    customFieldTemplates: {},
    metadata: {},
    variables: [],
    customFieldsValueInfo: {},
    gridsterForm: false,
    globalDateFormat: 'D-M-YYYY'
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var formReadonlyTwoTextFields = {
    id: 22,
    name: 'formTextDefinition',
    processDefinitionId: 'textDefinition:3:182',
    processDefinitionName: 'textDefinition',
    processDefinitionKey: 'textDefinition',
    taskId: '188',
    taskDefinitionKey: 'sid-D941F49F-2B04-4FBB-9B49-9E95991993E8',
    tabs: [],
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: '1507044399260',
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                '1': [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'firstname',
                        name: 'firstName',
                        type: 'readonly',
                        value: 'fakeFirstName',
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2,
                            field: {
                                id: 'firstname',
                                name: 'firstName',
                                type: 'text',
                                value: null,
                                required: false,
                                readOnly: false,
                                overrideId: false,
                                colspan: 1,
                                placeholder: null,
                                minLength: 0,
                                maxLength: 0,
                                minValue: null,
                                maxValue: null,
                                regexPattern: null,
                                optionType: null,
                                hasEmptyValue: null,
                                options: null,
                                restUrl: null,
                                restResponsePath: null,
                                restIdProperty: null,
                                restLabelProperty: null,
                                tab: null,
                                className: null,
                                dateDisplayFormat: null,
                                layout: null,
                                sizeX: 0,
                                sizeY: 0,
                                row: 0,
                                col: 0,
                                visibilityCondition: null
                            }
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ],
                '2': [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'lastname',
                        name: 'lastName',
                        type: 'readonly',
                        value: 'fakeLastName',
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 1,
                            field: {
                                id: 'lastname',
                                name: 'lastName',
                                type: 'text',
                                value: null,
                                required: false,
                                readOnly: false,
                                overrideId: false,
                                colspan: 1,
                                placeholder: null,
                                minLength: 0,
                                maxLength: 0,
                                minValue: null,
                                maxValue: null,
                                regexPattern: null,
                                optionType: null,
                                hasEmptyValue: null,
                                options: null,
                                restUrl: null,
                                restResponsePath: null,
                                restIdProperty: null,
                                restLabelProperty: null,
                                tab: null,
                                className: null,
                                dateDisplayFormat: null,
                                layout: null,
                                sizeX: 0,
                                sizeY: 0,
                                row: 0,
                                col: 0,
                                visibilityCondition: null
                            }
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ]
            }
        }
    ],
    outcomes: [],
    javascriptEvents: [],
    className: '',
    style: '',
    customFieldTemplates: {},
    metadata: {},
    variables: [],
    customFieldsValueInfo: {},
    gridsterForm: false,
    globalDateFormat: 'D-M-YYYY'
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var formDefVisibilitiFieldDependsOnNextOne = {
    id: 19,
    processDefinitionId: 'visibility:1:148',
    processDefinitionName: 'visibility',
    processDefinitionKey: 'visibility',
    tabs: [],
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: '1506960847579',
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                '1': [
                    {
                        fieldType: 'RestFieldRepresentation',
                        id: 'country',
                        name: 'country',
                        type: 'dropdown',
                        value: 'Choose one...',
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: true,
                        options: [
                            {
                                id: 'empty',
                                name: 'Choose one...'
                            },
                            {
                                id: 'option_1',
                                name: 'france'
                            },
                            {
                                id: 'option_2',
                                name: 'uk'
                            }
                        ],
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: {
                            leftFormFieldId: 'name',
                            leftRestResponseId: null,
                            operator: '==',
                            rightValue: 'italy',
                            rightType: null,
                            rightFormFieldId: '',
                            rightRestResponseId: '',
                            nextConditionOperator: '',
                            nextCondition: null
                        },
                        endpoint: null,
                        requestHeaders: null
                    }
                ],
                '2': [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'name',
                        name: 'name',
                        type: 'text',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 1
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ]
            }
        }
    ],
    outcomes: [],
    javascriptEvents: [],
    className: '',
    style: '',
    customFieldTemplates: {},
    metadata: {},
    variables: [],
    customFieldsValueInfo: {},
    gridsterForm: false,
    globalDateFormat: 'D-M-YYYY'
};
var formDefVisibilitiFieldDependsOnPreviousOne = {
    id: 19,
    processDefinitionId: 'visibility:1:148',
    processDefinitionName: 'visibility',
    processDefinitionKey: 'visibility',
    tabs: [],
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: '1506960847579',
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                '1': [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'name',
                        name: 'name',
                        type: 'text',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 1
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ],
                '2': [
                    {
                        fieldType: 'RestFieldRepresentation',
                        id: 'country',
                        name: 'country',
                        type: 'dropdown',
                        value: 'Choose one...',
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: true,
                        options: [
                            {
                                id: 'empty',
                                name: 'Choose one...'
                            },
                            {
                                id: 'option_1',
                                name: 'france'
                            },
                            {
                                id: 'option_2',
                                name: 'uk'
                            }
                        ],
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: {
                            leftFormFieldId: 'name',
                            leftRestResponseId: null,
                            operator: '==',
                            rightValue: 'italy',
                            rightType: null,
                            rightFormFieldId: '',
                            rightRestResponseId: '',
                            nextConditionOperator: '',
                            nextCondition: null
                        },
                        endpoint: null,
                        requestHeaders: null
                    }
                ]
            }
        }
    ],
    outcomes: [],
    javascriptEvents: [],
    className: '',
    style: '',
    customFieldTemplates: {},
    metadata: {},
    variables: [],
    customFieldsValueInfo: {},
    gridsterForm: false,
    globalDateFormat: 'D-M-YYYY'
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var startFormDateWidgetMock = {
    id: 4,
    name: 'Claim Review Process',
    processDefinitionId: 'ClaimReviewProcess:2: 93',
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953253784,
            name: 'Label',
            type: 'container',
            value: null,
            readOnly: false,
            fields: {
                1: [{
                        fieldType: 'FormFieldRepresentation',
                        id: 'date',
                        name: 'date',
                        type: 'date',
                        value: null
                    }]
            }
        }
    ]
};
var startFormNumberWidgetMock = {
    id: 4,
    name: 'Claim Review Process',
    processDefinitionId: 'ClaimReviewProcess:2: 93',
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953253784,
            name: 'Label',
            type: 'container',
            value: null,
            readOnly: false,
            fields: {
                1: [{
                        fieldType: 'FormFieldRepresentation',
                        id: 'number',
                        name: 'number widget',
                        type: 'integer',
                        value: null
                    }]
            }
        }
    ]
};
var startFormAmountWidgetMock = {
    id: 4,
    name: 'Claim Review Process',
    processDefinitionId: 'ClaimReviewProcess:2: 93',
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953253784,
            name: 'Label',
            type: 'container',
            value: null,
            readOnly: false,
            fields: {
                1: [{
                        fieldType: 'FormFieldRepresentation',
                        id: 'amount',
                        name: 'amount widget',
                        type: 'amount',
                        value: null
                    }]
            }
        }
    ]
};
var startFormRadioButtonWidgetMock = {
    id: 4,
    name: 'Claim Review Process',
    processDefinitionId: 'ClaimReviewProcess:2: 93',
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953253784,
            name: 'Label',
            type: 'container',
            value: null,
            readOnly: false,
            fields: {
                1: [{
                        fieldType: 'RestFieldRepresentation',
                        id: 'radio-but',
                        name: 'radio-buttons',
                        type: 'radio-buttons',
                        value: null
                    }]
            }
        }
    ]
};
var startFormTextDefinitionMock = {
    id: 4,
    name: 'Claim Review Process',
    processDefinitionId: 'ClaimReviewProcess:2: 93',
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953253784,
            name: 'Label',
            type: 'container',
            value: null,
            readOnly: false,
            fields: {
                1: [{
                        fieldType: 'FormFieldRepresentation',
                        id: 'mocktext',
                        name: 'mockText',
                        type: 'text',
                        value: null
                    }]
            }
        }
    ]
};
var startFormDropdownDefinitionMock = {
    id: 4,
    name: 'Claim Review Process',
    processDefinitionId: 'ClaimReviewProcess:2: 93',
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953253784,
            name: 'Label',
            type: 'container',
            value: null,
            readOnly: false,
            fields: {
                1: [{
                        fieldType: 'RestFieldRepresentation',
                        id: 'mockTypeDropDown',
                        name: 'mock DropDown',
                        type: 'dropdown',
                        value: 'Chooseone...',
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        options: [
                            {
                                id: 'empty',
                                name: 'Chooseone...'
                            },
                            {
                                id: 'opt1',
                                name: 'Option-1'
                            },
                            {
                                id: 'opt2',
                                name: 'Option-2'
                            },
                            {
                                id: 'opt3',
                                name: 'Option-3'
                            },
                            {
                                id: 'opt2',
                                name: 'Option-3'
                            }
                        ]
                    }]
            }
        }
    ]
};
var startMockForm = {
    id: 4,
    name: 'Claim Review Process',
    processDefinitionId: 'ClaimReviewProcess:2: 93',
    processDefinitionName: 'ClaimReviewProcess',
    processDefinitionKey: 'ClaimReviewProcess',
    tabs: [],
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953253784,
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                1: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'clientname',
                        name: 'ClientName',
                        type: 'text',
                        value: null,
                        required: true,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ],
                2: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'policyno',
                        name: 'PolicyNo',
                        type: 'integer',
                        value: null,
                        required: true,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: 'EnterPolicyName',
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 1
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ]
            }
        },
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953270269,
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                1: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'billamount',
                        name: 'BillAmount',
                        type: 'integer',
                        value: null,
                        required: true,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: 'EnterBillAmount',
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ],
                2: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'billdate',
                        name: 'BillDate',
                        type: 'date',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: 'billdate',
                        params: {
                            existingColspan: 1,
                            maxColspan: 1
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ]
            }
        },
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953280930,
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                1: [
                    {
                        fieldType: 'RestFieldRepresentation',
                        id: 'claimtype',
                        name: 'ClaimType',
                        type: 'dropdown',
                        value: 'Chooseone...',
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: true,
                        options: [
                            {
                                id: 'empty',
                                name: 'Chooseone...'
                            },
                            {
                                id: 'cashless',
                                name: 'Cashless'
                            },
                            {
                                id: 'reimbursement',
                                name: 'Reimbursement'
                            }
                        ],
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null,
                        endpoint: null,
                        requestHeaders: null
                    }
                ],
                2: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'hospitalname',
                        name: 'HospitalName',
                        type: 'text',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: 'EnterHospitalName',
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 1
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ]
            }
        }
    ],
    outcomes: [
        {
            id: 'approve',
            name: 'Approve'
        },
        {
            id: 'complete',
            name: 'Complete'
        },
        {
            id: 'start_process',
            name: 'Start Process'
        }
    ],
    javascriptEvents: [],
    className: '',
    style: '',
    metadata: {},
    variables: [],
    customFieldsValueInfo: {},
    gridsterForm: false,
    globalDateFormat: 'D - M - YYYY'
};
var startMockFormWithTab = {
    id: 4,
    taskName: 'Mock Title',
    processDefinitionId: 'ClaimReviewProcess:2: 93',
    processDefinitionName: 'ClaimReviewProcess',
    processDefinitionKey: 'ClaimReviewProcess',
    tabs: [
        {
            id: 'form1',
            name: 'Tab 1'
        },
        {
            id: 'form2',
            name: 'Tab 2'
        }
    ],
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953253784,
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                1: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'clientname',
                        name: 'ClientName',
                        type: 'text',
                        value: null,
                        required: true,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ],
                2: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'policyno',
                        name: 'PolicyNo',
                        type: 'integer',
                        value: null,
                        required: true,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: 'EnterPolicyName',
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 1
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ]
            }
        },
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953270269,
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                1: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'billamount',
                        name: 'BillAmount',
                        type: 'integer',
                        value: null,
                        required: true,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: 'EnterBillAmount',
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ],
                2: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'billdate',
                        name: 'BillDate',
                        type: 'date',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: 'billdate',
                        params: {
                            existingColspan: 1,
                            maxColspan: 1
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ]
            }
        },
        {
            fieldType: 'ContainerRepresentation',
            id: 1497953280930,
            name: 'Label',
            type: 'container',
            value: null,
            required: false,
            readOnly: false,
            overrideId: false,
            colspan: 1,
            placeholder: null,
            minLength: 0,
            maxLength: 0,
            minValue: null,
            maxValue: null,
            regexPattern: null,
            optionType: null,
            hasEmptyValue: null,
            options: null,
            restUrl: null,
            restResponsePath: null,
            restIdProperty: null,
            restLabelProperty: null,
            tab: null,
            className: null,
            dateDisplayFormat: null,
            layout: null,
            sizeX: 2,
            sizeY: 1,
            row: -1,
            col: -1,
            visibilityCondition: null,
            numberOfColumns: 2,
            fields: {
                1: [
                    {
                        fieldType: 'RestFieldRepresentation',
                        id: 'claimtype',
                        name: 'ClaimType',
                        type: 'dropdown',
                        value: 'Chooseone...',
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: null,
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: true,
                        options: [
                            {
                                id: 'empty',
                                name: 'Chooseone...'
                            },
                            {
                                id: 'cashless',
                                name: 'Cashless'
                            },
                            {
                                id: 'reimbursement',
                                name: 'Reimbursement'
                            }
                        ],
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 2
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null,
                        endpoint: null,
                        requestHeaders: null
                    }
                ],
                2: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'hospitalname',
                        name: 'HospitalName',
                        type: 'text',
                        value: null,
                        required: false,
                        readOnly: false,
                        overrideId: false,
                        colspan: 1,
                        placeholder: 'EnterHospitalName',
                        minLength: 0,
                        maxLength: 0,
                        minValue: null,
                        maxValue: null,
                        regexPattern: null,
                        optionType: null,
                        hasEmptyValue: null,
                        options: null,
                        restUrl: null,
                        restResponsePath: null,
                        restIdProperty: null,
                        restLabelProperty: null,
                        tab: null,
                        className: null,
                        params: {
                            existingColspan: 1,
                            maxColspan: 1
                        },
                        dateDisplayFormat: null,
                        layout: {
                            row: -1,
                            column: -1,
                            colspan: 1
                        },
                        sizeX: 1,
                        sizeY: 1,
                        row: -1,
                        col: -1,
                        visibilityCondition: null
                    }
                ]
            }
        }
    ],
    outcomes: [
        {
            id: 'approve',
            name: 'Approve'
        },
        {
            id: 'complete',
            name: 'Complete'
        }
    ],
    javascriptEvents: [],
    className: '',
    style: '',
    metadata: {},
    variables: [],
    customFieldsValueInfo: {},
    gridsterForm: false,
    globalDateFormat: 'D - M - YYYY'
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var formModelTabs = {
    id: 16,
    name: 'start event',
    description: '',
    version: 2,
    lastUpdatedBy: 4,
    lastUpdatedByFullName: 'User Test',
    lastUpdated: '2017-10-04T13:00:03.030+0000',
    stencilSetId: null,
    referenceId: null,
    formDefinition: {
        tabs: [],
        fields: [
            {
                fieldType: 'ContainerRepresentation',
                id: '1507037668653',
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    '1': [
                        {
                            fieldType: 'AmountFieldRepresentation',
                            id: 'label',
                            name: 'Label',
                            type: 'amount',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null,
                            enableFractions: false,
                            currency: null
                        }
                    ],
                    '2': [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'label1',
                            name: 'Label1',
                            type: 'date',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 1
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ]
                }
            },
            {
                fieldType: 'ContainerRepresentation',
                id: '1507037670167',
                name: 'Label',
                type: 'container',
                value: null,
                required: false,
                readOnly: false,
                overrideId: false,
                colspan: 1,
                placeholder: null,
                minLength: 0,
                maxLength: 0,
                minValue: null,
                maxValue: null,
                regexPattern: null,
                optionType: null,
                hasEmptyValue: null,
                options: null,
                restUrl: null,
                restResponsePath: null,
                restIdProperty: null,
                restLabelProperty: null,
                tab: null,
                className: null,
                dateDisplayFormat: null,
                layout: null,
                sizeX: 2,
                sizeY: 1,
                row: -1,
                col: -1,
                visibilityCondition: null,
                numberOfColumns: 2,
                fields: {
                    '1': [
                        {
                            fieldType: 'FormFieldRepresentation',
                            id: 'label2',
                            name: 'Label2',
                            type: 'boolean',
                            value: null,
                            required: false,
                            readOnly: false,
                            overrideId: false,
                            colspan: 1,
                            placeholder: null,
                            minLength: 0,
                            maxLength: 0,
                            minValue: null,
                            maxValue: null,
                            regexPattern: null,
                            optionType: null,
                            hasEmptyValue: null,
                            options: null,
                            restUrl: null,
                            restResponsePath: null,
                            restIdProperty: null,
                            restLabelProperty: null,
                            tab: null,
                            className: null,
                            params: {
                                existingColspan: 1,
                                maxColspan: 2
                            },
                            dateDisplayFormat: null,
                            layout: {
                                row: -1,
                                column: -1,
                                colspan: 1
                            },
                            sizeX: 1,
                            sizeY: 1,
                            row: -1,
                            col: -1,
                            visibilityCondition: null
                        }
                    ],
                    '2': []
                }
            }
        ],
        outcomes: [],
        javascriptEvents: [],
        className: '',
        style: '',
        customFieldTemplates: {},
        metadata: {},
        variables: [],
        customFieldsValueInfo: {},
        gridsterForm: false
    }
};
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var formTest = new FormModel({});
var fakeTaskProcessVariableModels = [
    { id: 'TEST_VAR_1', type: 'string', value: 'test_value_1' },
    { id: 'TEST_VAR_2', type: 'string', value: 'test_value_2' },
    { id: 'TEST_VAR_3', type: 'string', value: 'test_value_3' }
];
var formValues = {
    'test_1': 'value_1',
    'test_2': 'value_2',
    'test_3': 'value_1',
    'test_4': 'dropdown_id',
    'test_5': 'dropdown_label',
    'dropdown': { 'id': 'dropdown_id', 'name': 'dropdown_label' }
};
var fakeFormJson = {
    id: '9999',
    name: 'FORM_VISIBILITY',
    processDefinitionId: 'PROCESS_TEST:9:9999',
    processDefinitionName: 'PROCESS_TEST',
    processDefinitionKey: 'PROCESS_TEST',
    taskId: '999',
    taskName: 'TEST',
    fields: [
        {
            fieldType: 'ContainerRepresentation',
            id: '000000000000000000',
            name: 'Label',
            type: 'container',
            value: null,
            numberOfColumns: 2,
            fields: {
                1: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'FIELD_TEST',
                        name: 'FIELD_TEST',
                        type: 'text',
                        value: 'RIGHT_FORM_FIELD_VALUE',
                        visibilityCondition: null,
                        isVisible: true
                    },
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'FIELD_WITH_CONDITION',
                        name: 'FIELD_WITH_CONDITION',
                        type: 'text',
                        value: 'field_with_condition_value',
                        visibilityCondition: null,
                        isVisible: true
                    },
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'LEFT_FORM_FIELD_ID',
                        name: 'LEFT_FORM_FIELD_NAME',
                        type: 'text',
                        value: 'LEFT_FORM_FIELD_VALUE',
                        visibilityCondition: null,
                        isVisible: true
                    }
                ],
                2: [
                    {
                        fieldType: 'FormFieldRepresentation',
                        id: 'RIGHT_FORM_FIELD_ID',
                        name: 'RIGHT_FORM_FIELD_NAME',
                        type: 'text',
                        value: 'RIGHT_FORM_FIELD_VALUE',
                        visibilityCondition: null,
                        isVisible: true
                    }
                ]
            }
        }
    ]
};

exports.createTranslateLoader = createTranslateLoader;
exports.CoreModule = CoreModule;
exports.ViewerModule = ViewerModule;
exports.UserInfoModule = UserInfoModule;
exports.ToolbarModule = ToolbarModule;
exports.HostSettingsModule = HostSettingsModule;
exports.PaginationModule = PaginationModule;
exports.LoginModule = LoginModule;
exports.LanguageMenuModule = LanguageMenuModule;
exports.InfoDrawerModule = InfoDrawerModule;
exports.DataColumnModule = DataColumnModule;
exports.DataTableModule = DataTableModule;
exports.ContextMenuModule = ContextMenuModule;
exports.CollapsableModule = CollapsableModule;
exports.CardViewModule = CardViewModule;
exports.startupServiceFactory = startupServiceFactory;
exports.AppConfigModule = AppConfigModule;
exports.FormModule = FormModule;
exports.PipeModule = PipeModule;
exports.ServiceModule = ServiceModule;
exports.DirectiveModule = DirectiveModule;
exports.ViewerComponent = ViewerComponent;
exports.ImgViewerComponent = ImgViewerComponent;
exports.MediaPlayerComponent = MediaPlayerComponent;
exports.PdfViewerComponent = PdfViewerComponent;
exports.TxtViewerComponent = TxtViewerComponent;
exports.UnknownFormatComponent = UnknownFormatComponent;
exports.ViewerMoreActionsComponent = ViewerMoreActionsComponent;
exports.ViewerOpenWithComponent = ViewerOpenWithComponent;
exports.ViewerSidebarComponent = ViewerSidebarComponent;
exports.ViewerToolbarComponent = ViewerToolbarComponent;
exports.ViewerExtensionDirective = ViewerExtensionDirective;
exports.UserInfoComponent = UserInfoComponent;
exports.BpmUserService = BpmUserService;
exports.EcmUserService = EcmUserService;
exports.ToolbarDividerComponent = ToolbarDividerComponent;
exports.ToolbarTitleComponent = ToolbarTitleComponent;
exports.ToolbarComponent = ToolbarComponent;
exports.HostSettingsComponent = HostSettingsComponent;
exports.PaginationComponent = PaginationComponent;
exports.InfinitePaginationComponent = InfinitePaginationComponent;
exports.LoginHeaderDirective = LoginHeaderDirective;
exports.LoginFooterDirective = LoginFooterDirective;
exports.LoginComponent = LoginComponent;
exports.LoginErrorEvent = LoginErrorEvent;
exports.LoginSubmitEvent = LoginSubmitEvent;
exports.LoginSuccessEvent = LoginSuccessEvent;
exports.LanguageMenuComponent = LanguageMenuComponent;
exports.InfoDrawerLayoutComponent = InfoDrawerLayoutComponent;
exports.InfoDrawerTitleDirective = InfoDrawerTitleDirective;
exports.InfoDrawerButtonsDirective = InfoDrawerButtonsDirective;
exports.InfoDrawerContentDirective = InfoDrawerContentDirective;
exports.InfoDrawerTabComponent = InfoDrawerTabComponent;
exports.InfoDrawerComponent = InfoDrawerComponent;
exports.DataColumnListComponent = DataColumnListComponent;
exports.DataColumnComponent = DataColumnComponent;
exports.DataRowEvent = DataRowEvent;
exports.DataSorting = DataSorting;
exports.ObjectDataRow = ObjectDataRow;
exports.ObjectDataTableAdapter = ObjectDataTableAdapter;
exports.ObjectDataColumn = ObjectDataColumn;
exports.DataCellEventModel = DataCellEventModel;
exports.DataCellEvent = DataCellEvent;
exports.DataRowActionEvent = DataRowActionEvent;
exports.DataRowActionModel = DataRowActionModel;
exports.DataTableCellComponent = DataTableCellComponent;
exports.DataTableComponent = DataTableComponent;
exports.DateCellComponent = DateCellComponent;
exports.EmptyListComponent = EmptyListComponent;
exports.EmptyListHeaderDirective = EmptyListHeaderDirective;
exports.EmptyListBodyDirective = EmptyListBodyDirective;
exports.EmptyListFooterDirective = EmptyListFooterDirective;
exports.FileSizeCellComponent = FileSizeCellComponent;
exports.LocationCellComponent = LocationCellComponent;
exports.LoadingContentTemplateDirective = LoadingContentTemplateDirective;
exports.NoContentTemplateDirective = NoContentTemplateDirective;
exports.NoPermissionTemplateDirective = NoPermissionTemplateDirective;
exports.ContextMenuHolderComponent = ContextMenuHolderComponent;
exports.ContextMenuDirective = ContextMenuDirective;
exports.ContextMenuService = ContextMenuService;
exports.AccordionGroupComponent = AccordionGroupComponent;
exports.AccordionComponent = AccordionComponent;
exports.CardViewContentProxyDirective = CardViewContentProxyDirective;
exports.CardViewDateItemComponent = CardViewDateItemComponent;
exports.CardViewItemDispatcherComponent = CardViewItemDispatcherComponent;
exports.CardViewMapItemComponent = CardViewMapItemComponent;
exports.CardViewTextItemComponent = CardViewTextItemComponent;
exports.CardViewComponent = CardViewComponent;
exports.AppConfigService = AppConfigService;
exports.FormComponent = FormComponent;
exports.FormListComponent = FormListComponent;
exports.ContentWidgetComponent = ContentWidgetComponent;
exports.StartFormComponent = StartFormComponent;
exports.DocumentWidgetComponent = DocumentWidgetComponent;
exports.WIDGET_DIRECTIVES = WIDGET_DIRECTIVES;
exports.MASK_DIRECTIVE = MASK_DIRECTIVE;
exports.baseHost = baseHost;
exports.WidgetComponent = WidgetComponent;
exports.FormFieldTypes = FormFieldTypes;
exports.FormWidgetModel = FormWidgetModel;
exports.FormFieldModel = FormFieldModel;
exports.FormModel = FormModel;
exports.ContainerModel = ContainerModel;
exports.ContainerColumnModel = ContainerColumnModel;
exports.TabModel = TabModel;
exports.FormOutcomeModel = FormOutcomeModel;
exports.FormOutcomeEvent = FormOutcomeEvent;
exports.RequiredFieldValidator = RequiredFieldValidator;
exports.NumberFieldValidator = NumberFieldValidator;
exports.DateFieldValidator = DateFieldValidator;
exports.MinDateFieldValidator = MinDateFieldValidator;
exports.MaxDateFieldValidator = MaxDateFieldValidator;
exports.MinLengthFieldValidator = MinLengthFieldValidator;
exports.MaxLengthFieldValidator = MaxLengthFieldValidator;
exports.MinValueFieldValidator = MinValueFieldValidator;
exports.MaxValueFieldValidator = MaxValueFieldValidator;
exports.RegExFieldValidator = RegExFieldValidator;
exports.FixedValueFieldValidator = FixedValueFieldValidator;
exports.FORM_FIELD_VALIDATORS = FORM_FIELD_VALIDATORS;
exports.ContentLinkModel = ContentLinkModel;
exports.ErrorMessageModel = ErrorMessageModel;
exports.TabsWidgetComponent = TabsWidgetComponent;
exports.ContainerWidgetComponent = ContainerWidgetComponent;
exports.UnknownWidgetComponent = UnknownWidgetComponent;
exports.TextWidgetComponent = TextWidgetComponent;
exports.NumberWidgetComponent = NumberWidgetComponent;
exports.CheckboxWidgetComponent = CheckboxWidgetComponent;
exports.MultilineTextWidgetComponentComponent = MultilineTextWidgetComponentComponent;
exports.DropdownWidgetComponent = DropdownWidgetComponent;
exports.HyperlinkWidgetComponent = HyperlinkWidgetComponent;
exports.RadioButtonsWidgetComponent = RadioButtonsWidgetComponent;
exports.DisplayTextWidgetComponentComponent = DisplayTextWidgetComponentComponent;
exports.UploadWidgetComponent = UploadWidgetComponent;
exports.AttachWidgetComponent = AttachWidgetComponent;
exports.TypeaheadWidgetComponent = TypeaheadWidgetComponent;
exports.FunctionalGroupWidgetComponent = FunctionalGroupWidgetComponent;
exports.PeopleWidgetComponent = PeopleWidgetComponent;
exports.DateWidgetComponent = DateWidgetComponent;
exports.AmountWidgetComponent = AmountWidgetComponent;
exports.DynamicTableWidgetComponent = DynamicTableWidgetComponent;
exports.ErrorWidgetComponent = ErrorWidgetComponent;
exports.DynamicTableModel = DynamicTableModel;
exports.RowEditorComponent = RowEditorComponent;
exports.DateEditorComponent = DateEditorComponent;
exports.DropdownEditorComponent = DropdownEditorComponent;
exports.BooleanEditorComponent = BooleanEditorComponent;
exports.TextEditorComponent = TextEditorComponent;
exports.CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR = CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR;
exports.InputMaskDirective = InputMaskDirective;
exports.FormService = FormService;
exports.EcmModelService = EcmModelService;
exports.NodeService = NodeService;
exports.FormRenderingService = FormRenderingService;
exports.ProcessContentService = ProcessContentService;
exports.FormEvent = FormEvent;
exports.FormErrorEvent = FormErrorEvent;
exports.FormFieldEvent = FormFieldEvent;
exports.ValidateFormFieldEvent = ValidateFormFieldEvent;
exports.ValidateFormEvent = ValidateFormEvent;
exports.ValidateDynamicTableRowEvent = ValidateDynamicTableRowEvent;
exports.FileSizePipe = FileSizePipe;
exports.MimeTypeIconPipe = MimeTypeIconPipe;
exports.NodeNameTooltipPipe = NodeNameTooltipPipe;
exports.HighlightPipe = HighlightPipe;
exports.TimeAgoPipe = TimeAgoPipe;
exports.InitialUsernamePipe = InitialUsernamePipe;
exports.AuthenticationService = AuthenticationService;
exports.AlfrescoApiService = AlfrescoApiService;
exports.SettingsService = SettingsService;
exports.ContentService = ContentService;
exports.AuthGuard = AuthGuard;
exports.AuthGuardEcm = AuthGuardEcm;
exports.AuthGuardBpm = AuthGuardBpm;
exports.AppsProcessService = AppsProcessService;
exports.PageTitleService = PageTitleService;
exports.StorageService = StorageService;
exports.CookieService = CookieService;
exports.RenditionsService = RenditionsService;
exports.NotificationService = NotificationService;
exports.LogService = LogService;
exports.TRANSLATION_PROVIDER = TRANSLATION_PROVIDER;
exports.TranslationService = TranslationService;
exports.TranslateLoaderService = TranslateLoaderService;
exports.ThumbnailService = ThumbnailService;
exports.UploadService = UploadService;
exports.DynamicComponentResolver = DynamicComponentResolver;
exports.DynamicComponentMapper = DynamicComponentMapper;
exports.CardItemTypeService = CardItemTypeService;
exports.transformKeyToObject = transformKeyToObject;
exports.CardViewUpdateService = CardViewUpdateService;
exports.UserPreferencesService = UserPreferencesService;
exports.HighlightTransformService = HighlightTransformService;
exports.DeletedNodesApiService = DeletedNodesApiService;
exports.FavoritesApiService = FavoritesApiService;
exports.NodesApiService = NodesApiService;
exports.PeopleContentService = PeopleContentService;
exports.PeopleProcessService = PeopleProcessService;
exports.SearchService = SearchService;
exports.SharedLinksApiService = SharedLinksApiService;
exports.SitesService = SitesService;
exports.DiscoveryApiService = DiscoveryApiService;
exports.CommentProcessService = CommentProcessService;
exports.HighlightDirective = HighlightDirective;
exports.LogoutDirective = LogoutDirective;
exports.NodeDeleteDirective = NodeDeleteDirective;
exports.NodeFavoriteDirective = NodeFavoriteDirective;
exports.NodePermissionDirective = NodePermissionDirective;
exports.NodeRestoreDirective = NodeRestoreDirective;
exports.UploadDirective = UploadDirective;
exports.ObjectUtils = ObjectUtils;
exports.FileUtils = FileUtils;
exports.MOMENT_DATE_FORMATS = MOMENT_DATE_FORMATS;
exports.MomentDateAdapter = MomentDateAdapter;
exports.EXTENDIBLE_COMPONENT = EXTENDIBLE_COMPONENT;
exports.CardViewBaseItemModel = CardViewBaseItemModel;
exports.CardViewTextItemModel = CardViewTextItemModel;
exports.CardViewMapItemModel = CardViewMapItemModel;
exports.CardViewDateItemModel = CardViewDateItemModel;
exports.FileUploadStatus = FileUploadStatus;
exports.FileModel = FileModel;
exports.PermissionsEnum = PermissionsEnum;
exports.SiteContentsModel = SiteContentsModel;
exports.SiteMembersModel = SiteMembersModel;
exports.SiteModel = SiteModel;
exports.BpmProductVersionModel = BpmProductVersionModel;
exports.EcmProductVersionModel = EcmProductVersionModel;
exports.VersionModel = VersionModel;
exports.LicenseModel = LicenseModel;
exports.VersionStatusModel = VersionStatusModel;
exports.VersionModuleModel = VersionModuleModel;
exports.UserProcessModel = UserProcessModel;
exports.CommentProcessModel = CommentProcessModel;
exports.EcmCompanyModel = EcmCompanyModel;
exports.BaseEvent = BaseEvent;
exports.BaseUIEvent = BaseUIEvent;
exports.FileUploadEvent = FileUploadEvent;
exports.FileUploadCompleteEvent = FileUploadCompleteEvent;
exports.FileUploadDeleteEvent = FileUploadDeleteEvent;
exports.FileUploadErrorEvent = FileUploadErrorEvent;
exports.AlfrescoApiMock = AlfrescoApiMock;
exports.AppConfigServiceMock = AppConfigServiceMock;
exports.fakeApps = fakeApps;
exports.AuthenticationMock = AuthenticationMock;
exports.fakeBpmUserNoImage = fakeBpmUserNoImage;
exports.fakeBpmUser = fakeBpmUser;
exports.fakeBpmEditedUser = fakeBpmEditedUser;
exports.fakeUser1 = fakeUser1;
exports.fakeUser2 = fakeUser2;
exports.fakeTasksComment = fakeTasksComment;
exports.fakeProcessComment = fakeProcessComment;
exports.CookieServiceMock = CookieServiceMock;
exports.fakeEcmCompany = fakeEcmCompany;
exports.fakeEcmUser = fakeEcmUser;
exports.fakeEcmUserNoImage = fakeEcmUserNoImage;
exports.fakeEcmEditedUser = fakeEcmEditedUser;
exports.EventMock = EventMock;
exports.fakeRedition = fakeRedition;
exports.fakeReditionCreated = fakeReditionCreated;
exports.fakeReditionsList = fakeReditionsList;
exports.fakeSearch = fakeSearch;
exports.mockError = mockError;
exports.searchMockApi = searchMockApi;
exports.TranslationMock = TranslationMock;
exports.fakeForm = fakeForm;
exports.formDefinitionTwoTextFields = formDefinitionTwoTextFields;
exports.formDefinitionDropdownField = formDefinitionDropdownField;
exports.formReadonlyTwoTextFields = formReadonlyTwoTextFields;
exports.formDefVisibilitiFieldDependsOnNextOne = formDefVisibilitiFieldDependsOnNextOne;
exports.formDefVisibilitiFieldDependsOnPreviousOne = formDefVisibilitiFieldDependsOnPreviousOne;
exports.startFormDateWidgetMock = startFormDateWidgetMock;
exports.startFormNumberWidgetMock = startFormNumberWidgetMock;
exports.startFormAmountWidgetMock = startFormAmountWidgetMock;
exports.startFormRadioButtonWidgetMock = startFormRadioButtonWidgetMock;
exports.startFormTextDefinitionMock = startFormTextDefinitionMock;
exports.startFormDropdownDefinitionMock = startFormDropdownDefinitionMock;
exports.startMockForm = startMockForm;
exports.startMockFormWithTab = startMockFormWithTab;
exports.formModelTabs = formModelTabs;
exports.formTest = formTest;
exports.fakeTaskProcessVariableModels = fakeTaskProcessVariableModels;
exports.formValues = formValues;
exports.fakeFormJson = fakeFormJson;
exports.c = AppConfigService;
exports.cg = CardViewContentProxyDirective;
exports.cm = CardViewDateItemComponent;
exports.cf = CardViewItemDispatcherComponent;
exports.cl = CardViewMapItemComponent;
exports.cj = CardViewTextItemComponent;
exports.ce = CardViewComponent;
exports.cq = AccordionGroupComponent;
exports.cp = AccordionComponent;
exports.cb = ContextMenuHolderComponent;
exports.cd = ContextMenuDirective;
exports.cc = ContextMenuService;
exports.di = DataColumnListComponent;
exports.dj = DataColumnComponent;
exports.do = DataTableCellComponent;
exports.dh = DataTableComponent;
exports.dp = DateCellComponent;
exports.dm = EmptyListBodyDirective;
exports.dk = EmptyListComponent;
exports.dn = EmptyListFooterDirective;
exports.dl = EmptyListHeaderDirective;
exports.dq = FileSizeCellComponent;
exports.dr = LocationCellComponent;
exports.du = LoadingContentTemplateDirective;
exports.ds = NoContentTemplateDirective;
exports.dt = NoPermissionTemplateDirective;
exports.bj = HighlightDirective;
exports.bk = LogoutDirective;
exports.bl = NodeDeleteDirective;
exports.bp = NodeFavoriteDirective;
exports.bq = NodePermissionDirective;
exports.bs = NodeRestoreDirective;
exports.bt = UploadDirective;
exports.eg = StartFormCustomButtonDirective;
exports.dz = FormFieldComponent;
exports.ee = FormListComponent;
exports.ec = FormComponent;
exports.ef = StartFormComponent;
exports.fc = AmountWidgetComponent;
exports.ex = AttachWidgetComponent;
exports.eq = CheckboxWidgetComponent;
exports.em = ContainerWidgetComponent;
exports.dv = ContentWidgetComponent;
exports.fb = DateWidgetComponent;
exports.ev = DisplayTextWidgetComponentComponent;
exports.ff = DocumentWidgetComponent;
exports.es = DropdownWidgetComponent;
exports.fd = DynamicTableWidgetComponent;
exports.fj = BooleanEditorComponent;
exports.fh = DateEditorComponent;
exports.fi = DropdownEditorComponent;
exports.fg = RowEditorComponent;
exports.fk = TextEditorComponent;
exports.fe = ErrorWidgetComponent;
exports.ez = FunctionalGroupWidgetComponent;
exports.et = HyperlinkWidgetComponent;
exports.ei = MASK_DIRECTIVE;
exports.eh = WIDGET_DIRECTIVES;
exports.er = MultilineTextWidgetComponentComponent;
exports.ep = NumberWidgetComponent;
exports.fa = PeopleWidgetComponent;
exports.eu = RadioButtonsWidgetComponent;
exports.el = TabsWidgetComponent;
exports.fl = CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR;
exports.fm = InputMaskDirective;
exports.eo = TextWidgetComponent;
exports.ey = TypeaheadWidgetComponent;
exports.en = UnknownWidgetComponent;
exports.ew = UploadWidgetComponent;
exports.ek = WidgetComponent;
exports.ej = baseHost;
exports.fn = ActivitiContentService;
exports.dx = EcmModelService;
exports.ea = FormRenderingService;
exports.dw = FormService;
exports.ed = NodeService;
exports.dy = ProcessContentService;
exports.eb = WidgetVisibilityService;
exports.fs = InfoDrawerLayoutComponent;
exports.fu = InfoDrawerComponent;
exports.ft = InfoDrawerTabComponent;
exports.br = EXTENDIBLE_COMPONENT;
exports.fr = LanguageMenuComponent;
exports.fo = LoginComponent;
exports.fp = LoginFooterDirective;
exports.fq = LoginHeaderDirective;
exports.e = MaterialModule;
exports.d = modules;
exports.bz = InfinitePaginationComponent;
exports.ca = PaginationComponent;
exports.i = FileSizePipe;
exports.m = MimeTypeIconPipe;
exports.v = NodeNameTooltipPipe;
exports.j = HighlightPipe;
exports.l = TimeAgoPipe;
exports.u = InitialUsernamePipe;
exports.s = AlfrescoApiService;
exports.cu = AppsProcessService;
exports.ct = AuthGuardBpm;
exports.cs = AuthGuardEcm;
exports.cr = AuthGuard;
exports.p = AuthenticationService;
exports.ch = CardItemTypeService;
exports.ck = CardViewUpdateService;
exports.dg = CommentProcessService;
exports.o = ContentService;
exports.t = CookieService;
exports.cx = DeletedNodesApiService;
exports.df = DiscoveryApiService;
exports.ci = DynamicComponentMapper;
exports.cy = FavoritesApiService;
exports.k = HighlightTransformService;
exports.b = LogService;
exports.cz = NodesApiService;
exports.bm = NotificationService;
exports.cv = PageTitleService;
exports.da = PeopleContentService;
exports.db = PeopleProcessService;
exports.bb = RenditionsService;
exports.dc = SearchService;
exports.bv = SettingsService;
exports.dd = SharedLinksApiService;
exports.de = SitesService;
exports.r = StorageService;
exports.n = ThumbnailService;
exports.a = TranslateLoaderService;
exports.bn = TRANSLATION_PROVIDER;
exports.bo = TranslationService;
exports.cw = UploadService;
exports.q = UserPreferencesService;
exports.bu = HostSettingsComponent;
exports.h = ToolbarDividerComponent;
exports.g = ToolbarTitleComponent;
exports.f = ToolbarComponent;
exports.bw = UserInfoComponent;
exports.by = BpmUserService;
exports.bx = EcmUserService;
exports.co = MOMENT_DATE_FORMATS;
exports.cn = MomentDateAdapter;
exports.bc = ImgViewerComponent;
exports.be = MediaPlayerComponent;
exports.bf = PdfViewerComponent;
exports.bd = TxtViewerComponent;
exports.bi = UnknownFormatComponent;
exports.ba = ViewerMoreActionsComponent;
exports.z = ViewerOpenWithComponent;
exports.y = ViewerSidebarComponent;
exports.x = ViewerToolbarComponent;
exports.w = ViewerComponent;
exports.bh = ViewerExtensionDirective;
exports.bg = RenderingQueueServices;

Object.defineProperty(exports, '__esModule', { value: true });

})));
//# sourceMappingURL=adf-core.umd.js.map
