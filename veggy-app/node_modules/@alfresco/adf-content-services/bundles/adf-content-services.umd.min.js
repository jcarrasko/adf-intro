!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@angular/platform-browser/animations"),require("@alfresco/adf-core"),require("@angular/material"),require("rxjs/Observable"),require("rxjs/add/observable/throw"),require("@ngx-translate/core"),require("@angular/flex-layout"),require("rxjs/add/observable/merge"),require("rxjs/Subject"),require("@angular/cdk/keycodes"),require("@angular/platform-browser"),require("rxjs/observable/fromEvent"),require("rxjs/observable/merge"),require("@angular/animations")):"function"==typeof define&&define.amd?define(["exports","@angular/common","@angular/core","@angular/forms","@angular/platform-browser/animations","@alfresco/adf-core","@angular/material","rxjs/Observable","rxjs/add/observable/throw","@ngx-translate/core","@angular/flex-layout","rxjs/add/observable/merge","rxjs/Subject","@angular/cdk/keycodes","@angular/platform-browser","rxjs/observable/fromEvent","rxjs/observable/merge","@angular/animations"],e):e(t["adf-content-services"]={},t.ng.common,t.ng.core,t.ng.forms,t["@angular/platform-browser/animations"],t["@alfresco/adf-core"],t["@angular/material"],t.Rx,t.Rx.Observable,t["@ngx-translate/core"],t["@angular/flex-layout"],t.Rx.Observable,t.Rx,t.ng.cdk.keycodes,t.ng.platformBrowser,t.Rx.Observable,t.Rx.Observable,t["@angular/animations"])}(this,function(t,e,n,i,o,r,s,a,c,u,l,p,h,d,f,y,b,m){"use strict";/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function v(){return[s.MatButtonModule,s.MatChipsModule,s.MatDialogModule,s.MatIconModule,s.MatCardModule,s.MatInputModule,s.MatListModule,s.MatProgressSpinnerModule,s.MatProgressBarModule,s.MatRippleModule,s.MatMenuModule,s.MatOptionModule,s.MatSelectModule]}function g(t,e){return e={exports:{}},t(e,e.exports),e.exports}function S(){try{return gt.apply(this,arguments)}catch(t){return wt.errorObject.e=t,wt.errorObject}}function w(t){return t.reduce(function(t,e){return t.concat(e instanceof Tt.UnsubscriptionError?e.errors:e)},[])}function _(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:$t.noop}function O(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function x(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,i=t.subscriber,o=t.scheduler,r=i.openContext();i.closed||(i.add(r.closeAction=o.schedule(E,n,{subscriber:i,context:r})),this.schedule(t,e))}function E(t){var e=t.subscriber,n=t.context;e.closeContext(n)}function C(t){var e=t.value,n=t.subscriber;n.closed||(n.next(e),n.complete())}function T(t){var e=t.err,n=t.subscriber;n.closed||n.error(e)}function I(t){var e=+t.length;return isNaN(e)?0:0!==e&&function(t){return"number"==typeof t&&Lt.root.isFinite(t)}(e)?(e=function(t){var e=+t;if(0===e)return e;if(isNaN(e))return e;return e<0?-1:1}(e)*Math.floor(Math.abs(e)))<=0?0:e>Fe?Fe:e:e}function A(t){t.debouncedNext()}function N(){return function(){function t(){this._values=[]}return t.prototype.add=function(t){this.has(t)||this._values.push(t)},t.prototype.has=function(t){return-1!==this._values.indexOf(t)},Object.defineProperty(t.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._values.length=0},t}()}function D(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}function P(t){t.subscriber.clearThrottle()}function F(t){var e=t.subscriber,n=t.windowTimeSpan,i=t.window;i&&e.closeWindow(i),t.window=e.openWindow(),this.schedule(t,n)}function L(t){var e=t.windowTimeSpan,n=t.subscriber,i=t.scheduler,o=t.windowCreationInterval,r={action:this,subscription:null},s={subscriber:n,window:n.openWindow(),context:r};r.subscription=i.schedule(R,e,s),this.add(r.subscription),this.schedule(t,o)}function R(t){var e=t.subscriber,n=t.window,i=t.context;i&&i.action&&i.subscription&&i.action.remove(i.subscription),e.closeWindow(n)}function M(t){var e=t.value;return!/([\*\"\<\>\\\/\?\:\|])/.test(e)?null:{message:Ao+".SPECIAL_CHARACTERS"}}function k(t){return"."!==(t.value||"").trim().split("").pop()?null:{message:Ao+".ENDING_DOT"}}function j(t){return!!(t.value||"").trim()?null:{message:Ao+".ONLY_SPACES"}}var U=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),V=function(){return function(){}}();V.decorators=[{type:n.NgModule,args:[{imports:v(),exports:v()}]}],V.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var B=function(){function t(t){this.apiService=t}return t.prototype.getRating=function(t,e){return a.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.getRating(t,e)).map(function(t){return t})["catch"](this.handleError)},t.prototype.postRating=function(t,e,n){var i={id:e,myRating:n};return a.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.rate(t,i)).map(function(t){return t})["catch"](this.handleError)},t.prototype.deleteRating=function(t,e){return a.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.removeRating(t,e)).map(function(t){return t})["catch"](this.handleError)},t.prototype.handleError=function(t){return console.error(t),a.Observable["throw"](t||"Server error")},t}();B.decorators=[{type:n.Injectable}],B.ctorParameters=function(){return[{type:r.AlfrescoApiService}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var z=function(){function t(t){this.ratingService=t,this.changeVote=new n.EventEmitter,this.likesCounter=0,this.ratingType="likes",this.isLike=!1}return t.prototype.ngOnChanges=function(){var t=this;this.clean(),this.ratingService.getRating(this.nodeId,this.ratingType).subscribe(function(e){e.entry.aggregate&&(t.likesCounter=e.entry.aggregate.numberOfRatings,e.entry.ratedAt&&(t.isLike=!0))})},t.prototype.likeClick=function(){var t=this;this.isLike?this.ratingService.deleteRating(this.nodeId,this.ratingType).subscribe(function(){t.likesCounter-=1,t.isLike=!1,t.changeVote.emit(t.likesCounter)}):this.ratingService.postRating(this.nodeId,this.ratingType,!0).subscribe(function(e){t.likesCounter=e.entry.aggregate.numberOfRatings,t.isLike=!0,t.changeVote.emit(t.likesCounter)})},t.prototype.clean=function(){this.isLike=!1,this.likesCounter=0},t}();z.decorators=[{type:n.Component,args:[{selector:"adf-like",styles:["\n      .adf-like-container {\n        overflow: hidden;\n        width: 100%; }\n        .adf-like-container .adf-like {\n          padding: 5px;\n          cursor: pointer;\n          float: left;\n          margin: 5px 0px 5px 5px; }\n        .adf-like-container .adf-like-select {\n          cursor: pointer;\n          color: #2196f3; }\n        .adf-like-container .adf-like-select:hover {\n          cursor: pointer;\n          color: #808080; }\n        .adf-like-container .adf-like-grey {\n          cursor: pointer;\n          color: #808080; }\n        .adf-like-container .adf-like-grey:hover {\n          cursor: pointer;\n          color: #2196f3; }\n        .adf-like-container .adf-like-counter {\n          float: left;\n          padding: 13px 0 0 0; }\n        .adf-like-container .adf-left {\n          float: left;\n          padding: 13px 0 0 4px; }\n    "],template:'\n      <div id="adf-like-container" class="adf-like-container">\n          <div class="adf-like">\n              <span id="adf-like-{{nodeId}}" [ngClass]="{\'adf-like-select\': isLike ,\'adf-like-grey\': !isLike  }"\n                    (click)="likeClick()">\n                  <mat-icon>thumb_up</mat-icon>\n              </span>\n          </div>\n          <div id="adf-like-counter" class="adf-like-counter">{{likesCounter}}</div>\n          <div class="adf-left" *ngIf="likesCounter<=1">Like</div>\n          <div class="adf-left" *ngIf="likesCounter>1">Likes</div>\n      </div>\n    ',providers:[B],encapsulation:n.ViewEncapsulation.None}]}],z.ctorParameters=function(){return[{type:B}]},z.propDecorators={nodeId:[{type:n.Input}],changeVote:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Y=function(){function t(t){this.ratingService=t,this.average=0,this.ratingType="fiveStar",this.changeVote=new n.EventEmitter,this.stars=[]}return t.prototype.ngOnChanges=function(){var t=this,e=this.ratingService.getRating(this.nodeId,this.ratingType);return e.subscribe(function(e){e.entry.aggregate&&(t.average=e.entry.aggregate.average,t.calculateStars())}),e},t.prototype.calculateStars=function(){this.stars=[];for(var t=0;t<5;t++)t<this.average?this.stars.push({fill:!0}):this.stars.push({fill:!1});this.changeVote.emit(this.average)},t.prototype.updateVote=function(t){var e=this;this.ratingService.postRating(this.nodeId,this.ratingType,t).subscribe(function(t){t.entry.aggregate&&e.average!==t.entry.aggregate.average&&(e.average=t.entry.aggregate.average,e.calculateStars())})},t}();Y.decorators=[{type:n.Component,args:[{selector:"adf-rating",styles:["\n      .adf-rating-container {\n        overflow: hidden;\n        width: 100%; }\n        .adf-rating-container .adf-rating-star {\n          float: left;\n          -webkit-transition: all .3s;\n          transition: all .3s;\n          padding: 1px;\n          cursor: pointer; }\n          .adf-rating-container .adf-rating-star .mat-list-item-content {\n            padding: 0 2px !important; }\n        .adf-rating-container .adf-colored-star {\n          color: #ffe944; }\n        .adf-rating-container .adf-grey-star {\n          color: #808080; }\n        .adf-rating-container .adf-stars-container {\n          padding: 0 !important;\n          margin: 0 !important;\n          display: inline-block; }\n        .adf-rating-container .adf-rating-star:hover {\n          -webkit-transform: rotate(13deg) scale(1.2);\n                  transform: rotate(13deg) scale(1.2); }\n    "],template:'\n      <mat-list id="adf-rating-container" class="adf-rating-container">\n          <mat-list-item class="adf-rating-star" *ngFor="let currentRate of stars; let idx = index">\n                  <span id="adf-rate-{{idx}}">\n                      <mat-icon id="adf-grey-star-{{idx}}" *ngIf="currentRate.fill" class="adf-colored-star"\n                               (click)="updateVote(idx + 1)">star_rate\n                      </mat-icon>\n                      <mat-icon id="adf-colored-star-{{idx}}" *ngIf="!currentRate.fill" class="adf-grey-star"\n                               (click)="updateVote(idx + 1)">star_border\n                      </mat-icon>\n                  </span>\n          </mat-list-item>\n      </mat-list>\n    ',providers:[B],encapsulation:n.ViewEncapsulation.None}]}],Y.ctorParameters=function(){return[{type:B}]},Y.propDecorators={nodeId:[{type:n.Input}],changeVote:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var H=function(){return function(){}}();H.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,V],exports:[Y,z],declarations:[Y,z],providers:[B]}]}],H.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var q=function(){function t(t,e){this.apiService=t,this.logService=e,this.refresh=new n.EventEmitter}return t.prototype.getTagsByNodeId=function(t){var e=this;return a.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.getNodeTags(t))["catch"](function(t){return e.handleError(t)})},t.prototype.getAllTheTags=function(){var t=this;return a.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.getTags())["catch"](function(e){return t.handleError(e)})},t.prototype.addTag=function(t,e){var n=this,i=new(this.apiService.getInstance().core.TagBody);i.tag=e;var o=a.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.addTag(t,i));return o.subscribe(function(t){n.refresh.emit(t)},function(t){n.handleError(t)}),o},t.prototype.removeTag=function(t,e){var n=this,i=a.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.removeTag(t,e));return i.subscribe(function(t){n.refresh.emit(t)},function(t){n.handleError(t)}),i},t.prototype.handleError=function(t){return this.logService.error(t),a.Observable["throw"](t||"Server error")},t}();q.decorators=[{type:n.Injectable}],q.ctorParameters=function(){return[{type:r.AlfrescoApiService},{type:r.LogService}]},q.propDecorators={refresh:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var G=function(){function t(t,e){var i=this;this.tagService=t,this.translateService=e,this.successAdd=new n.EventEmitter,this.error=new n.EventEmitter,this.result=new n.EventEmitter,this.disableAddTag=!0,this.tagService.refresh.subscribe(function(){i.refreshTag()})}return t.prototype.ngOnChanges=function(){return this.refreshTag()},t.prototype.refreshTag=function(){var t=this;this.tagService.getTagsByNodeId(this.nodeId).subscribe(function(e){t.tagsEntries=e.list.entries,t.disableAddTag=!1,t.result.emit(t.tagsEntries)},function(){t.tagsEntries=null,t.disableAddTag=!0,t.result.emit(t.tagsEntries)})},t.prototype.addTag=function(){var t=this;this.searchTag(this.newTagName)?(this.translateService.get("TAG.MESSAGES.EXIST").subscribe(function(e){t.errorMsg=e}),this.error.emit(this.errorMsg)):this.tagService.addTag(this.nodeId,this.newTagName).subscribe(function(){t.newTagName="",t.successAdd.emit(t.nodeId)})},t.prototype.searchTag=function(t){if(this.tagsEntries)return this.tagsEntries.find(function(e){return t===e.entry.tag})},t.prototype.cleanErrorMsg=function(){this.errorMsg=""},t.prototype.removeTag=function(t){this.tagService.removeTag(this.nodeId,t)},t}();G.decorators=[{type:n.Component,args:[{selector:"adf-tag-node-actions-list",template:'\n      <mat-list>\n          <mat-list-item *ngFor="let currentEntry of tagsEntries; let idx = index">\n              <div class="adf-tag-actions-container" id="tag_delete_{{idx}}" (click)="removeTag(currentEntry.entry.id)">\n                  <div class="adf-tag-actions-delete-text" id="tag_name_{{idx}}">\n                      {{currentEntry.entry.tag}}\n                  </div>\n                  <mat-icon class="adf-tag-actions-delete-icon">delete</mat-icon>\n              </div>\n          </mat-list-item>\n      </mat-list>\n      <table class="adf-full-width" cellspacing="0">\n          <tr>\n              <td>\n                  <mat-form-field class="adf-full-width">\n                      <input matInput placeholder="{{\'TAG.LABEL.NEWTAG\' | translate }}"\n                             type="text"\n                             (keypress)="cleanErrorMsg()"\n                             [(ngModel)]="newTagName"\n                             id="new-tag-text"/>\n                      <mat-hint *ngIf="error" [ngStyle]="{\'color\': \'red\'}" align="start">{{errorMsg}}</mat-hint>\n                  </mat-form-field>\n              </td>\n              <td>\n                  <button class="adf-full-width" color="primary" id="add-tag" (click)="addTag()" [disabled]="disableAddTag"\n                          mat-raised-button>\n                      {{\'TAG.BUTTON.ADD\' | translate }}\n                  </button>\n              </td>\n          </tr>\n      </table>\n    ',styles:["\n      .adf-full-width {\n        width: 100%; }\n\n      .adf-tag-actions-delete-icon {\n        float: right;\n        cursor: pointer; }\n\n      .adf-tag-actions-delete-text {\n        font-size: 16px;\n        float: left; }\n\n      .adf-tag-actions-container {\n        padding: 8px 0 8px 0;\n        height: 20px; }\n    "],encapsulation:n.ViewEncapsulation.None}]}],G.ctorParameters=function(){return[{type:q},{type:r.TranslationService}]},G.propDecorators={nodeId:[{type:n.Input}],successAdd:[{type:n.Output}],error:[{type:n.Output}],result:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $=function(){function t(t){var e=this;this.tagService=t,this.result=new n.EventEmitter,this.tagService.refresh.subscribe(function(){e.refreshTag()})}return t.prototype.ngOnInit=function(){return this.refreshTag()},t.prototype.refreshTag=function(){var t=this;this.tagService.getAllTheTags().subscribe(function(e){t.tagsEntries=e.list.entries,t.result.emit(t.tagsEntries)})},t}();$.decorators=[{type:n.Component,args:[{selector:"adf-tag-list",template:'\n      <mat-list>\n          <mat-list-item *ngFor="let currentEntry of tagsEntries; let idx = index">\n              <div class="adf-list-tag" id="tag_name_{{idx}}">{{currentEntry.entry.tag}}</div>\n          </mat-list-item>\n      </mat-list>\n    ',styles:["\n      .adf-list-tag {\n        padding: 16px;\n        font-size: 16px; }\n    "],encapsulation:n.ViewEncapsulation.None}]}],$.ctorParameters=function(){return[{type:q}]},$.propDecorators={result:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var W=function(){function t(t){var e=this;this.tagService=t,this.results=new n.EventEmitter,this.tagService.refresh.subscribe(function(){e.refreshTag()})}return t.prototype.ngOnChanges=function(){return this.refreshTag()},t.prototype.refreshTag=function(){var t=this;this.tagService.getTagsByNodeId(this.nodeId).subscribe(function(e){t.tagsEntries=e.list.entries,t.results.emit(t.tagsEntries)})},t.prototype.removeTag=function(t){var e=this;this.tagService.removeTag(this.nodeId,t).subscribe(function(){e.refreshTag()})},t}();W.decorators=[{type:n.Component,args:[{selector:"adf-tag-node-list",template:'\n      <mat-chip-list>\n          <mat-chip class="adf-tag-chips adf-primary-background-color" *ngFor="let currentEntry of tagsEntries; let idx = index">\n              <span id="tag_name_{{idx}}">{{currentEntry.entry.tag}}</span>\n              <button class="adf-tag-chips-delete" id="tag_delete_{{idx}}" type="button" (click)="removeTag(currentEntry.entry.id)">\n                  <mat-icon class="adf-tag-chips-delete-icon adf-primary-contrast-text-color" matChipRemove>cancel</mat-icon>\n              </button>\n          </mat-chip>\n      </mat-chip-list>\n    ',styles:["\n      .adf-tag-chips-delete {\n        overflow: visible;\n        cursor: pointer;\n        height: 17px;\n        width: 20px;\n        float: right;\n        border: 0;\n        background: none;\n        padding: 0;\n        margin: -1px 0px 0px 10px; }\n\n      .adf-tag-chips-delete-icon {\n        font-size: 20px;\n        background-repeat: no-repeat;\n        display: inline-block;\n        fill: currentColor;\n        height: 20px;\n        width: 20px; }\n    "],encapsulation:n.ViewEncapsulation.None}]}],W.ctorParameters=function(){return[{type:q}]},W.propDecorators={nodeId:[{type:n.Input}],results:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Q=function(){return function(){}}();Q.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,V,u.TranslateModule,i.FormsModule,i.ReactiveFormsModule],exports:[G,$,W],declarations:[G,$,W],providers:[q]}]}],Q.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Z=function(){function t(t,e){this.apiService=t,this.logService=e,this.showData=!0,this.contextRoot="alfresco",this.servicePath="service",this.contentType="TEXT",this.success=new n.EventEmitter,this.data=undefined,this.showError=!1}return t.prototype.ngOnChanges=function(t){var e=this;return this.showData&&this.clean(),new Promise(function(t,n){e.apiService.getInstance().webScript.executeWebScript("GET",e.scriptPath,e.scriptArgs,e.contextRoot,e.servicePath).then(function(n){e.data=n,e.showData&&"DATATABLE"===e.contentType&&(e.data=e.showDataAsDataTable(n)),e.success.emit(e.data),t()},function(t){e.logService.log("Error"+t),n()})})},t.prototype.showDataAsDataTable=function(t){try{t.schema||(t.schema=r.ObjectDataTableAdapter.generateSchema(t.data)),t.schema&&t.schema.length>0&&(this.data=new r.ObjectDataTableAdapter(t.data,t.schema))}catch(e){this.logService.error("error during the cast as datatable")}return null},t.prototype.clean=function(){this.data=undefined},t.prototype.isDataTableContent=function(){return"DATATABLE"===this.contentType},t}();Z.decorators=[{type:n.Component,args:[{selector:"adf-webscript-get",template:'\n      <div *ngIf="showData">\n          <div *ngIf="contentType === \'JSON\'" id="webscript-data-JSON">{{data | json}}</div>\n          <div *ngIf="contentType === \'HTML\'" id="webscript-data-HTML" [innerHTML]="data"></div>\n          <div *ngIf="contentType === \'TEXT\'" id="webscript-data-TEXT">{{data}}</div>\n          <div *ngIf="isDataTableContent()">\n              <adf-datatable id="webscript-datatable-wrapper" [data]="data"></adf-datatable>\n              <div>\n                  <div *ngIf="showError" id="error">{{\'WEBSCRIPT.ERROR\' | translate: {\n                      data: data,\n                      contentType: contentType\n                      }\n                      }}\n                  </div>\n              </div>\n          </div>\n      </div>\n    '}]}],Z.ctorParameters=function(){return[{type:r.AlfrescoApiService},{type:r.LogService}]},Z.propDecorators={scriptPath:[{type:n.Input}],scriptArgs:[{type:n.Input}],showData:[{type:n.Input}],contextRoot:[{type:n.Input}],servicePath:[{type:n.Input}],contentType:[{type:n.Input}],success:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var X=function(){return function(){}}();X.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,r.PipeModule,V,r.DataTableModule,u.TranslateModule],exports:[Z],declarations:[Z]}]}],X.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var K=function(){function t(t,e,n,i){this.uploadService=t,this.nodesApi=e,this.notificationService=n,this.translateService=i,this.FileUploadStatus=r.FileUploadStatus,this.files=[]}return t.prototype.cancelFile=function(t){this.uploadService.cancelUpload(t)},t.prototype.removeFile=function(t){var e=this;this.deleteNode(t).subscribe(function(){t.status===r.FileUploadStatus.Error&&e.notifyError(t),e.uploadService.cancelUpload(t)})},t.prototype.cancelAllFiles=function(){var t=this;this.getUploadingFiles().forEach(function(e){return t.uploadService.cancelUpload(e)});var e=this.files.filter(function(t){return t.status===r.FileUploadStatus.Complete}).map(function(e){return t.deleteNode(e)});a.Observable.forkJoin.apply(a.Observable,e).subscribe(function(e){var n=e.filter(function(t){return t.status===r.FileUploadStatus.Error});n.length&&t.notifyError.apply(t,n),(i=t.uploadService).cancelUpload.apply(i,e);var i})},t.prototype.isUploadCompleted=function(){return!this.isUploadCancelled()&&Boolean(this.files.length)&&!this.files.some(function(t){var e=t.status;return e===r.FileUploadStatus.Starting||e===r.FileUploadStatus.Progress||e===r.FileUploadStatus.Pending})},t.prototype.isUploadCancelled=function(){return!!this.files.length&&this.files.every(function(t){var e=t.status;return e===r.FileUploadStatus.Aborted||e===r.FileUploadStatus.Cancelled||e===r.FileUploadStatus.Deleted})},t.prototype.deleteNode=function(t){var e=t.data.entry.id;return this.nodesApi.deleteNode(e,{permanent:!0}).map(function(){return t.status=r.FileUploadStatus.Deleted,t})["catch"](function(e){return t.status=r.FileUploadStatus.Error,a.Observable.of(t)})},t.prototype.notifyError=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(1===e.length?this.translateService.get("FILE_UPLOAD.MESSAGES.REMOVE_FILE_ERROR",{fileName:e[0].name}):this.translateService.get("FILE_UPLOAD.MESSAGES.REMOVE_FILES_ERROR",{total:e.length})).subscribe(function(e){return t.notificationService.openSnackMessage(e,4e3)})},t.prototype.getUploadingFiles=function(){return this.files.filter(function(t){if(t.status===r.FileUploadStatus.Pending||t.status===r.FileUploadStatus.Progress||t.status===r.FileUploadStatus.Starting)return t})},t}();K.decorators=[{type:n.Component,args:[{selector:"adf-file-uploading-list",template:'\n      <div class="upload-list">\n          <ng-template\n              ngFor\n              [ngForOf]="files"\n              [ngForTemplate]="template">\n          </ng-template>\n      </div>\n    ',styles:["\n      :host {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-orient: vertical;\n        -webkit-box-direction: normal;\n            -ms-flex-direction: column;\n                flex-direction: column; }\n    "]}]}],K.ctorParameters=function(){return[{type:r.UploadService},{type:r.NodesApiService},{type:r.NotificationService},{type:r.TranslationService}]},K.propDecorators={template:[{type:n.ContentChild,args:[n.TemplateRef]}],files:[{type:n.Input}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var J=function(){function t(t,e){this.uploadService=t,this.changeDetecor=e,this.position="right",this.filesUploadingList=[],this.isDialogActive=!1,this.totalCompleted=0,this.totalErrors=0,this.isDialogMinimized=!1,this.isConfirmation=!1}return t.prototype.ngOnInit=function(){var t=this;this.listSubscription=this.uploadService.queueChanged.subscribe(function(e){t.filesUploadingList=e,t.filesUploadingList.length&&(t.isDialogActive=!0)}),this.counterSubscription=a.Observable.merge(this.uploadService.fileUploadComplete,this.uploadService.fileUploadDeleted).subscribe(function(e){t.totalCompleted=e.totalComplete,t.changeDetecor.detectChanges()}),this.errorSubscription=this.uploadService.fileUploadError.subscribe(function(e){t.totalErrors=e.totalError,t.changeDetecor.detectChanges()}),this.fileUploadSubscription=this.uploadService.fileUpload.subscribe(function(){t.changeDetecor.detectChanges()}),this.uploadService.fileDeleted.subscribe(function(e){if(t.filesUploadingList){var n=t.filesUploadingList.find(function(t){return t.data.entry.id===e});n&&(n.status=r.FileUploadStatus.Cancelled,t.changeDetecor.detectChanges())}})},t.prototype.toggleConfirmation=function(){this.isConfirmation=!this.isConfirmation,this.isDialogMinimized&&(this.isDialogMinimized=!1)},t.prototype.cancelAllUploads=function(){this.toggleConfirmation(),this.uploadList.cancelAllFiles()},t.prototype.toggleMinimized=function(){this.isDialogMinimized=!this.isDialogMinimized,this.changeDetecor.detectChanges()},t.prototype.close=function(){this.isConfirmation=!1,this.totalCompleted=0,this.totalErrors=0,this.filesUploadingList=[],this.isDialogActive=!1,this.isDialogMinimized=!1,this.uploadService.clearQueue(),this.changeDetecor.detectChanges()},t.prototype.ngOnDestroy=function(){this.uploadService.clearQueue(),this.listSubscription.unsubscribe(),this.counterSubscription.unsubscribe(),this.fileUploadSubscription.unsubscribe(),this.errorSubscription.unsubscribe()},t}();J.decorators=[{type:n.Component,args:[{selector:"adf-file-uploading-dialog, file-uploading-dialog",template:'\n      <div *ngIf="isDialogActive"\n           class="upload-dialog"\n           [class.upload-dialog--minimized]="isDialogMinimized"\n           [class.upload-dialog--position-left]="position === \'left\'"\n           [class.upload-dialog--position-right]="position === \'right\'">\n          <header class="upload-dialog__header">\n              <button\n                  mat-button\n                  color="secondary"\n                  [disabled]="isConfirmation"\n                  (click)="toggleMinimized()">\n                  <mat-icon\n                      mat-list-icon\n                      title="{{ (isDialogMinimized ? \'ADF_FILE_UPLOAD.BUTTON.MAXIMIZE\': \'ADF_FILE_UPLOAD.BUTTON.MINIMIZE\') | translate }}">\n                          {{ isDialogMinimized ? \'keyboard_arrow_up\' : \'keyboard_arrow_down\' }}\n                  </mat-icon>\n              </button>\n\n              <span\n                  class="upload-dialog__title"\n                  *ngIf="!uploadList.isUploadCompleted() && !uploadList.isUploadCancelled()">\n                  {{ \'FILE_UPLOAD.MESSAGES.UPLOAD_PROGRESS\'\n                      | translate: {\n                          completed: totalCompleted,\n                          total: filesUploadingList.length\n                      }\n                  }}\n              </span>\n\n              <span\n                  class="upload-dialog__title"\n                  *ngIf="uploadList.isUploadCompleted()">\n                  {{ \'FILE_UPLOAD.MESSAGES.UPLOAD_COMPLETED\'\n                      | translate: {\n                          completed: totalCompleted,\n                          total: filesUploadingList.length\n                      }\n                  }}\n              </span>\n\n              <span\n                  class="upload-dialog__title"\n                  *ngIf="uploadList.isUploadCancelled()">\n                  {{ \'FILE_UPLOAD.MESSAGES.UPLOAD_CANCELED\' | translate }}\n              </span>\n          </header>\n\n          <section\n              class="upload-dialog__info"\n              *ngIf="totalErrors">\n              {{\n                  (totalErrors > 1\n                       ? \'FILE_UPLOAD.MESSAGES.UPLOAD_ERRORS\'\n                       : \'FILE_UPLOAD.MESSAGES.UPLOAD_ERROR\')\n                       | translate: { total: totalErrors }\n              }}\n          </section>\n\n          <section\n              class="upload-dialog__content"\n              [class.upload-dialog--padding]="isConfirmation">\n              <adf-file-uploading-list\n                  [class.upload-dialog--hide]="isConfirmation"\n                  #uploadList\n                  [files]="filesUploadingList">\n                      <ng-template let-file="$implicit">\n                           <adf-file-uploading-list-row\n                              [file]="file"\n                              (remove)="uploadList.removeFile(file)"\n                              (cancel)="uploadList.cancelFile(file)">\n                          </adf-file-uploading-list-row>\n                      </ng-template>\n              </adf-file-uploading-list>\n\n              <div\n                  class="upload-dialog__confirmation"\n                  [class.upload-dialog--hide]="!isConfirmation">\n                      <p class="upload-dialog__confirmation--title">\n                          {{ \'ADF_FILE_UPLOAD.CONFIRMATION.MESSAGE.TITLE\' | translate }}\n                      </p>\n\n                      <p class="upload-dialog__confirmation--text">\n                          {{ \'ADF_FILE_UPLOAD.CONFIRMATION.MESSAGE.TEXT\' | translate }}\n                      </p>\n              </div>\n          </section>\n\n          <footer\n              class="upload-dialog__actions"\n              [class.upload-dialog--hide]="isConfirmation">\n              <button\n                  color="primary"\n                  mat-button\n                  *ngIf="!uploadList.isUploadCompleted() && !uploadList.isUploadCancelled()"\n                  (click)="toggleConfirmation()">\n                  {{ \'ADF_FILE_UPLOAD.BUTTON.CANCEL_ALL\' | translate }}\n              </button>\n\n              <button\n                  *ngIf="uploadList.isUploadCompleted() || uploadList.isUploadCancelled()"\n                  mat-button\n                  color="primary"\n                  (click)="close($event)">\n                  {{ \'ADF_FILE_UPLOAD.BUTTON.CLOSE\' | translate }}\n              </button>\n          </footer>\n\n          <footer\n              class="upload-dialog__actions"\n              [class.upload-dialog--hide]="!isConfirmation">\n              <button\n                  color="secondary"\n                  mat-button\n                  (click)="cancelAllUploads()">\n                  {{ \'ADF_FILE_UPLOAD.CONFIRMATION.BUTTON.CANCEL\' | translate }}\n              </button>\n\n              <button\n                  mat-button\n                  color="primary"\n                  (click)="toggleConfirmation()">\n                  {{ \'ADF_FILE_UPLOAD.CONFIRMATION.BUTTON.CONTINUE\' | translate }}\n              </button>\n          </footer>\n      </div>\n    ',styles:["\n\n    "]}]}],J.ctorParameters=function(){return[{type:r.UploadService},{type:n.ChangeDetectorRef}]},J.propDecorators={uploadList:[{type:n.ViewChild,args:[K]}],position:[{type:n.Input}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var tt=function(){function t(){this.cancel=new n.EventEmitter,this.remove=new n.EventEmitter,this.FileUploadStatus=r.FileUploadStatus}return t.prototype.onCancel=function(t){this.cancel.emit(t)},t.prototype.onRemove=function(t){this.remove.emit(t)},t}();tt.decorators=[{type:n.Component,args:[{selector:"adf-file-uploading-list-row",template:'\n      <div class="adf-file-uploading-row">\n          <mat-icon\n              mat-list-icon\n              class="adf-file-uploading-row__type">\n              insert_drive_file\n          </mat-icon>\n\n          <span\n              class="adf-file-uploading-row__name"\n              title="{{ file.name }}">\n              {{ file.name }}\n          </span>\n\n          <div\n              *ngIf="file.status === FileUploadStatus.Progress || file.status === FileUploadStatus.Starting"\n              (click)="onCancel(file)"\n              class="adf-file-uploading-row__group adf-file-uploading-row__group--toggle"\n              title="{{ \'ADF_FILE_UPLOAD.BUTTON.CANCEL_FILE\' | translate }}">\n              <span class="adf-file-uploading-row__status">\n                  {{ file.progress.loaded | adfFileSize }} / {{ file.progress.total | adfFileSize }}\n              </span>\n\n              <mat-icon\n                  mat-list-icon\n                  class="adf-file-uploading-row__action adf-file-uploading-row__action--cancel">\n                  clear\n              </mat-icon>\n          </div>\n\n          <div\n              *ngIf="file.status === FileUploadStatus.Complete"\n              (click)="onRemove(file)"\n              class="adf-file-uploading-row__group adf-file-uploading-row__group--toggle"\n              title="{{ \'ADF_FILE_UPLOAD.BUTTON.REMOVE_FILE\' | translate }}">\n              <mat-icon\n                  mat-list-icon\n                  class="adf-file-uploading-row__status adf-file-uploading-row__status--done">\n                  check_circle\n              </mat-icon>\n\n              <mat-icon\n                  mat-list-icon\n                  class="adf-file-uploading-row__action adf-file-uploading-row__action--remove">\n                  remove_circle\n              </mat-icon>\n          </div>\n\n          <div\n              *ngIf="file.status === FileUploadStatus.Pending"\n              (click)="onCancel(file)"\n              class="adf-file-uploading-row__group adf-file-uploading-row__group--toggle">\n              <mat-icon\n                  mat-list-icon\n                  class="adf-file-uploading-row__status adf-file-uploading-row__status--pending">\n                  schedule\n              </mat-icon>\n\n              <mat-icon\n                  mat-list-icon\n                  class="adf-file-uploading-row__action adf-file-uploading-row__action--remove">\n                  remove_circle\n              </mat-icon>\n          </div>\n\n          <div\n              *ngIf="file.status === FileUploadStatus.Error"\n              class="adf-file-uploading-row__block adf-file-uploading-row__status--error"\n              title="{{ file.response }}">\n              <mat-icon mat-list-icon>\n                  report_problem\n              </mat-icon>\n          </div>\n\n          <div\n              *ngIf="file.status === FileUploadStatus.Cancelled  ||\n                  file.status === FileUploadStatus.Aborted ||\n                  file.status === FileUploadStatus.Deleted"\n              class="adf-file-uploading-row__block adf-file-uploading-row__status--cancelled">\n              {{ \'ADF_FILE_UPLOAD.STATUS.FILE_CANCELED_STATUS\' | translate }}\n          </div>\n      <div>\n    ',styles:["\n\n    "]}]}],tt.ctorParameters=function(){return[]},tt.propDecorators={file:[{type:n.Input}],cancel:[{type:n.Output}],remove:[{type:n.Output}]};var et=function(){return function(t){t&&(this.type=t.type||null,this.action=t.action||null,this.permission=t.permission||null)}}(),nt=function(){function t(t,e,i,o){this.uploadService=t,this.translateService=e,this.logService=i,this.apiService=o,this.disabled=!1,this.uploadFolders=!1,this.multipleFiles=!1,this.versioning=!1,this.acceptedFilesType="*",this.tooltip=null,this.rootFolderId="-root-",this.success=new n.EventEmitter,this.error=new n.EventEmitter,this.createFolder=new n.EventEmitter,this.permissionEvent=new n.EventEmitter,this.hasPermission=!1,this.permissionValue=new h.Subject}return t.prototype.ngOnInit=function(){var t=this;this.permissionValue.subscribe(function(e){t.hasPermission=e})},t.prototype.ngOnChanges=function(t){var e=t.rootFolderId;e&&e.currentValue&&this.checkPermission()},t.prototype.isButtonDisabled=function(){return!!this.disabled||undefined},t.prototype.onFilesAdded=function(t){var e=r.FileUtils.toFileArray(t.currentTarget.files);this.hasPermission?this.uploadFiles(e):this.permissionEvent.emit(new et({type:"content",action:"upload",permission:"create"})),t.target.value=""},t.prototype.onDirectoryAdded=function(t){if(this.hasPermission){var e=r.FileUtils.toFileArray(t.currentTarget.files);this.uploadFiles(e)}else this.permissionEvent.emit(new et({type:"content",action:"upload",permission:"create"}));t.target.value=""},t.prototype.uploadFiles=function(t){var e=t.map(this.createFileModel.bind(this)).filter(this.isFileAcceptable.bind(this)).filter(this.isFileSizeAcceptable.bind(this));e.length>0&&((n=this.uploadService).addToQueue.apply(n,e),this.uploadService.uploadFilesInTheQueue(this.success));var n},t.prototype.createFileModel=function(t){return new r.FileModel(t,{newVersion:this.versioning,parentId:this.rootFolderId,path:(t.webkitRelativePath||"").replace(/\/[^\/]*$/,"")})},t.prototype.isFileAcceptable=function(t){if("*"===this.acceptedFilesType)return!0;return-1!==this.acceptedFilesType.split(",").map(function(t){return t.replace(/^\./,"")}).indexOf(t.extension)},t.prototype.isFileSizeAcceptable=function(t){var e=this,n=!0;return this.maxFilesSize!==undefined&&null!==this.maxFilesSize&&(this.maxFilesSize<=0||t.size>this.maxFilesSize)&&(n=!1,this.translateService.get("FILE_UPLOAD.MESSAGES.EXCEED_MAX_FILE_SIZE",{fileName:t.name}).subscribe(function(t){e.error.emit(t)})),n},t.prototype.checkPermission=function(){var t=this;this.rootFolderId&&this.getFolderNode(this.rootFolderId).subscribe(function(e){return t.permissionValue.next(t.hasCreatePermission(e))},function(e){return t.error.emit(e)})},t.prototype.getFolderNode=function(t){var e=this;return a.Observable.fromPromise(this.apiService.getInstance().nodes.getNodeInfo(t,{includeSource:!0,include:["allowableOperations"]}))["catch"](function(t){return e.handleError(t)})},t.prototype.handleError=function(t){return this.logService.error(t),a.Observable["throw"](t||"Server error")},t.prototype.hasCreatePermission=function(t){return!(!t||!t.allowableOperations)&&!!t.allowableOperations.find(function(t){return"create"===t})},t}();nt.decorators=[{type:n.Component,args:[{selector:"adf-upload-button",template:'\n      <form class="adf-upload-button-file-container">\n          \x3c!--Files Upload--\x3e\n          <a *ngIf="!uploadFolders"\n              [disabled]="isButtonDisabled()"\n              mat-raised-button color="primary">\n              <mat-icon>file_upload</mat-icon>\n\n              \x3c!--Multiple Files Upload--\x3e\n              <span *ngIf="multipleFiles">\n                  <label\n                      id="upload-multiple-file-label"\n                      *ngIf="!staticTitle"\n                      for="upload-multiple-files">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</label>\n                  <label\n                      id="upload-multiple-file-label-static"\n                      *ngIf="staticTitle"\n                      for="upload-multiple-files">{{ staticTitle }}</label>\n                  <input #uploadFiles\n                      id="upload-multiple-files"\n                      data-automation-id="upload-multiple-files"\n                      type="file"\n                      name="uploadFiles"\n                      multiple="multiple"\n                      accept="{{acceptedFilesType}}"\n                      [attr.disabled]="isButtonDisabled()"\n                      [title]="tooltip"\n                      (change)="onFilesAdded($event)">\n              </span>\n\n              \x3c!--Single Files Upload--\x3e\n              <span *ngIf="!multipleFiles">\n                  <label\n                      id="upload-single-file-label"\n                      *ngIf="!staticTitle"\n                      for="upload-single-file">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</label>\n                  <label\n                      id="upload-single-file-label-static"\n                      *ngIf="staticTitle"\n                      for="upload-single-file">{{ staticTitle }}</label>\n                  <input #uploadFiles\n                      id="upload-single-file"\n                      data-automation-id="upload-single-file"\n                      type="file"\n                      name="uploadFiles"\n                      accept="{{acceptedFilesType}}"\n                      [attr.disabled]="isButtonDisabled()"\n                      [title]="tooltip"\n                      (change)="onFilesAdded($event)">\n              </span>\n          </a>\n\n          \x3c!--Folders Upload--\x3e\n          <a *ngIf="uploadFolders"\n              [disabled]="isButtonDisabled()" mat-raised-button color="primary">\n              <mat-icon>file_upload</mat-icon>\n              <label\n                  id="uploadFolder-label"\n                  *ngIf="!staticTitle"\n                  for="uploadFolder">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FOLDER\' | translate }}</label>\n              <label\n                  id="uploadFolder-label-static"\n                  *ngIf="staticTitle"\n                  for="uploadFolder">{{ staticTitle }}</label>\n              <input #uploadFolders\n                  id="uploadFolder"\n                  data-automation-id="uploadFolder"\n                  type="file"\n                  name="uploadFiles"\n                  multiple="multiple"\n                  accept="{{acceptedFilesType}}"\n                  webkitdirectory directory\n                  [attr.disabled]="isButtonDisabled()"\n                  [title]="tooltip"\n                  (change)="onDirectoryAdded($event)">\n          </a>\n      </form>\n    ',styles:["\n      .adf-upload-button-file-container input {\n        cursor: pointer;\n        height: 100%;\n        right: 0;\n        opacity: 0;\n        position: absolute;\n        top: 0;\n        width: 300px;\n        z-index: 4; }\n    "],viewProviders:[{provide:r.EXTENDIBLE_COMPONENT,useExisting:n.forwardRef(function(){return nt})}],encapsulation:n.ViewEncapsulation.None}]}],nt.ctorParameters=function(){return[{type:r.UploadService},{type:r.TranslationService},{type:r.LogService},{type:r.AlfrescoApiService}]},nt.propDecorators={disabled:[{type:n.Input}],uploadFolders:[{type:n.Input}],multipleFiles:[{type:n.Input}],versioning:[{type:n.Input}],acceptedFilesType:[{type:n.Input}],maxFilesSize:[{type:n.Input}],staticTitle:[{type:n.Input}],tooltip:[{type:n.Input}],rootFolderId:[{type:n.Input}],success:[{type:n.Output}],error:[{type:n.Output}],createFolder:[{type:n.Output}],permissionEvent:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var it=function(){function t(t,e,i){this.uploadService=t,this.translateService=e,this.notificationService=i,this.disabled=!1,this.versioning=!1,this.success=new n.EventEmitter}return t.prototype.onFilesDropped=function(t){var e=this;if(!this.disabled&&t.length){var n=t.map(function(t){return new r.FileModel(t,{newVersion:e.versioning,path:"/",parentId:e.parentId})});(i=this.uploadService).addToQueue.apply(i,n),this.uploadService.uploadFilesInTheQueue(this.success)}var i},t.prototype.onFilesEntityDropped=function(t){var e=this;this.disabled||t.file(function(n){var i=new r.FileModel(n,{newVersion:e.versioning,parentId:e.parentId,path:t.fullPath.replace(t.name,"")});e.uploadService.addToQueue(i),e.uploadService.uploadFilesInTheQueue(e.success)})},t.prototype.onFolderEntityDropped=function(t){var e=this;!this.disabled&&t.isDirectory&&r.FileUtils.flattern(t).then(function(t){var n=t.map(function(t){return new r.FileModel(t.file,{newVersion:e.versioning,parentId:e.parentId,path:t.relativeFolder})});(i=e.uploadService).addToQueue.apply(i,n),e.uploadService.uploadFilesInTheQueue(e.success);var i})},t.prototype.showUndoNotificationBar=function(t){var e,n,i=this;e=this.translateService.get("FILE_UPLOAD.MESSAGES.PROGRESS"),n=this.translateService.get("FILE_UPLOAD.ACTION.UNDO"),this.notificationService.openSnackMessageAction(e.value,n.value,3e3).onAction().subscribe(function(){(e=i.uploadService).cancelUpload.apply(e,t);var e})},t.prototype.showErrorNotificationBar=function(t){this.notificationService.openSnackMessage(t,3e3)},t.prototype.isDroppable=function(){return!this.disabled},t.prototype.onUploadFiles=function(t){var e=this;t.stopPropagation(),t.preventDefault();if(this.hasCreatePermission(t.detail.data.obj.entry)){var n=t.detail.files;if(n&&n.length>0){var i=this.parentId;t.detail.data&&t.detail.data.obj.entry.isFolder&&(i=t.detail.data.obj.entry.id||this.parentId);var o=n.map(function(t){return new r.FileModel(t.file,{newVersion:e.versioning,path:t.relativeFolder,parentId:i})});this.uploadFiles(o)}}},t.prototype.uploadFiles=function(t){t.length&&((e=this.uploadService).addToQueue.apply(e,t),this.uploadService.uploadFilesInTheQueue(this.success));var e},t.prototype.hasCreatePermission=function(t){var e=!1;if(t&&t.allowableOperations){e=!!t.allowableOperations.find(function(t){return"create"===t})}return e},t}();it.decorators=[{type:n.Component,args:[{selector:"adf-upload-drag-area",template:'\n      <div [file-draggable]="isDroppable()" id="UploadBorder" class="upload-border"\n           (filesDropped)="onFilesDropped($event)"\n           (filesEntityDropped)="onFilesEntityDropped($event)"\n           (folderEntityDropped)="onFolderEntityDropped($event)"\n           (upload-files)="onUploadFiles($event)"\n           dropzone="" webkitdropzone="*" #droparea>\n          <ng-content></ng-content>\n      </div>\n    ',styles:["\n      .upload-border {\n          vertical-align: middle;\n          text-align: center;\n      }\n\n      .file-draggable__input-focus {\n          color: #2196F3;\n          border: 1px dashed #2196F3;\n      }\n    "],viewProviders:[{provide:r.EXTENDIBLE_COMPONENT,useExisting:n.forwardRef(function(){return it})}],encapsulation:n.ViewEncapsulation.None}]}],it.ctorParameters=function(){return[{type:r.UploadService},{type:r.TranslationService},{type:r.NotificationService}]},it.propDecorators={disabled:[{type:n.Input}],versioning:[{type:n.Input}],parentId:[{type:n.Input}],success:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ot=function(){function t(t,e){this.ngZone=e,this.enabled=!0,this.filesDropped=new n.EventEmitter,this.filesEntityDropped=new n.EventEmitter,this.folderEntityDropped=new n.EventEmitter,this.cssClassName="file-draggable__input-focus",this.element=t.nativeElement}return t.prototype.ngOnInit=function(){var t=this;this.ngZone.runOutsideAngular(function(){t.element.addEventListener("dragenter",t.onDragEnter.bind(t)),t.element.addEventListener("dragover",t.onDragOver.bind(t)),t.element.addEventListener("dragleave",t.onDragLeave.bind(t)),t.element.addEventListener("drop",t.onDropFiles.bind(t))})},t.prototype.ngOnDestroy=function(){this.element.removeEventListener("dragenter",this.onDragEnter),this.element.removeEventListener("dragover",this.onDragOver),this.element.removeEventListener("dragleave",this.onDragLeave),this.element.removeEventListener("drop",this.onDropFiles)},t.prototype.onDropFiles=function(t){if(this.enabled&&!t.defaultPrevented){this.preventDefault(t);var e=t.dataTransfer.items;if(e)for(var n=0;n<e.length;n++)if("undefined"!=typeof e[n].webkitGetAsEntry){var i=e[n].webkitGetAsEntry();i&&(i.isFile?this.filesEntityDropped.emit(i):i.isDirectory&&this.folderEntityDropped.emit(i))}else{o=r.FileUtils.toFileArray(t.dataTransfer.files);this.filesDropped.emit(o)}else{var o=r.FileUtils.toFileArray(t.dataTransfer.files);this.filesDropped.emit(o)}this.element.classList.remove(this.cssClassName)}},t.prototype.onDragEnter=function(t){this.enabled&&!t.defaultPrevented&&(this.preventDefault(t),this.element.classList.add(this.cssClassName))},t.prototype.onDragLeave=function(t){this.enabled&&!t.defaultPrevented&&(this.preventDefault(t),this.element.classList.remove(this.cssClassName))},t.prototype.onDragOver=function(t){this.enabled&&!t.defaultPrevented&&(this.preventDefault(t),this.element.classList.add(this.cssClassName))},t.prototype.preventDefault=function(t){t.stopPropagation(),t.preventDefault()},t}();ot.decorators=[{type:n.Directive,args:[{selector:"[file-draggable]"}]}],ot.ctorParameters=function(){return[{type:n.ElementRef},{type:n.NgZone}]},ot.propDecorators={enabled:[{type:n.Input,args:["file-draggable"]}],filesDropped:[{type:n.Output}],filesEntityDropped:[{type:n.Output}],folderEntityDropped:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rt=function(){return function(){}}();rt.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,V,u.TranslateModule,r.PipeModule],declarations:[ot,it,nt,J,K,tt],exports:[ot,it,nt,J,K,tt]}]}],rt.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var st={"-trashcan-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"archivedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.DELETED_ON",format:"timeAgo",sortable:!0},{key:"archivedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.DELETED_BY",sortable:!0}],"-sites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"title",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"visibility",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.STATUS",sortable:!0}],"-mysites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"title",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"visibility",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.STATUS",sortable:!0}],"-favorites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0}],"-recent-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",cssClass:"ellipsis-cell",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0}],"-sharedlinks-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",cssClass:"ellipsis-cell",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0},{key:"sharedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.SHARED_BY",sortable:!0}],"default":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0}]},at=function(){function t(e,n,i){if(this.obj=e,this.documentListService=n,this.permissionsStyle=i,this.cache={},this.isSelected=!1,this.cssClass="",!e)throw new Error(t.ERR_OBJECT_NOT_FOUND);this.isDropTarget=this.isFolderAndHasPermissionToUpload(e),i&&(this.cssClass=this.getPermissionClass(e))}return Object.defineProperty(t.prototype,"node",{get:function(){return this.obj},enumerable:!0,configurable:!0}),t.prototype.getPermissionClass=function(t){var e=this,n="";return this.permissionsStyle.forEach(function(i){(e.applyPermissionStyleToFolder(t.entry,i)||e.applyPermissionStyleToFile(t.entry,i))&&e.documentListService.hasPermission(t.entry,i.permission)&&(n+=" "+i.css)}),n},t.prototype.applyPermissionStyleToFile=function(t,e){return e.isFile&&t.isFile},t.prototype.applyPermissionStyleToFolder=function(t,e){return e.isFolder&&t.isFolder},t.prototype.isFolderAndHasPermissionToUpload=function(t){return this.isFolder(t)&&this.documentListService.hasPermission(t.entry,"create")},t.prototype.isFolder=function(t){return t.entry&&t.entry.isFolder},t.prototype.cacheValue=function(t,e){return this.cache[t]=e,e},t.prototype.getValue=function(t){return this.cache[t]!==undefined?this.cache[t]:r.ObjectUtils.getValue(this.obj.entry,t)},t.prototype.hasValue=function(t){return this.getValue(t)!==undefined},t}();at.ERR_OBJECT_NOT_FOUND="Object source not found";/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ct=function(){function t(t,e,n){void 0===e&&(e=[]),this.documentListService=t,this.ERR_ROW_NOT_FOUND="Row not found",this.ERR_COL_NOT_FOUND="Column not found",this.thumbnails=!1,this.rows=[],this.columns=e||[],this.sorting=n}return t.prototype.getRows=function(){return this.rows},t.prototype.setRows=function(t){this.rows=t||[],this.sort()},t.prototype.getColumns=function(){return this.columns},t.prototype.setColumns=function(t){this.columns=t||[]},t.prototype.getValue=function(t,e){if(!t)throw new Error(this.ERR_ROW_NOT_FOUND);if(!e)throw new Error(this.ERR_COL_NOT_FOUND);var n=t,i=t.getValue(e.key);if(n.cache[e.key]!==undefined)return n.cache[e.key];if("date"===e.type)try{var o=this.formatDate(e,i);return n.cacheValue(e.key,o)}catch(c){return console.error("Error parsing date "+i+" to format "+e.format),"Error"}if("$thumbnail"===e.key){if(this.imageResolver){if(a=this.imageResolver(t,e))return a}var r=t.node;if(r.entry.isFolder)return this.documentListService.getMimeTypeIcon("folder");if(r.entry.isFile&&this.thumbnails)return this.documentListService.getDocumentThumbnailUrl(r);if(r.entry.content){var s=r.entry.content.mimeType;if(s)return this.documentListService.getMimeTypeIcon(s)}return this.documentListService.getDefaultMimeTypeIcon()}if("image"===e.type&&this.imageResolver){var a=this.imageResolver(t,e);if(a)return a}return n.cacheValue(e.key,i)},t.prototype.formatDate=function(t,n){if("date"===t.type){var i=t.format||"medium";if("timeAgo"===i){return(new r.TimeAgoPipe).transform(n)}return new e.DatePipe("en-US").transform(n,i)}return n},t.prototype.getSorting=function(){return this.sorting},t.prototype.setSorting=function(t){this.sorting=t,this.sortRows(this.rows,this.sorting)},t.prototype.sort=function(t,e){var n=this.sorting||new r.DataSorting;t&&(n.key=t,n.direction=e||"asc"),this.setSorting(n)},t.prototype.setFilter=function(t){this.filter=t},t.prototype.setImageResolver=function(t){this.imageResolver=t},t.prototype.sortRows=function(t,e){var n={};e&&e.key&&t&&t.length>0&&((e.key.includes("sizeInBytes")||"name"===e.key)&&(n.numeric=!0),t.sort(function(t,i){if(t.node.entry.isFolder!==i.node.entry.isFolder)return t.node.entry.isFolder?-1:1;var o=t.getValue(e.key);o=o?o instanceof Date?o.valueOf().toString():o.toString():"";var r=i.getValue(e.key);return r=r?r instanceof Date?r.valueOf().toString():r.toString():"","asc"===e.direction?o.localeCompare(r,undefined,n):r.localeCompare(o,undefined,n)}))},t.prototype.loadPage=function(t,e){var n=this;void 0===e&&(e=!1);var i=[];if(t&&t.list){var o=t.list.entries;if(o&&o.length>0&&(i=o.map(function(t){return new at(t,n.documentListService,n.permissionsStyle)}),this.filter&&(i=i.filter(this.filter)),this.columns&&this.columns.length>0)){var r=this.getSorting();if(r)this.sortRows(i,r);else{var s=this.columns.filter(function(t){return t.sortable});s.length>0?this.sort(s[0].key,"asc"):this.sort(this.columns[0].key,"asc")}}}this.rows=e?this.rows.concat(i):i},t}(),ut=function(){return function(t){this.disableWithNoPermission=!1,this.disabled=!1,t&&(this.icon=t.icon,this.title=t.title,this.handler=t.handler,this.execute=t.execute,this.target=t.target,this.permission=t.permission,this.disableWithNoPermission=t.disableWithNoPermission,this.disabled=t.disabled)}}(),lt=function(t){function e(e){var n=t.call(this,e)||this;return n.target="document",n}return U(e,t),e}(ut),pt=function(t){function e(e){var n=t.call(this,e)||this;return n.target="folder",n}return U(e,t),e}(ut),ht=function(){function t(t,e,n,i,o){this.contentService=e,this.apiService=n,this.logService=i,this.thumbnailService=o}return t.prototype.getNodesPromise=function(e,n){var i=t.ROOT_ID;n&&n.rootFolderId&&(i=n.rootFolderId);var o={includeSource:!0,include:["path","properties","allowableOperations"]};return e&&(o.relativePath=e),n&&(n.maxItems&&(o.maxItems=n.maxItems),n.skipCount&&(o.skipCount=n.skipCount)),this.apiService.getInstance().nodes.getNodeChildren(i,o)},t.prototype.deleteNode=function(t){return a.Observable.fromPromise(this.apiService.getInstance().nodes.deleteNode(t))},t.prototype.copyNode=function(t,e){var n=this;return a.Observable.fromPromise(this.apiService.getInstance().nodes.copyNode(t,{targetParentId:e}))["catch"](function(t){return n.handleError(t)})},t.prototype.moveNode=function(t,e){var n=this;return a.Observable.fromPromise(this.apiService.getInstance().nodes.moveNode(t,{targetParentId:e}))["catch"](function(t){return n.handleError(t)})},t.prototype.createFolder=function(t,e){var n=this;return a.Observable.fromPromise(this.apiService.getInstance().nodes.createFolder(t,"/",e))["catch"](function(t){return n.handleError(t)})},t.prototype.getFolder=function(t,e){var n=this;return a.Observable.fromPromise(this.getNodesPromise(t,e)).map(function(t){return t})["catch"](function(t){return n.handleError(t)})},t.prototype.getFolderNode=function(t){return this.apiService.getInstance().nodes.getNodeInfo(t,{includeSource:!0,include:["path","properties","allowableOperations"]})},t.prototype.getDocumentThumbnailUrl=function(t){return this.thumbnailService.getDocumentThumbnailUrl(t)},t.prototype.getMimeTypeIcon=function(t){return this.thumbnailService.getMimeTypeIcon(t)},t.prototype.getDefaultMimeTypeIcon=function(){return this.thumbnailService.getDefaultMimeTypeIcon()},t.prototype.hasPermission=function(t,e){return this.contentService.hasPermission(t,e)},t.prototype.handleError=function(t){return this.logService.error(t),a.Observable["throw"](t||"Server error")},t}();ht.ROOT_ID="-root-",ht.decorators=[{type:n.Injectable}],ht.ctorParameters=function(){return[{type:r.AuthenticationService},{type:r.ContentService},{type:r.AlfrescoApiService},{type:r.LogService},{type:r.ThumbnailService}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dt=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n}return U(e,t),e}(r.BaseEvent),ft=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n}return U(e,t),e}(r.BaseEvent),yt={};yt.Finite=0,yt.Infinite=1,yt[yt.Finite]="Finite",yt[yt.Infinite]="Infinite";var bt=function(){function t(e,i,o,r,s,a){this.documentListService=e,this.ngZone=i,this.elementRef=o,this.apiService=r,this.appConfig=s,this.preferences=a,this.permissionsStyle=[],this.locationFormat="/",this.navigate=!0,this.navigationMode=t.DOUBLE_CLICK_NAVIGATION,this.thumbnails=!1,this.selectionMode="single",this.multiselect=!1,this.contentActions=!1,this.contentActionsPosition="right",this.contextMenuActions=!1,this.emptyFolderImageUrl="./assets/images/empty_doc_lib.svg",this.allowDropFiles=!1,this.loading=!1,this.rowFilter=null,this.imageResolver=null,this.currentFolderId=null,this.folderNode=null,this.node=null,this.skipCount=0,this.enableInfiniteScrolling=!1,this.nodeClick=new n.EventEmitter,this.nodeDblClick=new n.EventEmitter,this.folderChange=new n.EventEmitter,this.preview=new n.EventEmitter,this.ready=new n.EventEmitter,this.error=new n.EventEmitter,this.actions=[],this.contextActionHandler=new h.Subject,this.infiniteLoading=!1,this.noPermission=!1,this.selection=new Array,this.pagination=new h.Subject,this.layoutPresets={},this.currentNodeAllowableOperations=[],this.CREATE_PERMISSION="create",this.maxItems=this.preferences.paginationSize,this.pagination.next({maxItems:this.preferences.paginationSize,skipCount:0,totalItems:0,hasMoreItems:!1})}return t.prototype.getContextActions=function(t){var e=this;if(t&&t.entry){var n=this.getNodeActions(t);if(n&&n.length>0)return n.map(function(n){return{model:n,node:t,subject:e.contextActionHandler}})}return null},t.prototype.contextActionCallback=function(t){t&&this.executeContentAction(t.node,t.model)},Object.defineProperty(t.prototype,"hasCustomLayout",{get:function(){return this.columnList&&this.columnList.columns&&this.columnList.columns.length>0},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.loadLayoutPresets(),this.data=new ct(this.documentListService,null,this.getDefaultSorting()),this.data.thumbnails=this.thumbnails,this.data.permissionsStyle=this.permissionsStyle,this.rowFilter&&this.data.setFilter(this.rowFilter),this.imageResolver&&this.data.setImageResolver(this.imageResolver),this.contextActionHandlerSubscription=this.contextActionHandler.subscribe(function(e){return t.contextActionCallback(e)}),this.enforceSingleClickNavigationForMobile()},t.prototype.ngAfterContentInit=function(){var t=[];this.hasCustomLayout&&(t=this.columnList.columns.map(function(t){return t})),this.data?t&&t.length>0&&this.data.setColumns(t):this.data=new ct(this.documentListService,t,this.getDefaultSorting());var e=this.data.getColumns();e&&0!==e.length||this.setupDefaultColumns(this.currentFolderId)},t.prototype.ngOnChanges=function(t){(this.isSkipCountChanged(t)||this.isMaxItemsChanged(t))&&this.reload(this.enableInfiniteScrolling),t.folderNode&&t.folderNode.currentValue?this.loadFolder():t.currentFolderId&&t.currentFolderId.currentValue?(t.currentFolderId.previousValue!==t.currentFolderId.currentValue&&(this.folderNode=null),this.hasCustomLayout||this.setupDefaultColumns(t.currentFolderId.currentValue),this.loadFolderByNodeId(t.currentFolderId.currentValue)):this.data&&(t.node&&t.node.currentValue?(this.resetSelection(),this.data.loadPage(t.node.currentValue),this.pagination.next(t.node.currentValue.list.pagination)):t.rowFilter?(this.data.setFilter(t.rowFilter.currentValue),this.currentFolderId&&this.loadFolderNodesByFolderNodeId(this.currentFolderId,this.maxItems,this.skipCount)):t.imageResolver&&this.data.setImageResolver(t.imageResolver.currentValue))},t.prototype.reload=function(t){var e=this;void 0===t&&(t=!1),this.ngZone.run(function(){e.resetSelection(),e.folderNode?e.loadFolder(t):e.currentFolderId?e.loadFolderByNodeId(e.currentFolderId,t):e.node&&(e.data.loadPage(e.node),e.onDataReady(e.node))})},t.prototype.isEmptyTemplateDefined=function(){return!(!this.dataTable||!this.emptyFolderTemplate)},t.prototype.isNoPermissionTemplateDefined=function(){return!(!this.dataTable||!this.noPermissionTemplate)},t.prototype.isMobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},t.prototype.isEmpty=function(){return!this.data||0===this.data.getRows().length},t.prototype.getNodeActions=function(t){var e=this,n=null;if(t&&t.entry&&(t.entry.isFile&&(n="document"),t.entry.isFolder&&(n="folder"),n)){var i=n.toLowerCase(),o=this.actions.filter(function(t){return t.target.toLowerCase()===i}).map(function(t){return new ut(t)});return o.forEach(function(n){e.checkPermission(t,n)}),o}return[]},t.prototype.checkPermission=function(t,e){if(e.permission&&this.hasPermissions(t)){t.entry.allowableOperations.find(function(t){return t===e.permission})||!0!==e.disableWithNoPermission||(e.disabled=!0)}return e},t.prototype.hasPermissions=function(t){return!!t.entry.allowableOperations},t.prototype.onShowContextMenu=function(t){t&&this.contextMenuActions&&t.preventDefault()},t.prototype.performNavigation=function(t){return!!this.canNavigateFolder(t)&&(this.updateFolderData(t),!0)},t.prototype.performCustomSourceNavigation=function(t){return!!this.isCustomSource(this.currentFolderId)&&(this.updateFolderData(t),!0)},t.prototype.updateFolderData=function(t){this.currentFolderId=t.entry.id,this.folderNode=t.entry,this.skipCount=0,this.currentNodeAllowableOperations=t.entry.allowableOperations?t.entry.allowableOperations:[],this.loadFolder(),this.folderChange.emit(new ft(t.entry))},t.prototype.executeContentAction=function(t,e){if(t&&t.entry&&e){var n=void 0;n="function"==typeof e.handler?e.handler(t,this,e.permission):a.Observable.of(!0),"function"==typeof e.execute&&n.subscribe(function(){e.execute(t)})}},t.prototype.loadFolder=function(t){var e=this;void 0===t&&(t=!1),t?this.infiniteLoading=!0:this.loading=!0;var n=this.folderNode?this.folderNode.id:this.currentFolderId;this.hasCustomLayout||this.setupDefaultColumns(n),n&&this.loadFolderNodesByFolderNodeId(n,this.maxItems,this.skipCount,t)["catch"](function(t){return e.error.emit(t)})},t.prototype.loadFolderByNodeId=function(t,e){var n=this;void 0===e&&(e=!1),this.loading=!0,this.resetSelection(),"-trashcan-"===t?this.loadTrashcan(e):"-sharedlinks-"===t?this.loadSharedLinks(e):"-sites-"===t?this.loadSites(e):"-mysites-"===t?this.loadMemberSites(e):"-favorites-"===t?this.loadFavorites(e):"-recent-"===t?this.loadRecent(e):this.documentListService.getFolderNode(t).then(function(t){return n.folderNode=t,n.currentFolderId=t.id,n.skipCount=0,n.currentNodeAllowableOperations=t.allowableOperations?t.allowableOperations:[],n.loadFolderNodesByFolderNodeId(t.id,n.maxItems,n.skipCount,e)})["catch"](function(t){403===JSON.parse(t.message).error.statusCode&&(n.loading=!1,n.noPermission=!0),n.error.emit(t)})},t.prototype.loadFolderNodesByFolderNodeId=function(t,e,n,i){var o=this;return void 0===i&&(i=!1),new Promise(function(r,s){o.resetSelection(),o.documentListService.getFolder(null,{maxItems:e,skipCount:n,rootFolderId:t}).subscribe(function(t){o.data.loadPage(t,i),o.loading=!1,o.infiniteLoading=!1,o.onDataReady(t),r(!0)},function(t){s(t)})})},t.prototype.resetSelection=function(){this.dataTable.resetSelection(),this.selection=[]},t.prototype.isSkipCountChanged=function(t){return t.skipCount&&null!==t.skipCount.currentValue&&t.skipCount.currentValue!==undefined&&t.skipCount.currentValue!==t.skipCount.previousValue},t.prototype.isMaxItemsChanged=function(t){return t.maxItems&&t.maxItems.currentValue&&t.maxItems.currentValue!==t.maxItems.previousValue},t.prototype.loadTrashcan=function(t){var e=this;void 0===t&&(t=!1);var n={include:["path","properties"],maxItems:this.maxItems,skipCount:this.skipCount};this.apiService.nodesApi.getDeletedNodes(n).then(function(n){return e.onPageLoaded(n,t)})["catch"](function(t){return e.error.emit(t)})},t.prototype.loadSharedLinks=function(t){var e=this;void 0===t&&(t=!1);var n={include:["properties","allowableOperations","path"],maxItems:this.maxItems,skipCount:this.skipCount};this.apiService.sharedLinksApi.findSharedLinks(n).then(function(n){return e.onPageLoaded(n,t)})["catch"](function(t){return e.error.emit(t)})},t.prototype.loadSites=function(t){var e=this;void 0===t&&(t=!1);var n={include:["properties"],maxItems:this.maxItems,skipCount:this.skipCount};this.apiService.sitesApi.getSites(n).then(function(n){return e.onPageLoaded(n,t)})["catch"](function(t){return e.error.emit(t)})},t.prototype.loadMemberSites=function(t){var e=this;void 0===t&&(t=!1);var n={include:["properties"],maxItems:this.maxItems,skipCount:this.skipCount};this.apiService.peopleApi.getSiteMembership("-me-",n).then(function(n){var i={list:{entries:n.list.entries.map(function(t){var n=t.entry.site;return n.allowableOperations=n.allowableOperations?n.allowableOperations:[e.CREATE_PERMISSION],{entry:n}}),pagination:n.list.pagination}};e.onPageLoaded(i,t)})["catch"](function(t){return e.error.emit(t)})},t.prototype.loadFavorites=function(t){var e=this;void 0===t&&(t=!1);var n={maxItems:this.maxItems,skipCount:this.skipCount,where:"(EXISTS(target/file) OR EXISTS(target/folder))",include:["properties","allowableOperations","path"]};this.apiService.favoritesApi.getFavorites("-me-",n).then(function(n){var i={list:{entries:n.list.entries.map(function(t){var e=t.entry.target;return{entry:e.file||e.folder}}).map(function(t){var e=t.entry;return e.properties={"cm:title":e.title,"cm:description":e.description},{entry:e}}),pagination:n.list.pagination}};e.onPageLoaded(i,t)})["catch"](function(t){return e.error.emit(t)})},t.prototype.loadRecent=function(t){var e=this;void 0===t&&(t=!1),this.apiService.peopleApi.getPerson("-me-").then(function(t){var n=t.entry.id,i={query:{query:"*",language:"afts"},filterQueries:[{query:"cm:modified:[NOW/DAY-30DAYS TO NOW/DAY+1DAY]"},{query:"cm:modifier:"+n+" OR cm:creator:"+n},{query:'TYPE:"content" AND -TYPE:"app:filelink" AND -TYPE:"fm:post"'}],include:["path","properties","allowableOperations"],sort:[{type:"FIELD",field:"cm:modified",ascending:!1}],paging:{maxItems:e.maxItems,skipCount:e.skipCount}};return e.apiService.searchApi.search(i)}).then(function(n){return e.onPageLoaded(n,t)})["catch"](function(t){return e.error.emit(t)})},t.prototype.onPageLoaded=function(t,e){void 0===e&&(e=!1),t&&(this.data.loadPage(t,e),this.loading=!1,this.onDataReady(t))},t.prototype.setupDefaultColumns=function(t){if(void 0===t&&(t="default"),this.data){var e=this.getLayoutPreset(t);this.data.setColumns(e)}},t.prototype.onPreviewFile=function(t){t&&this.preview.emit(new dt(t))},t.prototype.onNodeClick=function(e){var n=new CustomEvent("node-click",{detail:{sender:this,node:e},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(n);var i=new dt(e);this.nodeClick.emit(i),i.defaultPrevented||this.navigate&&this.navigationMode===t.SINGLE_CLICK_NAVIGATION&&e&&e.entry&&(e.entry.isFile&&this.onPreviewFile(e),e.entry.isFolder&&this.performNavigation(e))},t.prototype.onNodeDblClick=function(e){var n=new CustomEvent("node-dblclick",{detail:{sender:this,node:e},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(n);var i=new dt(e);this.nodeDblClick.emit(i),i.defaultPrevented||this.navigate&&this.navigationMode===t.DOUBLE_CLICK_NAVIGATION&&e&&e.entry&&(e.entry.isFile&&this.onPreviewFile(e),e.entry.isFolder&&this.performNavigation(e))},t.prototype.onNodeSelect=function(t){this.selection=t.selection.map(function(t){return t.node});var e=new CustomEvent("node-select",{detail:{node:t.row.node,selection:this.selection},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(e)},t.prototype.onNodeUnselect=function(t){this.selection=t.selection.map(function(t){return t.node});var e=new CustomEvent("node-unselect",{detail:{node:t.row.node,selection:this.selection},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(e)},t.prototype.onShowRowContextMenu=function(t){if(this.contextMenuActions){var e=t.value,n=e.row.node;n&&(e.actions=this.getContextActions(n)||[])}},t.prototype.onShowRowActionsMenu=function(t){if(this.contentActions){var e=t.value,n=e.row.node;n&&(e.actions=this.getNodeActions(n)||[])}},t.prototype.onExecuteRowAction=function(t){if(this.contentActions){var e=t.value,n=e.row.node,i=e.action;this.executeContentAction(n,i)}},t.prototype.enforceSingleClickNavigationForMobile=function(){this.isMobile()&&(this.navigationMode=t.SINGLE_CLICK_NAVIGATION)},t.prototype.getDefaultSorting=function(){var t;if(this.sorting){var e=this.sorting,n=e[0],i=e[1];t=new r.DataSorting(n,i)}return t},t.prototype.canNavigateFolder=function(t){return!this.isCustomSource(this.currentFolderId)&&!!(t&&t.entry&&t.entry.isFolder)},t.prototype.isCustomSource=function(t){return["-trashcan-","-sharedlinks-","-sites-","-mysites-","-favorites-","-recent-"].indexOf(t)>-1},t.prototype.hasCurrentNodePermission=function(t){var e=!1;if(this.currentNodeAllowableOperations.length>0){e=!!this.currentNodeAllowableOperations.find(function(e){return e===t})}return e},t.prototype.hasCreatePermission=function(){return this.hasCurrentNodePermission(this.CREATE_PERMISSION)},t.prototype.loadLayoutPresets=function(){var t=this.appConfig.get("document-list.presets",null);this.layoutPresets=t?Object.assign({},st,t):st},t.prototype.getLayoutPreset=function(t){return void 0===t&&(t="default"),(this.layoutPresets[t]||this.layoutPresets["default"]).map(function(t){return new r.ObjectDataColumn(t)})},t.prototype.onDataReady=function(t){this.ready.emit(t),t&&t.list&&t.list.pagination?this.pagination.next(t.list.pagination):this.pagination.next(null)},t.prototype.updatePagination=function(t){var e=this.maxItems!==t.maxItems||this.skipCount!==t.skipCount;this.maxItems=t.maxItems,this.skipCount=t.skipCount,e&&this.reload(this.enableInfiniteScrolling)},Object.defineProperty(t.prototype,"supportedPageSizes",{get:function(){return this.appConfig.get("document-list.supportedPageSizes",[5,10,15,25])},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.contextActionHandlerSubscription&&(this.contextActionHandlerSubscription.unsubscribe(),this.contextActionHandlerSubscription=null)},t}();bt.SINGLE_CLICK_NAVIGATION="click",bt.DOUBLE_CLICK_NAVIGATION="dblclick",bt.DEFAULT_PAGE_SIZE=20,bt.decorators=[{type:n.Component,args:[{selector:"adf-document-list",styles:["\n\n    "],template:'\n      <adf-datatable\n          [selectionMode]="selectionMode"\n          [data]="data"\n          [actions]="contentActions"\n          [actionsPosition]="contentActionsPosition"\n          [multiselect]="multiselect"\n          [allowDropFiles]="allowDropFiles"\n          [contextMenu]="contextMenuActions"\n          [rowStyle]="rowStyle"\n          [rowStyleClass]="rowStyleClass"\n          [loading]="loading"\n          [noPermission]="noPermission"\n          [showHeader]="!isEmpty()"\n          (showRowContextMenu)="onShowRowContextMenu($event)"\n          (showRowActionsMenu)="onShowRowActionsMenu($event)"\n          (executeRowAction)="onExecuteRowAction($event)"\n          (rowClick)="onNodeClick($event.value?.node)"\n          (rowDblClick)="onNodeDblClick($event.value?.node)"\n          (row-select)="onNodeSelect($event.detail)"\n          (row-unselect)="onNodeUnselect($event.detail)">\n\n          <div *ngIf="!isEmptyTemplateDefined()">\n              <no-content-template>\n                  <ng-template>\n                      <adf-empty-list>\n                          <div class="adf-empty-list_template adf-empty-folder">\n                              <div class="adf-empty-folder-this-space-is-empty">{{\'ADF-DOCUMENT-LIST.EMPTY.HEADER\' | translate}}</div>\n                              <div fxHide.lt-md="true" class="adf-empty-folder-drag-drop">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.TITLE\' | translate }}</div>\n                              <div fxHide.lt-md="true" class="adf-empty-folder-any-files-here-to-add">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.SUBTITLE\' | translate }}</div>\n                              <img class="adf-empty-folder-image" [src]="emptyFolderImageUrl">\n                          </div>\n                          \x3c!-- <div adf-empty-list-header class="adf-empty-list-header"> {{\'ADF-DOCUMENT-LIST.EMPTY.HEADER\' | translate}} </div> --\x3e\n                      </adf-empty-list>\n                  </ng-template>\n              </no-content-template>\n          </div>\n\n          <div *ngIf="!isNoPermissionTemplateDefined()">\n              <no-permission-template>\n                  <ng-template>\n                      <div class="adf-no-permission__template">\n                          <mat-icon>ic_error</mat-icon>\n                          <p class="adf-no-permission__template--text">{{ \'ADF-DOCUMENT-LIST.NO_PERMISSION\' | translate }}</p>\n                      </div>\n                  </ng-template>\n              </no-permission-template>\n          </div>\n\n          <div>\n              <loading-content-template>\n                  <ng-template>\n                      <div class="adf-document-list-loading-container">\n                          <mat-progress-spinner\n                              id="adf-document-list-loading"\n                              class="adf-document-list-loading-margin"\n                              [color]="\'primary\'"\n                              [mode]="\'indeterminate\'">\n                          </mat-progress-spinner>\n                      </div>\n                  </ng-template>\n              </loading-content-template>\n          </div>\n      </adf-datatable>\n    ',encapsulation:n.ViewEncapsulation.None}]}],bt.ctorParameters=function(){return[{type:ht},{type:n.NgZone},{type:n.ElementRef},{type:r.AlfrescoApiService},{type:r.AppConfigService},{type:r.UserPreferencesService}]},bt.propDecorators={columnList:[{type:n.ContentChild,args:[r.DataColumnListComponent]}],permissionsStyle:[{type:n.Input}],locationFormat:[{type:n.Input}],navigate:[{type:n.Input}],navigationMode:[{type:n.Input}],thumbnails:[{type:n.Input}],selectionMode:[{type:n.Input}],multiselect:[{type:n.Input}],contentActions:[{type:n.Input}],contentActionsPosition:[{type:n.Input}],contextMenuActions:[{type:n.Input}],emptyFolderImageUrl:[{type:n.Input}],allowDropFiles:[{type:n.Input}],sorting:[{type:n.Input}],rowStyle:[{type:n.Input}],rowStyleClass:[{type:n.Input}],loading:[{type:n.Input}],rowFilter:[{type:n.Input}],imageResolver:[{type:n.Input}],currentFolderId:[{type:n.Input}],folderNode:[{type:n.Input}],node:[{type:n.Input}],maxItems:[{type:n.Input}],skipCount:[{type:n.Input}],enableInfiniteScrolling:[{type:n.Input}],nodeClick:[{type:n.Output}],nodeDblClick:[{type:n.Output}],folderChange:[{type:n.Output}],preview:[{type:n.Output}],ready:[{type:n.Output}],error:[{type:n.Output}],dataTable:[{type:n.ViewChild,args:[r.DataTableComponent]}],onShowContextMenu:[{type:n.HostListener,args:["contextmenu",["$event"]]}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mt=function(){function t(t){this.documentList=t}return t.prototype.registerAction=function(t){return!(!this.documentList||!t)&&(this.documentList.actions.push(t),!0)},t}();mt.decorators=[{type:n.Component,args:[{selector:"content-actions",template:""}]}],mt.ctorParameters=function(){return[{type:bt}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vt=function(){function t(t){this.searchService=t}return t.prototype.search=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=25);var o={query:{query:t+"* OR name:"+t+"*"},include:["path","allowableOperations"],paging:{maxItems:""+i,skipCount:""+n},filterQueries:[{query:"TYPE:'cm:folder'"},{query:"NOT cm:creator:System"}]};return e&&(o.scope=e),this.searchService.search(o)},t}();vt.decorators=[{type:n.Injectable}],vt.ctorParameters=function(){return[{type:r.SearchService}]};var gt,St="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wt={errorObject:{e:{}}},_t={tryCatch:function(t){return gt=t,S}},Ot={isFunction:function(t){return"function"==typeof t}},xt={isArray:Array.isArray||function(t){return t&&"number"==typeof t.length}},Et={isObject:function(t){return null!=t&&"object"==typeof t}},Ct=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Tt={UnsubscriptionError:function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return Ct(e,t),e}(Error)},It={Subscription:function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,i=this._parents,o=this._unsubscribe,r=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=i?i.length:0;n;)n.remove(this),n=++s<a&&i[s]||null;if(Ot.isFunction(o)){(u=_t.tryCatch(o).call(this))===wt.errorObject&&(e=!0,t=t||(wt.errorObject.e instanceof Tt.UnsubscriptionError?w(wt.errorObject.e.errors):[wt.errorObject.e]))}if(xt.isArray(r))for(s=-1,a=r.length;++s<a;){var c=r[s];if(Et.isObject(c)){var u=_t.tryCatch(c.unsubscribe).call(c);if(u===wt.errorObject){e=!0,t=t||[];var l=wt.errorObject.e;l instanceof Tt.UnsubscriptionError?t=t.concat(w(l.errors)):t.push(l)}}}if(e)throw new Tt.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}()},At={empty:{closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},Nt="undefined"!=typeof window&&window,Dt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt=Nt||void 0!==St&&St||Dt,Ft=Pt;!function(){if(!Pt)throw new Error("RxJS could not find any global context (window, self, global)")}();var Lt={root:Ft},Rt=g(function(t,e){var n=Lt.root.Symbol;e.rxSubscriber="function"==typeof n&&"function"==typeof n["for"]?n["for"]("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber}),Mt=(Rt.rxSubscriber,Rt.$$rxSubscriber,St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),kt=function(t){function e(n,i,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=At.empty;break;case 1:if(!n){this.destination=At.empty;break}if("object"==typeof n){n instanceof e?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new Ut(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new Ut(this,n,i,o)}}return Mt(e,t),e.prototype[Rt.rxSubscriber]=function(){return this},e.create=function(t,n,i){var o=new e(t,n,i);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(It.Subscription),jt=kt,Ut=function(t){function e(e,n,i,o){t.call(this),this._parentSubscriber=e;var r,s=this;Ot.isFunction(n)?r=n:n&&(r=n.next,i=n.error,o=n.complete,n!==At.empty&&(s=Object.create(n),Ot.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=r,this._error=i,this._complete=o}return Mt(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){throw this.unsubscribe(),n}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(i){return t.syncErrorValue=i,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(kt),Vt={Subscriber:jt},Bt=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},zt={OuterSubscriber:function(t){function e(){t.apply(this,arguments)}return Bt(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(Vt.Subscriber)},Yt={isArrayLike:function(t){return t&&"number"==typeof t.length}},Ht={isPromise:function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},qt={toSubscriber:function(t,e,n){if(t){if(t instanceof Vt.Subscriber)return t;if(t[Rt.rxSubscriber])return t[Rt.rxSubscriber]()}return t||e||n?new Vt.Subscriber(t,e,n):new Vt.Subscriber(At.empty)}},Gt=g(function(t,e){function n(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}e.getSymbolObservable=n,e.observable=n(Lt.root),e.$$observable=e.observable}),$t=(Gt.getSymbolObservable,Gt.observable,Gt.$$observable,{noop:function(){}}),Wt={pipe:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return _(t)},pipeFromArray:_},Qt={Observable:function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,o=qt.toSubscriber(t,e,n);if(i?i.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(Lt.root.Rx&&Lt.root.Rx.config&&Lt.root.Rx.config.Promise?e=Lt.root.Rx.config.Promise:Lt.root.Promise&&(e=Lt.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,i){var o;o=n.subscribe(function(e){if(o)try{t(e)}catch(n){i(n),o.unsubscribe()}else t(e)},i,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[Gt.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:Wt.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(Lt.root.Rx&&Lt.root.Rx.config&&Lt.root.Rx.config.Promise?t=Lt.root.Rx.config.Promise:Lt.root.Promise&&(t=Lt.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var i;e.subscribe(function(t){return i=t},function(t){return n(t)},function(){return t(i)})})},t.create=function(e){return new t(e)},t}()},Zt=g(function(t,e){function n(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var n=t.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var i=t.Map;if(i)for(var o=Object.getOwnPropertyNames(i.prototype),r=0;r<o.length;++r){var s=o[r];if("entries"!==s&&"size"!==s&&i.prototype[s]===i.prototype.entries)return s}return"@@iterator"}e.symbolIteratorPonyfill=n,e.iterator=n(Lt.root),e.$$iterator=e.iterator}),Xt=(Zt.symbolIteratorPonyfill,Zt.iterator,Zt.$$iterator,St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Kt={InnerSubscriber:function(t){function e(e,n,i){t.call(this),this.parent=e,this.outerValue=n,this.outerIndex=i,this.index=0}return Xt(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(Vt.Subscriber)},Jt={subscribeToResult:function(t,e,n,i){var o=new Kt.InnerSubscriber(t,n,i);if(o.closed)return null;if(e instanceof Qt.Observable)return e._isScalar?(o.next(e.value),o.complete(),null):(o.syncErrorThrowable=!0,e.subscribe(o));if(Yt.isArrayLike(e)){for(var r=0,s=e.length;r<s&&!o.closed;r++)o.next(e[r]);o.closed||o.complete()}else{if(Ht.isPromise(e))return e.then(function(t){o.closed||(o.next(t),o.complete())},function(t){return o.error(t)}).then(null,function(t){Lt.root.setTimeout(function(){throw t})}),o;if(e&&"function"==typeof e[Zt.iterator])for(var a=e[Zt.iterator]();;){var c=a.next();if(c.done){o.complete();break}if(o.next(c.value),o.closed)break}else if(e&&"function"==typeof e[Gt.observable]){var u=e[Gt.observable]();if("function"==typeof u.subscribe)return u.subscribe(new Kt.InnerSubscriber(t,n,i));o.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var l="You provided "+(Et.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";o.error(new TypeError(l))}}return null}},U=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},te=(function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1}U(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=_t.tryCatch(this.durationSelector)(t);if(e===wt.errorObject)this.destination.error(wt.errorObject.e);else{var n=Jt.subscribeToResult(this,e);n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,i){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ee={Action:function(t){function e(e,n){t.call(this)}return te(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(It.Subscription)},ne=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},ie={AsyncAction:function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return ne(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),Lt.root.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending?e:Lt.root.clearInterval(e)&&undefined||undefined},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,i=undefined;try{this.work(t)}catch(o){n=!0,i=!!o&&o||new Error(o)}if(n)return this.unsubscribe(),i},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(ee.Action)},oe={Scheduler:function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}()},re=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},se={AsyncScheduler:function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=undefined}return re(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(oe.Scheduler)},ae={async:new se.AsyncScheduler(ie.AsyncAction)},ce={isNumeric:function(t){return!xt.isArray(t)&&t-parseFloat(t)+1>=0}},ue={isScheduler:function(t){return t&&"function"==typeof t.schedule}},le={isDate:function(t){return t instanceof Date&&!isNaN(+t)}},pe=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},he=(function(t){function e(e,n,i){void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,ce.isNumeric(n)?this.period=Number(n)<1&&1||Number(n):ue.isScheduler(n)&&(i=n),ue.isScheduler(i)||(i=ae.async),this.scheduler=i,this.dueTime=le.isDate(e)?+e-this.scheduler.now():e}pe(e,t),e.create=function(t,n,i){return void 0===t&&(t=0),new e(t,n,i)},e.dispatch=function(t){var e=t.index,n=t.period,i=t.subscriber;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}},e.prototype._subscribe=function(t){var n=this.period,i=this.dueTime;return this.scheduler.schedule(e.dispatch,i,{index:0,period:n,subscriber:t})}}(Qt.Observable),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),de=(function(t){function e(e,n){t.call(this,e),this.buffer=[],this.add(Jt.subscribeToResult(this,n))}he(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,i,o){var r=this.buffer;this.buffer=[],this.destination.next(r)}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),fe=(function(t){function e(e,n){t.call(this,e),this.bufferSize=n,this.buffer=[]}de(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)}}(Vt.Subscriber),function(t){function e(e,n,i){t.call(this,e),this.bufferSize=n,this.startBufferEvery=i,this.buffers=[],this.count=0}de(e,t),e.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,i=this.buffers,o=this.count;this.count++,o%n==0&&i.push([]);for(var r=i.length;r--;){var s=i[r];s.push(t),s.length===e&&(i.splice(r,1),this.destination.next(s))}},e.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var i=e.shift();i.length>0&&n.next(i)}t.prototype._complete.call(this)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ye=function(){return function(){this.buffer=[]}}(),be=(function(t){function e(e,n,i,o,r){t.call(this,e),this.bufferTimeSpan=n,this.bufferCreationInterval=i,this.maxBufferSize=o,this.scheduler=r,this.contexts=[];var s=this.openContext();if(this.timespanOnly=null==i||i<0,this.timespanOnly){var a={subscriber:this,context:s,bufferTimeSpan:n};this.add(s.closeAction=r.schedule(O,n,a))}else{var c={subscriber:this,context:s},u={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:this,scheduler:r};this.add(s.closeAction=r.schedule(E,n,c)),this.add(r.schedule(x,i,u))}}fe(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,i=n.length,o=0;o<i;o++){var r=n[o],s=r.buffer;s.push(t),s.length==this.maxBufferSize&&(e=r)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var i=e.shift();n.next(i.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,i={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(O,n,i))}},e.prototype.openContext=function(){var t=new ye;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),me=(function(t){function e(e,n,i){t.call(this,e),this.openings=n,this.closingSelector=i,this.contexts=[],this.add(Jt.subscribeToResult(this,n))}be(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,i=0;i<n;i++)e[i].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,i,o){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(n){this._error(n)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,i=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(i),i.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new It.Subscription,i={buffer:[],subscription:n};e.push(i);var o=Jt.subscribeToResult(this,t,i);!o||o.closed?this.closeBuffer(i):(o.context=i,this.add(o),n.add(o))}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ve=(function(t){function e(e,n){t.call(this,e),this.closingSelector=n,this.subscribing=!1,this.openBuffer()}me(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,i,o){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var n=_t.tryCatch(this.closingSelector)();n===wt.errorObject?this.error(wt.errorObject.e):(t=new It.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(Jt.subscribeToResult(this,n)),this.subscribing=!1)}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ge=(function(t){function e(e,n,i){t.call(this,e),this.selector=n,this.caught=i}ve(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(i){return void t.prototype.error.call(this,i)}this._unsubscribeAndRecycle(),this.add(Jt.subscribeToResult(this,n))}}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Se={ScalarObservable:function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return ge(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.done,n=t.value,i=t.subscriber;e?i.complete():(i.next(n),i.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.value,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t});t.next(n),t.closed||t.complete()},e}(Qt.Observable)},we=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},_e={EmptyObservable:function(t){function e(e){t.call(this),this.scheduler=e}return we(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(Qt.Observable)},Oe=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},xe={ArrayObservable:function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Oe(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var i=t[t.length-1];ue.isScheduler(i)?t.pop():i=null;var o=t.length;return o>1?new e(t,i):1===o?new Se.ScalarObservable(t[0],i):new _e.EmptyObservable(i)},e.dispatch=function(t){var e=t.array,n=t.index,i=t.count,o=t.subscriber;n>=i?o.complete():(o.next(e[n]),o.closed||(t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.array,i=n.length,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{array:n,index:0,count:i,subscriber:t});for(var r=0;r<i&&!t.closed;r++)t.next(n[r]);t.complete()},e}(Qt.Observable)},Ee=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Ce={},Te=(function(t){function e(e,n){t.call(this,e),this.project=n,this.active=0,this.values=[],this.observables=[]}Ee(e,t),e.prototype._next=function(t){this.values.push(Ce),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var i=t[n];this.add(Jt.subscribeToResult(this,i,i,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,o){var r=this.values,s=r[n],a=this.toRespond?s===Ce?--this.toRespond:this.toRespond:0;r[n]=e,0===a&&(this.project?this._tryProject(r):this.destination.next(r.slice()))},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ie={PromiseObservable:function(t){function e(e,n){t.call(this),this.promise=e,this.scheduler=n}return Te(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=this.promise,i=this.scheduler;if(null==i)this._isScalar?t.closed||(t.next(this.value),t.complete()):n.then(function(n){e.value=n,e._isScalar=!0,t.closed||(t.next(n),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){Lt.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return i.schedule(C,0,{value:this.value,subscriber:t})}else n.then(function(n){e.value=n,e._isScalar=!0,t.closed||t.add(i.schedule(C,0,{value:n,subscriber:t}))},function(e){t.closed||t.add(i.schedule(T,0,{err:e,subscriber:t}))}).then(null,function(t){Lt.root.setTimeout(function(){throw t})})},e}(Qt.Observable)},Ae=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Ne=function(t){function e(e,n){if(t.call(this),this.scheduler=n,null==e)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[Zt.iterator];if(!e&&"string"==typeof t)return new De(t);if(!e&&t.length!==undefined)return new Pe(t);if(!e)throw new TypeError("object is not iterable");return t[Zt.iterator]()}(e)}return Ae(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.hasError,i=t.iterator,o=t.subscriber;if(n)o.error(t.error);else{var r=i.next();r.done?o.complete():(o.next(r.value),t.index=e+1,o.closed?"function"==typeof i["return"]&&i["return"]():this.schedule(t))}},e.prototype._subscribe=function(t){var n=this.iterator,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{index:0,iterator:n,subscriber:t});for(;;){var o=n.next();if(o.done){t.complete();break}if(t.next(o.value),t.closed){"function"==typeof n["return"]&&n["return"]();break}}},e}(Qt.Observable),De=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length),this.str=t,this.idx=e,this.len=n}return t.prototype[Zt.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:undefined}},t}(),Pe=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=I(t)),this.arr=t,this.idx=e,this.len=n}return t.prototype[Zt.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:undefined}},t}(),Fe=Math.pow(2,53)-1,Le={IteratorObservable:Ne},Re=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Me={ArrayLikeObservable:function(t){function e(e,n){t.call(this),this.arrayLike=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Re(e,t),e.create=function(t,n){var i=t.length;return 0===i?new _e.EmptyObservable:1===i?new Se.ScalarObservable(t[0],n):new e(t,n)},e.dispatch=function(t){var e=t.arrayLike,n=t.index,i=t.length,o=t.subscriber;o.closed||(n>=i?o.complete():(o.next(e[n]),t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.arrayLike,i=this.scheduler,o=n.length;if(i)return i.schedule(e.dispatch,0,{arrayLike:n,index:0,length:o,subscriber:t});for(var r=0;r<o&&!t.closed;r++)t.next(n[r]);t.complete()},e}(Qt.Observable)},ke={Notification:function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype["do"]=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this["do"](t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Qt.Observable.of(this.value);case"E":return Qt.Observable["throw"](this.error);case"C":return Qt.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",undefined,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",undefined),t}()},je=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Ue=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new Ve(t,e))}},Ve=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new ze(t,this.scheduler,this.delay))},t}(),Be=Ve,ze=function(t){function e(e,n,i){void 0===i&&(i=0),t.call(this,e),this.scheduler=n,this.delay=i}return je(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new He(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(ke.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(ke.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(ke.Notification.createComplete())},e}(Vt.Subscriber),Ye=ze,He=function(){return function(t,e){this.notification=t,this.destination=e}}(),qe={observeOn:Ue,ObserveOnOperator:Be,ObserveOnSubscriber:Ye,ObserveOnMessage:He},Ge=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},$e=(function(t){function e(e,n){t.call(this,null),this.ish=e,this.scheduler=n}Ge(e,t),e.create=function(t,n){if(null!=t){if("function"==typeof t[Gt.observable])return t instanceof Qt.Observable&&!n?t:new e(t,n);if(xt.isArray(t))return new xe.ArrayObservable(t,n);if(Ht.isPromise(t))return new Ie.PromiseObservable(t,n);if("function"==typeof t[Zt.iterator]||"string"==typeof t)return new Le.IteratorObservable(t,n);if(Yt.isArrayLike(t))return new Me.ArrayLikeObservable(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,n=this.scheduler;return null==n?e[Gt.observable]().subscribe(t):e[Gt.observable]().subscribe(new qe.ObserveOnSubscriber(t,n,0))}}(Qt.Observable),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),We=(function(t){function e(e,n,i,o){void 0===o&&(o=Number.POSITIVE_INFINITY),t.call(this,e),this.project=n,this.resultSelector=i,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}$e(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(Jt.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,o){this.resultSelector?this._notifyResultSelector(t,e,n,i):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,n,i){var o;try{o=this.resultSelector(t,e,n,i)}catch(r){return void this.destination.error(r)}this.destination.next(o)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Qe=(function(t){function e(e,n,i){t.call(this,e),this.predicate=n,this.source=i,this.count=0,this.index=0}We(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ze=(function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1,this.durationSubscription=null}Qe(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Jt.subscribeToResult(this,e)).closed||this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,i,o){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Xe=function(t,e){return void 0===e&&(e=ae.async),function(n){return n.lift(new Ke(t,e))}},Ke=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Je(t,this.dueTime,this.scheduler))},t}(),Je=function(t){function e(e,n,i){t.call(this,e),this.dueTime=n,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return Ze(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(A,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(Vt.Subscriber),tn={debounceTime:Xe},en=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},nn=(function(t){function e(e,n){t.call(this,e),this.defaultValue=n,this.isEmpty=!0}en(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),on=(function(t){function e(e,n,i){t.call(this,e),this.delay=n,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}nn(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,i=t.scheduler,o=t.destination;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(o);if(n.length>0){var r=Math.max(0,n[0].time-i.now());this.schedule(t,r)}else e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new on(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(ke.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(ke.Notification.createComplete())}}(Vt.Subscriber),function(){return function(t,e){this.time=t,this.notification=e}}()),rn=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},sn=(function(t){function e(e,n){t.call(this,e),this.delayDurationSelector=n,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}rn(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.destination.next(t),this.removeSubscription(o),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t),n=null;return-1!==e&&(n=this.values[e],this.delayNotifierSubscriptions.splice(e,1),this.values.splice(e,1)),n},e.prototype.tryDelay=function(t,e){var n=Jt.subscribeToResult(this,t,e);n&&!n.closed&&(this.add(n),this.delayNotifierSubscriptions.push(n)),this.values.push(e)},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}(zt.OuterSubscriber),function(t){function e(e,n){t.call(this),this.source=e,this.subscriptionDelay=n}rn(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new sn(t,this.source))}}(Qt.Observable),function(t){function e(e,n){t.call(this),this.parent=e,this.source=n,this.sourceSubscribed=!1}return rn(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(Vt.Subscriber)),an=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},cn=(function(t){function e(e){t.call(this,e)}an(e,t),e.prototype._next=function(t){t.observe(this.destination)}}(Vt.Subscriber),{minimalSetImpl:N,Set:Lt.root.Set||N()}),un=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},ln=(function(t){function e(e,n,i){t.call(this,e),this.keySelector=n,this.values=new cn.Set,i&&this.add(Jt.subscribeToResult(this,i))}un(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(i){return void n.error(i)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),pn=(function(t){function e(e,n,i){t.call(this,e),this.keySelector=i,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}ln(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=_t.tryCatch(this.keySelector)(t))===wt.errorObject)return this.destination.error(wt.errorObject.e);var n=!1;if(this.hasKey){if((n=_t.tryCatch(this.compare)(this.key,e))===wt.errorObject)return this.destination.error(wt.errorObject.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=e,this.destination.next(t))}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),hn={ArgumentOutOfRangeError:function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return pn(e,t),e}(Error)},dn=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},fn=(function(t){function e(e,n,i){t.call(this,e),this.index=n,this.defaultValue=i}dn(e,t),e.prototype._next=function(t){0==this.index--&&(this.destination.next(t),this.destination.complete())},e.prototype._complete=function(){var t=this.destination;this.index>=0&&("undefined"!=typeof this.defaultValue?t.next(this.defaultValue):t.error(new hn.ArgumentOutOfRangeError)),t.complete()}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),yn=(function(t){function e(e,n,i,o){t.call(this,e),this.predicate=n,this.thisArg=i,this.source=o,this.index=0,this.thisArg=i||this}fn(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),bn=(function(t){function e(e){t.call(this,e),this.hasCompleted=!1,this.hasSubscription=!1}yn(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Jt.subscribeToResult(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),mn=(function(t){function e(e,n,i){t.call(this,e),this.project=n,this.resultSelector=i,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}bn(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e=this.index++,n=this.destination;try{var i=this.project(t,e);this.hasSubscription=!0,this.add(Jt.subscribeToResult(this,i,t,e))}catch(o){n.error(o)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,o){var r=this.resultSelector,s=this.destination;r?this.trySelectResult(t,e,n,i):s.next(e)},e.prototype.trySelectResult=function(t,e,n,i){var o=this.resultSelector,r=this.destination;try{var s=o(t,e,n,i);r.next(s)}catch(a){r.error(a)}},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),vn=(function(t){function e(e,n,i,o){t.call(this,e),this.project=n,this.concurrent=i,this.scheduler=o,this.index=0,this.active=0,this.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(this.buffer=[])}mn(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,i=t.value,o=t.index;e.subscribeToProjection(n,i,o)},e.prototype._next=function(t){var n=this.destination;if(n.closed)this._complete();else{var i=this.index++;if(this.active<this.concurrent){n.next(t);var o=_t.tryCatch(this.project)(t,i);if(o===wt.errorObject)n.error(wt.errorObject.e);else if(this.scheduler){var r={subscriber:this,result:o,value:t,index:i};this.add(this.scheduler.schedule(e.dispatch,0,r))}else this.subscribeToProjection(o,t,i)}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.add(Jt.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,o){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),gn=(function(t){function e(e,n,i){t.call(this,e),this.predicate=n,this.thisArg=i,this.count=0}vn(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Sn=(function(t){function e(e,n){t.call(this,e),this.add(new It.Subscription(n))}gn(e,t)}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),wn=(function(t){function e(e,n,i,o,r){t.call(this,e),this.predicate=n,this.source=i,this.yieldIndex=o,this.thisArg=r,this.index=0}Sn(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,i=this.index++;try{e.call(n||this,t,i,this.source)&&this.notifyComplete(this.yieldIndex?i:t)}catch(o){this.destination.error(o)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:undefined)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),_n={EmptyError:function(t){function e(){var e=t.call(this,"no elements in sequence");this.name=e.name="EmptyError",this.stack=e.stack,this.message=e.message}return wn(e,t),e}(Error)},On=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},xn=(function(t){function e(e,n,i,o,r){t.call(this,e),this.predicate=n,this.resultSelector=i,this.defaultValue=o,this.source=r,this.index=0,this.hasCompleted=!1,this._emitted=!1}On(e,t),e.prototype._next=function(t){var e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(i){return void this.destination.error(i)}n&&this._emit(t,e)},e.prototype._emit=function(t,e){this.resultSelector?this._tryResultSelector(t,e):this._emitFinal(t)},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(i){return void this.destination.error(i)}this._emitFinal(n)},e.prototype._emitFinal=function(t){var e=this.destination;this._emitted||(this._emitted=!0,e.next(t),e.complete(),this.hasCompleted=!0)},e.prototype._complete=function(){var t=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||t.error(new _n.EmptyError):(t.next(this.defaultValue),t.complete())}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),En={ObjectUnsubscribedError:function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return xn(e,t),e}(Error)},Cn=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Tn={SubjectSubscription:function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return Cn(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(It.Subscription)},In=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},An=function(t){function e(e){t.call(this,e),this.destination=e}return In(e,t),e}(Vt.Subscriber),Nn=An,Dn=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return In(e,t),e.prototype[Rt.rxSubscriber]=function(){return new An(this)},e.prototype.lift=function(t){var e=new Fn(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new En.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new En.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new En.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new En.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new En.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),It.Subscription.EMPTY):this.isStopped?(t.complete(),It.Subscription.EMPTY):(this.observers.push(t),new Tn.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new Qt.Observable;return t.source=this,t},e.create=function(t,e){return new Fn(t,e)},e}(Qt.Observable),Pn=Dn,Fn=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return In(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):It.Subscription.EMPTY},e}(Dn),Ln={SubjectSubscriber:Nn,Subject:Pn,AnonymousSubject:Fn},Rn={MapPolyfill:function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1===e?undefined:this._values[e]},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);return-1===n?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},t.prototype["delete"]=function(t){var e=this._keys.indexOf(t);return-1!==e&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},t.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},t}()},Mn={Map:Lt.root.Map||Rn.MapPolyfill},kn={FastMap:function(){function t(){this.values={}}return t.prototype["delete"]=function(t){return this.values[t]=null,!0},t.prototype.set=function(t,e){return this.values[t]=e,this},t.prototype.get=function(t){return this.values[t]},t.prototype.forEach=function(t,e){var n=this.values;for(var i in n)n.hasOwnProperty(i)&&null!==n[i]&&t.call(e,n[i],i)},t.prototype.clear=function(){this.values={}},t}()},jn=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Un=(function(t){function e(e,n,i,o,r){t.call(this,e),this.keySelector=n,this.elementSelector=i,this.durationSelector=o,this.subjectSelector=r,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}jn(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups="string"==typeof e?new kn.FastMap:new Mn.Map);var i,o=n.get(e);if(this.elementSelector)try{i=this.elementSelector(t)}catch(a){this.error(a)}else i=t;if(!o){o=this.subjectSelector?this.subjectSelector():new Ln.Subject,n.set(e,o);var r=new Vn(e,o,this);if(this.destination.next(r),this.durationSelector){var s=void 0;try{s=this.durationSelector(new Vn(e,o))}catch(a){return void this.error(a)}this.add(s.subscribe(new Un(e,o,this)))}}o.closed||o.next(i)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups["delete"](t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))}}(Vt.Subscriber),function(t){function e(e,n,i){t.call(this,n),this.key=e,this.group=n,this.parent=i}return jn(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(Vt.Subscriber)),Vn=function(t){function e(e,n,i){t.call(this),this.key=e,this.groupSubject=n,this.refCountSubscription=i}return jn(e,t),e.prototype._subscribe=function(t){var e=new It.Subscription,n=this.refCountSubscription,i=this.groupSubject;return n&&!n.closed&&e.add(new Bn(n)),e.add(i.subscribe(t)),e},e}(Qt.Observable),Bn=function(t){function e(e){t.call(this),this.parent=e,e.count++}return jn(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(It.Subscription),zn=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Yn=(function(t){function e(){t.apply(this,arguments)}zn(e,t),e.prototype._next=function(t){$t.noop()}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Hn=(function(t){function e(e){t.call(this,e)}Yn(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),qn=(function(t){function e(e,n,i,o,r){t.call(this,e),this.predicate=n,this.resultSelector=i,this.defaultValue=o,this.source=r,this.hasValue=!1,this.index=0,void 0!==o&&(this.lastValue=o,this.hasValue=!0)}Hn(e,t),e.prototype._next=function(t){var e=this.index++;if(this.predicate)this._tryPredicate(t,e);else{if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(i){return void this.destination.error(i)}if(n){if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(i){return void this.destination.error(i)}this.lastValue=n,this.hasValue=!0},e.prototype._complete=function(){var t=this.destination;this.hasValue?(t.next(this.lastValue),t.complete()):t.error(new _n.EmptyError)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Gn=(function(t){function e(e,n,i){t.call(this,e),this.project=n,this.count=0,this.thisArg=i||this}qn(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),$n=(function(t){function e(e,n){t.call(this,e),this.value=n}Gn(e,t),e.prototype._next=function(t){this.destination.next(this.value)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Wn=(function(t){function e(e){t.call(this,e)}$n(e,t),e.prototype._next=function(t){this.destination.next(ke.Notification.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(ke.Notification.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(ke.Notification.createComplete()),t.complete()}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Qn=(function(t){function e(e,n,i,o){t.call(this,e),this.accumulator=n,this._seed=i,this.hasSeed=o,this.index=0}Wn(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(i){this.destination.error(i)}this.seed=e,this.destination.next(e)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Zn=(function(t){function e(e,n){t.call(this,e),this.total=n,this.ring=new Array,this.count=0}Qn(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,i=this.count++;if(e.length<n)e.push(t);else{e[i%n]=t}},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,i=this.ring,o=0;o<n;o++){var r=e++%n;t.next(i[r])}t.complete()}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Xn=(function(t){function e(e,n,i,o){void 0===o&&(o=Number.POSITIVE_INFINITY),t.call(this,e),this.ish=n,this.resultSelector=i,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}Zn(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.resultSelector,n=this.index++,i=this.ish,o=this.destination;this.active++,this._innerSub(i,o,e,t,n)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n,i,o){this.add(Jt.subscribeToResult(this,t,i,o))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,o){var r=this.resultSelector,s=this.destination;r?this.trySelectResult(t,e,n,i):s.next(e)},e.prototype.trySelectResult=function(t,e,n,i){var o,r=this.resultSelector,s=this.destination;try{o=r(t,e,n,i)}catch(a){return void s.error(a)}s.next(o)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Kn=(function(t){function e(e,n,i,o){t.call(this,e),this.accumulator=n,this.acc=i,this.concurrent=o,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}Xn(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=_t.tryCatch(this.accumulator)(this.acc,t),i=this.destination;n===wt.errorObject?i.error(wt.errorObject.e):(this.active++,this._innerSub(n,t,e))}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){this.add(Jt.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e.prototype.notifyNext=function(t,e,n,i,o){var r=this.destination;this.acc=e,this.hasValue=!0,r.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Jn=function(){return function(t){return t.lift(new ti(t))}},ti=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new ei(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o},t}(),ei=function(t){function e(e,n){t.call(this,e),this.connectable=n}return Kn(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null},e}(Vt.Subscriber),ni={refCount:Jn},ii=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},oi=(function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}ii(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new It.Subscription).add(this.source.subscribe(new oi(this.getSubject(),this))),t.closed?(this._connection=null,t=It.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return ni.refCount()(this)}}(Qt.Observable),function(t){function e(e,n){t.call(this,e),this.connectable=n}return ii(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(Ln.SubjectSubscriber)),ri=(function(t){function e(e,n){t.call(this,e),this.connectable=n}ii(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),si=(function(t){function e(e,n){t.call(this,e),this.destination=e,this.nextSources=n}ri(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource()},e.prototype._complete=function(){this.subscribeToNextSource()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();t?this.add(Jt.subscribeToResult(this,t)):this.destination.complete()}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ai=(function(t){function e(e){t.call(this,e),this.hasPrev=!1}si(e,t),e.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ci=(function(t){function e(e){t.call(this),this._value=e}ai(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new En.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)}}(Ln.Subject),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ui=(function(t){function e(){t.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}ci(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),It.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),It.Subscription.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)}}(Ln.Subject),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),li={QueueAction:function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return ui(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,i){return void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,i):e.flush(this)},e}(ie.AsyncAction)},pi=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},hi=new({QueueScheduler:function(t){function e(){t.apply(this,arguments)}return pi(e,t),e}(se.AsyncScheduler)}.QueueScheduler)(li.QueueAction),di=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},fi=(function(t){function e(e,n,i){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),t.call(this),this.scheduler=i,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n}di(e,t),e.prototype.next=function(e){var n=this._getNow();this._events.push(new fi(n,e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._trimBufferThenGetEvents(),i=this.scheduler;if(this.closed)throw new En.ObjectUnsubscribedError;this.hasError?e=It.Subscription.EMPTY:this.isStopped?e=It.Subscription.EMPTY:(this.observers.push(t),e=new Tn.SubjectSubscription(this,t)),i&&t.add(t=new qe.ObserveOnSubscriber(t,i));for(var o=n.length,r=0;r<o&&!t.closed;r++)t.next(n[r].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||hi).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,o=i.length,r=0;r<o&&!(t-i[r].time<n);)r++;return o>e&&(r=Math.max(r,o-e)),r>0&&i.splice(0,r),i}}(Ln.Subject),function(){return function(t,e){this.time=t,this.value=e}}()),yi=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},bi=(function(t){function e(e){t.call(this,e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}yi(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var i=t[n],o=Jt.subscribeToResult(this,i,i,n);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,i,o){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var s=this.subscriptions[r];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),mi=(function(t){function e(e,n,i){t.call(this,e),this.count=n,this.source=i}bi(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),vi=(function(t){function e(e,n,i){t.call(this,e),this.notifier=n,this.source=i,this.sourceIsBeingSubscribedTo=!0}mi(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries){if(this.retriesSubscription.closed)return t.prototype.complete.call(this)}else this.subscribeToRetries();this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this.notifications,n=this.retries,i=this.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,t.prototype._unsubscribeAndRecycle.call(this),this.notifications=e,this.retries=n,this.retriesSubscription=i,this},e.prototype.subscribeToRetries=function(){this.notifications=new Ln.Subject;var e=_t.tryCatch(this.notifier)(this.notifications);if(e===wt.errorObject)return t.prototype.complete.call(this);this.retries=e,this.retriesSubscription=Jt.subscribeToResult(this,e)}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),gi=(function(t){function e(e,n,i){t.call(this,e),this.count=n,this.source=i}vi(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,i=this.count;if(0===i)return t.prototype.error.call(this,e);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Si=(function(t){function e(e,n,i){t.call(this,e),this.notifier=n,this.source=i}gi(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=null,this.retriesSubscription=null;else{if(n=new Ln.Subject,(i=_t.tryCatch(this.notifier)(n))===wt.errorObject)return t.prototype.error.call(this,wt.errorObject.e);o=Jt.subscribeToResult(this,i)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=o,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,i,o){var r=this.errors,s=this.retries,a=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=r,this.retries=s,this.retriesSubscription=a,this.source.subscribe(this)}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),wi=(function(t){function e(){t.apply(this,arguments),this.hasValue=!1}Si(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,i,o){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),_i=(function(t){function e(e,n,i){t.call(this,e),this.period=n,this.scheduler=i,this.hasValue=!1,this.add(i.schedule(D,n,{subscriber:this,period:n}))}wi(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Oi=(function(t){function e(e,n,i){t.call(this,e),this.compareTo=n,this.comparor=i,this._a=[],this._b=[],this._oneComplete=!1,this.add(n.subscribe(new Oi(e,this)))}_i(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparor;t.length>0&&e.length>0;){var i=t.shift(),o=e.shift(),r=!1;n?(r=_t.tryCatch(n)(i,o))===wt.errorObject&&this.destination.error(wt.errorObject.e):r=i===o,r||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())}}(Vt.Subscriber),function(t){function e(e,n){t.call(this,e),this.parent=n}return _i(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t)},e.prototype._complete=function(){this.parent._complete()},e}(Vt.Subscriber)),xi=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Ei=(function(t){function e(e,n,i){t.call(this,e),this.predicate=n,this.source=i,this.seenValue=!1,this.index=0}xi(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:undefined),t.complete()):t.error(new _n.EmptyError)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ci=(function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}Ei(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ti=(function(t){function e(e,n){t.call(this,e),this._skipCount=n,this._count=0,this._ring=new Array(n)}Ci(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var i=n%e,o=this._ring,r=o[i];o[i]=t,this.destination.next(r)}}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ii=(function(t){function e(e,n){t.call(this,e),this.hasValue=!1,this.isInnerStopped=!1,this.add(Jt.subscribeToResult(this,n))}Ti(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype._complete=function(){this.isInnerStopped?t.prototype._complete.call(this):this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,i,o){this.hasValue=!0},e.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&t.prototype._complete.call(this)}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ai=(function(t){function e(e,n){t.call(this,e),this.predicate=n,this.skipping=!0,this.index=0}Ii(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ni=(function(t){function e(e,n,i){t.call(this,e),this.project=n,this.resultSelector=i,this.index=0}Ai(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var i=this.innerSubscription;i&&i.unsubscribe(),this.add(this.innerSubscription=Jt.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,i,o){this.resultSelector?this._tryNotifyNext(t,e,n,i):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,n,i){var o;try{o=this.resultSelector(t,e,n,i)}catch(r){return void this.destination.error(r)}this.destination.next(o)}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Di=(function(t){function e(e,n,i){t.call(this,e),this.inner=n,this.resultSelector=i,this.index=0}Ni(e,t),e.prototype._next=function(t){var e=this.innerSubscription;e&&e.unsubscribe(),this.add(this.innerSubscription=Jt.subscribeToResult(this,this.inner,t,this.index++))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,i,o){var r=this.resultSelector,s=this.destination;r?this.tryResultSelector(t,e,n,i):s.next(e)},e.prototype.tryResultSelector=function(t,e,n,i){var o,r=this.resultSelector,s=this.destination;try{o=r(t,e,n,i)}catch(a){return void s.error(a)}s.next(o)}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Pi=(function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}Di(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Fi=(function(t){function e(e,n){t.call(this,e),this.notifier=n,this.add(Jt.subscribeToResult(this,n))}Pi(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.complete()},e.prototype.notifyComplete=function(){}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Li=(function(t){function e(e,n){t.call(this,e),this.predicate=n,this.index=0}Fi(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(i){return void n.error(i)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ri=(function(t){function e(e,n,i,o){t.call(this,e);var r=new Vt.Subscriber(n,i,o);r.syncErrorThrowable=!0,this.add(r),this.safeSubscriber=r}Li(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()}}(Vt.Subscriber),g(function(t,e){var n=St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};e.defaultThrottleConfig={leading:!0,trailing:!1},e.throttle=function(t,n){return void 0===n&&(n=e.defaultThrottleConfig),function(e){return e.lift(new i(t,n.leading,n.trailing))}};var i=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.durationSelector,this.leading,this.trailing))},t}(),o=function(t){function e(e,n,i,o){t.call(this,e),this.destination=e,this.durationSelector=n,this._leading=i,this._trailing=o,this._hasTrailingValue=!1}return n(e,t),e.prototype._next=function(t){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t);else{var e=this.tryDurationSelector(t);e&&this.add(this.throttled=Jt.subscribeToResult(this,e)),this._leading&&(this.destination.next(t),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t))}},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(e){return this.destination.error(e),null}},e.prototype._unsubscribe=function(){var t=this.throttled;this._trailingValue,this._hasTrailingValue,this._trailing;this._trailingValue=null,this._hasTrailingValue=!1,t&&(this.remove(t),this.throttled=null,t.unsubscribe())},e.prototype._sendTrailing=function(){var t=this.destination,e=this.throttled,n=this._trailing,i=this._trailingValue,o=this._hasTrailingValue;e&&n&&o&&(t.next(i),this._trailingValue=null,this._hasTrailingValue=!1)},e.prototype.notifyNext=function(t,e,n,i,o){this._sendTrailing(),this._unsubscribe()},e.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},e}(zt.OuterSubscriber)})),Mi=(Ri.defaultThrottleConfig,Ri.throttle,St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ki=(function(t){function e(e,n,i,o,r){t.call(this,e),this.duration=n,this.scheduler=i,this.leading=o,this.trailing=r,this._hasTrailingValue=!1,this._trailingValue=null}Mi(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(P,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ji=function(){return function(t,e){this.value=t,this.interval=e}}(),Ui=(function(t){function e(e,n){t.call(this,e),this.scheduler=n,this.lastTime=0,this.lastTime=n.now()}ki(e,t),e.prototype._next=function(t){var e=this.scheduler.now(),n=e-this.lastTime;this.lastTime=e,this.destination.next(new ji(t,n))}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Vi=(function(t){function e(){var e=t.call(this,"Timeout has occurred");this.name=e.name="TimeoutError",this.stack=e.stack,this.message=e.message}Ui(e,t)}(Error),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Bi=(function(t){function e(e,n,i,o,r){t.call(this,e),this.absoluteTimeout=n,this.waitFor=i,this.scheduler=o,this.errorInstance=r,this.action=null,this.scheduleTimeout()}Vi(e,t),e.dispatchTimeout=function(t){t.error(t.errorInstance)},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),zi=(function(t){function e(e,n,i,o,r){t.call(this,e),this.absoluteTimeout=n,this.waitFor=i,this.withObservable=o,this.scheduler=r,this.action=null,this.scheduleTimeout()}Bi(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Jt.subscribeToResult(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Yi=(function(t){function e(e){t.call(this,e),this.window=new Ln.Subject,e.next(this.window)}zi(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new Ln.Subject;e.next(n)}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Hi=(function(t){function e(e,n,i){t.call(this,e),this.destination=e,this.windowSize=n,this.startWindowEvery=i,this.windows=[new Ln.Subject],this.count=0,e.next(this.windows[0])}Yi(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,i=this.windowSize,o=this.windows,r=o.length,s=0;s<r&&!this.closed;s++)o[s].next(t);var a=this.count-i+1;if(a>=0&&a%e==0&&!this.closed&&o.shift().complete(),++this.count%e==0&&!this.closed){var c=new Ln.Subject;o.push(c),n.next(c)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),qi=function(t){function e(){t.apply(this,arguments),this._numberOfNextedValues=0}return Hi(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(Ln.Subject),Gi=(function(t){function e(e,n,i,o,r){t.call(this,e),this.destination=e,this.windowTimeSpan=n,this.windowCreationInterval=i,this.maxWindowSize=o,this.scheduler=r,this.windows=[];var s=this.openWindow();if(null!==i&&i>=0){var a={subscriber:this,window:s,context:null},c={windowTimeSpan:n,windowCreationInterval:i,subscriber:this,scheduler:r};this.add(r.schedule(R,n,a)),this.add(r.schedule(L,i,c))}else{var u={subscriber:this,window:s,windowTimeSpan:n};this.add(r.schedule(F,n,u))}}Hi(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,i=0;i<n;i++){var o=e[i];o.closed||(o.next(t),o.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(o))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new qi;this.windows.push(t);return this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)}}(Vt.Subscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),$i=(function(t){function e(e,n,i){t.call(this,e),this.openings=n,this.closingSelector=i,this.contexts=[],this.add(this.openSubscription=Jt.subscribeToResult(this,n,n))}Gi(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,i=0;i<n;i++)e[i].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,o=-1;++o<i;){var r=n[o];r.window.error(e),r.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,i=-1;++i<n;){var o=e[i];o.window.complete(),o.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var i=t[n];i.window.unsubscribe(),i.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,i,o){if(t===this.openings){var r=this.closingSelector,s=_t.tryCatch(r)(e);if(s===wt.errorObject)return this.error(wt.errorObject.e);var a=new Ln.Subject,c=new It.Subscription,u={window:a,subscription:c};this.contexts.push(u);var l=Jt.subscribeToResult(this,s,u);l.closed?this.closeWindow(this.contexts.length-1):(l.context=u,c.add(l)),this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],i=n.window,o=n.subscription;e.splice(t,1),i.complete(),o.unsubscribe()}}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Wi=(function(t){function e(e,n){t.call(this,e),this.destination=e,this.closingSelector=n,this.openWindow()}$i(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.openWindow(o)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n=this.window=new Ln.Subject;this.destination.next(n);var i=_t.tryCatch(this.closingSelector)();if(i===wt.errorObject){var o=wt.errorObject.e;this.destination.error(o),this.window.error(o)}else this.add(this.closingNotification=Jt.subscribeToResult(this,i))}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Qi=(function(t){function e(e,n,i){t.call(this,e),this.observables=n,this.project=i,this.toRespond=[];var o=n.length;this.values=new Array(o);for(r=0;r<o;r++)this.toRespond.push(r);for(var r=0;r<o;r++){var s=n[r];this.add(Jt.subscribeToResult(this,s,s,r))}}Wi(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.values[n]=e;var r=this.toRespond;if(r.length>0){var s=r.indexOf(n);-1!==s&&r.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}(zt.OuterSubscriber),St&&St.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Zi=(function(t){function e(e,n,i){void 0===i&&(i=Object.create(null)),t.call(this,e),this.iterators=[],this.active=0,this.project="function"==typeof n?n:null,this.values=i}Qi(e,t),e.prototype._next=function(t){var e=this.iterators;xt.isArray(t)?e.push(new Xi(t)):"function"==typeof t[Zt.iterator]?e.push(new Zi(t[Zt.iterator]())):e.push(new Ki(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var i=t[n];i.stillUnsubscribed?this.add(i.subscribe(i,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,i=0;i<e;i++){if("function"==typeof(s=t[i]).hasValue&&!s.hasValue())return}for(var o=!1,r=[],i=0;i<e;i++){var s=t[i],a=s.next();if(s.hasCompleted()&&(o=!0),a.done)return void n.complete();r.push(a.value)}this.project?this._tryProject(r):n.next(r),o&&n.complete()},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}(Vt.Subscriber),function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}()),Xi=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[Zt.iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),Ki=function(t){function e(e,n,i){t.call(this,e),this.parent=n,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return Qi(e,t),e.prototype[Zt.iterator]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,o){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Jt.subscribeToResult(this,this.observable,this,e)},e}(zt.OuterSubscriber),Ji=tn.debounceTime,to=(Ri.throttle,function(){function t(t,e,o,r,s,a){var c=this;this.contentNodeSelectorService=t,this.contentService=e,this.apiService=o,this.preferences=r,this.containingDialog=a,this.nodes=null,this.searchTerm="",this.showingSearchResults=!1,this.loadingSearchResults=!1,this.inDialog=!1,this.chosenNode=null,this.folderIdToShow=null,this.skipCount=0,this.infiniteScroll=!1,this.currentFolderId=null,this.dropdownHideMyFiles=!1,this.dropdownSiteList=null,this.rowFilter=null,this.imageResolver=null,this.select=new n.EventEmitter,this.debounceSearch=200,this.searchInput=new i.FormControl,s&&(this.title=s.title,this.actionName=s.actionName,this.select=s.select,this.currentFolderId=s.currentFolderId,this.dropdownHideMyFiles=s.dropdownHideMyFiles,this.dropdownSiteList=s.dropdownSiteList,this.rowFilter=s.rowFilter,this.imageResolver=s.imageResolver),this.buttonActionName=this.actionName?"NODE_SELECTOR."+this.actionName.toUpperCase():"NODE_SELECTOR.CHOOSE",this.containingDialog&&(this.inDialog=!0),this.searchInput.valueChanges.pipe(Ji(this.debounceSearch)).subscribe(function(t){c.search(t)}),this.pageSize=this.preferences.paginationSize}return t.prototype.ngOnInit=function(){this.folderIdToShow=this.currentFolderId,this.paginationStrategy=yt.Infinite},t.prototype.siteChanged=function(t){this.siteId=t.guid,this.updateResults()},t.prototype.search=function(t){this.searchTerm=t,this.updateResults()},t.prototype.needBreadcrumbs=function(){var t=!this.showingSearchResults,e=this.showingSearchResults&&this.chosenNode;return t||e},Object.defineProperty(t.prototype,"breadcrumbFolderNode",{get:function(){return this.showingSearchResults&&this.chosenNode?this.chosenNode:this.documentList.folderNode},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.searchTerm="",this.nodes=null,this.skipCount=0,this.chosenNode=null,this.showingSearchResults=!1,this.folderIdToShow=this.currentFolderId},t.prototype.updateResults=function(){0===this.searchTerm.length?this.folderIdToShow=this.siteId||this.currentFolderId:this.startNewSearch()},t.prototype.startNewSearch=function(){this.nodes=null,this.skipCount=0,this.chosenNode=null,this.folderIdToShow=null,this.querySearch()},t.prototype.getNextPageOfSearch=function(t){this.infiniteScroll=!0,this.skipCount=t.skipCount,this.querySearch()},t.prototype.querySearch=function(){this.loadingSearchResults=!0,this.contentNodeSelectorService.search(this.searchTerm,this.siteId,this.skipCount,this.pageSize).subscribe(this.showSearchResults.bind(this))},t.prototype.showSearchResults=function(t){this.showingSearchResults=!0,this.loadingSearchResults=!1,this.nodes?this.documentList.data.loadPage(t,!0):this.nodes=t,this.pagination=t.list.pagination,this.highlight()},t.prototype.highlight=function(){var t=this;setTimeout(function(){t.highlighter.highlight(t.searchTerm)},0)},t.prototype.onNodeSelect=function(t){this.attemptNodeSelection(t.detail.node.entry)},t.prototype.onFolderChange=function(){this.skipCount=0,this.infiniteScroll=!1,this.showingSearchResults=!1},t.prototype.onFolderLoaded=function(t){this.attemptNodeSelection(this.documentList.folderNode),this.pagination=t.list.pagination},t.prototype.attemptNodeSelection=function(t){this.contentService.hasPermission(t,"create")?this.chosenNode=t:this.resetChosenNode()},t.prototype.resetChosenNode=function(){this.chosenNode=null},t.prototype.choose=function(){var t=this,e=this.chosenNode;if(e&&e.guid){this.apiService.nodesApi.getNode(e.guid,{include:["path","properties","allowableOperations"]}).then(function(e){t.select.next([e.entry])})}else this.select.next([this.chosenNode])},t.prototype.close=function(){this.containingDialog.close()},t.prototype.onNodeDoubleClick=function(t){var e=this,n=t.detail.node.entry;if(n&&n.guid){var i={maxItems:this.pageSize,skipCount:this.skipCount,include:["path","properties","allowableOperations"]};this.apiService.nodesApi.getNode(n.guid,i).then(function(t){e.documentList.performCustomSourceNavigation(t)})}},t}());to.decorators=[{type:n.Component,args:[{selector:"adf-content-node-selector",styles:["\n\n    "],template:'\n      <header matDialogTitle\n              class="adf-content-node-selector-title"\n              data-automation-id="content-node-selector-title">{{title}}\n      </header>\n\n      <section matDialogContent\n               class="adf-content-node-selector-content"\n               (node-select)="onNodeSelect($event)">\n\n          <mat-form-field floatPlaceholder="never" class="adf-content-node-selector-content-input">\n              <input matInput\n                     id="searchInput"\n                     [formControl]="searchInput"\n                     type="text"\n                     placeholder="Search"\n                     [value]="searchTerm"\n                     data-automation-id="content-node-selector-search-input">\n\n              <mat-icon *ngIf="searchTerm.length > 0"\n                        matSuffix (click)="clear()"\n                        class="adf-content-node-selector-content-input-icon"\n                        data-automation-id="content-node-selector-search-clear">clear\n              </mat-icon>\n\n              <mat-icon *ngIf="searchTerm.length === 0"\n                        matSuffix\n                        class="adf-content-node-selector-content-input-icon"\n                        data-automation-id="content-node-selector-search-icon">search\n              </mat-icon>\n\n          </mat-form-field>\n\n          <adf-sites-dropdown\n              (change)="siteChanged($event)"\n              [placeholder]="\'NODE_SELECTOR.SELECT_LOCATION\'"\n              [hideMyFiles]="dropdownHideMyFiles"\n              [siteList]="dropdownSiteList"\n              data-automation-id="content-node-selector-sites-combo"></adf-sites-dropdown>\n\n          <adf-toolbar>\n              <adf-toolbar-title>\n                  <adf-dropdown-breadcrumb *ngIf="needBreadcrumbs()"\n                                           class="adf-content-node-selector-content-breadcrumb"\n                                           (navigate)="clear()"\n                                           [target]="documentList"\n                                           [folderNode]="breadcrumbFolderNode"\n                                           data-automation-id="content-node-selector-content-breadcrumb">\n                  </adf-dropdown-breadcrumb>\n              </adf-toolbar-title>\n          </adf-toolbar>\n\n          <div class="adf-content-node-selector-content-list" data-automation-id="content-node-selector-content-list">\n              <adf-document-list\n                  #documentList\n                  adf-highlight\n                  adf-highlight-selector=".cell-value adf-datatable-cell .adf-datatable-cell-value"\n                  [node]="nodes"\n                  [maxItems]="pageSize"\n                  [skipCount]="skipCount"\n                  [enableInfiniteScrolling]="infiniteScroll"\n                  [rowFilter]="rowFilter"\n                  [imageResolver]="imageResolver"\n                  [currentFolderId]="folderIdToShow"\n                  selectionMode="single"\n                  [contextMenuActions]="false"\n                  [contentActions]="false"\n                  [allowDropFiles]="false"\n                  (folderChange)="onFolderChange()"\n                  (ready)="onFolderLoaded($event)"\n                  (node-dblclick)="onNodeDoubleClick($event)"\n                  data-automation-id="content-node-selector-document-list">\n                  <empty-folder-content>\n                      <ng-template>\n                          <div>{{ \'NODE_SELECTOR.NO_RESULTS\' | translate }}</div>\n                      </ng-template>\n                  </empty-folder-content>\n              </adf-document-list>\n\n              <adf-infinite-pagination\n                  [pagination]="pagination"\n                  [pageSize]="pageSize"\n                  [loading]="loadingSearchResults"\n                  (loadMore)="getNextPageOfSearch($event)"\n                  data-automation-id="content-node-selector-search-pagination">\n                  {{ \'ADF-DOCUMENT-LIST.LAYOUT.LOAD_MORE\' | translate }}\n              </adf-infinite-pagination>\n          </div>\n\n      </section>\n\n      <footer matDialogActions class="adf-content-node-selector-actions">\n\n          <button *ngIf="inDialog"\n                  mat-button\n                  class="adf-content-node-selector-actions-cancel"\n                  (click)="close()"\n                  data-automation-id="content-node-selector-actions-cancel">{{ \'NODE_SELECTOR.CANCEL\' | translate }}\n          </button>\n\n          <button mat-button\n                  [disabled]="!chosenNode"\n                  class="adf-content-node-selector-actions-choose"\n                  (click)="choose()"\n                  data-automation-id="content-node-selector-actions-choose">{{ buttonActionName | translate }}\n          </button>\n\n      </footer>\n    ',encapsulation:n.ViewEncapsulation.None}]}],to.ctorParameters=function(){return[{type:vt},{type:r.ContentService},{type:r.AlfrescoApiService},{type:r.UserPreferencesService},{type:undefined,decorators:[{type:n.Optional},{type:n.Inject,args:[s.MAT_DIALOG_DATA]}]},{type:s.MatDialogRef,decorators:[{type:n.Optional}]}]},to.propDecorators={title:[{type:n.Input}],actionName:[{type:n.Input}],currentFolderId:[{type:n.Input}],dropdownHideMyFiles:[{type:n.Input}],dropdownSiteList:[{type:n.Input}],rowFilter:[{type:n.Input}],imageResolver:[{type:n.Input}],pageSize:[{type:n.Input}],select:[{type:n.Output}],documentList:[{type:n.ViewChild,args:[bt]}],highlighter:[{type:n.ViewChild,args:[r.HighlightDirective]}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var eo=function(){function t(t,e,n){this.dialog=t,this.documentListService=e,this.contentService=n}return t.prototype.copyContent=function(t,e){return this.doFileOperation("copy","content",t,e)},t.prototype.copyFolder=function(t,e){return this.doFileOperation("copy","folder",t,e)},t.prototype.moveContent=function(t,e){return this.doFileOperation("move","content",t,e)},t.prototype.moveFolder=function(t,e){return this.doFileOperation("move","folder",t,e)},t.prototype.doFileOperation=function(t,e,i,o){var r=this,s=new h.Subject;if(this.contentService.hasPermission(i,o)){var a={title:t+" '"+i.name+"' to ...",actionName:t,currentFolderId:i.parentId,rowFilter:this.rowFilter.bind(this,i.id),imageResolver:this.imageResolver.bind(this),select:new n.EventEmitter};return this.dialog.open(to,{data:a,panelClass:"adf-content-node-selector-dialog",width:"630px"}),a.select.subscribe(function(n){var o=n[0];r.documentListService[t+"Node"].call(r.documentListService,i.id,o.id).subscribe(s.next.bind(s,"OPERATION.SUCCES."+e.toUpperCase()+"."+t.toUpperCase()),s.error.bind(s)),r.dialog.closeAll()}),s}return s.error(new Error(JSON.stringify({error:{statusCode:403}}))),s},t.prototype.rowFilter=function(t,e){var n=e.node.entry;return n.id!==t&&!n.isFile},t.prototype.imageResolver=function(t,e){var n=t.node.entry;return this.contentService.hasPermission(n,"create")?null:this.documentListService.getMimeTypeIcon("disable/folder")},t}();eo.decorators=[{type:n.Injectable}],eo.ctorParameters=function(){return[{type:s.MatDialog},{type:ht},{type:r.ContentService}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var no=function(){function t(t,e,n){this.nodeActionsService=t,this.documentListService=e,this.contentService=n,this.permissionEvent=new h.Subject,this.error=new h.Subject,this.success=new h.Subject,this.handlers={},this.setupActionHandlers()}return t.prototype.getHandler=function(t){if(t){var e=t.toLowerCase();return this.handlers[e]||null}return null},t.prototype.setHandler=function(t,e){if(t){var n=t.toLowerCase();return this.handlers[n]=e,!0}return!1},t.prototype.canExecuteAction=function(t){return this.documentListService&&t&&!0===t.entry.isFile},t.prototype.setupActionHandlers=function(){this.handlers.download=this.download.bind(this),this.handlers.copy=this.copyNode.bind(this),this.handlers.move=this.moveNode.bind(this),this.handlers["delete"]=this.deleteNode.bind(this)},t.prototype.download=function(t){if(this.canExecuteAction(t)&&this.contentService){var e=document.createElement("a");return document.body.appendChild(e),e.setAttribute("download",t.entry.name),e.href=this.contentService.getContentUrl(t),e.click(),document.body.removeChild(e),a.Observable.of(!0)}return a.Observable.of(!1)},t.prototype.copyNode=function(t,e,n){var i=this.nodeActionsService.copyContent(t.entry,n);return this.prepareHandlers(i,"content","copy",e,n),i},t.prototype.moveNode=function(t,e,n){var i=this.nodeActionsService.moveContent(t.entry,n);return this.prepareHandlers(i,"content","move",e,n),i},t.prototype.prepareHandlers=function(t,e,n,i,o){var r=this;t.subscribe(function(t){i&&"function"==typeof i.reload&&i.reload(),r.success.next(t)},this.error.next.bind(this.error))},t.prototype.deleteNode=function(t,e,n){var i,o=this;if(this.canExecuteAction(t))return this.contentService.hasPermission(t.entry,n)?((i=this.documentListService.deleteNode(t.entry.id)).subscribe(function(){e&&"function"==typeof e.reload&&e.reload(),o.success.next(t.entry.id)}),i):(this.permissionEvent.next(new et({type:"content",action:"delete",permission:n})),a.Observable["throw"](new Error("No permission to delete")))},t}();no.decorators=[{type:n.Injectable}],no.ctorParameters=function(){return[{type:eo},{type:ht},{type:r.ContentService}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var io=function(){function t(t,e,n){this.nodeActionsService=t,this.documentListService=e,this.contentService=n,this.permissionEvent=new h.Subject,this.error=new h.Subject,this.success=new h.Subject,this.handlers={},this.setupActionHandlers()}return t.prototype.getHandler=function(t){if(t){var e=t.toLowerCase();return this.handlers[e]||null}return null},t.prototype.setHandler=function(t,e){if(t){var n=t.toLowerCase();return this.handlers[n]=e,!0}return!1},t.prototype.canExecuteAction=function(t){return this.documentListService&&t&&!0===t.entry.isFolder},t.prototype.setupActionHandlers=function(){this.handlers.copy=this.copyNode.bind(this),this.handlers.move=this.moveNode.bind(this),this.handlers["delete"]=this.deleteNode.bind(this)},t.prototype.copyNode=function(t,e,n){var i=this.nodeActionsService.copyFolder(t.entry,n);return this.prepareHandlers(i,"folder","copy",e,n),i},t.prototype.moveNode=function(t,e,n){var i=this.nodeActionsService.moveFolder(t.entry,n);return this.prepareHandlers(i,"folder","move",e,n),i},t.prototype.prepareHandlers=function(t,e,n,i,o){var r=this;t.subscribe(function(t){i&&"function"==typeof i.reload&&i.reload(),r.success.next(t)},this.error.next.bind(this.error))},t.prototype.deleteNode=function(t,e,n){var i,o=this;if(this.canExecuteAction(t))return this.contentService.hasPermission(t.entry,n)?((i=this.documentListService.deleteNode(t.entry.id)).subscribe(function(){e&&"function"==typeof e.reload&&e.reload(),o.success.next(t.entry.id)}),i):(this.permissionEvent.next(new et({type:"folder",action:"delete",permission:n})),a.Observable["throw"](new Error("No permission to delete")))},t}();io.decorators=[{type:n.Injectable}],io.ctorParameters=function(){return[{type:eo},{type:ht},{type:r.ContentService}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oo=function(){function t(t,e,i){this.list=t,this.documentActions=e,this.folderActions=i,this.title="Action",this.disabled=!1,this.execute=new n.EventEmitter,this.permissionEvent=new n.EventEmitter,this.error=new n.EventEmitter,this.success=new n.EventEmitter,this.model=new ut}return t.prototype.ngOnInit=function(){var t=this;this.model=new ut({title:this.title,icon:this.icon,permission:this.permission,disableWithNoPermission:this.disableWithNoPermission,target:this.target,disabled:this.disabled}),this.handler&&(this.model.handler=this.getSystemHandler(this.target,this.handler)),this.execute&&(this.model.execute=function(e){t.execute.emit({value:e})}),this.register()},t.prototype.register=function(){return!!this.list&&this.list.registerAction(this.model)},t.prototype.ngOnChanges=function(t){this.model.title=this.title},t.prototype.getSystemHandler=function(t,e){var n=this;if(t){var i=t.toLowerCase();if("document"===i)return this.documentActions?(this.documentActions.permissionEvent.subscribe(function(t){n.permissionEvent.emit(t)}),this.documentActions.error.subscribe(function(t){n.error.emit(t)}),this.documentActions.success.subscribe(function(t){n.success.emit(t)}),this.documentActions.getHandler(e)):null;if("folder"===i)return this.folderActions?(this.folderActions.permissionEvent.subscribe(function(t){n.permissionEvent.emit(t)}),this.folderActions.error.subscribe(function(t){n.error.emit(t)}),this.folderActions.success.subscribe(function(t){n.success.emit(t)}),this.folderActions.getHandler(e)):null}return null},t}();oo.decorators=[{type:n.Component,args:[{selector:"content-action",template:"",providers:[no,io]}]}],oo.ctorParameters=function(){return[{type:mt},{type:no},{type:io}]},oo.propDecorators={title:[{type:n.Input}],icon:[{type:n.Input}],handler:[{type:n.Input}],target:[{type:n.Input}],permission:[{type:n.Input}],disableWithNoPermission:[{type:n.Input}],disabled:[{type:n.Input}],execute:[{type:n.Output}],permissionEvent:[{type:n.Output}],error:[{type:n.Output}],success:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ro=function(){function t(t,e){this.documentList=t,this.logService=e,this.logService.log("ContentColumnListComponent is deprecated starting with 1.7.0 and may be removed in future versions. Use DataColumnListComponent instead.")}return t.prototype.registerColumn=function(t){if(this.documentList&&t){return this.documentList.data.getColumns().push(t),!0}return!1},t}();ro.decorators=[{type:n.Component,args:[{selector:"content-columns",template:""}]}],ro.ctorParameters=function(){return[{type:bt},{type:r.LogService}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var so=function(){function t(t,e){this.list=t,this.logService=e,this.type="text",this.sortable=!1,this.title="",this.logService.log("ContentColumnComponent is deprecated starting with 1.7.0 and may be removed in future versions. Use DataColumnComponent instead.")}return t.prototype.ngOnInit=function(){this.srTitle||"$thumbnail"!==this.key||(this.srTitle="Thumbnail")},t.prototype.ngAfterContentInit=function(){this.register()},t.prototype.register=function(){return!!this.list&&this.list.registerColumn(this)},t}();so.decorators=[{type:n.Component,args:[{selector:"content-column",template:""}]}],so.ctorParameters=function(){return[{type:ro},{type:r.LogService}]},so.propDecorators={key:[{type:n.Input}],type:[{type:n.Input}],format:[{type:n.Input}],sortable:[{type:n.Input}],title:[{type:n.Input}],template:[{type:n.ContentChild,args:[n.TemplateRef]}],srTitle:[{type:n.Input,args:["sr-title"]}],cssClass:[{type:n.Input,args:["class"]}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ao=function(){function t(t){this.documentList=t}return t.prototype.ngAfterContentInit=function(){this.documentList.emptyFolderTemplate=this.template,this.documentList.dataTable.noContentTemplate=this.template},t}();ao.decorators=[{type:n.Directive,args:[{selector:"empty-folder-content"}]}],ao.ctorParameters=function(){return[{type:bt}]},ao.propDecorators={template:[{type:n.ContentChild,args:[n.TemplateRef]}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var co=function(){function t(t){this.documentList=t}return t.prototype.ngAfterContentInit=function(){this.documentList.noPermissionTemplate=this.template,this.documentList.dataTable.noPermissionTemplate=this.template},t}();co.decorators=[{type:n.Directive,args:[{selector:"no-permission-content"}]}],co.ctorParameters=function(){return[{type:bt}]},co.propDecorators={template:[{type:n.ContentChild,args:[n.TemplateRef]}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var uo=function(){return function(){}}();uo.decorators=[{type:n.NgModule,args:[{imports:[r.ToolbarModule,e.CommonModule,r.DataTableModule,l.FlexLayoutModule,V,rt,u.TranslateModule,r.PaginationModule],declarations:[bt,so,ro,oo,mt,ao,co],providers:[ht,io,no,eo],exports:[bt,so,ro,oo,mt,ao,co]}]}],uo.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lo={provide:i.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return po}),multi:!0},po=function(){function t(t,e,n,i){this.element=t,this.ngZone=e,this.changeDetectorRef=n,this.document=i,this._panelOpen=!1,this.escapeEventStream=new h.Subject,this.onChange=function(){},this.onTouched=function(){}}return t.prototype.ngOnDestroy=function(){this.escapeEventStream&&(this.escapeEventStream.unsubscribe(),this.escapeEventStream=null),this.closingActionsSubscription&&this.closingActionsSubscription.unsubscribe()},Object.defineProperty(t.prototype,"panelOpen",{get:function(){return this._panelOpen&&this.searchPanel.showPanel},enumerable:!0,configurable:!0}),t.prototype.openPanel=function(){this.searchPanel.isOpen=this._panelOpen=!0,this.closingActionsSubscription=this.subscribeToClosingActions()},t.prototype.closePanel=function(){this._panelOpen&&(this.closingActionsSubscription.unsubscribe(),this._panelOpen=!1,this.searchPanel.resetResults(),this.searchPanel.hidePanel(),this.changeDetectorRef.detectChanges())},Object.defineProperty(t.prototype,"panelClosingActions",{get:function(){return b.merge(this.escapeEventStream,this.outsideClickStream)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outsideClickStream",{get:function(){var t=this;return this.document?b.merge(y.fromEvent(this.document,"click"),y.fromEvent(this.document,"touchend")).filter(function(e){var n=e.target;return t._panelOpen&&n!==t.element.nativeElement}):a.Observable.of(null)},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){var e=this;Promise.resolve(null).then(function(){return e.setTriggerValue(t)})},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.handleKeydown=function(t){var e=t.keyCode;e===d.ESCAPE&&this.panelOpen?(this.escapeEventStream.next(),t.stopPropagation()):e===d.ENTER&&(this.escapeEventStream.next(),t.preventDefault())},t.prototype.handleInput=function(t){if(document.activeElement===t.target){var e=t.target.value;this.onChange(e),e?(this.searchPanel.keyPressedStream.next(e),this.openPanel()):(this.searchPanel.resetResults(),this.closePanel())}},t.prototype.isPanelOptionClicked=function(t){var e=!1;if(t){var n=t.target;e=!this.isNoResultOption(t)&&!!this.searchPanel.panel&&!!this.searchPanel.panel.nativeElement.contains(n)}return e},t.prototype.isNoResultOption=function(t){return!this.searchPanel.results.list||0===this.searchPanel.results.list.entries.length},t.prototype.subscribeToClosingActions=function(){var t=this,e=this.ngZone.onStable.asObservable(),n=this.searchPanel.keyPressedStream.asObservable();return b.merge(e,n).switchMap(function(){return t.searchPanel.setVisibility(),t.panelClosingActions}).subscribe(function(e){return t.setValueAndClose(e)})},t.prototype.setTriggerValue=function(t){var e=this.searchPanel&&this.searchPanel.displayWith?this.searchPanel.displayWith(t):t,n=null!=e?e:"";this.element.nativeElement.value=n},t.prototype.setValueAndClose=function(t){this.isPanelOptionClicked(t)&&(this.setTriggerValue(t.target.textContent.trim()),this.onChange(t.target.textContent.trim()),this.element.nativeElement.focus()),this.closePanel()},t}();po.decorators=[{type:n.Directive,args:[{selector:"input[searchAutocomplete], textarea[searchAutocomplete]",host:{role:"combobox",autocomplete:"off","aria-autocomplete":"list","[attr.aria-expanded]":"panelOpen.toString()","[attr.aria-owns]":"autocomplete?.id","(blur)":"onTouched()","(input)":"handleInput($event)","(keydown)":"handleKeydown($event)"},providers:[lo]}]}],po.ctorParameters=function(){return[{type:n.ElementRef},{type:n.NgZone},{type:n.ChangeDetectorRef},{type:undefined,decorators:[{type:n.Optional},{type:n.Inject,args:[f.DOCUMENT]}]}]},po.propDecorators={searchPanel:[{type:n.Input,args:["searchAutocomplete"]}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ho=function(){function t(t,e,i){var o=this;this.searchService=t,this.changeDetectorRef=e,this._elementRef=i,this.displayWith=null,this.maxResults=20,this.skipResults=0,this.searchTerm="",this.resultLoaded=new n.EventEmitter,this.error=new n.EventEmitter,this.showPanel=!1,this._isOpen=!1,this.keyPressedStream=new h.Subject,this._classList={},this.keyPressedStream.asObservable().debounceTime(200).subscribe(function(t){o.loadSearchResults(t)})}return Object.defineProperty(t.prototype,"classList",{set:function(t){var e=this;t&&t.length&&(t.split(" ").forEach(function(t){return e._classList[t.trim()]=!0}),this._elementRef.nativeElement.className="")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this._isOpen&&this.showPanel},set:function(t){this._isOpen=t},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){this.setVisibility()},t.prototype.ngOnChanges=function(t){this.resetResults(),t.searchTerm&&t.searchTerm.currentValue?this.loadSearchResults(t.searchTerm.currentValue):t.queryBody&&t.queryBody.currentValue?this.loadSearchResults():this.loadSearchResults(this.searchTerm)},t.prototype.resetResults=function(){this.cleanResults(),this.setVisibility()},t.prototype.reload=function(){this.loadSearchResults(this.searchTerm)},t.prototype.cleanResults=function(){this.results&&(this.results={})},t.prototype.hasValidSearchQuery=function(t){return t&&t.query&&t.query.query},t.prototype.loadSearchResults=function(t){var e=this,n=this.getQueryBody(t);this.hasValidSearchQuery(n)?this.searchService.search(n).subscribe(function(t){e.results=t,e.resultLoaded.emit(e.results),e.isOpen=!0,e.setVisibility()},function(t){400!==t.status&&(e.results=null,e.error.emit(t))}):this.cleanResults()},t.prototype.getQueryBody=function(t){return this.queryBody?(!this.queryBody.query.query&&t&&(this.queryBody.query.query=t),this.queryBody):this.generateDefaultSearchNode(t)},t.prototype.generateDefaultSearchNode=function(t){return{query:{query:t?t+"* OR name:"+t+"*":t},include:["path","allowableOperations"],paging:{maxItems:this.maxResults.toString(),skipCount:this.skipResults.toString()},filterQueries:[{query:"TYPE:'cm:folder' OR TYPE:'cm:content'"},{query:"NOT cm:creator:System"}]}},t.prototype.hidePanel=function(){this.isOpen&&(this._classList["adf-search-show"]=!1,this._classList["adf-search-hide"]=!0,this.isOpen=!1,this.changeDetectorRef.markForCheck())},t.prototype.setVisibility=function(){this.showPanel=!!this.results&&!!this.results.list,this._classList["adf-search-show"]=this.showPanel,this._classList["adf-search-hide"]=!this.showPanel,this.changeDetectorRef.markForCheck()},t}();ho.decorators=[{type:n.Component,args:[{selector:"adf-search",template:'\n      <div role="listbox" id="adf-search-results-content" [ngClass]="_classList" #panel>\n          <ng-template\n              [ngTemplateOutlet]="template"\n              [ngTemplateOutletContext]="{ $implicit: results }">\n          </ng-template>\n      </div>\n    ',styles:["\n\n    "],encapsulation:n.ViewEncapsulation.None,preserveWhitespaces:!1,changeDetection:n.ChangeDetectionStrategy.OnPush,exportAs:"searchAutocomplete",host:{"class":"adf-search"}}]}],ho.ctorParameters=function(){return[{type:r.SearchService},{type:n.ChangeDetectorRef},{type:n.ElementRef}]},ho.propDecorators={panel:[{type:n.ViewChild,args:["panel"]}],template:[{type:n.ContentChild,args:[n.TemplateRef]}],displayWith:[{type:n.Input}],maxResults:[{type:n.Input}],skipResults:[{type:n.Input}],searchTerm:[{type:n.Input}],queryBody:[{type:n.Input}],classList:[{type:n.Input,args:["class"]}],resultLoaded:[{type:n.Output}],error:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fo=function(){function t(t,e){var i=this;this.authService=t,this.thumbnailService=e,this.expandable=!0,this.highlight=!1,this.inputType="text",this.autocomplete=!1,this.liveSearchEnabled=!0,this.liveSearchMaxResults=5,this.submit=new n.EventEmitter,this.searchChange=new n.EventEmitter,this.optionClicked=new n.EventEmitter,this.searchTerm="",this.toggleSearch=new h.Subject,this.focusSubject=new h.Subject,this.toggleSearch.asObservable().debounceTime(100).subscribe(function(){i.expandable&&(i.subscriptAnimationState="inactive"===i.subscriptAnimationState?"active":"inactive","inactive"===i.subscriptAnimationState&&(i.searchTerm="",i.searchAutocomplete.resetResults(),document.activeElement.id===i.searchInput.nativeElement.id&&i.searchInput.nativeElement.blur()))})}return t.prototype.applySearchFocus=function(t){"active"===t.toState&&this.searchInput.nativeElement.focus()},t.prototype.ngOnInit=function(){this.subscriptAnimationState=this.expandable?"inactive":"no-animation",this.setupFocusEventHandlers()},t.prototype.ngOnDestroy=function(){this.focusSubject&&(this.focusSubject.unsubscribe(),this.focusSubject=null),this.toggleSearch&&(this.toggleSearch.unsubscribe(),this.toggleSearch=null)},t.prototype.isLoggedIn=function(){return this.authService.isEcmLoggedIn()},t.prototype.searchSubmit=function(t){this.submit.emit(t),this.toggleSearchBar()},t.prototype.inputChange=function(t){this.searchChange.emit(t)},t.prototype.getAutoComplete=function(){return this.autocomplete?"on":"off"},t.prototype.getMimeTypeIcon=function(t){var e;return t.entry.content&&t.entry.content.mimeType&&(e=t.entry.content.mimeType),t.entry.isFolder&&(e="folder"),this.thumbnailService.getMimeTypeIcon(e)},t.prototype.isSearchBarActive=function(){return"active"===this.subscriptAnimationState&&this.liveSearchEnabled},t.prototype.toggleSearchBar=function(){this.toggleSearch&&this.toggleSearch.next()},t.prototype.elementClicked=function(t){t.entry&&(this.optionClicked.next(t),this.toggleSearchBar())},t.prototype.onFocus=function(t){this.focusSubject.next(t)},t.prototype.onBlur=function(t){this.focusSubject.next(t)},t.prototype.activateToolbar=function(){this.isSearchBarActive()||this.toggleSearchBar()},t.prototype.selectFirstResult=function(){if(this.listResultElement&&this.listResultElement.length>0){this.listResultElement.first._getHostElement().focus()}},t.prototype.onRowArrowDown=function(t){var e=this.getNextElementSibling(t.target);e&&e.focus()},t.prototype.onRowArrowUp=function(t){var e=this.getPreviousElementSibling(t.target);e?e.focus():(this.searchInput.nativeElement.focus(),this.focusSubject.next(new FocusEvent("focus")))},t.prototype.setupFocusEventHandlers=function(){var t=this;this.focusSubject.asObservable().debounceTime(50).filter(function(e){return t.isSearchBarActive()&&("blur"===e.type||"focusout"===e.type)}).subscribe(function(){t.toggleSearchBar()})},t.prototype.getNextElementSibling=function(t){return t.nextElementSibling},t.prototype.getPreviousElementSibling=function(t){return t.previousElementSibling},t}();fo.decorators=[{type:n.Component,args:[{selector:"adf-search-control",template:'\n      <div class="adf-search-container">\n          <div *ngIf="isLoggedIn()" [@transitionMessages]="subscriptAnimationState" (@transitionMessages.done)="applySearchFocus($event)">\n              <a mat-icon-button\n                  *ngIf="expandable"\n                  id="adf-search-button"\n                  class="adf-search-button"\n                  (click)="toggleSearchBar($event)"\n                  (keyup.enter)="toggleSearchBar($event)">\n                  <mat-icon aria-label="search button">search</mat-icon>\n              </a>\n              <mat-form-field class="adf-input-form-field-divider">\n                  <input matInput #searchInput\n                      [type]="inputType"\n                      [autocomplete]="getAutoComplete()"\n                      id="adf-control-input"\n                      [(ngModel)]="searchTerm"\n                      (focus)="activateToolbar($event)"\n                      (blur)="onBlur($event)"\n                      (keyup.escape)="toggleSearchBar()"\n                      (keyup.arrowdown)="selectFirstResult()"\n                      (ngModelChange)="inputChange($event)"\n                      [searchAutocomplete]="auto"\n                      (keyup.enter)="searchSubmit($event)">\n              </mat-form-field>\n          </div>\n      </div>\n\n      <adf-search #auto="searchAutocomplete"\n                  class="adf-search-result-autocomplete"\n                  [queryBody]="customQueryBody"\n                  [maxResults]="liveSearchMaxResults">\n          <ng-template let-data>\n              <mat-list *ngIf="isSearchBarActive()" id="autocomplete-search-result-list">\n                  <mat-list-item\n                      *ngFor="let item of data?.list?.entries; let idx = index"\n                      id="result_option_{{idx}}"\n                      [tabindex]="0"\n                      (focus)="onFocus($event)"\n                      (blur)="onBlur($event)"\n                      (keyup.arrowdown)="onRowArrowDown($event)"\n                      (keyup.arrowup)="onRowArrowUp($event)"\n                      class="adf-search-autocomplete-item"\n                      (click)="elementClicked(item)"\n                      (keyup.enter)="elementClicked(item)">\n                      <mat-icon mat-list-icon>\n                          <img [src]="getMimeTypeIcon(item)" />\n                      </mat-icon>\n                      <h4 mat-line id="result_name_{{idx}}"\n                          *ngIf="highlight; else elseBlock"\n                          class="adf-search-fixed-text"\n                          [innerHtml]="item.entry.name | highlight: searchTerm">\n                          {{ item?.entry.name }}\n                      </h4>\n                      <ng-template #elseBlock>\n                          <h4 class="adf-search-fixed-text" mat-line id="result_name_{{idx}}" [innerHtml]="item.entry.name"></h4>\n                      </ng-template>\n                      <p mat-line class="adf-search-fixed-text"> {{item?.entry.createdByUser.displayName}} </p>\n                  </mat-list-item>\n                  <mat-list-item\n                      id="search_no_result"\n                      data-automation-id="search_no_result_found"\n                      *ngIf="data?.list?.entries.length === 0">\n                      <p mat-line class="adf-search-fixed-text">{{ \'SEARCH.RESULTS.NONE\' | translate:{searchTerm: searchTerm} }}</p>\n                  </mat-list-item>\n              </mat-list>\n          </ng-template>\n      </adf-search>\n    ',styles:["\n\n    "],animations:[m.trigger("transitionMessages",[m.state("active",m.style({transform:"translateX(0%)","margin-left":"13px"})),m.state("inactive",m.style({transform:"translateX(81%)"})),m.state("no-animation",m.style({transform:"translateX(0%)",width:"100%"})),m.transition("inactive => active",m.animate("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")),m.transition("active => inactive",m.animate("300ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])],encapsulation:n.ViewEncapsulation.None,host:{"class":"adf-search-control"}}]}],fo.ctorParameters=function(){return[{type:r.AuthenticationService},{type:r.ThumbnailService}]},fo.propDecorators={expandable:[{type:n.Input}],highlight:[{type:n.Input}],inputType:[{type:n.Input}],autocomplete:[{type:n.Input}],liveSearchEnabled:[{type:n.Input}],liveSearchMaxResults:[{type:n.Input}],customQueryBody:[{type:n.Input}],submit:[{type:n.Output}],searchChange:[{type:n.Output}],optionClicked:[{type:n.Output}],searchAutocomplete:[{type:n.ViewChild,args:[ho]}],searchInput:[{type:n.ViewChild,args:["searchInput"]}],listResultElement:[{type:n.ViewChildren,args:[s.MatListItem]}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yo=[ho,fo,po],bo=[r.SearchService],mo=function(){return function(){}}();mo.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,i.FormsModule,i.ReactiveFormsModule,V,r.PipeModule,u.TranslateModule],declarations:yo.slice(),providers:bo.slice(),exports:yo.slice()}]}],mo.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vo=function(){function t(t){this.sitesService=t,this.hideMyFiles=!1,this.siteList=null,this.placeholder="DROPDOWN.PLACEHOLDER_LABEL",this.change=new n.EventEmitter,this.MY_FILES_VALUE="default"}return t.prototype.ngOnInit=function(){this.siteList||this.setDefaultSiteList()},t.prototype.selectedSite=function(){var t,e=this;t=this.siteSelected===this.MY_FILES_VALUE?new r.SiteModel:this.siteList.find(function(t){return t.guid===e.siteSelected}),this.change.emit(t)},t.prototype.setDefaultSiteList=function(){var t=this;this.siteList=[],this.sitesService.getSites().subscribe(function(e){t.siteList=e},function(t){})},t}();vo.decorators=[{type:n.Component,args:[{selector:"adf-sites-dropdown",styles:["\n\n    "],template:'\n      <div id="site-dropdown-container" class="adf-site-dropdown-container">\n          <mat-form-field>\n              <mat-select\n                  class="adf-site-dropdown-list-element"\n                  id="site-dropdown"\n                  placeholder="{{placeholder | translate}}"\n                  floatPlaceholder="never"\n                  data-automation-id="site-my-files-select"\n                  [(ngModel)]="siteSelected"\n                  (ngModelChange)="selectedSite()">\n                  <mat-option *ngIf="!hideMyFiles" data-automation-id="site-my-files-option" id="default_site_option" [value]="MY_FILES_VALUE">{{\'DROPDOWN.MY_FILES_OPTION\' | translate}}</mat-option>\n                  <mat-option *ngFor="let site of siteList" [value]="site.guid">\n                      {{ site.title | translate }}\n                  </mat-option>\n              </mat-select>\n          </mat-form-field>\n      </div>\n    '}]}],vo.ctorParameters=function(){return[{type:r.SitesService}]},vo.propDecorators={hideMyFiles:[{type:n.Input}],siteList:[{type:n.Input}],placeholder:[{type:n.Input}],change:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var go=function(){return function(){}}();go.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,V,u.TranslateModule,i.FormsModule,i.ReactiveFormsModule],exports:[vo],declarations:[vo],providers:[]}]}],go.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var So=function(){function t(){this.folderNode=null,this.root=null,this.rootId=null,this.route=[],this.navigate=new n.EventEmitter}return Object.defineProperty(t.prototype,"hasRoot",{get:function(){return!!this.root},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){if(t.folderNode){var e=t.folderNode.currentValue;this.route=this.parseRoute(e)}},t.prototype.parseRoute=function(t){if(t&&t.path){var e=(t.path.elements||[]).slice();e.push({id:t.id,name:t.name});var n=this.getElementPosition(e,this.rootId);return n>0&&e.splice(0,n),-1===n&&this.rootId&&(e[0].id=this.rootId),this.root&&(e[0].name=this.root),e}return[]},t.prototype.getElementPosition=function(t,e){var n=-1;return t&&t.length>0&&e&&(n=t.findIndex(function(t){return t.id===e})),n},t.prototype.onRoutePathClick=function(t,e){e&&e.preventDefault(),t&&(this.navigate.emit(t),this.target&&this.target.loadFolderByNodeId(t.id))},t}();So.decorators=[{type:n.Component,args:[{selector:"adf-breadcrumb",template:'\n      <div *ngIf="folderNode" data-automation-id="breadcrumb" class="adf-breadcrumb-container">\n          <li *ngFor="let item of route; let last = last"\n              [class.active]="last"\n              [ngSwitch]="last"\n              title="{{ item.name | translate }}"\n              class="adf-breadcrumb-item">\n\n              <a *ngSwitchDefault href="#" [attr.data-automation-id]="\'breadcrumb_\' + item.name"\n                 class="adf-breadcrumb-item-anchor"\n                 (click)="onRoutePathClick(item, $event)">\n                  {{ item.name | translate }}\n              </a>\n\n              <div *ngSwitchCase="true" class="adf-breadcrumb-item-current">\n                  {{ item.name | translate }}\n              </div>\n\n              <mat-icon class="adf-breadcrumb-item-chevron" *ngIf="!last">\n                  chevron_right\n              </mat-icon>\n          </li>\n      </div>\n      <div *ngIf="!folderNode && hasRoot">\n          <li class="adf-breadcrumb-item">\n              <div class="adf-breadcrumb-item-current">\n                  {{ root | translate }}\n              </div>\n          </li>\n      </div>\n    ',styles:["\n\n    "],encapsulation:n.ViewEncapsulation.None,host:{"class":"adf-breadcrumb"}}]}],So.ctorParameters=function(){return[]},So.propDecorators={folderNode:[{type:n.Input}],root:[{type:n.Input}],rootId:[{type:n.Input}],target:[{type:n.Input}],navigate:[{type:n.Output}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return U(e,t),e.prototype.ngOnChanges=function(e){t.prototype.ngOnChanges.call(this,e),this.recalculateNodes()},e.prototype.recalculateNodes=function(){this.currentNode=this.route[this.route.length-1],this.previousNodes=this.route.slice(0,this.route.length-1).reverse()},e.prototype.open=function(){this.selectbox&&this.selectbox.open()},e.prototype.hasPreviousNodes=function(){return this.previousNodes.length>0},e}(So);wo.decorators=[{type:n.Component,args:[{selector:"adf-dropdown-breadcrumb",template:'\n      <ng-container *ngIf="route.length > 0">\n\n          <button\n              tabindex="0"\n              class="adf-dropdown-breadcumb-trigger"\n              (click)="open()"\n              data-automation-id="dropdown-breadcrumb-trigger">\n              <mat-icon [class.isRoot]="!hasPreviousNodes()">folder</mat-icon>\n          </button>\n          <mat-icon class="adf-dropddown-breadcrumb-item-chevron">chevron_right</mat-icon>\n\n          <mat-select\n              *ngIf="hasPreviousNodes()"\n              class="adf-dropdown-breadcrumb-path"\n              tabindex="0"\n              data-automation-id="dropdown-breadcrumb-path" >\n\n              <mat-option\n                  *ngFor="let node of previousNodes;"\n                  (click)="onRoutePathClick(node, $event)"\n                  class="adf-dropdown-breadcrumb-path-option"\n                  tabindex="0"\n                  data-automation-class="dropdown-breadcrumb-path-option">\n                  {{ node.name }}\n              </mat-option>\n          </mat-select>\n\n          <span\n              class="adf-current-folder"\n              [class.isRoot]="!hasPreviousNodes()"\n              data-automation-id="current-folder">{{ currentNode.name }}</span>\n      </ng-container>\n    ',styles:["\n\n    "],encapsulation:n.ViewEncapsulation.None,host:{"class":"adf-dropdown-breadcrumb"}}]}],wo.ctorParameters=function(){return[]},wo.propDecorators={selectbox:[{type:n.ViewChild,args:[s.MatSelect]}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _o=function(){return function(){}}();_o.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,V,u.TranslateModule],exports:[So,wo],declarations:[So,wo]}]}],_o.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Oo=function(){return function(){}}();Oo.decorators=[{type:n.Component,args:[{selector:"adf-version-upload",template:'\n      <adf-upload-button\n          data-automation-id="adf-new-version-file-upload"\n          class="adf-new-version-file-upload"\n          staticTitle="Upload new version"\n          [rootFolderId]="node.parentId"\n          tooltip="Restriction: upload file with the same name to create a new version of it"\n          [versioning]="true">\n      </adf-upload-button>\n    ',encapsulation:n.ViewEncapsulation.None,host:{"class":"adf-version-upload"}}]}],Oo.ctorParameters=function(){return[]},Oo.propDecorators={node:[{type:n.Input}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xo=function(){return function(){}}();xo.decorators=[{type:n.Component,args:[{selector:"adf-version-manager",template:'\n      <div class="adf-new-version-uploader-container" fxLayout="row" fxLayoutAlign="end center">\n          <adf-version-upload [node]="node"></adf-version-upload>\n      </div>\n      <div class="adf-version-list-container">\n          <adf-version-list [id]="node.id"></adf-version-list>\n      </div>\n    ',styles:["\n      .adf-button.upload-new-version {\n        -webkit-box-shadow: none;\n                box-shadow: none; }\n\n      .adf-new-version-uploader-container {\n        border-bottom: 1px solid #d8d8d8;\n        padding: 16px 0; }\n    "],encapsulation:n.ViewEncapsulation.None}]}],xo.ctorParameters=function(){return[]},xo.propDecorators={node:[{type:n.Input}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Eo=function(){function t(t){this.alfrescoApi=t,this.versions=[],this.isLoading=!0,this.versionsApi=this.alfrescoApi.versionsApi}return t.prototype.ngOnChanges=function(){this.loadVersionHistory()},t.prototype.restore=function(t){this.versionsApi.revertVersion(this.id,t,{majorVersion:!0,comment:""}).then(this.loadVersionHistory.bind(this))},t.prototype.loadVersionHistory=function(){var t=this;this.isLoading=!0,this.versionsApi.listVersionHistory(this.id).then(function(e){t.versions=e.list.entries,t.isLoading=!1})},t}();Eo.decorators=[{type:n.Component,args:[{selector:"adf-version-list",template:'\n      <mat-list class="adf-version-list" *ngIf="!isLoading; else loading_template">\n          <mat-list-item *ngFor="let version of versions">\n              <mat-icon mat-list-icon>insert_drive_file</mat-icon>\n              <h4 mat-line class="adf-version-list-item-name">{{version.entry.name}}</h4>\n              <p mat-line>\n                  <span class="adf-version-list-item-version">{{version.entry.id}}</span> -\n                  <span class="adf-version-list-item-date">{{version.entry.modifiedAt | date}}</span>\n              </p>\n              <p mat-line class="adf-version-list-item-comment">{{version.entry.versionComment}}</p>\n\n              <mat-menu #versionMenu="matMenu" yPosition="below" xPosition="before">\n                  <button mat-menu-item (click)="restore(version.entry.id)"> Restore </button>\n              </mat-menu>\n\n              <button mat-icon-button [matMenuTriggerFor]="versionMenu">\n                  <mat-icon>more_vert</mat-icon>\n              </button>\n          </mat-list-item>\n      </mat-list>\n\n      <ng-template #loading_template>\n          <mat-progress-bar data-automation-id="version-history-loading-bar" mode="indeterminate" color="accent"></mat-progress-bar>\n      </ng-template>\n    ',styles:["\n      .adf-version-list .mat-list-item {\n        border-bottom: 1px solid #d8d8d8; }\n\n      .adf-version-list-item-version {\n        font-weight: bold; }\n\n      .adf-version-list-item-date {\n        opacity: 0.6; }\n\n      .adf-version-list-item-comment {\n        opacity: 0.5; }\n    "],encapsulation:n.ViewEncapsulation.None,host:{"class":"adf-version-list"}}]}],Eo.ctorParameters=function(){return[{type:r.AlfrescoApiService}]},Eo.propDecorators={id:[{type:n.Input}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Co=function(){return function(){}}();Co.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,V,u.TranslateModule,rt],exports:[Oo,xo,Eo],declarations:[Oo,xo,Eo],providers:[]}]}],Co.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var To=function(){return function(){}}();To.decorators=[{type:n.NgModule,args:[{imports:[i.FormsModule,i.ReactiveFormsModule,r.DirectiveModule,e.CommonModule,V,u.TranslateModule,go,_o,r.ToolbarModule,uo,r.PaginationModule],exports:[to],entryComponents:[to],declarations:[to],providers:[vt]}]}],To.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Io=function(){function t(t,e,n,i){this.apiService=t,this.dialogRef=e,this.data=n,this.logService=i,this.cancelled=!1}return Object.defineProperty(t.prototype,"downloadsApi",{get:function(){return this.apiService.getInstance().core.downloadsApi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodesApi",{get:function(){return this.apiService.getInstance().core.nodesApi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentApi",{get:function(){return this.apiService.getInstance().content},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.data&&this.data.nodeIds&&this.data.nodeIds.length>0&&setTimeout(function(){t.cancelled?t.logService.log("Cancelled"):t.downloadZip(t.data.nodeIds)},0)},t.prototype.cancelDownload=function(){this.cancelled=!0,this.dialogRef.close(!1)},t.prototype.downloadZip=function(t){var e=this;if(t&&t.length>0){var n=this.downloadsApi.createDownload({nodeIds:t});n.on("progress",function(t){return e.logService.log("Progress",t)}),n.on("error",function(t){return e.logService.error("Error",t)}),n.on("abort",function(t){return e.logService.log("Abort",t)}),n.on("success",function(t){if(t&&t.entry&&t.entry.id){var n=e.contentApi.getContentUrl(t.entry.id,!0);e.nodesApi.getNode(t.entry.id).then(function(i){e.logService.log(i);var o=i.entry.name;e.waitAndDownload(t.entry.id,n,o)})}})}},t.prototype.waitAndDownload=function(t,e,n){var i=this;this.cancelled||this.downloadsApi.getDownload(t).then(function(o){o.entry&&("DONE"===o.entry.status?i.download(e,n):setTimeout(function(){i.waitAndDownload(t,e,n)},1e3))})},t.prototype.download=function(t,e){if(t&&e){var n=document.createElement("a");n.style.display="none",n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}this.dialogRef.close(!0)},t}();Io.decorators=[{type:n.Component,args:[{selector:"adf-download-zip-dialog",template:'\n      <h1 matDialogTitle>{{ \'CORE.DIALOG.DOWNLOAD_ZIP.TITLE\' | translate }}</h1>\n      <div mat-dialog-content>\n          <mat-progress-bar color="primary" mode="indeterminate"></mat-progress-bar>\n      </div>\n      <div mat-dialog-actions>\n          <span class="spacer"></span>\n          <button mat-button color="primary" (click)="cancelDownload()">\n              {{ \'CORE.DIALOG.DOWNLOAD_ZIP.ACTIONS.CANCEL\' | translate }}\n          </button>\n      </div>\n    ',styles:["\n      .spacer {\n        -webkit-box-flex: 1;\n            -ms-flex: 1 1 auto;\n                flex: 1 1 auto; }\n\n      .adf-download-zip-dialog .mat-dialog-actions .mat-button-wrapper {\n        text-transform: uppercase; }\n    "],host:{"class":"adf-download-zip-dialog"},encapsulation:n.ViewEncapsulation.None}]}],Io.ctorParameters=function(){return[{type:r.AlfrescoApiService},{type:s.MatDialogRef},{type:undefined,decorators:[{type:n.Inject,args:[s.MAT_DIALOG_DATA]}]},{type:r.LogService}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ao="CORE.FOLDER_DIALOG.FOLDER_NAME.ERRORS",No=function(){function t(t,e,n,i,o,r){this.formBuilder=t,this.dialog=e,this.nodesApi=n,this.translation=i,this.notification=o,this.data=r,this.folder=null}return Object.defineProperty(t.prototype,"editing",{get:function(){return!!this.data.folder},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this.data.folder,e="",n="";if(t){var o=t.properties;e=t.name||"",n=o?o["cm:description"]:""}var r={name:[i.Validators.required,M,k,j]};this.form=this.formBuilder.group({name:[e,r.name],description:[n]})},Object.defineProperty(t.prototype,"name",{get:function(){return(this.form.value.name||"").trim()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return(this.form.value.description||"").trim()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return{"cm:title":this.name,"cm:description":this.description}},enumerable:!0,configurable:!0}),t.prototype.create=function(){var t=this.name,e=this.properties,n=this.nodesApi,i=this.data.parentNodeId;return n.createFolder(i,{name:t,properties:e})},t.prototype.edit=function(){var t=this.name,e=this.properties,n=this.nodesApi,i=this.data.folder.id;return n.updateNode(i,{name:t,properties:e})},t.prototype.submit=function(){var t=this,e=this.form,n=this.dialog,i=this.editing;e.valid&&(i?this.edit():this.create()).subscribe(function(t){return n.close(t)},function(e){return t.handleError(e)})},t.prototype.handleError=function(t){var e=this,n="CORE.MESSAGES.ERRORS.GENERIC";try{409===JSON.parse(t.message).error.statusCode&&(n="CORE.MESSAGES.ERRORS.EXISTENT_FOLDER")}catch(i){}return this.translation.get(n).subscribe(function(t){e.notification.openSnackMessage(t,3e3)}),t},t}();No.decorators=[{type:n.Component,args:[{selector:"adf-folder-dialog",styles:["\n      .adf-fill-remaining-space {\n        -webkit-box-flex: 1;\n            -ms-flex: 1 1 auto;\n                flex: 1 1 auto; }\n\n      .adf-full-width {\n        width: 100%; }\n    "],template:'\n      <h2 mat-dialog-title>\n          {{\n          (editing\n          ? \'CORE.FOLDER_DIALOG.EDIT_FOLDER_TITLE\'\n          : \'CORE.FOLDER_DIALOG.CREATE_FOLDER_TITLE\'\n          ) | translate\n          }}\n      </h2>\n\n      <mat-dialog-content>\n          <form [formGroup]="form" (submit)="submit()">\n              <mat-input-container class="adf-full-width">\n                  <input\n                      placeholder="{{ \'CORE.FOLDER_DIALOG.FOLDER_NAME.LABEL\' | translate }}"\n                      matInput\n                      required\n                      [formControl]="form.controls[\'name\']"\n                  />\n\n                  <mat-hint *ngIf="form.controls[\'name\'].dirty">\n                      <span *ngIf="form.controls[\'name\'].errors?.required">\n                          {{ \'CORE.FOLDER_DIALOG.FOLDER_NAME.ERRORS.REQUIRED\' | translate }}\n                      </span>\n\n                      <span *ngIf="!form.controls[\'name\'].errors?.required && form.controls[\'name\'].errors?.message">\n                          {{ form.controls[\'name\'].errors?.message | translate }}\n                      </span>\n                  </mat-hint>\n              </mat-input-container>\n\n              <br />\n              <br />\n\n              <mat-input-container class="adf-full-width">\n                  <textarea\n                      matInput\n                      placeholder="{{ \'CORE.FOLDER_DIALOG.FOLDER_DESCRIPTION.LABEL\' | translate }}"\n                      rows="4"\n                      [formControl]="form.controls[\'description\']"></textarea>\n              </mat-input-container>\n          </form>\n      </mat-dialog-content>\n\n      <mat-dialog-actions class="adf-dialog-buttons">\n          <span class="adf-fill-remaining-space"></span>\n\n          <button\n              mat-button\n              mat-dialog-close>\n              {{ \'CORE.FOLDER_DIALOG.CANCEL_BUTTON.LABEL\' | translate }}\n          </button>\n\n          <button class="adf-dialog-action-button"\n                  mat-button\n                  (click)="submit()"\n                  [disabled]="!form.valid">\n              {{\n              (editing\n              ? \'CORE.FOLDER_DIALOG.UPDATE_BUTTON.LABEL\'\n              : \'CORE.FOLDER_DIALOG.CREATE_BUTTON.LABEL\'\n              ) | translate\n              }}\n          </button>\n      </mat-dialog-actions>\n    '}]}],No.ctorParameters=function(){return[{type:i.FormBuilder},{type:s.MatDialogRef},{type:r.NodesApiService},{type:r.TranslationService},{type:r.NotificationService},{type:undefined,decorators:[{type:n.Optional},{type:n.Inject,args:[s.MAT_DIALOG_DATA]}]}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Do=function(){return function(){}}();Do.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,V,u.TranslateModule,i.FormsModule,i.ReactiveFormsModule],declarations:[Io,No],providers:[r.NodesApiService,r.NotificationService,r.TranslationService],exports:[Io,No],entryComponents:[Io,No]}]}],Do.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Po="-my-",Fo=function(){function t(t,e){this.dialogRef=t,this.content=e,this.parentNodeId=Po}return t.prototype.onClick=function(t){t.preventDefault(),this.openDialog()},Object.defineProperty(t.prototype,"dialogConfig",{get:function(){var e=t.DIALOG_WIDTH;return{data:{parentNodeId:this.parentNodeId},width:e+"px"}},enumerable:!0,configurable:!0}),t.prototype.openDialog=function(){var t=this.dialogRef,e=this.dialogConfig,n=this.content;t.open(No,e).afterClosed().subscribe(function(t){t&&n.folderCreate.next(t)})},t}();Fo.DIALOG_WIDTH=400,Fo.decorators=[{type:n.Directive,args:[{selector:"[adf-create-folder]"}]}],Fo.ctorParameters=function(){return[{type:s.MatDialog},{type:r.ContentService}]},Fo.propDecorators={parentNodeId:[{type:n.Input,args:["adf-create-folder"]}],onClick:[{type:n.HostListener,args:["click",["$event"]]}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Lo=function(){function t(t,e,n){this.dialogRef=t,this.elementRef=e,this.content=n}return t.prototype.onClick=function(t){t.preventDefault(),this.folder&&this.openDialog()},Object.defineProperty(t.prototype,"dialogConfig",{get:function(){var e=t.DIALOG_WIDTH;return{data:{folder:this.folder},width:e+"px"}},enumerable:!0,configurable:!0}),t.prototype.openDialog=function(){var t=this.dialogRef,e=this.dialogConfig,n=this.content;t.open(No,e).afterClosed().subscribe(function(t){t&&n.folderEdit.next(t)})},t}();Lo.DIALOG_WIDTH=400,Lo.decorators=[{type:n.Directive,args:[{selector:"[adf-edit-folder]"}]}],Lo.ctorParameters=function(){return[{type:s.MatDialog},{type:n.ElementRef},{type:r.ContentService}]},Lo.propDecorators={folder:[{type:n.Input,args:["adf-edit-folder"]}],onClick:[{type:n.HostListener,args:["click",["$event"]]}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ro=function(){return function(){}}();Ro.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,V],declarations:[Fo,Lo],exports:[Fo,Lo]}]}],Ro.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Mo=function(){function t(t){this.fileSizePipe=t}return t.prototype.getBasicProperties=function(t){return[new r.CardViewTextItemModel({label:"CORE.METADATA.BASIC.NAME",value:t.name,key:"name",editable:!0}),new r.CardViewTextItemModel({label:"CORE.METADATA.BASIC.TITLE",value:t.properties["cm:title"],key:"properties.cm:title",editable:!0}),new r.CardViewTextItemModel({label:"CORE.METADATA.BASIC.CREATOR",value:t.createdByUser.displayName,key:"createdByUser.displayName",editable:!1}),new r.CardViewDateItemModel({label:"CORE.METADATA.BASIC.CREATED_DATE",value:t.createdAt,key:"createdAt",editable:!1}),new r.CardViewTextItemModel({label:"CORE.METADATA.BASIC.SIZE",value:t.content.sizeInBytes,key:"content.sizeInBytes",pipes:[{pipe:this.fileSizePipe}],editable:!1}),new r.CardViewTextItemModel({label:"CORE.METADATA.BASIC.MODIFIER",value:t.modifiedByUser.displayName,key:"modifiedByUser.displayName",editable:!1}),new r.CardViewDateItemModel({label:"CORE.METADATA.BASIC.MODIFIED_DATE",value:t.modifiedAt,key:"modifiedAt",editable:!1}),new r.CardViewTextItemModel({label:"CORE.METADATA.BASIC.MIMETYPE",value:t.content.mimeTypeName,key:"content.mimeTypeName",editable:!1}),new r.CardViewTextItemModel({label:"CORE.METADATA.BASIC.AUTHOR",value:t.properties["cm:author"],key:"properties.cm:author",editable:!0}),new r.CardViewTextItemModel({label:"CORE.METADATA.BASIC.DESCRIPTION",value:t.properties["cm:description"],key:"properties.cm:description",multiline:!0,editable:!0})]},t}();Mo.decorators=[{type:n.Injectable}],Mo.ctorParameters=function(){return[{type:r.FileSizePipe}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ko=function(){function t(t,e,n){this.contentMetadataService=t,this.cardViewUpdateService=e,this.nodesApi=n,this.editable=!1,this.maxPropertiesToShow=Infinity,this.properties=[]}return t.prototype.ngOnInit=function(){var t=this;this.cardViewUpdateService.itemUpdated$.switchMap(this.saveNode.bind(this)).subscribe(function(e){return t.node=e},function(e){return t.handleError(e)})},t.prototype.ngOnChanges=function(){this.recalculateProperties()},t.prototype.saveNode=function(t){var e=t.changed;return this.nodesApi.updateNode(this.node.id,e)},t.prototype.handleError=function(t){console.log(t)},t.prototype.recalculateProperties=function(){var t=this.contentMetadataService.getBasicProperties(this.node);this.maxPropertiesToShow&&(t=t.slice(0,this.maxPropertiesToShow)),this.properties=t.slice()},t}();ko.decorators=[{type:n.Component,args:[{selector:"adf-content-metadata",template:'\n      <div class="adf-metadata-properties">\n          <adf-card-view [properties]="properties" [editable]="editable"></adf-card-view>\n      </div>\n    ',styles:["\n\n    "],host:{"class":"adf-content-metadata"},changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,providers:[r.CardViewUpdateService],viewProviders:[Mo,r.FileSizePipe]}]}],ko.ctorParameters=function(){return[{type:Mo},{type:r.CardViewUpdateService},{type:r.NodesApiService}]},ko.propDecorators={node:[{type:n.Input}],editable:[{type:n.Input}],maxPropertiesToShow:[{type:n.Input}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jo=function(){function t(){this.editable=!1,this.expanded=!1}return t.prototype.toggleEdit=function(){this.editable=!this.editable},t.prototype.toggleExpanded=function(){this.expanded=!this.expanded},Object.defineProperty(t.prototype,"maxPropertiesToShow",{get:function(){return this.expanded?Infinity:5},enumerable:!0,configurable:!0}),t}();jo.decorators=[{type:n.Component,args:[{selector:"adf-content-metadata-card",template:'\n      <mat-card *ngIf="node">\n          <mat-card-content>\n              <adf-content-metadata [node]="node" [editable]="editable" [maxPropertiesToShow]="maxPropertiesToShow"></adf-content-metadata>\n          </mat-card-content>\n          <mat-card-footer class="adf-viewer-default-sidebar-card-footer" fxLayout="row" fxLayoutAlign="space-between stretch">\n              <div>\n                  <button mat-icon-button>\n                      <mat-icon>star_border</mat-icon>\n                  </button>\n                  <button mat-icon-button (click)="toggleEdit()">\n                      <mat-icon>mode_edit</mat-icon>\n                  </button>\n              </div>\n              <button mat-button (click)="toggleExpanded()">\n                  <ng-container *ngIf="!expanded">\n                      <span>{{ \'ADF_VIEWER.SIDEBAR.METADATA.MORE_INFORMATION\' | translate }}</span>\n                      <mat-icon>keyboard_arrow_down</mat-icon>\n                  </ng-container>\n                  <ng-container *ngIf="expanded">\n                      <span>{{ \'ADF_VIEWER.SIDEBAR.METADATA.LESS_INFORMATION\' | translate }}</span>\n                      <mat-icon>keyboard_arrow_up</mat-icon>\n                  </ng-container>\n              </button>\n          </mat-card-footer>\n      </mat-card>\n    ',styles:["\n\n    "],encapsulation:n.ViewEncapsulation.None,host:{"class":"adf-viewer-default-sidebar"}}]}],jo.ctorParameters=function(){return[]},jo.propDecorators={node:[{type:n.Input}]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Uo=function(){return function(){}}();Uo.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,V,u.TranslateModule,l.FlexLayoutModule,r.CardViewModule],exports:[ko,jo],declarations:[ko,jo]}]}],Uo.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Vo=function(){return function(){}}();Vo.decorators=[{type:n.NgModule,args:[{imports:[r.CoreModule,H,Q,e.CommonModule,X,i.FormsModule,i.ReactiveFormsModule,mo,o.BrowserAnimationsModule,uo,rt,V,go,_o,Co,To,Uo,Do,Ro],providers:[{provide:r.TRANSLATION_PROVIDER,multi:!0,useValue:{name:"adf-content-services",source:"assets/adf-content-services"}}],exports:[r.CoreModule,H,Q,X,uo,rt,mo,go,_o,Co,To,Uo,Do,Ro,V]}]}],Vo.ctorParameters=function(){return[]};/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Bo=function(){return function(){}}(),zo=function(){return function(){}}(),Yo=function(){return function(){}}(),Ho=function(){return function(){}}(),qo=function(){return function(){this.properties={}}}(),Go=function(){return function(){}}(),$o=function(){return function(){}}(),Wo=function(){return function(){}}(),Qo=function(){return function(){}}(),Zo=function(){return function(t,e,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0),this.isFolder=!0,this.isFile=!0,this.css=t,this.permission=e,this.isFile=n,this.isFolder=i}}();t.ContentModule=Vo,t.SocialModule=H,t.TagModule=Q,t.WebScriptModule=X,t.DocumentListModule=uo,t.UploadModule=rt,t.ALFRESCO_SEARCH_DIRECTIVES=yo,t.ALFRESCO_SEARCH_PROVIDERS=bo,t.SearchModule=mo,t.SitesDropdownModule=go,t.BreadcrumbModule=_o,t.VersionManagerModule=Co,t.ContentNodeSelectorModule=To,t.DialogModule=Do,t.FolderDirectiveModule=Ro,t.ContentMetadataModule=Uo,t.RatingComponent=Y,t.LikeComponent=z,t.RatingService=B,t.TagActionsComponent=G,t.TagListComponent=$,t.TagNodeListComponent=W,t.TagService=q,t.WebscriptComponent=Z,t.PaginationStrategy=yt,t.DocumentListComponent=bt,t.NodeEntityEvent=dt,t.NodeEntryEvent=ft,t.ContentColumnComponent=so,t.ContentColumnListComponent=ro,t.ContentActionComponent=oo,t.ContentActionListComponent=mt,t.EmptyFolderContentDirective=ao,t.NoPermissionContentDirective=co,t.ShareDataTableAdapter=ct,t.ShareDataRow=at,t.FolderActionsService=io,t.DocumentActionsService=no,t.DocumentListService=ht,t.NodeActionsService=eo,t.ContentActionModel=ut,t.DocumentActionModel=lt,t.FolderActionModel=pt,t.NodePaging=Bo,t.NodePagingList=zo,t.NodeMinimalEntry=Yo,t.Pagination=Ho,t.NodeMinimal=qo,t.UserInfo=Go,t.ContentInfo=$o,t.PathInfoEntity=Wo,t.PathElementEntity=Qo,t.PermissionModel=et,t.PermissionStyleModel=Zo,t.UploadButtonComponent=nt,t.FileUploadingDialogComponent=J,t.UploadDragAreaComponent=it,t.FileUploadingListComponent=K,t.FileUploadingListRowComponent=tt,t.FileDraggableDirective=ot,t.SearchComponent=ho,t.SearchControlComponent=fo,t.SEARCH_AUTOCOMPLETE_VALUE_ACCESSOR=lo,t.SearchTriggerDirective=po,t.DropdownSitesComponent=vo,t.BreadcrumbComponent=So,t.DropdownBreadcrumbComponent=wo,t.VersionListComponent=Eo,t.VersionManagerComponent=xo,t.VersionUploadComponent=Oo,t.ContentNodeSelectorComponent=to,t.ContentNodeSelectorService=vt,t.DownloadZipDialogComponent=Io,t.FolderDialogComponent=No,t.FolderCreateDirective=Fo,t.FolderEditDirective=Lo,t.ContentMetadataComponent=ko,t.ContentMetadataService=Mo,t.ɵbg=So,t.ɵbh=wo,t.ɵbq=jo,t.ɵbo=ko,t.ɵbp=Mo,t.ɵbl=to,t.ɵbm=vt,t.ɵbr=Io,t.ɵbs=No,t.ɵbc=mt,t.ɵy=oo,t.ɵx=ro,t.ɵw=so,t.ɵu=bt,t.ɵbd=ao,t.ɵbe=co,t.ɵz=no,t.ɵv=ht,t.ɵbb=io,t.ɵba=eo,t.ɵbt=Fo,t.ɵbu=Lo,t.ɵb=V,t.ɵa=v,t.ɵl=fo,t.ɵm=lo,t.ɵn=po,t.ɵk=ho,t.ɵbf=vo,t.ɵe=z,t.ɵc=Y,t.ɵd=B,t.ɵg=q,t.ɵf=G,t.ɵh=$,t.ɵi=W,t.ɵr=J,t.ɵt=tt,t.ɵs=K,t.ɵq=nt,t.ɵp=it,t.ɵo=ot,t.ɵbk=Eo,t.ɵbj=xo,t.ɵbi=Oo,t.ɵj=Z,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=adf-content-services.umd.min.js.map
